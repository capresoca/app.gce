webpackJsonp([296],{1299:function(e,a,t){"use strict";var r=t(13),s=t.n(r),i=t(14),n=t.n(i);a.a={name:"Descargas",props:{value:{type:Boolean,default:!1},tipo:{type:Number,default:0}},components:{InputDate:function(){return new Promise(function(e){e()}).then(t.bind(null,253))}},data:function(){return{loading:!1,motivo:null,titulos:["Prescripciones por fecha y régimen","Juntas médicas por fecha y régimen","Histórico de juntas médicas","Tutelas por fecha y régimen","Reportes de entrega por fecha y régimen"],regimenes:["Subsidiado","Contributivo"],descarga:{}}},watch:{value:function(e){e?(console.log("se veeee"),this.formReset(),this.$validator.reset()):this.$validator.reset()}},computed:{ruta:function(){switch(this.tipo){case 0:return"mipres/prescripcionesFecha?fecha="+this.descarga.fecha+"&regimen="+this.descarga.regimen;case 1:return"mipres/juntasFecha?fecha="+this.descarga.fecha+"&regimen="+this.descarga.regimen;case 2:return"mipres/historicoJuntas?desde="+this.descarga.fecha;case 3:return"mipres/tutelasFecha?fecha="+this.descarga.fecha+"&regimen="+this.descarga.regimen;case 4:return"mipres/reportesFecha?fecha="+this.descarga.fecha+"&regimen="+this.descarga.regimen}}},methods:{download:function(){var e=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$validator.validateAll();case 2:if(!a.sent){a.next=6;break}e.loading=!0,e.$store.commit("SNACK_SHOW",{msg:'La descarga MIPRES "'+e.titulos[e.tipo]+'" ha iniciado, se notificará en pantalla cuando el proceso termine.',color:"orange"}),e.axios.get(e.ruta).then(function(){e.loading=!1,e.$emit("success"),e.$store.commit("SNACK_SHOW",{msg:'La descarga MIPRES "'+e.titulos[e.tipo]+'" se ha realizado correctamente.',color:"success"})}).catch(function(a){e.loading=!1,e.$store.commit("SNACK_ERROR_LIST",{expression:" al realizar la descarga de registros.",error:a})});case 6:case"end":return a.stop()}},a,e)}))()},formReset:function(){this.descarga={fecha:null,regimen:"Subsidiado"}}}}},2471:function(e,a,t){var r=t(2472);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t(456)("60492a4b",r,!0,{})},2472:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Descargas.vue",sourceRoot:""}])},2473:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-dialog",{key:"dialogConfirm",attrs:{persistent:"","max-width":"400"},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}},[t("v-card",[t("v-card-text",{staticClass:"title font-weight-bold text-xs-center"},[e._v(e._s(e.titulos[e.tipo]))]),e._v(" "),t("v-divider"),e._v(" "),t("v-container",{attrs:{fluid:"","grid-list-xs":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[e.value?t("input-date",{directives:[{name:"validate",rawName:"v-validate",value:"required|fechaValida",expression:"'required|fechaValida'"}],key:"dateDownload",attrs:{label:2===e.tipo?"Fecha desde":"Fecha",hint:"Formato: (Año-Mes-Día)",name:2===e.tipo?"fecha desde":"fecha","error-messages":e.errors.collect(2===e.tipo?"fecha desde":"fecha")},model:{value:e.descarga.fecha,callback:function(a){e.$set(e.descarga,"fecha",a)},expression:"descarga.fecha"}}):e._e()],1),e._v(" "),2!==e.tipo?t("v-flex",{attrs:{xs12:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Régimen",items:e.regimenes,name:"regimen","error-messages":e.errors.collect("regimen")},model:{value:e.descarga.regimen,callback:function(a){e.$set(e.descarga,"regimen",a)},expression:"descarga.regimen"}})],1):e._e()],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{flat:""},on:{click:function(a){return a.stopPropagation(),e.$emit("input",!1)}}},[e._v("Cerrar")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:function(a){return a.stopPropagation(),e.download(a)}}},[e._v("Descargar")])],1)],1)],1)],1)},s=[],i={render:r,staticRenderFns:s};a.a=i},926:function(e,a,t){"use strict";function r(e){t(2471)}Object.defineProperty(a,"__esModule",{value:!0});var s=t(1299),i=t(2473),n=t(1),o=r,c=n(s.a,i.a,!1,o,"data-v-20779f72",null);a.default=c.exports}});
//# sourceMappingURL=296.6ea3e50f7a6c63d94bc0.js.map