webpackJsonp([272],{1163:function(e,o,t){"use strict";var s=t(13),r=t.n(s),a=t(14),i=t.n(a),n=t(59),d=t(40),c=t(248),l=t(12);o.a={name:"RegistroSubgruposEmpleados",props:["parametros"],data:function(){return{buscandoCodigo:!1,dialogCodigo:!1,ordenEdit:!1,loadingSubmit:!1,subgrupo:{cencosto:{}}}},computed:{complementosFormSubgruposEmpleados:function(){return n.b.getters.complementosFormComDiario}},methods:{findByCodigo:function(){var e=this;this.subgrupo.codigo&&(this.buscandoCodigo=!0,this.axios.get("th_subgrupos_empleados/codigo/"+this.subgrupo.codigo).then(function(o){o.data.exists&&(e.$store.commit(l.b,{msg:"El codigo del subgrupo de empleados existe",color:"success"}),e.formReset(),e.subgrupo=o.data.data,e.dialogCodigo=!0),e.buscandoCodigo=!1}).catch(function(o){e.buscandoCodigo=!1,e.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+o.response,color:"danger"})}))},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},submit:function(){var e=this;return i()(r.a.mark(function o(){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.validador("formRegistroSubgruposEmpleados");case 2:if(!o.sent){o.next=7;break}e.loadingSubmit=!0,e.subgrupo.id?e.axios.put("th_subgrupos_empleados/"+e.subgrupo.id,e.subgrupo).then(function(o){e.$store.commit(l.b,{msg:"El subgrupo de empleados se actualizo correctamente",color:"success"}),e.formReset(),e.$store.dispatch(d.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(c._19,{item:o.data.data,estado:"editar",key:e.parametros.key})}).catch(function(o){e.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+o.response,color:"danger"})}):e.axios.post("th_subgrupos_empleados",e.subgrupo).then(function(o){e.$store.commit(l.b,{msg:"El subgrupo de empleados se creó correctamente",color:"success"}),e.formReset(),e.$store.dispatch(d.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(c._19,{item:o.data.data,estado:"crear",key:e.parametros.key})}).catch(function(o){console.log(o),e.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+o.response,color:"danger"})}),o.next=8;break;case 7:e.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return o.stop()}},o,e)}))()},seleccionCenCosto:function(e){null!==e&&(this.subgrupo.cencosto=e,this.subgrupo.nf_cencosto_id=e.id)},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.ordenEdit=!1,this.dialogCodigo=!1},formReset:function(){this.subgrupo={cencosto:{}},this.buscandoCodigo=!1,this.dialogCodigo=!1,this.ordenEdit=!1},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(d.c,{contexto:this,itemId:this.parametros.tabOrigin})},getRegistro:function(e){var o=this;this.axios.get("th_subgrupos_empleados/"+e).then(function(e){e.data.exists&&o.edit(e.data.data)}).catch(function(e){o.$store.commit(l.a,{expression:" al traer el subgrupo. ",error:e})})},edit:function(e){this.ordenEdit=!0,this.subgrupo=e}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},2080:function(e,o,t){"use strict";var s=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[t("v-toolbar-title",[e._v(" "+e._s(e.ordenEdit?"Edicion de subgrupo de empleados":"Registro de subgrupo de empleados")+" ")])],1),e._v(" "),t("v-card-text",[t("v-form",{attrs:{"data-vv-scope":"formRegistroSubgruposEmpleados"}},[t("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[e._v("assignment_ind")]),e._v(" General")],1)],1),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:3",expression:"'required|max:3'"}],key:"codigo",attrs:{label:"Código",name:"Codigo","prepend-icon":"list","error-messages":e.errors.collect("Codigo"),disabled:e.ordenEdit,"persistent-hint":"",hint:e.buscandoCodigo?"Estamos buscando el codigo":"",required:""},on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.findByCodigo(o)},blur:e.findByCodigo},model:{value:e.subgrupo.codigo,callback:function(o){e.$set(e.subgrupo,"codigo",o)},expression:"subgrupo.codigo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","prepend-icon":"person","error-messages":e.errors.collect("Nombre"),required:""},model:{value:e.subgrupo.nombre,callback:function(o){e.$set(e.subgrupo,"nombre",o)},expression:"subgrupo.nombre"}})],1)],1)],1)],1)],1),e._v(" "),t("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[e._v("assignment_ind")]),e._v(" Centro de costo")],1)],1),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[t("v-autocomplete",{attrs:{label:"Centro de Costo","persistent-hint":"",items:e.complementosFormSubgruposEmpleados.cencostos,"item-value":"id","item-text":"codigo",name:"centro de costo",required:"","return-object":"",clearable:""},on:{change:function(o){return e.seleccionCenCosto(o)}},scopedSlots:e._u([{key:"item",fn:function(o){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:e._s(o.item.codigo)}}),e._v(" "),t("v-list-tile-sub-title",{domProps:{innerHTML:e._s(o.item.nombre)}})],1)]]}}]),model:{value:e.subgrupo.cencosto,callback:function(o){e.$set(e.subgrupo,"cencosto",o)},expression:"subgrupo.cencosto"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md8:"",lg8:""}},[t("v-text-field",{attrs:{label:"Centro de costo",value:e.subgrupo.cencosto.nombre,readonly:""}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),t("v-divider"),e._v(" "),"Confirmada"!==e.estado&&"Anulada"!==e.estado?t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[t("v-btn",{on:{click:function(o){return e.close()}}},[e._v("Cancelar")]),e._v(" "),t("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(o){return o.preventDefault(),e.submit(o)}}},[e._v("Guardar")])],1)],1)],1):e._e()],1),e._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogCodigo,callback:function(o){e.dialogCodigo=o},expression:"dialogCodigo"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v("Codigo del subgrupo de empleados")]),e._v(" "),t("v-card-text",[e._v("El codigo del subgrupo de empleados ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.editarByCodigo}},[e._v("Cargar datos")]),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.cerrarByCodigo}},[e._v("Cerrar")])],1)],1)],1)],1)},r=[],a={render:s,staticRenderFns:r};o.a=a},618:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=t(1163),r=t(2080),a=t(1),i=a(s.a,r.a,!1,null,null,null);o.default=i.exports}});
//# sourceMappingURL=272.d99fcba1c7883d512cb6.js.map