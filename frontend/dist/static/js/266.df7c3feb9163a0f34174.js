webpackJsonp([266],{1098:function(o,t,e){"use strict";var i=e(13),a=e.n(i),r=e(14),s=e.n(r),n=e(40),d=e(248),c=e(12);t.a={name:"RegistroTipoPoliza",props:["parametros"],data:function(){return{dialogSave:!1,dialogCodigo:!1,buscandoCodigo:!1,ordenEdit:!1,param:{},tipoPoliza:{}}},methods:{validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},tipoPolizaByCod:function(){var o=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.tipoPoliza.codigo&&(o.buscandoCodigo=!0,o.axios.get("ce_tipo_poliza/codigo/"+o.tipoPoliza.codigo).then(function(t){t.data.exists&&(o.tipoPoliza=t.data.tipoPoliza,o.dialogCodigo=!0),o.buscandoCodigo=!1}).catch(function(t){o.$store.commit(c.a,{expression:" Al intentar consultar codigo. ",error:t})}));case 1:case"end":return t.stop()}},t,o)}))()},submit:function(){var o=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.validador("formTipoPoliza");case 2:if(!t.sent){t.next=6;break}o.tipoPoliza.id?o.axios.put("ce_tipo_poliza/"+o.tipoPoliza.id,o.tipoPoliza).then(function(t){o.$store.commit(c.b,{msg:t.data.message,color:"success"}),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(d._22,{item:t.data.data,estado:"editar",key:o.parametros.key})}).catch(function(t){o.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}):o.axios.post("ce_tipo_poliza",o.tipoPoliza).then(function(t){o.$store.commit(c.b,{msg:"El tipoPoliza se creo correctamente",color:"success"}),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(d._22,{item:t.data.data,estado:"crear",key:o.parametros.key})}).catch(function(t){o.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}),t.next=7;break;case 6:o.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return t.stop()}},t,o)}))()},getRegistro:function(o){var t=this;this.axios.get("ce_tipo_poliza/"+o).then(function(o){o.data.exists&&t.edit(o.data.data)}).catch(function(o){t.$store.commit(c.a,{expression:" al traer el tipoPoliza. ",error:o})})},edit:function(o){this.ordenEdit=!0,this.tipoPoliza=o},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.dialogCodigo=!1,this.ordenEdit=!1},formReset:function(){this.dialogCodigo=!1,this.ordenEdit=!1,this.tipoPoliza={}}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},1904:function(o,t,e){"use strict";var i=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("v-card",[o.ordenEdit?e("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[o._v("\n      Editar Tipo de Poliza\n    ")]):e("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[o._v("\n      Registrar Tipo de Poliza\n    ")]),o._v(" "),e("v-card-text",[e("v-form",{attrs:{"data-vv-scope":"formTipoPoliza"}},[e("v-container",{attrs:{fluid:"","grid-list-xl":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:"",sm12:"",md2:"",lg2:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:16",expression:"'required|max:16'"}],key:"codigo",attrs:{label:"Codigo",name:"codigo","error-messages":o.errors.collect("codigo"),disabled:o.ordenEdit,hint:o.buscandoCodigo?"Estamos buscando el codigo":"","persistent-hint":"",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.tipoPolizaByCod(t)},blur:o.tipoPolizaByCod},model:{value:o.tipoPoliza.codigo,callback:function(t){o.$set(o.tipoPoliza,"codigo",t)},expression:"tipoPoliza.codigo"}})],1),o._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md10:"",lg10:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":o.errors.collect("nombre")},model:{value:o.tipoPoliza.nombre,callback:function(t){o.$set(o.tipoPoliza,"nombre",t)},expression:"tipoPoliza.nombre"}})],1)],1)],1)],1)],1),o._v(" "),e("v-divider"),o._v(" "),e("v-card-actions",[e("v-spacer"),o._v(" "),e("v-btn",{attrs:{color:"primary",flat:""},on:{click:o.submit}},[o._v("\n        Guardar\n      ")])],1)],1),o._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:o.dialogCodigo,callback:function(t){o.dialogCodigo=t},expression:"dialogCodigo"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[o._v("Codigo del Tipo de Poliza")]),o._v(" "),e("v-card-text",[o._v("El codigo del Tipo de Poliza ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),o._v(" "),e("v-card-actions",[e("v-spacer"),o._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.editarByCodigo}},[o._v("Cargar datos")]),o._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.cerrarByCodigo}},[o._v("Cerrar")])],1)],1)],1)],1)},a=[],r={render:i,staticRenderFns:a};t.a=r},574:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e(1098),a=e(1904),r=e(1),s=r(i.a,a.a,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=266.df7c3feb9163a0f34174.js.map