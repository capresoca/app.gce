webpackJsonp([369],{1114:function(t,e,a){"use strict";var o=a(13),n=a.n(o),i=a(14),r=a.n(i),l=a(7),s=a.n(l),c=a(58),u=a(12);e.a={name:"RegistroPlanesCobertura",props:["value"],components:{Loading:c.default,DataTable:function(){return new Promise(function(t){t()}).then(a.bind(null,60))},Confirmar:function(){return a.e(289).then(a.bind(null,749))}},data:function(){return{loading:!1,dialogA:{loading:!1,visible:!1,content:null,registro:null},dataTable:{simplePaginate:!0,nameItemState:"itemPlanCobertura",route:null,makeHeaders:[{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Régimen atendido",align:"left",sortable:!1,classData:"text-xs-left",component:{component:{template:"\n                    <v-list-tile>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.regimen_atendido === 1 ? 'Contributivo' : 'Subsidiado' }}</v-list-tile-title>\n                        <v-list-tile-title class=\"caption grey--text\">Portabilidad: {{value.portabilidad ? 'SI' : 'NO'}}</v-list-tile-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                  ",props:["value"]}}},{text:"Estado",align:"center",sortable:!0,value:"estado",classData:"text-xs-center"},{text:"Opciones",align:"center",sortable:!1,actions:!0,singlesActions:!0,classData:"text-xs-center"}]}}},watch:{itemPlanCobertura:function(t){this.value&&this.value.id&&this.$refs&&this.$refs.tablaPPlanesCobertura&&t&&t.item&&t.item.ce_proconminuta_id===this.value.id&&this.$refs.tablaPPlanesCobertura.reloadPage()},value:function(t){t&&this.$refs.tablaPPlanesCobertura&&this.$refs.tablaPPlanesCobertura.reloadPage()}},computed:{itemPlanCobertura:function(){return this.$store.state.tables.itemPlanCobertura},infoComponent:function(){return this.$store.getters.getInfoComponent("planesCobertura")}},created:function(){this.dataTable.route="contratos?ce_proconminuta_id="+this.value.id},methods:{eliminar:function(t){this.dialogA.registro=JSON.parse(s()(t)),this.dialogA.content="<strong>El contrato "+this.dialogA.registro.numero_contrato+" con la entidad "+this.dialogA.registro.entidad+" será eliminado.</strong><br/> ¿Está seguro de eliminar el contrato?",this.dialogA.visible=!0},cancelaConfirmacion:function(){this.dialogA.loading=!1,this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registro=null},aceptaConfirmacion:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogA.loading=!0,t.axios.delete("contratos/"+t.dialogA.registro.id).then(function(){t.cancelaConfirmacion(),t.$store.commit(u.b,{msg:"El plan de cobertura se ha eliminado correctamente.",color:"success"}),t.$refs.tablaPPlanesCobertura.reloadPage()}).catch(function(e){t.dialogA.loading=!1,t.$store.commit(u.a,{expression:" al realizar la eliminación del plan de cobertura. ",error:e})});case 2:case"end":return e.stop()}},e,t)}))()},resetOptions:function(t){return t.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&t.options.push({event:"editar",icon:"build",tooltip:"Gestionar",color:"primary"}),this.infoComponent&&this.infoComponent.permisos.anular&&"Registrado"===t.estado&&t.options.push({event:"eliminar",icon:"delete_forever",tooltip:"Eliminar",color:"error"}),t}}}},1948:function(t,e,a){"use strict";function o(t){a(1949)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1114),i=a(1951),r=a(1),l=o,s=r(n.a,i.a,!1,l,"data-v-35ae048c",null);e.default=s.exports},1949:function(t,e,a){var o=a(1950);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(456)("5a3aa124",o,!0,{})},1950:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroPlanesCobertura.vue",sourceRoot:""}])},1951:function(t,e,a){"use strict";var o=function(){var t=this,e=this,a=e.$createElement,o=e._self._c||a;return o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:"",id:"flag-top"}},[o("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[o("v-toolbar-title",[e._v("Planes de Cobertura")]),e._v(" "),o("small",{staticClass:"mt-2 ml-1"},[e._v(" Registro y gestión")]),e._v(" "),e.infoComponent&&e.infoComponent.permisos.agregar?[o("v-spacer"),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",right:"",small:"",color:"accent"},on:{click:function(t){e.$store.commit("NAV_ADD_ITEM",{ruta:e.infoComponent.ruta_registro,titulo:e.infoComponent.titulo_registro,parametros:{entidad:null,contrato:e.value,tabOrigin:e.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[o("v-icon",[e._v("add")])],1),e._v(" "),o("span",[e._v("Crear plan de cobertura")])],1)]:e._e()],2),e._v(" "),e.dataTable.route?o("data-table",{ref:"tablaPPlanesCobertura",attrs:{filters:!1},on:{resetOption:function(t){return e.resetOptions(t)},eliminar:function(t){return e.eliminar(t)},editar:function(a){return e.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:a,contrato:e.value,tabOrigin:e.$store.state.nav.currentItem.split("tab-")[1]}})}},model:{value:e.dataTable,callback:function(t){e.dataTable=t},expression:"dataTable"}}):e._e(),e._v(" "),o("confirmar",{attrs:{loading:e.dialogA.loading,value:e.dialogA.visible,content:e.dialogA.content,"requiere-motivo":!1},on:{cancelar:e.cancelaConfirmacion,aceptar:e.aceptaConfirmacion}})],1)],1)],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i}});
//# sourceMappingURL=369.da191f60cd4e2cb1fe04.js.map