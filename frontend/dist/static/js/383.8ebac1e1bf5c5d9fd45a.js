webpackJsonp([383],{1265:function(t,a,i){"use strict";var o=i(13),e=i.n(o),n=i(14),s=i.n(n),r=i(249),c=i.n(r),d=i(7),l=i.n(d),u=i(12),v=i(58);a.a={name:"Diagnósticos",components:{PostuladorV2:function(){return new Promise(function(t){t()}).then(i.bind(null,61))},Loading:v.default},props:{data:{type:Object,default:null},concurrencia:{type:Object,default:{}}},data:function(){return{diagnostico:{},dialog:!1,loading:!1,loadingSubmit:!1,headers:[{text:"id",align:"left",sortable:!1,value:"id"},{text:"Diagnóstico",align:"left",sortable:!1,value:"diagnostico"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.resetDialog()},methods:{resetDialog:function(){this.diagnostico={id:"",cm_convisita_id:null,dx_relacionado:null,observaciones:null}},edit:function(t){this.openDialog(),this.diagnostico=JSON.parse(l()(t))},openDialog:function(){this.dialog=!0,this.diagnostico.cm_convisita_id=this.data.id},close:function(){this.dialog=!1,this.resetDialog()},formDate:function(t){if(!t)return null;var a=t.split("-"),i=c()(a,3);return i[0]+"/"+i[1]+"/"+i[2]},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},guardar:function(){var t=this;return s()(e.a.mark(function a(){var i;return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.validador("form");case 2:if(!a.sent){a.next=8;break}t.loadingSubmit=!0,i=t.diagnostico.id?t.axios.put("cuentasmedicas/concurrencia/diagnosticos/"+t.diagnostico.id,t.diagnostico):t.axios.post("cuentasmedicas/concurrencia/diagnosticos",t.diagnostico),i.then(function(a){t.diagnostico.id?(t.loadingSubmit=!1,t.$store.commit(u.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),t.data.concie10s.splice(t.data.concie10s.findIndex(function(t){return t.id===a.data.data.id}),1,a.data.data)):(t.loadingSubmit=!1,t.$store.commit(u.b,{msg:"Item creado satisfactoriamente",color:"success"}),t.data.concie10s.unshift(a.data.data)),t.close()}).catch(function(a){t.loadingSubmit=!1,t.$store.commit(u.a,{expression:" al guardar el registro. ",error:a})}),a.next=9;break;case 8:t.$store.commit(u.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return a.stop()}},a,t)}))()}}}},2355:function(t,a,i){"use strict";function o(t){i(2356)}Object.defineProperty(a,"__esModule",{value:!0});var e=i(1265),n=i(2358),s=i(1),r=o,c=s(e.a,n.a,!1,r,"data-v-726cac7d",null);a.default=c.exports},2356:function(t,a,i){var o=i(2357);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(456)("1d745614",o,!0,{})},2357:function(t,a,i){a=t.exports=i(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Diagnosticos.vue",sourceRoot:""}])},2358:function(t,a,i){"use strict";var o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("v-dialog",{attrs:{width:"720px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[i("v-form",{attrs:{"data-vv-scope":"form"}},[i("v-card",[i("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[i("span",{staticClass:"title"},[t._v("Diagnóstico")])]),t._v(" "),i("v-container",{attrs:{fluid:"","grid-list-md":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por código, descripcion y genero",hint:"codigo","item-text":"descripcion","data-title":"codigo","data-subtitle":"descripcion",label:"Diagnóstico Principal",entidad:"rs_cie10s",preicon:"reorder",name:"diagnóstico",rules:"required","error-messages":t.errors.collect("diagnóstico"),"no-btn-create":"","min-characters-search":3,clearable:""},on:{changeid:function(a){return t.diagnostico.dx_relacionado=a}},model:{value:t.diagnostico.diagnostico_relacionado,callback:function(a){t.$set(t.diagnostico,"diagnostico_relacionado",a)},expression:"diagnostico.diagnostico_relacionado"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{attrs:{outline:"",name:"observaciones",label:"Observaciones"},model:{value:t.diagnostico.observaciones,callback:function(a){t.$set(t.diagnostico,"observaciones",a)},expression:"diagnostico.observaciones"}})],1)],1)],1),t._v(" "),i("v-card-actions",{staticClass:"grey lighten-4"},[i("v-spacer"),t._v(" "),i("v-btn",{on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),i("v-btn",{attrs:{color:"primary",loading:t.loadingSubmit},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),i("v-card",[i("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[i("v-toolbar-title",[t._v("Diagnósticos")]),t._v(" "),i("small",{staticClass:"mt-2 ml-1"},[t._v(" Registro y gestión")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",fab:"",color:"accent",small:"",disabled:"Cerrada"===t.concurrencia.estado},on:{click:function(a){return t.openDialog()}},slot:"activator"},[i("v-icon",[t._v("add")])],1),t._v(" "),i("span",[t._v(t._s("Abierta"===t.concurrencia.estado?"Crear registro":"Concurrencia cerrada"))])],1)],1),t._v(" "),i("loading",{model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}}),t._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.data.concie10s,loading:t.loading,"rows-per-page-text":"Registros por página"},scopedSlots:t._u([{key:"items",fn:function(a){return[i("td",[t._v(t._s(a.item.id))]),t._v(" "),i("td",[t._v(t._s(a.item.diagnostico_relacionado.descripcion))]),t._v(" "),i("td",[i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",icon:"",disabled:"Cerrada"===t.concurrencia.estado},on:{click:function(i){return t.edit(a.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"accent"}},[t._v("edit")])],1),t._v(" "),i("span",[t._v(t._s("Abierta"===t.concurrencia.estado?"Editar":"Concurrencia cerrada"))])],1)],1)]}}])},[t._v(" "),i("template",{slot:"no-data"},[t.loading?i("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n          Estamos cargando los registros. "),i("v-icon",[t._v("sentiment_satisfied_alt")])],1):i("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n          Lo sentimos, no tenemos registros para mostrar. "),i("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},e=[],n={render:o,staticRenderFns:e};a.a=n}});
//# sourceMappingURL=383.8ebac1e1bf5c5d9fd45a.js.map