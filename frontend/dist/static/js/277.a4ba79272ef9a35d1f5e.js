webpackJsonp([277],{1161:function(o,e,a){"use strict";var r=a(13),t=a.n(r),i=a(14),s=a.n(i),n=a(40),l=a(248),d=a(12);e.a={name:"RegistroGruposEmpleados",props:["parametros"],data:function(){return{buscandoCodigo:!1,dialogCodigo:!1,ordenEdit:!1,pickerUltimaNomina:"",pickerProximaNomina:"",loadingSubmit:!1,grupo:{}}},methods:{findByCodigo:function(){var o=this;this.grupo.codigo&&(this.buscandoCodigo=!0,this.axios.get("th_grupos_empleados/codigo/"+this.grupo.codigo).then(function(e){e.data.exists&&(o.$store.commit(d.b,{msg:"El codigo del grupo de empleados existe",color:"success"}),o.formReset(),o.grupo=e.data.data,o.dialogCodigo=!0),o.buscandoCodigo=!1}).catch(function(e){o.buscandoCodigo=!1,o.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}))},validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},submit:function(){var o=this;return s()(t.a.mark(function e(){return t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validador("formRegistroGruposEmpleados");case 2:if(!e.sent){e.next=7;break}o.loadingSubmit=!0,o.grupo.id?o.axios.put("th_grupos_empleados/"+o.grupo.id,o.grupo).then(function(e){o.$store.commit(d.b,{msg:"El grupo de empleados se actualizo correctamente",color:"success"}),o.formReset(),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(l.O,{item:e.data.data,estado:"editar",key:o.parametros.key})}).catch(function(e){o.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}):o.axios.post("th_grupos_empleados",o.grupo).then(function(e){o.$store.commit(d.b,{msg:"El grupo de empleados se creó correctamente",color:"success"}),o.formReset(),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(l.O,{item:e.data.data,estado:"crear",key:o.parametros.key})}).catch(function(e){console.log(e),o.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:o.$store.commit(d.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return e.stop()}},e,o)}))()},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.ordenEdit=!1,this.dialogCodigo=!1},formReset:function(){this.grupo={},this.buscandoCodigo=!1,this.dialogCodigo=!1,this.ordenEdit=!1},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(n.c,{contexto:this,itemId:this.parametros.tabOrigin})},getRegistro:function(o){var e=this;this.axios.get("th_grupos_empleados/"+o).then(function(o){o.data.exists&&e.edit(o.data.data)}).catch(function(o){e.$store.commit(d.a,{expression:" al traer el grupo. ",error:o})})},edit:function(o){this.ordenEdit=!0,this.grupo=o}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},2078:function(o,e,a){"use strict";var r=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:o.dialogCodigo,callback:function(e){o.dialogCodigo=e},expression:"dialogCodigo"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[o._v("Codigo del grupo de empleados")]),o._v(" "),a("v-card-text",[o._v("El codigo del grupo de empleados ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),o._v(" "),a("v-card-actions",[a("v-spacer"),o._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.editarByCodigo}},[o._v("Cargar datos")]),o._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.cerrarByCodigo}},[o._v("Cerrar")])],1)],1)],1),o._v(" "),a("v-card",[a("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[a("v-toolbar-title",[o._v(" "+o._s(o.ordenEdit?"Edicion de grupo de empleados":"Registro de grupo de empleados")+" ")])],1),o._v(" "),a("v-card-text",[a("v-form",{attrs:{"data-vv-scope":"formRegistroGruposEmpleados"}},[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[a("v-card",[a("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[a("v-toolbar-title",{staticClass:"subheading"},[a("v-icon",[o._v("assignment_ind")]),o._v(" General")],1)],1),o._v(" "),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:3",expression:"'required|max:3'"}],key:"codigo",attrs:{label:"Código",name:"Codigo","prepend-icon":"list","error-messages":o.errors.collect("Codigo"),disabled:o.ordenEdit,"persistent-hint":"",hint:o.buscandoCodigo?"Estamos buscando el codigo":"",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.findByCodigo(e)},blur:o.findByCodigo},model:{value:o.grupo.codigo,callback:function(e){o.$set(o.grupo,"codigo",e)},expression:"grupo.codigo"}})],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm8:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","prepend-icon":"person","error-messages":o.errors.collect("Nombre"),required:""},model:{value:o.grupo.nombre,callback:function(e){o.$set(o.grupo,"nombre",e)},expression:"grupo.nombre"}})],1)],1)],1)],1)],1),o._v(" "),a("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[a("v-card",[a("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[a("v-toolbar-title",{staticClass:"subheading"},[a("v-icon",[o._v("assignment_ind")]),o._v(" Detalle")],1)],1),o._v(" "),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-select",{attrs:{items:["Mensual","Quincenal","Semanal"],label:"Liquidar nomina"},model:{value:o.grupo.liquidar_nomina,callback:function(e){o.$set(o.grupo,"liquidar_nomina",e)},expression:"grupo.liquidar_nomina"}})],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-dialog",{ref:"pickerUltimaNomina",attrs:{"return-value":o.grupo.ultima_nomina,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(e){return o.$set(o.grupo,"ultima_nomina",e)},"update:return-value":function(e){return o.$set(o.grupo,"ultima_nomina",e)}},model:{value:o.pickerUltimaNomina,callback:function(e){o.pickerUltimaNomina=e},expression:"pickerUltimaNomina"}},[a("v-text-field",{key:"ultimaNomina",attrs:{slot:"activator",label:"Ultima nomina","prepend-icon":"event",disabled:o.ordenEdit,readonly:""},slot:"activator",model:{value:o.grupo.ultima_nomina,callback:function(e){o.$set(o.grupo,"ultima_nomina",e)},expression:"grupo.ultima_nomina"}}),o._v(" "),a("v-date-picker",{attrs:{scrollable:""},model:{value:o.grupo.ultima_nomina,callback:function(e){o.$set(o.grupo,"ultima_nomina",e)},expression:"grupo.ultima_nomina"}},[a("v-spacer"),o._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){o.pickerUltimaNomina=!1}}},[o._v("Cancelar")]),o._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return o.$refs.pickerUltimaNomina.save(o.grupo.ultima_nomina)}}},[o._v("OK")])],1)],1)],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-dialog",{ref:"pickerProximaNomina",attrs:{"return-value":o.grupo.proxima_nomina,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(e){return o.$set(o.grupo,"proxima_nomina",e)},"update:return-value":function(e){return o.$set(o.grupo,"proxima_nomina",e)}},model:{value:o.pickerProximaNomina,callback:function(e){o.pickerProximaNomina=e},expression:"pickerProximaNomina"}},[a("v-text-field",{key:"ultimaNomina",attrs:{slot:"activator",label:"Proxima nomina","prepend-icon":"event",disabled:o.ordenEdit,readonly:""},slot:"activator",model:{value:o.grupo.proxima_nomina,callback:function(e){o.$set(o.grupo,"proxima_nomina",e)},expression:"grupo.proxima_nomina"}}),o._v(" "),a("v-date-picker",{attrs:{scrollable:""},model:{value:o.grupo.proxima_nomina,callback:function(e){o.$set(o.grupo,"proxima_nomina",e)},expression:"grupo.proxima_nomina"}},[a("v-spacer"),o._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){o.pickerProximaNomina=!1}}},[o._v("Cancelar")]),o._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return o.$refs.pickerProximaNomina.save(o.grupo.proxima_nomina)}}},[o._v("OK")])],1)],1)],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"Periodo",name:"Nombre","prepend-icon":"calendar_today",required:""},model:{value:o.grupo.periodo,callback:function(e){o.$set(o.grupo,"periodo",e)},expression:"grupo.periodo"}})],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[o._v("\n                      Grupo de retirados\n                      "),a("v-radio-group",{attrs:{row:""},model:{value:o.grupo.retirados,callback:function(e){o.$set(o.grupo,"retirados",e)},expression:"grupo.retirados"}},[a("v-radio",{key:"retiradosSi",attrs:{label:"Si",value:"Si"}}),o._v(" "),a("v-radio",{key:"retiradosNo",attrs:{label:"No",value:"No"}})],1)],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[o._v("\n                      Evaluar meses de\n                      "),a("v-radio-group",{attrs:{row:""},model:{value:o.grupo.evaluar_meses,callback:function(e){o.$set(o.grupo,"evaluar_meses",e)},expression:"grupo.evaluar_meses"}},[a("v-radio",{key:"evaluarMesesDias",attrs:{label:"30 Días",value:"30 Días"}}),o._v(" "),a("v-radio",{key:"evaluarMesesCalendario",attrs:{label:"Días Calendario",value:"Días Calendario"}})],1)],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[o._v("\n                      Maneja provisiones\n                      "),a("v-radio-group",{attrs:{row:""},model:{value:o.grupo.maneja_provisiones,callback:function(e){o.$set(o.grupo,"maneja_provisiones",e)},expression:"grupo.maneja_provisiones"}},[a("v-radio",{key:"manejaProvisionesSi",attrs:{label:"Si",value:"Si"}}),o._v(" "),a("v-radio",{key:"manejaProvisionesNo",attrs:{label:"No",value:"No"}})],1)],1),o._v(" "),a("v-flex",{attrs:{xs12:"",sm3:""}},[o._v("\n                      Bloqueo de grupo\n                      "),a("v-radio-group",{attrs:{row:""},model:{value:o.grupo.bloqueo_grupos,callback:function(e){o.$set(o.grupo,"bloqueo_grupos",e)},expression:"grupo.bloqueo_grupos"}},[a("v-radio",{key:"bloqueoGrupoSi",attrs:{label:"Si",value:"Si"}}),o._v(" "),a("v-radio",{key:"bloqueoGrupoNo",attrs:{label:"No",value:"No"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),o._v(" "),a("v-divider"),o._v(" "),"Confirmada"!==o.estado&&"Anulada"!==o.estado?a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{on:{click:function(e){return o.close()}}},[o._v("Cancelar")]),o._v(" "),a("v-btn",{attrs:{color:"primary",loading:o.loadingSubmit},on:{click:function(e){return e.preventDefault(),o.submit(e)}}},[o._v("Guardar")])],1)],1)],1):o._e()],1)],1)},t=[],i={render:r,staticRenderFns:t};e.a=i},616:function(o,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(1161),t=a(2078),i=a(1),s=i(r.a,t.a,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=277.a4ba79272ef9a35d1f5e.js.map