webpackJsonp([264],{1156:function(e,a,t){"use strict";var o=t(13),r=t.n(o),i=t(14),n=t.n(i),s=t(40),c=t(248),d=t(12);a.a={name:"RegistroAlmacenInventario",props:["parametros"],data:function(){return{buscandoCodigo:!1,dialogCodigo:!1,ordenEdit:!1,almacen:{}}},methods:{findByCodigo:function(){var e=this;this.almacen.codigo&&(this.buscandoCodigo=!0,this.axios.get("in_almacen/codigo/"+this.almacen.codigo).then(function(a){a.data.exists&&(e.$store.commit(d.b,{msg:"El codigo del almacen existe",color:"success"}),e.formReset(),e.almacen=a.data.data,e.dialogCodigo=!0),e.buscandoCodigo=!1}).catch(function(a){e.buscandoCodigo=!1,e.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}))},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},submit:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.validador("formRegistroAlmacenInvetarios");case 2:if(!a.sent){a.next=6;break}e.almacen.id?e.axios.put("in_almacen/"+e.almacen.id,e.almacen).then(function(a){e.$store.commit(d.b,{msg:"El almacen se actualizo correctamente",color:"success"}),e.formReset(),e.$store.dispatch(s.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(c.d,{item:a.data.data,estado:"editar",key:e.parametros.key})}).catch(function(a){e.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}):e.axios.post("in_almacen",e.almacen).then(function(a){e.$store.commit(d.b,{msg:"El almacen se cre√≥ correctamente",color:"success"}),e.formReset(),e.$store.dispatch(s.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(c.d,{item:a.data.data,estado:"crear",key:e.parametros.key})}).catch(function(a){console.log(a),e.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}),a.next=7;break;case 6:e.$store.commit(d.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return a.stop()}},a,e)}))()},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.ordenEdit=!1,this.dialogCodigo=!1},formReset:function(){this.almacen={},this.buscandoCodigo=!1,this.dialogCodigo=!1,this.ordenEdit=!1},getRegistro:function(e){var a=this;this.axios.get("in_almacen/"+e).then(function(e){e.data.exists&&a.edit(e.data.data)}).catch(function(e){a.$store.commit(d.a,{expression:" al traer el almacen. ",error:e})})},edit:function(e){this.ordenEdit=!0,this.almacen=e}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},2071:function(e,a,t){"use strict";var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n    "+e._s(e.ordenEdit?"Edicion de almacen de invetarios":"Registro de almacen de invetarios")+"\n    ")]),e._v(" "),t("v-card-text",[t("v-form",{attrs:{"data-vv-scope":"formRegistroAlmacenInvetarios"}},[t("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",lg2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"codigo",attrs:{label:"Codigo",name:"Codigo","error-messages":e.errors.collect("Codigo"),disabled:e.ordenEdit,"persistent-hint":"",hint:e.buscandoCodigo?"Estamos buscando el codigo":"",required:""},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.findByCodigo(a)},blur:e.findByCodigo},model:{value:e.almacen.codigo,callback:function(a){e.$set(e.almacen,"codigo",a)},expression:"almacen.codigo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","error-messages":e.errors.collect("Nombre"),required:""},model:{value:e.almacen.nombre,callback:function(a){e.$set(e.almacen,"nombre",a)},expression:"almacen.nombre"}})],1)],1),e._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("v-btn",{attrs:{color:"success"},on:{click:e.submit}},[e._v("\n              Guardar\n              ")])],1)],1)],1)],1)],1)],1),e._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogCodigo,callback:function(a){e.dialogCodigo=a},expression:"dialogCodigo"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v("Codigo del almacen")]),e._v(" "),t("v-card-text",[e._v("El codigo del almacen ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.editarByCodigo}},[e._v("Cargar datos")]),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.cerrarByCodigo}},[e._v("Cerrar")])],1)],1)],1)],1)},r=[],i={render:o,staticRenderFns:r};a.a=i},611:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=t(1156),r=t(2071),i=t(1),n=i(o.a,r.a,!1,null,null,null);a.default=n.exports}});
//# sourceMappingURL=264.9cb13c6b53bf1157460b.js.map