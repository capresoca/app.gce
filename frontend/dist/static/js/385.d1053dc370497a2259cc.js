webpackJsonp([385],{1268:function(e,t,a){"use strict";var o=a(13),i=a.n(o),s=a(14),n=a.n(s),r=a(7),l=a.n(r),c=a(12),d=a(58);t.a={name:"GestionDeRiesgo",components:{Loading:d.default},props:{concurrenciaId:{type:Number,default:0},concurrenciaObj:{type:Object,defatul:{}}},data:function(){return{riesgo:{},riesgos:[],dialog:!1,loading:!1,loadingSubmit:!1,tiposEventosCentinela:["BAJO PESO AL NACER","HOSPITALIZACIÓN DE NIÑOS DE 3-5 AÑOS POR EDA","HOSPITALIZACIÓN DE 3-5 AÑOS POR IRA","MALTRATO INFANTIL","MORTINATO","MUERTE MATERNA","MUERTE PERITONAL","MUERTE POR DENGUE","MUERTE POR MALARIA","QUEMADURA EN MENOR 5 AÑOS","TRASMISIÓN VERTICAL (VIH-SÍFILIS)"],tiposRutasAtencion:["PROMOCIÓN Y MANTENIMIENTO DE LA SALUD","SPA Y SALUD MENTAL","MATERNO PERITONAL","CÁNCER","CEREBRO VASCULAR"],patologias:[],patologiasTrazadoras:[],eventosSaludPublica:[],eventoCentinela:!1,eventoSaludPublica:!1,patologiaTrazadora:!1,patologia:!1,rutaAtencion:!1,headers:[{text:"id",align:"left",sortable:!1,value:"id"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.resetDialog()},mounted:function(){this.getRegistro(),this.getPatologias(),this.getEventosSaludPublica(),this.getPatologiasTrazadoras()},methods:{getRegistro:function(){var e=this,t=this.$loading.show({container:this.$refs.loader.$el});this.axios.get("cuentasmedicas/concurrencia/gestionriesgos/"+this.concurrenciaId).then(function(a){""!==a.data&&(e.riesgos=a.data.data),t.hide()}).catch(function(a){t.hide(),e.$store.commit(c.b,{msg:"Hay un error al traer el ingreso. "+a,color:"danger"})})},getPatologias:function(){var e=this;this.axios.get("cuentasmedicas/complicacionpatologia").then(function(t){""!==t.data&&(e.patologias=t.data.data)}).catch(function(t){e.$store.commit(c.a,{expression:" al traer los registros. ",error:t})})},getEventosSaludPublica:function(){var e=this;this.axios.get("cuentasmedicas/eventossaludpublica").then(function(t){""!==t.data&&(e.eventosSaludPublica=t.data.data)}).catch(function(t){e.$store.commit(c.a,{expression:" al traer los registros. ",error:t})})},getPatologiasTrazadoras:function(){var e=this;this.axios.get("cuentasmedicas/patologiastrazadoras").then(function(t){""!==t.data&&(e.patologiasTrazadoras=t.data.data)}).catch(function(t){e.$store.commit(c.a,{expression:" al traer los registros. ",error:t})})},verificarCheckbox:function(){console.log("eventoCentinela",this.riesgo.evento),null!==this.riesgo.evento_centinela?this.eventoCentinela=!0:this.eventoCentinela=!1,null!==this.riesgo.evento_salud_publica?this.eventoSaludPublica=!0:this.eventoSaludPublica=!1,null!==this.riesgo.patologia_trazadora?this.patologiaTrazadora=!0:this.patologiaTrazadora=!1,null!==this.riesgo.complicacion_patologia?this.patologia=!0:this.patologia=!1,null!==this.riesgo.ruta_atencion?this.rutaAtencion=!0:this.rutaAtencion=!1},resetDialog:function(){this.riesgo={id:"",cm_concurrencia_id:null,eventos_centinela:null,cm_eventosaludpublica_id:null,cm_patologiatrazadora_id:null,cm_comppatologia_id:null,ruta_atencion:null,observaciones:null}},edit:function(e){this.openDialog(),this.riesgo=JSON.parse(l()(e)),this.verificarCheckbox()},openDialog:function(){this.dialog=!0,this.riesgo.cm_concurrencia_id=this.concurrenciaId},close:function(){this.dialog=!1,this.resetDialog()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},guardar:function(){var e=this;return n()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("form");case 2:if(!t.sent){t.next=8;break}e.loadingSubmit=!0,a=e.riesgo.id?e.axios.put("cuentasmedicas/concurrencia/gestionriesgos/"+e.riesgo.id,e.riesgo):e.axios.post("cuentasmedicas/concurrencia/gestionriesgos",e.riesgo),a.then(function(t){e.riesgo.id?(e.loadingSubmit=!1,e.$store.commit(c.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.riesgos.splice(e.riesgos.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.loadingSubmit=!1,e.$store.commit(c.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.riesgos.unshift(t.data.data)),e.close()}).catch(function(t){e.loadingSubmit=!1,e.$store.commit(c.a,{expression:" al guardar el registro. ",error:t})}),t.next=9;break;case 8:e.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return t.stop()}},t,e)}))()}}}},2369:function(e,t,a){"use strict";function o(e){a(2370)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1268),s=a(2372),n=a(1),r=o,l=n(i.a,s.a,!1,r,"data-v-79347e8d",null);t.default=l.exports},2370:function(e,t,a){var o=a(2371);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(456)("e5d95372",o,!0,{})},2371:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"GestionDeRiesgo.vue",sourceRoot:""}])},2372:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"loader"},[a("v-dialog",{attrs:{width:"1024px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"form"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[e._v("Gestión de riesgo")])]),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"Evento centinela"},model:{value:e.eventoCentinela,callback:function(t){e.eventoCentinela=t},expression:"eventoCentinela"}}),e._v(" "),a("v-expand-transition",[e.eventoCentinela?a("v-autocomplete",{attrs:{items:e.tiposEventosCentinela,label:"Seleccionar...","no-data-text":"No hay datos disponibles",name:"servicio","error-messages":e.errors.collect("servicio"),"prepend-icon":"contacts"},model:{value:e.riesgo.evento_centinela,callback:function(t){e.$set(e.riesgo,"evento_centinela",t)},expression:"riesgo.evento_centinela"}}):e._e()],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-checkbox",{attrs:{label:"Evento salud pública"},model:{value:e.eventoSaludPublica,callback:function(t){e.eventoSaludPublica=t},expression:"eventoSaludPublica"}}),e._v(" "),a("v-expand-transition",[e.eventoSaludPublica?a("v-autocomplete",{attrs:{items:e.eventosSaludPublica,"item-text":"nombre","item-value":"id",label:"Seleccionar...","no-data-text":"No hay datos disponibles",name:"salud publica","error-messages":e.errors.collect("salud publica"),"prepend-icon":"contacts"},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}],null,!1,3181165253),model:{value:e.riesgo.cm_eventosaludpublica_id,callback:function(t){e.$set(e.riesgo,"cm_eventosaludpublica_id",t)},expression:"riesgo.cm_eventosaludpublica_id"}}):e._e()],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-checkbox",{attrs:{label:"Patología trazadora"},model:{value:e.patologiaTrazadora,callback:function(t){e.patologiaTrazadora=t},expression:"patologiaTrazadora"}}),e._v(" "),a("v-expand-transition",[e.patologiaTrazadora?a("v-autocomplete",{attrs:{items:e.patologiasTrazadoras,"item-text":"nombre","item-value":"id",label:"Seleccionar...","no-data-text":"No hay datos disponibles",name:"patologia trazadora","error-messages":e.errors.collect("patologia trazadora"),"prepend-icon":"contacts"},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}],null,!1,3181165253),model:{value:e.riesgo.cm_patologiatrazadora_id,callback:function(t){e.$set(e.riesgo,"cm_patologiatrazadora_id",t)},expression:"riesgo.cm_patologiatrazadora_id"}}):e._e()],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-checkbox",{attrs:{label:"Patología"},model:{value:e.patologia,callback:function(t){e.patologia=t},expression:"patologia"}}),e._v(" "),a("v-expand-transition",[e.patologia?a("v-autocomplete",{attrs:{items:e.patologias,"item-text":"nombre","item-value":"id",label:"Seleccionar...","no-data-text":"No hay datos disponibles",name:"patologia","error-messages":e.errors.collect("patologia"),"prepend-icon":"contacts"},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}],null,!1,3181165253),model:{value:e.riesgo.cm_comppatologia_id,callback:function(t){e.$set(e.riesgo,"cm_comppatologia_id",t)},expression:"riesgo.cm_comppatologia_id"}}):e._e()],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-checkbox",{attrs:{label:"Ruta atención"},model:{value:e.rutaAtencion,callback:function(t){e.rutaAtencion=t},expression:"rutaAtencion"}}),e._v(" "),a("v-expand-transition",[e.rutaAtencion?a("v-select",{attrs:{items:e.tiposRutasAtencion,label:"Seleccionar...",name:"ruta atencion","prepend-icon":"assignment","error-messages":e.errors.collect("ruta atencion")},model:{value:e.riesgo.ruta_atencion,callback:function(t){e.$set(e.riesgo,"ruta_atencion",t)},expression:"riesgo.ruta_atencion"}}):e._e()],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",name:"observaciones",label:"Observaciones"},model:{value:e.riesgo.observaciones,callback:function(t){e.$set(e.riesgo,"observaciones",t)},expression:"riesgo.observaciones"}})],1)],1)],1),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:e.guardar}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",[e._v("Gestión de riesgo")]),e._v(" "),a("small",{staticClass:"mt-2 ml-1"},[e._v(" Registro y gestión")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",color:"accent",small:"",disabled:"Cerrada"===e.concurrenciaObj.estado},on:{click:function(t){return e.openDialog()}},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v("Crear registro")])],1)],1),e._v(" "),a("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.riesgos,loading:e.loading,"rows-per-page-text":"Registros por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",{domProps:{innerHTML:e._s(t.item.descripcion)}}),e._v(" "),a("td",[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",disabled:"Cerrada"===e.concurrenciaObj.estado},on:{click:function(a){return e.edit(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("edit")])],1),e._v(" "),a("span",[e._v("Ver detalle")])],1)],1)]}}])},[e._v(" "),a("template",{slot:"no-data"},[e.loading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},i=[],s={render:o,staticRenderFns:i};t.a=s}});
//# sourceMappingURL=385.d1053dc370497a2259cc.js.map