webpackJsonp([379],{1262:function(e,t,a){"use strict";var i=a(13),o=a.n(i),r=a(14),s=a.n(r),n=a(249),c=a.n(n),l=a(7),d=a.n(l),u=a(12),v=a(58);t.a={name:"Procedimientos",components:{PostuladorV2:function(){return new Promise(function(e){e()}).then(a.bind(null,61))},Loading:v.default},props:{data:{type:Object,default:null},concurrencia:{type:Object,default:{}}},data:function(){return{procedimiento:{},tiposServicio:["ESTANCIA","PROCEDIMIENTO"],tiposCausa:["ACCESIBILIDAD","CONTINUIDAD","OPORTUNIDAD","PERTINENCIA","SEGURIDAD"],tiposCausaEspecifica:["ACEPTACIÓN SERVICIO DOMICILIARIO","ESTANCIA PROLONGADA","INOPORTUNIDAD EN PRESTACIÓN DEL SERVICIO","SERVICIO NO PERTINENTE"],glosas:[],dialog:!1,loading:!1,loadingSubmit:!1,menuDateDesde:!1,menuDateHasta:!1,headers:[{text:"id",align:"left",sortable:!1,value:"id"},{text:"Código CUP",align:"left",sortable:!1,value:"cup"},{text:"Cantidad",align:"left",sortable:!1,value:"cantidad"},{text:"Tipo servicio",align:"left",sortable:!1,value:"tipoServicio"},{text:"Desde",align:"left",sortable:!1,value:"fecha_desde"},{text:"Hasta",align:"left",sortable:!1,value:"fecha_hasta"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.resetDialog()},mounted:function(){this.getGlosas()},computed:{computedDateFormattedDesde:function(){return this.formDate(this.procedimiento.fecha_desde)},computedDateFormattedHasta:function(){return this.formDate(this.procedimiento.fecha_hasta)}},methods:{getGlosas:function(){var e=this;this.axios.get("manglosas").then(function(t){""!==t.data&&(e.glosas=t.data.data.glosas)}).catch(function(t){e.$store.commit(u.b,{msg:"Hay un error al traer las glosas. "+t,color:"danger"})})},resetDialog:function(){this.procedimiento={id:"",cm_convisita_id:null,cantidad:null,observaciones:null,rs_cup_id:null,tipo_servicio:null,causa:null,causa_especifica:null,fecha_desde:null,fecha_hasta:null}},edit:function(e){this.openDialog(),this.procedimiento=JSON.parse(d()(e))},openDialog:function(){this.dialog=!0,this.procedimiento.cm_convisita_id=this.data.id},close:function(){this.dialog=!1,this.resetDialog()},formDate:function(e){if(!e)return null;var t=e.split("-"),a=c()(t,3);return a[0]+"/"+a[1]+"/"+a[2]},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},guardar:function(){var e=this;return s()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("form");case 2:if(!t.sent){t.next=8;break}e.loadingSubmit=!0,a=e.procedimiento.id?e.axios.put("cuentasmedicas/concurrencia/concups/"+e.procedimiento.id,e.procedimiento):e.axios.post("cuentasmedicas/concurrencia/concups",e.procedimiento),a.then(function(t){e.procedimiento.id?(e.loadingSubmit=!1,e.$store.commit(u.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.data.concups.splice(e.data.concups.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.loadingSubmit=!1,e.$store.commit(u.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.data.concups.unshift(t.data.data)),e.close()}).catch(function(t){e.loadingSubmit=!1,e.$store.commit(u.a,{expression:" al guardar el registro. ",error:t})}),t.next=9;break;case 8:e.$store.commit(u.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return t.stop()}},t,e)}))()}}}},2343:function(e,t,a){"use strict";function i(e){a(2344)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1262),r=a(2346),s=a(1),n=i,c=s(o.a,r.a,!1,n,"data-v-03909354",null);t.default=c.exports},2344:function(e,t,a){var i=a(2345);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(456)("37775f98",i,!0,{})},2345:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Procedimientos.vue",sourceRoot:""}])},2346:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"720px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"form"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[e._v("Servicio")])]),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"menuDateDesde",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDateDesde,callback:function(t){e.menuDateDesde=t},expression:"menuDateDesde"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha desde","prepend-icon":"event",readonly:"",name:"fecha desde",required:"","error-messages":e.errors.collect("fecha desde")},slot:"activator",model:{value:e.computedDateFormattedDesde,callback:function(t){e.computedDateFormattedDesde=t},expression:"computedDateFormattedDesde"}}),e._v(" "),a("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(t){e.menuDateDesde=!1},change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha desde"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.procedimiento.fecha_desde,callback:function(t){e.$set(e.procedimiento,"fecha_desde",t)},expression:"procedimiento.fecha_desde"}})],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"menuDateHasta",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDateHasta,callback:function(t){e.menuDateHasta=t},expression:"menuDateHasta"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha hasta","prepend-icon":"event",readonly:"",name:"fecha hasta",required:"","error-messages":e.errors.collect("fecha hasta")},slot:"activator",model:{value:e.computedDateFormattedHasta,callback:function(t){e.computedDateFormattedHasta=t},expression:"computedDateFormattedHasta"}}),e._v(" "),a("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(t){e.menuDateHasta=!1},change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha hasta"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.procedimiento.fecha_hasta,callback:function(t){e.$set(e.procedimiento,"fecha_hasta",t)},expression:"procedimiento.fecha_hasta"}})],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposServicio,label:"Servicio",name:"servicio","prepend-icon":"input","error-messages":e.errors.collect("servicio"),required:""},model:{value:e.procedimiento.tipo_servicio,callback:function(t){e.$set(e.procedimiento,"tipo_servicio",t)},expression:"procedimiento.tipo_servicio"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},["PROCEDIMIENTO"===e.procedimiento.tipo_servicio?a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"postuladorProcedimiento",attrs:{"no-data":"Busqueda por código o nombre.","item-text":"descripcion",label:"Procedimiento",entidad:"cups",hint:"codigo","persistent-hint":"","no-btn-create":"","no-btn-edit":"",name:"procedimiento",rules:"required",preicon:"assignment","error-messages":e.errors.collect("procedimiento"),"min-characters-search":4,"slot-data":{template:'\n                    <v-list-tile>\n                    <v-list-tile-action>\n                      <v-chip\n                      color="indigo lighten-2"\n                      label\n                      small\n                      >\n                      {{ value.codigo }}\n                      </v-chip>\n                      </v-list-tile-action>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.descripcion}}</v-list-tile-title>\n                        <v-list-tile-sub-title class=caption>{{ value.cobertura }}</v-list-tile-sub-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                    ',props:["value"]}},on:{changeid:function(t){return e.procedimiento.rs_cup_id=t}},model:{value:e.procedimiento.cup,callback:function(t){e.$set(e.procedimiento,"cup",t)},expression:"procedimiento.cup"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},["ESTANCIA"===e.procedimiento.tipo_servicio?a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"postuladorProcedimiento",attrs:{"no-data":"Busqueda por código o nombre.","item-text":"descripcion",label:"Procedimiento",entidad:"cups","route-params":"cupscategoria:subgrupo:rs_cupsgrupo_id=109",hint:"codigo","persistent-hint":"","no-btn-create":"","no-btn-edit":"",name:"procedimiento",rules:"required",preicon:"assignment","error-messages":e.errors.collect("procedimiento"),"min-characters-search":4,"slot-data":{template:'\n                    <v-list-tile>\n                    <v-list-tile-action>\n                      <v-chip\n                      color="indigo lighten-2"\n                      label\n                      small\n                      >\n                      {{ value.codigo }}\n                      </v-chip>\n                      </v-list-tile-action>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.descripcion}}</v-list-tile-title>\n                        <v-list-tile-sub-title class=caption>{{ value.cobertura }}</v-list-tile-sub-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                    ',props:["value"]}},on:{changeid:function(t){return e.procedimiento.rs_cup_id=t}},model:{value:e.procedimiento.cup,callback:function(t){e.$set(e.procedimiento,"cup",t)},expression:"procedimiento.cup"}}):e._e()],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{"prepend-icon":"dns",label:"Cantidad",name:"cantidad",required:"","error-messages":e.errors.collect("cantidad")},model:{value:e.procedimiento.cantidad,callback:function(t){e.$set(e.procedimiento,"cantidad",t)},expression:"procedimiento.cantidad"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.glosas,"item-text":"descripcion","item-value":"id",label:"Glosa","no-data-text":"No hay datos disponibles",name:"glosa","prepend-icon":"security",required:"","error-messages":e.errors.collect("glosa")},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.descripcion)}}),e._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.tipo)}})],1)]]}}]),model:{value:e.procedimiento.cm_manglosa_id,callback:function(t){e.$set(e.procedimiento,"cm_manglosa_id",t)},expression:"procedimiento.cm_manglosa_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposCausa,label:"Causa",name:"causa","prepend-icon":"input","error-messages":e.errors.collect("causa"),required:""},model:{value:e.procedimiento.causa,callback:function(t){e.$set(e.procedimiento,"causa",t)},expression:"procedimiento.causa"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposCausaEspecifica,label:"Causa específica",name:"causa especifica","prepend-icon":"input","error-messages":e.errors.collect("causa especifica"),required:""},model:{value:e.procedimiento.causa_especifica,callback:function(t){e.$set(e.procedimiento,"causa_especifica",t)},expression:"procedimiento.causa_especifica"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",name:"observaciones",label:"Observaciones"},model:{value:e.procedimiento.observaciones,callback:function(t){e.$set(e.procedimiento,"observaciones",t)},expression:"procedimiento.observaciones"}})],1)],1)],1),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:e.guardar}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",[e._v("Servicio")]),e._v(" "),a("small",{staticClass:"mt-2 ml-1"},[e._v(" Registro y gestión")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",color:"accent",small:"",disabled:"Cerrada"===e.concurrencia.estado},on:{click:function(t){return e.openDialog()}},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v(e._s("Abierta"===e.concurrencia.estado?"Crear registro":"Concurrencia cerrada"))])],1)],1),e._v(" "),a("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.data.concups,loading:e.loading,"rows-per-page-text":"Registros por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",[e._v(e._s(t.item.cup.codigo))]),e._v(" "),a("td",[e._v(e._s(t.item.cantidad))]),e._v(" "),a("td",[e._v(e._s(t.item.tipo_servicio))]),e._v(" "),a("td",[e._v(e._s(t.item.fecha_desde))]),e._v(" "),a("td",[e._v(e._s(t.item.fecha_hasta))]),e._v(" "),a("td",[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",disabled:"Cerrada"===e.concurrencia.estado},on:{click:function(a){return e.edit(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("edit")])],1),e._v(" "),a("span",[e._v(e._s("Abierta"===e.concurrencia.estado?"Editar":"Concurrencia cerrada"))])],1)],1)]}}])},[e._v(" "),a("template",{slot:"no-data"},[e.loading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},o=[],r={render:i,staticRenderFns:o};t.a=r}});
//# sourceMappingURL=379.4d86d4ea8eec8377b916.js.map