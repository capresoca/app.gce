webpackJsonp([371],{856:function(a,n,t){"use strict";var i=t(13),e=t.n(i),o=t(23),r=t.n(o),l=t(14),c=t.n(l),u=t(7),s=t.n(u),d=t(58);n.a={name:"RegistroMinuta",props:["value","parent"],components:{CkeditorDocument:function(){return t.e(318).then(t.bind(null,1115))},Loading:d.default,Confirmar:function(){return t.e(289).then(t.bind(null,749))}},data:function(){return{dialogCancelar:{loading:!1,visible:!1,content:null},loading:!1,minutaOriginal:null,minuta:null,otro:""}},created:function(){this.minuta=JSON.parse(s()(this.value.minuta)),this.minutaOriginal=JSON.parse(s()(this.value.minuta))},watch:{value:function(a){a&&(this.minuta=JSON.parse(s()(a.minuta)),this.minutaOriginal=JSON.parse(s()(a.minuta)))}},methods:{cancel:function(){s()(this.minutaOriginal)===s()(this.minuta)?this.aceptaCancelacion():(this.dialogCancelar.content="<strong>la Minuta del contrato No. "+this.value.numero_contrato+" perderá los cambios realizados recientemente.</strong><br/> ¿Está seguro de continuar?",this.dialogCancelar.visible=!0)},aceptaCancelacion:function(){var a=this;this.dialogCancelar.loading=!0,this.minuta=JSON.parse(s()(this.minutaOriginal)),this.value.minuta=this.minuta,this.axios.put("minutas/"+this.value.id,this.value).then(function(n){a.$emit("cancelar"),a.dialogCancelar.loading=!1,a.dialogCancelar.visible=!1}).catch(function(n){a.dialogCancelar.loading=!1,a.$store.commit("SNACK_ERROR_LIST",{expression:" al restaurar el contenido de la minuta. ",error:n})})},save:function(){var a=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c()(e.a.mark(function t(){return e.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new r.a(function(t){a.minuta?(a.loading=!0,a.value.minuta=a.minuta,a.axios.put("minutas/"+a.value.id,a.value).then(function(i){a.$store.commit("CONTRATO_RELOAD_ITEM",{item:i.data.data,estado:"reload",key:null}),n&&a.$store.commit("SNACK_SHOW",{msg:"El contenido de la minuta de ha guardado correctamente. ",color:"success"}),a.loading=!1,t(!0)}).catch(function(n){a.loading=!1,a.$store.commit("SNACK_ERROR_LIST",{expression:" al guardar el contenido de la minuta. ",error:n}),t(!1)})):(a.$store.commit("SNACK_SHOW",{msg:"El contenido de la minuta es invalido. ",color:"warning"}),t(!1))}));case 1:case"end":return t.stop()}},t,a)}))()}}}},922:function(a,n,t){"use strict";function i(a){t(923)}Object.defineProperty(n,"__esModule",{value:!0});var e=t(856),o=t(925),r=t(1),l=i,c=r(e.a,o.a,!1,l,"data-v-63170f29",null);n.default=c.exports},923:function(a,n,t){var i=t(924);"string"==typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);t(456)("41fc88b7",i,!0,{})},924:function(a,n,t){n=a.exports=t(455)(!0),n.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroMinuta.vue",sourceRoot:""}])},925:function(a,n,t){"use strict";var i=function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("div",[t("v-card",{class:"primary"===a.parent?"pa-0":""},[t("loading",{model:{value:a.loading,callback:function(n){a.loading=n},expression:"loading"}}),a._v(" "),t("v-card-text",[t("ckeditor-document",{model:{value:a.minuta,callback:function(n){a.minuta=n},expression:"minuta"}})],1),a._v(" "),t("v-divider"),a._v(" "),t("v-card-actions",[t("v-btn",{attrs:{flat:"",loading:a.loading},on:{click:function(n){return n.preventDefault(),a.cancel(n)}}},[a._v("Cancelar")]),a._v(" "),t("v-spacer"),a._v(" "),t("v-btn",{attrs:{flat:"",color:"primary",loading:a.loading},on:{click:function(n){return n.preventDefault(),a.save(n)}}},[a._v("Guardar")])],1)],1),a._v(" "),t("confirmar",{attrs:{loading:a.dialogCancelar.loading,value:a.dialogCancelar.visible,content:a.dialogCancelar.content,"requiere-motivo":!1},on:{cancelar:function(n){a.dialogCancelar.visible=!1},aceptar:a.aceptaCancelacion}})],1)},e=[],o={render:i,staticRenderFns:e};n.a=o}});
//# sourceMappingURL=371.13b49f3e3c6fef6f83fd.js.map