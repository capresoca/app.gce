webpackJsonp([259],{1528:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",[r("toolbar-list",{attrs:{title:"Cierre y Apertura de Mes",subtitle:"Gestión"}}),e._v(" "),r("v-data-table",{attrs:{headers:e.headers,items:e.datos,loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[r("v-btn",{staticClass:"elevation-0 pa-1",attrs:{fab:"",dark:"",small:"",color:"primary"},domProps:{textContent:e._s(t.index+1)}})],1),e._v(" "),r("td",[e._v(e._s(t.item.mes))]),e._v(" "),r("td",[e._v(e._s(t.item.year))]),e._v(" "),r("td",[e._v(e._s(t.item.estado))]),e._v(" "),r("td",{staticClass:"text-xs-center"},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{staticClass:"mx-0 elevation-0",attrs:{slot:"activator",small:"",fab:""},on:{click:function(r){"Abierto"===t.item.estado?e.cerrarMes(t.item):e.abrirMes(t.item)}},slot:"activator"},[r("v-icon",{attrs:{color:"Abierto"===t.item.estado?"red":"green"},domProps:{textContent:e._s("fas fa-"+("Abierto"===t.item.estado?"door-closed":"door-open"))}},[e._v("lock")])],1),e._v(" "),r("span",{domProps:{textContent:e._s(("Abierto"===t.item.estado?"Cerrar":"Abrir")+" Mes")}})],1)],1)]}}])},[e._v(" "),r("template",{slot:"no-data"},[e.tableLoading?r("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n            Lo sentimos, no tenemos registros para mostrar. "),r("v-icon",[e._v("sentiment_very_dissatisfied")])],1):r("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n            Estamos cargando los registros. "),r("v-icon",[e._v("sentiment_satisfied_alt")])],1)],1)],2)],1),e._v(" "),r("div",[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogCierreMes,callback:function(t){e.dialogCierreMes=t},expression:"dialogCierreMes"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Cerrar Mes")]),e._v(" "),r("v-card-text",[e._v("¿Esta seguro de que desea cerrar el mes?")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.ordenCerrarMes}},[e._v("Cerrar Mes")]),e._v(" "),r("v-btn",{attrs:{color:"grey darken-1",flat:""},on:{click:e.cancelarCerrarMes}},[e._v("Cancelar")])],1)],1)],1)],1),e._v(" "),r("div",[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogAbrirMes,callback:function(t){e.dialogAbrirMes=t},expression:"dialogAbrirMes"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Abrir Mes")]),e._v(" "),r("v-card-text",[e._v("¿Esta seguro de abrir el mes?")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.ordenAbrirMes}},[e._v("Abrir Mes")]),e._v(" "),r("v-btn",{attrs:{color:"grey darken-1",flat:""},on:{click:e.cancelarCerrarMes}},[e._v("Cancelar")])],1)],1)],1)],1)],1)},s=[],o={render:a,staticRenderFns:s};t.a=o},493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(975),s=r(1528),o=r(1),i=o(a.a,s.a,!1,null,null,null);t.default=i.exports},975:function(e,t,r){"use strict";var a=r(12),s=r(0),o=r.n(s);t.a={name:"RegistroCierreAperturaMes",components:{ToolbarList:function(){return new Promise(function(e){e()}).then(r.bind(null,247))}},data:function(){return{fechaActual:"2018-01-01",fechaComprobanteDestino:!1,mensaje:"asda",dialogCierreMes:!1,dialogAbrirMes:!1,headers:[{text:"",align:"left",sortable:!1,value:"mes"},{text:"Mes",align:"left",sortable:!1,value:"mes"},{text:"Año",align:"left",sortable:!1,value:"year"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Acciones",align:"center",sortable:!1,value:"id"}],datos:[],tableLoading:!1,comprobante:{fecha:null,comprobanteorigen:null},registro:{id:null,mes:null,year:null,estado:null}}},methods:{cerrarMes:function(e){this.registro=e,this.dialogCierreMes=!0},abrirMes:function(e){this.registro=e,this.dialogAbrirMes=!0},ordenCerrarMes:function(){var e=this;this.axios.post("cerrar-mes-comdiario",this.registro).then(function(t){"ok"===t.data.state&&(e.$store.commit(a.b,{msg:"El mes se cerro correctamente",color:"success"}),e.formReset(),e.datos=t.data.datos)}).catch(function(t){e.$store.commit(a.b,{msg:"Error al obtener el consecutivo "+t.response,color:"danger"})})},cancelarCerrarMes:function(){this.dialogAbrirMes=!1,this.dialogCierreMes=!1,this.registro={id:null,mes:null,year:null,estado:null}},ordenAbrirMes:function(){var e=this;this.axios.post("abrir-mes-comdiario",this.registro).then(function(t){"ok"===t.data.state&&(e.$store.commit(a.b,{msg:"El mes se abrio correctamente",color:"success"}),e.formReset(),e.datos=t.data.datos)}).catch(function(t){e.$store.commit(a.b,{msg:"Error al obtener el consecutivo "+t.response,color:"danger"})})},cancelarAbrirMes:function(){this.dialogAbrirMes=!1,this.dialogCierreMes=!1,this.registro={id:null,mes:null,year:null,estado:null}},formReset:function(){this.dialogAbrirMes=!1,this.dialogCierreMes=!1,this.registro={id:null,mes:null,year:null,estado:null},this.datos=[]}},mounted:function(){var e=this;this.tableLoading=!0,this.axios.get("cierre-apertura-meses").then(function(t){t.data.datos.length>0&&(e.datos=t.data.datos),e.tableLoading=!1}).catch(function(t){e.$store.commit(a.b,{msg:"Error al obtener el consecutivo "+t.response,color:"danger"})}),this.fechaActual=o()().format("YYYY-MM")+"-01"}}}});
//# sourceMappingURL=259.81940a9351b40492e1ee.js.map