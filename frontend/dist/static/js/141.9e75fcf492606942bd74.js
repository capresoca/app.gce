webpackJsonp([141],{1035:function(o,e,n){"use strict";var t=n(13),s=n.n(t),a=n(14),i=n.n(a),r=n(7),d=n.n(r),l=n(12),c=n(58);e.a={name:"AdminsFondosPensiones",components:{ToolbarList:function(){return new Promise(function(o){o()}).then(n.bind(null,247))},Loading:c.default},data:function(){return{adminsFondosPensiones:[],adminFondoPension:{},search:"",dialog:!1,tableLoading:!1,pagination:{},codigosUsados:"",nombresUsados:"",headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset()},mounted:function(){var o={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",o)},beforeCreate:function(){var o=this;this.tableLoading=!0,this.axios.get("as_afps").then(function(e){o.adminsFondosPensiones=e.data.data,o.pagination.totalItems=o.adminsFondosPensiones.length,o.tableLoading=!1,o.codigosUsados=o.getCodigosUsados(),o.nombresUsados=o.getNombresUsados()}).catch(function(o){return console.log("Hay un error. "+o),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("adminsFondosPensiones")},modalTitulo:function(){return this.adminFondoPension.id?"Edición del item: "+this.adminFondoPension.nombre:"Nuevo item"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.adminFondoPension={id:"",codigo:null,nombre:null},this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},edit:function(o){this.dialog=!0,this.adminFondoPension=JSON.parse(d()(o)),this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(){var o=this;return this.adminsFondosPensiones.map(function(e){if(null==o.adminFondoPension.codigo||o.adminFondoPension.codigo!==e.codigo)return e.codigo})},getNombresUsados:function(){var o=this;return this.adminsFondosPensiones.map(function(e){if(null==o.adminFondoPension.nombre||o.adminFondoPension.nombre!==e.nombre)return e.nombre})},validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},save:function(){var o=this;return i()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validador("formAspf");case 2:if(!e.sent){e.next=7;break}n=o.adminFondoPension.id?o.axios.put("as_afps/"+o.adminFondoPension.id,o.adminFondoPension):o.axios.post("as_afps",o.adminFondoPension),n.then(function(e){o.adminFondoPension.id?(o.$store.commit(l.b,{msg:"El item se actualizó correctamente",color:"success"}),o.adminsFondosPensiones.splice(o.adminsFondosPensiones.findIndex(function(o){return o.id===e.data.data.id}),1,e.data.data)):(o.$store.commit(l.b,{msg:"El item se creó correctamente",color:"success"}),o.adminsFondosPensiones.splice(0,0,e.data.data)),o.dialog=!1,o.close()}).catch(function(e){o.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:o.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return e.stop()}},e,o)}))()}}}},1706:function(o,e,n){var t=n(1707);"string"==typeof t&&(t=[[o.i,t,""]]),t.locals&&(o.exports=t.locals);n(456)("2170b02f",t,!0,{})},1707:function(o,e,n){e=o.exports=n(455)(!0),e.push([o.i,"","",{version:3,sources:[],names:[],mappings:"",file:"AdminsFondosPensiones.vue",sourceRoot:""}])},1708:function(o,e,n){"use strict";var t=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",[n("v-dialog",{attrs:{width:"500px"},model:{value:o.dialog,callback:function(e){o.dialog=e},expression:"dialog"}},[n("v-form",{attrs:{"data-vv-scope":"formAfps"}},[n("v-card",[n("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[n("span",{staticClass:"title"},[o._v(o._s(o.modalTitulo))])]),o._v(" "),n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|not_in:"+o.codigosUsados,expression:"'required|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":o.errors.collect("codigo")},model:{value:o.adminFondoPension.codigo,callback:function(e){o.$set(o.adminFondoPension,"codigo",e)},expression:"adminFondoPension.codigo"}})],1),o._v(" "),n("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+o.nombresUsados,expression:"'required|max:150|not_in:'  + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":o.errors.collect("nombre")},model:{value:o.adminFondoPension.nombre,callback:function(e){o.$set(o.adminFondoPension,"nombre",e)},expression:"adminFondoPension.nombre"}})],1)],1)],1),o._v(" "),n("v-card-actions",{staticClass:"grey lighten-4"},[n("v-spacer"),o._v(" "),n("v-btn",{on:{click:o.close}},[o._v("Cancelar")]),o._v(" "),n("v-btn",{attrs:{color:"primary",disabled:o.errors.any()},on:{click:o.save}},[o._v("Guardar")])],1)],1)],1)],1),o._v(" "),n("v-card",[n("toolbar-list",{attrs:{info:o.infoComponent,title:"Administradoras  de Fondos de Pensiones",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Item",btnplustruncate:""},on:{click:function(e){o.dialog=!0}}}),o._v(" "),n("loading",{model:{value:o.tableLoading,callback:function(e){o.tableLoading=e},expression:"tableLoading"}}),o._v(" "),n("v-card-title",[n("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:o.search,callback:function(e){o.search=e},expression:"search"}})],1),o._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:o.headers,items:o.adminsFondosPensiones,loading:o.tableLoading,pagination:o.pagination,"hide-actions":"",search:o.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[10,25,50,{text:"Todos",value:-1}]},on:{"update:pagination":function(e){o.pagination=e}},scopedSlots:o._u([{key:"items",fn:function(e){return[n("td",[o._v(o._s(e.item.codigo))]),o._v(" "),n("td",[o._v(o._s(e.item.nombre))]),o._v(" "),n("td",{staticClass:"text-xs-center"},[n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(n){return o.edit(e.item)}},slot:"activator"},[n("v-icon",{attrs:{color:"accent"}},[o._v("edit")])],1),o._v(" "),n("span",[o._v("Editar")])],1)],1)]}},{key:"pageText",fn:function(e){return[o._v("\n        "+o._s(e.pageStart)+" - "+o._s(e.pageStop)+" de "+o._s(e.itemsLength)+"\n      ")]}}])},[o._v(" "),n("template",{slot:"no-data"},[o.tableLoading?n("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[o._v("\n          Lo sentimos, no tenemos registros para mostrar. "),n("v-icon",[o._v("sentiment_very_dissatisfied")])],1):n("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[o._v("\n          Estamos cargando los registros. "),n("v-icon",[o._v("sentiment_satisfied_alt")])],1)],1),o._v(" "),o._v(" "),n("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[o._v('\n        No se encontraron resultados de "'+o._s(o.search)+'"\n      ')])],2),o._v(" "),n("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[n("v-pagination",{attrs:{length:o.pages},model:{value:o.pagination.page,callback:function(e){o.$set(o.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},s=[],a={render:t,staticRenderFns:s};e.a=a},530:function(o,e,n){"use strict";function t(o){n(1706)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1035),a=n(1708),i=n(1),r=t,d=i(s.a,a.a,!1,r,"data-v-22be017e",null);e.default=d.exports}});
//# sourceMappingURL=141.9e75fcf492606942bd74.js.map