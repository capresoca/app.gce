webpackJsonp([99],{1293:function(t,e,a){"use strict";var o=a(13),i=a.n(o),n=a(14),s=a.n(n),r=a(7),l=a.n(r),c=a(8),u=a.n(c),d=a(6);e.a={name:"CmRadicada",components:{EnvioCuentas:function(){return a.e(330).then(a.bind(null,2455))},Confirmar:function(){return a.e(289).then(a.bind(null,749))}},data:function(){return{dialogA:{loading:!1,visible:!1,content:null,registro:null},cuentasSeleccionadas:[],dataTable:{nameItemState:"tableCuentasMedicas",route:"cm_radicadas",advanceFilters:!0,makeHeaders:[{selectable:!0},{text:"Radicado Cuenta",align:"left",sortable:!1,value:"consecutivo_radicado"},{text:"Tipo",align:"left",sortable:!1,value:"tipo_facturacion"},{text:"Radicado RIPS",align:"left",sortable:!1,value:"radicado_entidad",component:{template:'\n                    <div>\n                      <v-list-tile class="content-v-list-tile-p0">\n                        <v-list-tile-content v-if="value.radiccado_rip">\n                          <v-list-tile-title class="body-1">Número: {{value.radiccado_rip}}</v-list-tile-title>\n                          <v-list-tile-title class="body-1">Fecha: {{value.fecha_radicado}}</v-list-tile-title>\n                        </v-list-tile-content>\n                        <v-list-tile-content v-else>\n                          <v-list-tile-title class="body-1">Sin RIPS</v-list-tile-title>\n                        </v-list-tile-content>\n                      </v-list-tile>\n                    </div>\n                  ',props:["value"]}},{text:"IPS",align:"left",sortable:!1,value:"entidad.nombre"},{text:"Plan Cobertura",align:"left",sortable:!1,value:"nombre"},{text:"Usuario",align:"left",sortable:!1,value:"gs_usuario_id",component:{template:'\n                    <div>\n                      <v-list-tile class="content-v-list-tile-p0">\n                        <v-list-tile-content>\n                          <v-list-tile-title class="body-1">{{value.usuario ? value.usuario.name : \'\'}}</v-list-tile-title>\n                            <v-list-tile-sub-title class="caption">{{value.usuario ? value.usuario.email : \'\'}}</v-list-tile-sub-title>\n                        </v-list-tile-content>\n                      </v-list-tile>\n                    </div>\n                  ',props:["value"]}},{text:"Estado",align:"left",sortable:!1,component:{template:"<span>{{value.estadolote.nombre_estado}}</span>",props:["value"]}},{text:"Avance Auditoria",align:"center",sortable:!1,value:"avance_proceso",classData:"text-xs-center",width:"100px",component:{template:'<div>\n                      <v-tooltip v-if="value.estado === \'En Auditoria\'" top>\n                        <div slot="activator" class="elevation-2">\n                          <v-progress-linear class="cursor-pointer" :value="value.avance_proceso"></v-progress-linear>\n                        </div>\n                        <span v-text="value.avance_proceso + \' %\'"></span>\n                      </v-tooltip>\n                      <div v-else>\n                        <v-chip color="red" text-color="white">Por asignar</v-chip>\n                      </div>\n                  </div>',props:["value"]}},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]},filters:{contratos:[]},filtroRuta:{contrato:null},rutaBase:""}},computed:u()({},Object(d.c)({currentUser:function(t){return t.user.profile}}),{esAuditor:function(){return this.currentUser&&this.currentUser.roles&&this.currentUser.roles.find(function(t){return 43===t.id})},infoComponent:function(){return this.$store.getters.getInfoComponent("cmradicadas")}}),created:function(){this.reloadComplementos(),this.rutaBase=JSON.parse(l()(this.dataTable.route))},methods:{enviado:function(){this.$refs.tableCuentasMedicas.deselectAll()},imprimir:function(t,e){var a=this,o=t.id;this.axios.get("firmar-ruta?nombre_ruta="+(1===e?"documeto_radicado":2===e?"informe_sosalud&user="+this.currentUser.id:"reporte_glosas")+"&id="+o).then(function(t){var a=t.data;1===e||2===e?window.open(a):window.fileDownload(a)}).catch(function(t){a.$store.commit("SNACK_ERROR_LIST",{expression:" Error al Imprimir.",error:t})})},anular:function(t){var e=this,a=JSON.parse(l()(t));a.estado="Anulado",delete a.options,delete a.facturas,delete a.show,this.axios.put("cm_radicadas/"+a.id,a).then(function(t){e.$store.commit("SNACK_SHOW",{msg:"Se anuló la radicación de la cuenta.",color:"success"})}).catch(function(){e.$store.commit("SNACK_SHOW",{msg:"Error al tratar de anular la radicación de la cuenta médica.",color:"danger"})})},aplicaFiltros:function(){var t=this.rutaBase;this.filtroRuta.contrato&&(t=t+(t.indexOf("?")>-1?"&":"?")+"id_contrato="+this.filtroRuta.contrato),this.dataTable.route=t},reloadComplementos:function(){var t=this;this.axios.get("contratos_radicados").then(function(e){t.filters.contratos=e.data}).catch(function(e){t.$store.commit("SNACK_ERROR_LIST",{expression:" al traer los complementos para crear los filtros. ",error:e})})},resetOptions:function(t){return t.selectable=!!t.estadolote,t.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&"Anulado"!==t.estado&&"En Proceso"!==t.estado&&t.options.push({event:"anular",icon:"not_interested",tooltip:"Anular",color:"red"}),this.infoComponent&&this.infoComponent.permisos.imprimir&&t.options.push({event:"imprimirGlosa",icon:"far fa-file-excel",tooltip:"Informe de Glosas",color:"teal"}),this.infoComponent&&this.infoComponent.permisos.imprimir&&t.options.push({event:"impInforme",icon:"far fa-file-pdf",tooltip:"Informe Auditoría Facturas Radicadas",color:"red"}),this.infoComponent&&this.infoComponent.permisos.agregar&&""===t.estado&&t.options.push({event:"ver",icon:"remove_red_eye",tooltip:"Ver cuenta médica"}),this.infoComponent&&this.infoComponent.permisos.imprimir&&t.options.push({event:"imprimir",icon:"far fa-file-pdf",tooltip:"Radicado de Cuenta Médica",color:"black"}),this.infoComponent&&this.infoComponent.permisos.agregar&&!this.esAuditor&&"Auditoria"===t.estadolote.estado&&t.avance_proceso>=100&&t.total_glosas>0&&0===t.enviar_glosas&&t.options.push({event:"enviarglosas",icon:"fas fa-paper-plane",tooltip:"Responder Glosas",color:"error"}),t},enviarGlosas:function(t){this.dialogA.registro=JSON.parse(l()(t)),this.dialogA.content="<strong>Las glosas del radicado No. "+this.dialogA.registro.consecutivo_radicado+" serán enviadas al prestador.</strong><br/> ¿Está seguro de continuar?",this.dialogA.visible=!0},cancelaEnvioGlosas:function(){this.dialogA.loading=!1,this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registro=null},aceptaEnvioGlosas:function(){var t=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogA.loading=!0,t.axios.put("cm_radicadas/"+t.dialogA.registro.id,{id:t.dialogA.registro.id,enviar_glosas:!0}).then(function(){t.$store.commit("SNACK_SHOW",{msg:"Las glosas se han enviado al prestador.",color:"success"}),t.$store.commit("reloadTable","tableCuentasMedicas"),t.cancelaEnvioGlosas()}).catch(function(e){t.dialogA.loading=!1,t.$store.commit("SNACK_ERROR_LIST",{expression:" al realizar el envío de glosas al prestador. ",error:e})});case 2:case"end":return e.stop()}},e,t)}))()}}}},2453:function(t,e,a){var o=a(2454);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(456)("9da1cadc",o,!0,{})},2454:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CmRadicada.vue",sourceRoot:""}])},2459:function(t,e,a){"use strict";var o=function(){var t=this,e=this,a=e.$createElement,o=e._self._c||a;return o("v-card",[o("toolbar-list",{attrs:{info:e.infoComponent,btnplus:"",btnplustitle:"Cuenta Médica",title:"Cuentas Médicas",subtitle:"Registro y gestión"}}),e._v(" "),o("data-table-v2",{ref:"tableCuentasMedicas",attrs:{"select-all":""},on:{resetOption:function(t){return e.resetOptions(t)},anular:function(t){return e.anular(t)},imprimir:function(t){return e.imprimir(t,1)},impInforme:function(t){return e.imprimir(t,2)},imprimirGlosa:function(t){return e.imprimir(t,3)},ver:function(a){return e.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:"Cuenta Médica N° "+a.consecutivo_radicado,parametros:{entidad:a,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})},selecteds:function(t){return e.cuentasSeleccionadas=t},"apply-filters":e.aplicaFiltros,enviarglosas:function(t){return e.enviarGlosas(t)}},model:{value:e.dataTable,callback:function(t){e.dataTable=t},expression:"dataTable"}},[o("template",{slot:"filters"},[o("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[o("v-autocomplete",{attrs:{clearable:"",label:"Plan de cobertura",items:e.filters.contratos,"item-value":"id","item-text":"nombre"},model:{value:e.filtroRuta.contrato,callback:function(t){e.$set(e.filtroRuta,"contrato",t)},expression:"filtroRuta.contrato"}})],1)],1)],2),e._v(" "),o("envio-cuentas",{on:{enviado:e.enviado},model:{value:e.cuentasSeleccionadas,callback:function(t){e.cuentasSeleccionadas=t},expression:"cuentasSeleccionadas"}}),e._v(" "),o("confirmar",{attrs:{loading:e.dialogA.loading,value:e.dialogA.visible,content:e.dialogA.content,"requiere-motivo":!1},on:{cancelar:e.cancelaEnvioGlosas,aceptar:e.aceptaEnvioGlosas}})],1)},i=[],n={render:o,staticRenderFns:i};e.a=n},696:function(t,e,a){"use strict";function o(t){a(2453)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(1293),n=a(2459),s=a(1),r=o,l=s(i.a,n.a,!1,r,"data-v-5ff940f8",null);e.default=l.exports}});
//# sourceMappingURL=99.8dfe555d0ee4dd667074.js.map