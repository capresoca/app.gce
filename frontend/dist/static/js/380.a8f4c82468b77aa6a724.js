webpackJsonp([380],{1263:function(e,t,a){"use strict";var i=a(13),n=a.n(i),o=a(14),s=a.n(o),r=a(249),c=a.n(r),l=a(7),d=a.n(l),u=a(12),m=a(58);t.a={name:"Medicamentos",components:{PostuladorV2:function(){return new Promise(function(e){e()}).then(a.bind(null,61))},Loading:m.default},props:{data:{type:Object,default:null},concurrencia:{type:Object,default:{}}},data:function(){return{medicamento:{},tiposCausa:["ACCESIBILIDAD","CONTINUIDAD","OPORTUNIDAD","PERTINENCIA","SEGURIDAD"],glosas:[],dialog:!1,loading:!1,loadingSubmit:!1,menuDate:!1,headers:[{text:"id",align:"left",sortable:!1,value:"id"},{text:"C칩digo CUM",align:"left",sortable:!1,value:"cum"},{text:"Cantidad",align:"left",sortable:!1,value:"cantidad"},{text:"Causa",align:"left",sortable:!1,value:"causa"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.resetDialog()},mounted:function(){this.getGlosas()},computed:{computedDateFormatted:function(){return this.formDate(this.medicamento.fecha)}},methods:{getGlosas:function(){var e=this;this.axios.get("manglosas").then(function(t){""!==t.data&&(e.glosas=t.data.data.glosas)}).catch(function(t){e.$store.commit(u.b,{msg:"Hay un error al traer las glosas. "+t,color:"danger"})})},resetDialog:function(){this.medicamento={id:"",cm_convisita_id:null,cantidad:null,observaciones:null,rs_cum_id:null,cm_manglosa_id:null,fecha:null}},edit:function(e){this.openDialog(),this.medicamento=JSON.parse(d()(e))},openDialog:function(){this.dialog=!0,this.medicamento.cm_convisita_id=this.data.id},close:function(){this.dialog=!1,this.resetDialog()},formDate:function(e){if(!e)return null;var t=e.split("-"),a=c()(t,3);return a[0]+"/"+a[1]+"/"+a[2]},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},guardar:function(){var e=this;return s()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("form");case 2:if(!t.sent){t.next=8;break}e.loadingSubmit=!0,a=e.medicamento.id?e.axios.put("cuentasmedicas/concurrencia/concums/"+e.medicamento.id,e.medicamento):e.axios.post("cuentasmedicas/concurrencia/concums",e.medicamento),a.then(function(t){e.medicamento.id?(e.loadingSubmit=!1,e.$store.commit(u.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.data.concums.splice(e.data.concums.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.loadingSubmit=!1,e.$store.commit(u.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.data.concums.unshift(t.data.data)),e.close()}).catch(function(t){e.loadingSubmit=!1,e.$store.commit(u.a,{expression:" al guardar el registro. ",error:t})}),t.next=9;break;case 8:e.$store.commit(u.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return t.stop()}},t,e)}))()}}}},2347:function(e,t,a){"use strict";function i(e){a(2348)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1263),o=a(2350),s=a(1),r=i,c=s(n.a,o.a,!1,r,"data-v-35299d8e",null);t.default=c.exports},2348:function(e,t,a){var i=a(2349);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(456)("183c7222",i,!0,{})},2349:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Medicamentos.vue",sourceRoot:""}])},2350:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"720px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"form"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[e._v("Medicamento")])]),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",readonly:"",name:"fecha",required:"","error-messages":e.errors.collect("fecha")},slot:"activator",model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}}),e._v(" "),a("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(t){e.menuDate=!1},change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.medicamento.fecha,callback:function(t){e.$set(e.medicamento,"fecha",t)},expression:"medicamento.fecha"}})],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"postuladorMedicamento",attrs:{"no-data":"Busqueda por c칩digo, nombre o registro sanitario.","item-text":"producto","data-title":"producto","data-subtitle":"expediente",label:"Medicamento",entidad:"rs_cums","no-btn-create":"","no-btn-edit":"",name:"Medicamento",rules:"required",preicon:"featured_play_list","error-messages":e.errors.collect("Medicamento"),"min-characters-search":4,"slot-data":{template:'\n                    <v-list-tile>\n                    <v-list-tile-action>\n                      <v-chip\n                      color="indigo lighten-2"\n                      label\n                      small\n                      >\n                      {{ value.estado_cum }}\n                      </v-chip>\n                      </v-list-tile-action>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.expediente}} - {{ value.producto }} - {{value.titular}}</v-list-tile-title>\n                        <v-list-tile-sub-title class=caption>{{ value.descripcion_comercial }}</v-list-tile-sub-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                    ',props:["value"]}},on:{changeid:function(t){return e.medicamento.rs_cum_id=t}},model:{value:e.medicamento.cum,callback:function(t){e.$set(e.medicamento,"cum",t)},expression:"medicamento.cum"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{"prepend-icon":"dns",label:"Cantidad",name:"cantidad",required:"","error-messages":e.errors.collect("cantidad")},model:{value:e.medicamento.cantidad,callback:function(t){e.$set(e.medicamento,"cantidad",t)},expression:"medicamento.cantidad"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposCausa,label:"Causa",name:"causa","prepend-icon":"input","error-messages":e.errors.collect("causa"),required:""},model:{value:e.medicamento.causa,callback:function(t){e.$set(e.medicamento,"causa",t)},expression:"medicamento.causa"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.glosas,"item-text":"descripcion","item-value":"id",label:"Glosa","no-data-text":"No hay datos disponibles",name:"glosa","prepend-icon":"security",required:"","error-messages":e.errors.collect("glosa")},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.descripcion)}}),e._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.tipo)}})],1)]]}}]),model:{value:e.medicamento.cm_manglosa_id,callback:function(t){e.$set(e.medicamento,"cm_manglosa_id",t)},expression:"medicamento.cm_manglosa_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",name:"observaciones",label:"Observaciones"},model:{value:e.medicamento.observaciones,callback:function(t){e.$set(e.medicamento,"observaciones",t)},expression:"medicamento.observaciones"}})],1)],1)],1),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:e.guardar}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",[e._v("Medicamentos")]),e._v(" "),a("small",{staticClass:"mt-2 ml-1"},[e._v(" Registro y gesti칩n")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",color:"accent",small:"",disabled:"Cerrada"===e.concurrencia.estado},on:{click:function(t){return e.openDialog()}},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v(e._s("Abierta"===e.concurrencia.estado?"Crear registro":"Concurrencia cerrada"))])],1)],1),e._v(" "),a("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.data.concums,loading:e.loading,"rows-per-page-text":"Registros por p치gina"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",[e._v(e._s(t.item.cum.codigo))]),e._v(" "),a("td",[e._v(e._s(t.item.cantidad))]),e._v(" "),a("td",[e._v(e._s(t.item.causa))]),e._v(" "),a("td",[e._v(e._s(t.item.fecha))]),e._v(" "),a("td",[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",disabled:"Cerrada"===e.concurrencia.estado},on:{click:function(a){return e.edit(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("edit")])],1),e._v(" "),a("span",[e._v(e._s("Abierta"===e.concurrencia.estado?"Editar":"Concurrencia cerrada"))])],1)],1)]}}])},[e._v(" "),a("template",{slot:"no-data"},[e.loading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},n=[],o={render:i,staticRenderFns:n};t.a=o}});
//# sourceMappingURL=380.a8f4c82468b77aa6a724.js.map