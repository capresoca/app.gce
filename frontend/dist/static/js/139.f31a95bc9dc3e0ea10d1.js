webpackJsonp([139],{1034:function(a,e,t){"use strict";var o=t(13),s=t.n(o),r=t(14),n=t.n(r),i=t(7),d=t.n(i),l=t(12),c=t(58);e.a={name:"AseguradorasRiesgosLaborales",components:{ToolbarList:function(){return new Promise(function(a){a()}).then(t.bind(null,247))},Loading:c.default},data:function(){return{aseguradoras:[],aseguradora:{},search:"",dialog:!1,tableLoading:!1,pagination:{},codigosUsados:"",nombresUsados:"",headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset()},mounted:function(){var a={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",a)},beforeCreate:function(){var a=this;this.tableLoading=!0,this.axios.get("as_arls").then(function(e){a.aseguradoras=e.data.data,a.pagination.totalItems=a.aseguradoras.length,a.tableLoading=!1,a.codigosUsados=a.getCodigosUsados(),a.nombresUsados=a.getNombresUsados()}).catch(function(a){return console.log("Hay un error. "+a),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("aseguradorasRiesgosLaborales")},modalTitulo:function(){return this.aseguradora.id?"Edición del item: "+this.aseguradora.nombre:"Nuevo item"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.aseguradora={id:"",codigo:null,nombre:null},this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},edit:function(a){this.dialog=!0,this.aseguradora=JSON.parse(d()(a)),this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(){var a=this;return this.aseguradoras.map(function(e){if(null==a.aseguradora.codigo||a.aseguradora.codigo!==e.codigo)return e.codigo})},getNombresUsados:function(){var a=this;return this.aseguradoras.map(function(e){if(null==a.aseguradora.nombre||a.aseguradora.nombre!==e.nombre)return e.nombre})},validador:function(a){return this.$validator.validateAll(a).then(function(a){return a})},save:function(){var a=this;return n()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validador("formArl");case 2:if(!e.sent){e.next=7;break}t=a.aseguradora.id?a.axios.put("as_arls/"+a.aseguradora.id,a.aseguradora):a.axios.post("as_arls",a.aseguradora),t.then(function(e){a.aseguradora.id?(a.$store.commit(l.b,{msg:"El item se actualizó correctamente",color:"success"}),a.aseguradoras.splice(a.aseguradoras.findIndex(function(a){return a.id===e.data.data.id}),1,e.data.data)):(a.$store.commit(l.b,{msg:"El item se creó correctamente",color:"success"}),a.aseguradoras.splice(0,0,e.data.data)),a.dialog=!1,a.close()}).catch(function(e){a.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:a.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return e.stop()}},e,a)}))()}}}},1703:function(a,e,t){var o=t(1704);"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);t(456)("719db2c8",o,!0,{})},1704:function(a,e,t){e=a.exports=t(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"AseguradorasRiesgosLaborales.vue",sourceRoot:""}])},1705:function(a,e,t){"use strict";var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("v-dialog",{attrs:{width:"500px"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[t("v-form",{attrs:{"data-vv-scope":"formArl"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[t("span",{staticClass:"title"},[a._v(a._s(a.modalTitulo))])]),a._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|not_in:"+a.codigosUsados,expression:"'required|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":a.errors.collect("codigo")},model:{value:a.aseguradora.codigo,callback:function(e){a.$set(a.aseguradora,"codigo",e)},expression:"aseguradora.codigo"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+a.nombresUsados,expression:"'required|max:150|not_in:'  + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":a.errors.collect("nombre")},model:{value:a.aseguradora.nombre,callback:function(e){a.$set(a.aseguradora,"nombre",e)},expression:"aseguradora.nombre"}})],1)],1)],1),a._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-spacer"),a._v(" "),t("v-btn",{on:{click:a.close}},[a._v("Cancelar")]),a._v(" "),t("v-btn",{attrs:{color:"primary",disabled:a.errors.any()},on:{click:a.save}},[a._v("Guardar")])],1)],1)],1)],1),a._v(" "),t("v-card",[t("toolbar-list",{attrs:{info:a.infoComponent,title:"Aseguradoras de riesgos laborales",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Item",btnplustruncate:""},on:{click:function(e){a.dialog=!0}}}),a._v(" "),t("loading",{model:{value:a.tableLoading,callback:function(e){a.tableLoading=e},expression:"tableLoading"}}),a._v(" "),t("v-card-title",[t("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:a.search,callback:function(e){a.search=e},expression:"search"}})],1),a._v(" "),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.aseguradoras,loading:a.tableLoading,pagination:a.pagination,"hide-actions":"",search:a.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[10,25,50,{text:"Todos",value:-1}]},on:{"update:pagination":function(e){a.pagination=e}},scopedSlots:a._u([{key:"items",fn:function(e){return[t("td",[a._v(a._s(e.item.codigo))]),a._v(" "),t("td",[a._v(a._s(e.item.nombre))]),a._v(" "),t("td",{staticClass:"text-xs-center"},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(t){return a.edit(e.item)}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"}},[a._v("edit")])],1),a._v(" "),t("span",[a._v("Editar")])],1)],1)]}},{key:"pageText",fn:function(e){return[a._v("\n        "+a._s(e.pageStart)+" - "+a._s(e.pageStop)+" de "+a._s(e.itemsLength)+"\n      ")]}}])},[a._v(" "),t("template",{slot:"no-data"},[a.tableLoading?t("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[a._v("\n          Lo sentimos, no tenemos registros para mostrar. "),t("v-icon",[a._v("sentiment_very_dissatisfied")])],1):t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[a._v("\n          Estamos cargando los registros. "),t("v-icon",[a._v("sentiment_satisfied_alt")])],1)],1),a._v(" "),a._v(" "),t("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[a._v('\n        No se encontraron resultados de "'+a._s(a.search)+'"\n      ')])],2),a._v(" "),t("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[t("v-pagination",{attrs:{length:a.pages},model:{value:a.pagination.page,callback:function(e){a.$set(a.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},s=[],r={render:o,staticRenderFns:s};e.a=r},529:function(a,e,t){"use strict";function o(a){t(1703)}Object.defineProperty(e,"__esModule",{value:!0});var s=t(1034),r=t(1705),n=t(1),i=o,d=n(s.a,r.a,!1,i,"data-v-0091215d",null);e.default=d.exports}});
//# sourceMappingURL=139.f31a95bc9dc3e0ea10d1.js.map