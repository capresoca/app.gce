webpackJsonp([377],{1274:function(a,e,o){"use strict";e.a={name:"EditarFactura",data:function(){return{dialog:!1,loading:!1,factura:null,radicado:null,modelo:null,planCobertura:null,planes:[],filterPlanCobertura:function(a,e){var o=function(a){return null!=a?a:""},t=o(a.contrato.numero_contrato+" "+a.nombre),r=o(e);return t.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1}}},methods:{submit:function(){var a=this;this.loading=!0,this.axios.put("cmcapitadas/"+this.modelo.factura.id,this.modelo).then(function(e){a.$store.commit("reloadTable","tableFacturasRadicadas"),a.$store.commit("SNACK_SHOW",{msg:"La factura "+a.factura.consecutivo+" se actualizó.",color:"success"}),a.dialog=!1,a.loading=!1}).catch(function(e){a.loading=!1,a.$store.commit("SNACK_ERROR_LIST",{expression:"Hay un error al enviar los datos.",error:e})})},assign:function(a){var e=this;this.planCobertura=null,this.planes=[],this.dialog=!0,this.loading=!0,this.axios.get("radicado_capitados/"+a.id).then(function(a){e.factura=a.data.factura,e.radicado=a.data.radicado,e.modelo={id_radicado:e.factura.cm_radicado_id,rs_contrato_id:e.radicado.rs_contrato_id,factura:{id:e.factura.id,consecutivo:e.factura.consecutivo,valor_neto:e.factura.valor_neto,valor_compartido:e.factura.valor_compartido,valor_descuentos:e.factura.valor_descuentos,valor_comision:e.factura.valor_comision}},e.axios.get("radicadas/contratos_ips/"+e.radicado.rs_entidad_id).then(function(a){e.planes=a.data.data,e.radicado.rs_contrato_id&&e.planes.find(function(a){return a.id===e.radicado.rs_contrato_id})&&(e.planCobertura=e.planes.find(function(a){return a.id===e.radicado.rs_contrato_id})),e.loading=!1}).catch(function(){e.loading=!1,e.$store.commit("SNACK_SHOW",{msg:"Error al recuperar los contratos de la entidad: "+e.factura.entidad.nombre+".",color:"danger"})})}).catch(function(){e.loading=!1,e.$store.commit("SNACK_SHOW",{msg:"Error al recuperar la información de la factura "+a.no_factura+".",color:"danger"})})}}}},2391:function(a,e,o){"use strict";function t(a){o(2392)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1274),n=o(2394),i=o(1),c=t,l=i(r.a,n.a,!1,c,"data-v-d7e1c502",null);e.default=l.exports},2392:function(a,e,o){var t=o(2393);"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);o(456)("65b9920f",t,!0,{})},2393:function(a,e,o){e=a.exports=o(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"EditarFactura.vue",sourceRoot:""}])},2394:function(a,e,o){"use strict";var t=function(){var a=this,e=a.$createElement,o=a._self._c||e;return o("v-dialog",{attrs:{persistent:"","max-width":"480"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[a._v("Actualización de Factura "+a._s(a.factura&&a.factura.consecutivo?a.factura.consecutivo:"")+" ")]),a._v(" "),o("loading",{model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}}),a._v(" "),a.modelo?o("v-card-text",[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Consecutivo Factura",name:"consecutivo factura","error-messages":a.errors.collect("consecutivo factura")},model:{value:a.modelo.factura.consecutivo,callback:function(e){a.$set(a.modelo.factura,"consecutivo",e)},expression:"modelo.factura.consecutivo"}}),a._v(" "),o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Plan de cobertura",name:"plan cobertura",items:a.planes,required:"","item-value":"id","return-object":"","error-messages":a.errors.collect("plan cobertura"),filter:a.filterPlanCobertura,hint:a.planCobertura?"Contrato:"+a.planCobertura.contrato.numero_contrato:"","persistent-hint":""},on:{change:function(e){return a.modelo.rs_contrato_id=e.id}},scopedSlots:a._u([{key:"item",fn:function(e){return[o("v-list-tile-content",{staticClass:"truncate-content",staticStyle:{width:"100% !important"}},[o("v-list-tile-title",[a._v(a._s(e.item.nombre))]),a._v(" "),o("v-list-tile-sub-title",[a._v("Contrato: "+a._s(e.item.contrato.numero_contrato))])],1)]}},{key:"selection",fn:function(e){return[o("span",[a._v(a._s(e.item.nombre))])]}}],null,!1,1607788164),model:{value:a.planCobertura,callback:function(e){a.planCobertura=e},expression:"planCobertura"}}),a._v(" "),o("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"`required|min_value:0`"}],attrs:{label:"Valor Neto",name:"valor neto","prepend-icon":"attach_money","error-messages":a.errors.collect("valor neto")},model:{value:a.modelo.factura.valor_neto,callback:function(e){a.$set(a.modelo.factura,"valor_neto",a._n(e))},expression:"modelo.factura.valor_neto"}}),a._v(" "),o("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"`required|min_value:0`"}],attrs:{label:"Valor Compartido",name:"valor compartido","prepend-icon":"attach_money","error-messages":a.errors.collect("valor compartido")},model:{value:a.modelo.factura.valor_compartido,callback:function(e){a.$set(a.modelo.factura,"valor_compartido",a._n(e))},expression:"modelo.factura.valor_compartido"}}),a._v(" "),o("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"`required|min_value:0`"}],attrs:{label:"Valor Descuentos",name:"valor descuentos","prepend-icon":"attach_money","error-messages":a.errors.collect("valor descuentos")},model:{value:a.modelo.factura.valor_descuentos,callback:function(e){a.$set(a.modelo.factura,"valor_descuentos",a._n(e))},expression:"modelo.factura.valor_descuentos"}}),a._v(" "),o("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"`required|min_value:0`"}],attrs:{label:"Valor Comisión",name:"valor comisión","prepend-icon":"attach_money","error-messages":a.errors.collect("valor comisión")},model:{value:a.modelo.factura.valor_comision,callback:function(e){a.$set(a.modelo.factura,"valor_comision",a._n(e))},expression:"modelo.factura.valor_comision"}})],1):a._e(),a._v(" "),o("v-card-actions",[o("v-btn",{attrs:{flat:""},on:{click:function(e){a.dialog=!1}}},[a._v("Cancelar")]),a._v(" "),o("v-spacer"),a._v(" "),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:a.submit}},[a._v("Actualizar")])],1)],1)],1)},r=[],n={render:t,staticRenderFns:r};e.a=n}});
//# sourceMappingURL=377.467e32196efaf9a0b789.js.map