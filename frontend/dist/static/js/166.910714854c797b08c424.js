webpackJsonp([166],{1210:function(e,t,o){"use strict";var a=o(249),r=o.n(a),i=o(255),n=o.n(i),s=o(23),l=o.n(s),c=o(7),d=o.n(c),u=o(13),v=o.n(u),p=o(14),m=o.n(p),b=o(12),g=o(58),f=o(40),_=o(248),h=o(251),x=o(254);t.a={name:"RegistroObligaciones",props:["parametros"],components:{Loading:g.default,PostuladorV2:function(){return new Promise(function(e){e()}).then(o.bind(null,61))},InputDetailFlex:function(){return new Promise(function(e){e()}).then(o.bind(null,250))},InputNumber:x.default},data:function(){return{detalleTercero:function(){return o.e(291).then(o.bind(null,768))},obligacion:null,presupuesto:null,presupuestos:[],rubro:{},rubros:[],rubrosCreados:"",terceros:[],rp:{},rps:[],detalleRp:{},rubrosRp:[],detalle:{},localLoading:!1,seEstaCreando:!1,tableLoading:!1,loadingSubmit:!1,dialog:!1,dialogAnular:!1,menuDate:!1,menuDateDocumento:!1,readOnly:!1,estado:null,headers:[{text:"No. CDP",align:"left",sortable:!1,value:"noCdp"},{text:"No. RP",align:"left",sortable:!1,value:"noRp"},{text:"Rubro",align:"left",sortable:!1,value:"rubro"},{text:"Nombre rubro",align:"left",sortable:!1,value:"nombreRubro"},{text:"Tipo gasto",align:"left",sortable:!1,value:"tipoGasto"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Saldo por obligar",align:"left",sortable:!1,value:"saldoPorObligar"},{text:"Valor",align:"left",sortable:!1,value:"valor"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset(),this.resetDialog(),this.validadorPostulador()},mounted:function(){null!==this.parametros.entidad?this.getRegistro(this.parametros.entidad.id):this.obtenerPresupuestos(),this.resetDialog(),this.obtenerTerceros();var e={custom:{rubro:{not_in:"Este rubro ya fue registrado."}}};this.$validator.localize("es",e)},computed:{iconoEstado:function(){return"Registrada"===this.estado?"stars":"Confirmada"===this.estado?"check_circle":"Anulada"===this.estado?"remove_circle":void 0},colorEstado:function(){return"Registrada"===this.estado?"primary":"Confirmada"===this.estado?"teal":"Anulada"===this.estado?"red":void 0},computedDateFormatted:function(){return this.formDate(this.obligacion.fecha)},computedDateFormattedDocumento:function(){return this.formDate(this.obligacion.fecha_documento)}},methods:{getRegistro:function(e){var t=this,o=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("pr_obligaciones/"+e).then(function(e){""!==e.data&&(t.obligacion=e.data.data,t.estado=t.obligacion.estado,t.obtenerPresupuesto(t.obligacion.periodo),t.obtenerRpsTercero(t.obligacion.gn_tercero_id),"Confirmada"!==t.obligacion.estado&&"Anulada"!==t.obligacion.estado||(t.readOnly=!0)),o.hide()}).catch(function(e){o.hide(),t.$store.commit(b.b,{msg:"Hay un error al traer el registro. "+e,color:"danger"})})},obtenerPresupuesto:function(e){var t=this,o=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("obligaciones/"+e).then(function(e){""!==e.data&&(t.presupuesto.entidad_resolucion=e.data.strgasto.entidad_resolucion,t.rubrosRp=e.data.rubros,t.obligacion.pr_strgasto_id=t.presupuesto.id,t.obligacion.periodo=t.presupuesto.entidad_resolucion.periodo,t.obligacion.pr_entidad_resolucion_id=t.presupuesto.entidad_resolucion.id),o.hide()}).catch(function(e){o.hide(),t.$store.commit(b.b,{msg:"Hay un error al traer el registro. "+e,color:"danger"})})},obtenerPresupuestos:function(){var e=this;this.seEstaCreando=!0;var t=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("obligacion_periodos ").then(function(o){""!==o.data&&(e.presupuestos=o.data,e.obtenerPresupuesto(e.presupuestos[0])),t.hide()}).catch(function(o){t.hide(),e.$store.commit(b.a,{expression:" al obtener presupuesto. ",error:o})})},obtenerTerceros:function(){var e=this,t=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("rps_tercero ").then(function(o){""!==o.data&&(e.terceros=o.data.data),t.hide()}).catch(function(o){t.hide(),e.$store.commit(b.a,{expression:" al obtener terceros. ",error:o})})},obtenerRpsTercero:function(e){var t=this;if(e){var o=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("rps/tercero/"+e).then(function(e){""!==e.data&&(t.rps=e.data.rps),o.hide()}).catch(function(e){o.hide(),t.$store.commit(b.a,{expression:" al obtener terceros. ",error:e})})}else this.rps=[]},obtenerRubrosYCdp:function(e){this.obtenerRubrosRP(e),this.obtenerCdpDelRp(e)},obtenerRubrosRP:function(e){var t=this,o=this.$loading.show({container:this.$refs.dialogModificacion.$el});this.axios.get("obligaciones/rubros/"+e).then(function(e){""!==e.data&&(t.rubrosRp=e.data.rubros),o.hide()}).catch(function(e){o.hide(),t.$store.commit(b.b,{msg:"Hay un error al traer los rubros. "+e,color:"danger"})})},obtenerCdpDelRp:function(e){var t=this,o=this.$loading.show({container:this.$refs.dialogModificacion.$el});this.axios.get("obligaciones/rp/cdp/"+e).then(function(e){""!==e.data&&(t.detalle.cdp=e.data.cdp),o.hide()}).catch(function(e){o.hide(),t.$store.commit(b.b,{msg:"Hay un error al traer el cdp. "+e,color:"danger"})})},obtenerRubro:function(){var e=this,t=this.$loading.show({container:this.$refs.dialogModificacion.$el});this.axios.get("obligacion_rubro?rpId="+this.detalle.rp.id+"&rubroId="+this.detalle.rubro.id).then(function(o){""!==o.data&&(e.detalleRp=o.data.data,e.detalle.pr_detrp_id=e.detalleRp.id,e.detalle.pr_tipo_gasto_id=e.detalleRp.tipo_gasto.id,e.detalle.saldo_por_obligar=e.detalleRp.valor_disponible,e.detalle.tipo_gasto=e.detalleRp.tipo_gasto),t.hide()}).catch(function(o){t.hide(),e.$store.commit(b.b,{msg:"Hay un error al traer el rubro. "+o,color:"danger"})})},getRubrosUsados:function(){var e=this;return this.obligacion.detalles.map(function(t){if(null==e.detalle.rubro.id||e.detalle.rubro.id!==t.rubro.id)return t.rubro.id})},agregarDetalle:function(e){var t=this;return m()(v.a.mark(function o(){return v.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.validador("formObligacionesDialog");case 2:if(!o.sent){o.next=10;break}t.agregarValoresAlDetalle(),"number"!=typeof e.index?t.obligacion.detalles.push(e):t.obligacion.detalles.splice(t.obligacion.detalles.findIndex(function(o){return t.obligacion.detalles.indexOf(o)===e.index}),1,e),t.calcularObligacion(),t.dialog=!1,t.resetDialog(),o.next=11;break;case 10:t.$store.commit(b.b,{msg:"Hay uno o más campos vacios.",color:"danger"});case 11:case"end":return o.stop()}},o,t)}))()},editarDetalle:function(e,t){this.obtenerRubrosYCdp(t.rp.id),this.detalle=JSON.parse(d()(t)),this.detalle.index=e,this.dialog=!0,this.rubrosCreados=this.getRubrosUsados()},eliminarDetalle:function(e){this.obligacion.detalles.splice(e,1),this.calcularObligacion(),this.dialog=!1},filterRubros:function(e,t){var o=function(e){return null!=e?e:""},a=o(e.nombre+" "+e.codigo+e.codigo.split(".").join("")),r=o(t);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},validadorPostulador:function(){var e=this;h.a.extend("rubroValido",{validate:function(t,o){return new l.a(function(o){var a={};if(null!==t&&void 0!==t&&""!==t)return a=e.rubrosCreados.includes(t.id)?{valido:!1,mensaje:"Rubro ya usado"}:{valido:!0,mensaje:null},o({valid:a.valido,data:{message:a.mensaje}})})},getMessage:function(e,t,o){return o.message}})},calcularObligacion:function(){var e=0,t=!0,o=!1,a=void 0;try{for(var r,i=n()(this.obligacion.detalles);!(t=(r=i.next()).done);t=!0){e+=r.value.valor}}catch(e){o=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw a}}this.obligacion.valor_obligacion=e},formReset:function(){this.obligacion={id:null,entidad_resolucion:{periodo:null},consecutivo:null,fecha:null,documento:null,fecha_documento:null,gn_tercero_id:null,observaciones:null,estado:"Registrada",periodo:null,pr_entidad_resolucion_id:null,valor_obligacion:null,tercero:{nombre_completo:""},detalles:[]},this.rubrosCreados=this.getRubrosUsados(),this.presupuesto={entidad_resolucion:{periodo:""},detalles:[]},this.detalleRp={tipo_gasto:null,valor_inicial:null}},resetDialog:function(){this.dialog=!1,this.detalle={id:null,pr_detrp_id:null,pr_tipo_gasto_id:null,tipo_gasto:{nombre:null},valor:0,saldo_por_obligar:0,rubro:{id:""},rp:{id:"",consecutivo:""},cdp:{id:""}},this.$validator.reset(),this.rubrosCreados=this.getRubrosUsados()},agregarValoresAlDetalle:function(){this.detalle.fecha_rp=this.detalle.rp.fecha_vence,this.detalle.pr_rubro_id=this.detalle.rubro.id,this.detalle.pr_cdp_id=this.detalle.cdp.id,this.detalle.pr_rp_id=this.detalle.rp.id},openDialog:function(){this.dialog=!0,this.rubrosCreados=this.getRubrosUsados()},formDate:function(e){if(!e)return null;var t=e.split("-"),o=r()(t,3);return o[0]+"/"+o[1]+"/"+o[2]},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},confirmar:function(){this.obligacion.estado="Confirmada",this.submit()},anular:function(){this.dialogAnular=!1,this.obligacion.estado="Anulada",this.submit()},submit:function(){var e=this;return m()(v.a.mark(function t(){var o,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formCdp");case 2:if(!t.sent){t.next=9;break}e.localLoading=!0,o=e.seEstaCreando?"crear":"editar",a=e.obligacion.id?e.axios.put("pr_obligaciones/"+e.obligacion.id,e.obligacion):e.axios.post("pr_obligaciones",e.obligacion),a.then(function(t){e.seEstaCreando?(e.$store.commit(b.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.$store.commit(_.Y,{item:t.data.data,estado:o,key:e.parametros.key}),e.$store.dispatch(f.c,{contexto:e,itemId:e.parametros.tabOrigin})):(e.$store.commit(b.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.$store.commit(_.Y,{item:t.data.data,estado:o,key:e.parametros.key}),e.$store.dispatch(f.c,{contexto:e,itemId:e.parametros.tabOrigin}))}).catch(function(t){e.localLoading=!1,e.$store.commit(b.a,{expression:" al guardar el registro. ",error:t})}),t.next=10;break;case 9:e.$store.commit(b.b,{msg:"Hay uno o más campos vacios.",color:"danger"});case 10:case"end":return t.stop()}},t,e)}))()}}}},2170:function(e,t,o){var a=o(2171);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(456)("759c6fa6",a,!0,{})},2171:function(e,t,o){t=e.exports=o(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroObligaciones.vue",sourceRoot:""}])},2172:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formObligacionesDialog"},on:{submit:function(t){return t.preventDefault(),e.agregarDetalle(e.detalle)}}},[o("v-card",{ref:"dialogModificacion"},[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[e._v("Agregar rubro")])]),e._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"RP",items:e.rps,hint:e.detalle.rp.id?"Consecutivo: "+e.detalle.rp.consecutivo:"","persistent-hint":"","item-text":"periodo","item-value":"id",name:"RP","no-data-text":"No existen datos","prepend-icon":"library_books",required:"",required:"","return-object":"","error-messages":e.errors.collect("RP")},on:{change:function(t){return e.obtenerRubrosYCdp(t.id)}},scopedSlots:e._u([{key:"item",fn:function(t){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s("Periodo: "+t.item.periodo)}}),e._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s("Consecutivo: "+t.item.consecutivo)}})],1)]]}}]),model:{value:e.detalle.rp,callback:function(t){e.$set(e.detalle,"rp",t)},expression:"detalle.rp"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required|rubroValido",expression:"'required|rubroValido'"}],attrs:{label:"Rubro",items:e.rubrosRp,filter:e.filterRubros,hint:e.detalle.rubro?e.detalle.rubro.codigo:"","persistent-hint":"","item-text":"nombre","item-value":"id",name:"rubro","no-data-text":"No existen datos","prepend-icon":"subtitles",required:"",required:"","return-object":"","error-messages":e.errors.collect("rubro")},on:{change:function(t){return e.obtenerRubro()}},scopedSlots:e._u([{key:"item",fn:function(t){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}]),model:{value:e.detalle.rubro,callback:function(t){e.$set(e.detalle,"rubro",t)},expression:"detalle.rubro"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"tipo de gasto",attrs:{readonly:"",label:"Tipo de gasto","prepend-icon":"compare_arrows",name:"tipo de gasto",required:""},model:{value:e.detalle.tipo_gasto.nombre,callback:function(t){e.$set(e.detalle.tipo_gasto,"nombre",t)},expression:"detalle.tipo_gasto.nombre"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("input-detail-flex",{attrs:{label:"Valor disponible",prependIcon:"money",text:e._f("numberFormat")(e.detalle.saldo_por_obligar,0,"$")}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|max_value:"+e.detalle.saldo_por_obligar,expression:"'required|max_value:' + detalle.saldo_por_obligar"}],attrs:{label:"Saldo",name:"saldo",precision:0,"prepend-icon":"attach_money","error-messages":e.errors.collect("saldo")},model:{value:e.detalle.valor,callback:function(t){e.$set(e.detalle,"valor",e._n(t))},expression:"detalle.valor"}})],1)],1)],1),e._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.resetDialog}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{type:"submit",color:"primary"}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialogAnular,callback:function(t){e.dialogAnular=t},expression:"dialogAnular"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3"},[o("v-card-text",{staticClass:"title"},[e._v("¿Por qué anula la obligación?")])],1),e._v(" "),o("v-container",{attrs:{fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:e.obligacion.concepto_anulacionint,callback:function(t){e.$set(e.obligacion,"concepto_anulacionint",t)},expression:"obligacion.concepto_anulacionint"}},[o("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                Detalle de anulación\n              ")])])],1)],1)],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.dialogAnular=!1}}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.anular}},[e._v("Enviar")])],1)],1)],1),e._v(" "),o("v-card",{ref:"formPresupuesto"},[o("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[o("v-toolbar-title",[e._v("Registro Obligación ")]),e._v(" "),o("v-spacer"),e._v(" "),e.obligacion.consecutivo?o("v-chip",{attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[o("span",{staticClass:"subheading"},[e._v("N°")]),e._v(" \n        "),o("span",{staticClass:"subheading",domProps:{textContent:e._s(null===e.obligacion.consecutivo?"00":e.obligacion.consecutivo)}})]):e._e(),e._v(" "),e.seEstaCreando?e._e():o("v-chip",{attrs:{color:e.colorEstado,"text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v(e._s(e.iconoEstado))])],1),e._v("\n        "+e._s(e.estado)+"\n      ")],1)],1),e._v(" "),o("v-container",{staticStyle:{"max-width":"inherit"},attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{attrs:{"data-vv-scope":"formCdp"}},[o("v-container",{attrs:{fluid:"","grid-list-md":""}},["Anulada"===e.obligacion.estado?o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-alert",{attrs:{value:!0,type:"error"}},[o("strong",[e._v("Concepto anulación:")]),e._v(" "+e._s(e.obligacion.concepto_anulacionint)+"\n                  ")])],1)],1):e._e(),e._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[o("v-icon",[e._v("assignment_ind")]),e._v(" Presupuesto")],1)],1),e._v(" "),o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:""}},[null!==e.parametros.entidad?o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"periodo",attrs:{"prepend-icon":"calendar_today",label:"Periodo",readonly:""},model:{value:e.obligacion.entidad_resolucion.periodo,callback:function(t){e.$set(e.obligacion.entidad_resolucion,"periodo",t)},expression:"obligacion.entidad_resolucion.periodo"}})],1):o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.presupuestos,name:"periodo",label:"Periodo","no-data-text":"No hay resoluciones disponibles","error-messages":e.errors.collect("periodo"),required:"","prepend-icon":"calendar_today"},on:{change:function(t){return e.obtenerPresupuesto(t)}},model:{value:e.presupuesto.entidad_resolucion.periodo,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"periodo",t)},expression:"presupuesto.entidad_resolucion.periodo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"unidad ejecturoa",attrs:{"prepend-icon":"account_balance",label:"Unidad ejecutora",readonly:""},model:{value:e.presupuesto.entidad_resolucion.codigo,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"codigo",t)},expression:"presupuesto.entidad_resolucion.codigo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"nombre",attrs:{"prepend-icon":"account_balance",label:"Nombre",readonly:""},model:{value:e.presupuesto.entidad_resolucion.nombre,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"nombre",t)},expression:"presupuesto.entidad_resolucion.nombre"}})],1)],1)],1)],1)],1),e._v(" "),o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[o("v-icon",[e._v("assignment_ind")]),e._v(" General")],1)],1),e._v(" "),o("v-card-text",[o("v-layout",["Confirmada"!==e.estado&&"Anulada"!==e.estado?o("v-flex",{attrs:{xs12:"",sm3:""}},[o("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",readonly:"",name:"fecha activo","error-messages":e.errors.collect("fecha")},slot:"activator",model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}}),e._v(" "),o("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(t){e.menuDate=!1},change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha activo"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.obligacion.fecha,callback:function(t){e.$set(e.obligacion,"fecha",t)},expression:"obligacion.fecha"}})],1)],1):o("v-flex",{attrs:{xs12:"",sm3:""}},[o("v-text-field",{key:"fecha",attrs:{"prepend-icon":"event",label:"Fecha",name:"fecha",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm9:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"documento",attrs:{"prepend-icon":"code",label:"Documento",name:"documento",readonly:e.readOnly,"error-messages":e.errors.collect("documento")},model:{value:e.obligacion.documento,callback:function(t){e.$set(e.obligacion,"documento",t)},expression:"obligacion.documento"}})],1)],1),e._v(" "),o("v-layout",["Confirmada"!==e.estado&&"Anulada"!==e.estado?o("v-flex",{attrs:{xs12:"",sm3:""}},[o("v-menu",{ref:"menuDateDocumento",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDateDocumento,callback:function(t){e.menuDateDocumento=t},expression:"menuDateDocumento"}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha documento","prepend-icon":"event",readonly:"",name:"fecha documento",required:"","data-vv-delay":"1000","error-messages":e.errors.collect("fecha documento")},slot:"activator",model:{value:e.computedDateFormattedDocumento,callback:function(t){e.computedDateFormattedDocumento=t},expression:"computedDateFormattedDocumento"}}),e._v(" "),o("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(t){e.menuDateDocumento=!1}},model:{value:e.obligacion.fecha_documento,callback:function(t){e.$set(e.obligacion,"fecha_documento",t)},expression:"obligacion.fecha_documento"}})],1)],1):o("v-flex",{attrs:{xs12:"",sm3:""}},[o("v-text-field",{key:"fecha documento",attrs:{"prepend-icon":"event",label:"Fecha documento",name:"fecha documento",readonly:""},model:{value:e.computedDateFormattedDocumento,callback:function(t){e.computedDateFormattedDocumento=t},expression:"computedDateFormattedDocumento"}})],1),e._v(" "),"Confirmada"!==e.estado&&"Anulada"!==e.estado?o("v-flex",{attrs:{xs12:"",sm9:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tercero",items:e.terceros,"item-value":"id","item-text":"nombre_completo",name:"tercero","persistent-hint":"","prepend-icon":"person","no-data-text":"No existen terceros",required:"","error-messages":e.errors.collect("tercero"),clearable:""},on:{change:function(t){return e.obtenerRpsTercero(t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre_completo)}}),e._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.identificacion)}})],1)]]}}],null,!1,3154044749),model:{value:e.obligacion.gn_tercero_id,callback:function(t){e.$set(e.obligacion,"gn_tercero_id",t)},expression:"obligacion.gn_tercero_id"}})],1):o("v-flex",{attrs:{xs12:"",sm9:""}},[o("v-text-field",{key:"tercero",attrs:{"prepend-icon":"person",label:"Tercero",name:"tercero",readonly:"","error-messages":e.errors.collect("tercero")},model:{value:e.obligacion.tercero.nombre_completo,callback:function(t){e.$set(e.obligacion.tercero,"nombre_completo",t)},expression:"obligacion.tercero.nombre_completo"}})],1)],1),e._v(" "),o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"observaciones",attrs:{"prepend-icon":"reorder",label:"Observaciones",rows:"1","auto-grow":"",name:"observaciones",readonly:e.readOnly,"error-messages":e.errors.collect("observaciones")},model:{value:e.obligacion.observaciones,callback:function(t){e.$set(e.obligacion,"observaciones",t)},expression:"obligacion.observaciones"}})],1)],1)],1)],1)],1),e._v(" "),o("v-expand-transition",[e.obligacion.gn_tercero_id&&e.rps.length?o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[[o("loading",{model:{value:e.localLoading,callback:function(t){e.localLoading=t},expression:"localLoading"}}),e._v(" "),o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[e._v("Detalles")]),e._v(" "),o("v-spacer"),e._v(" "),e.readOnly?e._e():o("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){return t.preventDefault(),e.openDialog(t)}}},[o("v-icon",[e._v("add")]),e._v(" Agregar rubro")],1)],1),e._v(" "),o("v-data-table",{attrs:{headers:e.headers,items:e.obligacion.detalles,loading:e.tableLoading,"hide-actions":"","rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",[e._v(e._s(t.item.cdp.consecutivo))]),e._v(" "),o("td",[e._v(e._s(t.item.rp.consecutivo))]),e._v(" "),o("td",[e._v(e._s(t.item.rubro.codigo))]),e._v(" "),o("td",[e._v(e._s(t.item.rubro.nombre))]),e._v(" "),o("td",[e._v(e._s(t.item.tipo_gasto.nombre))]),e._v(" "),o("td",[e._v(e._s(t.item.rp.fecha))]),e._v(" "),o("td",[e._v(e._s(t.item.saldo_por_obligar))]),e._v(" "),o("td",[e._v(e._s(e._f("numberFormat")(t.item.valor,0,"$")))]),e._v(" "),o("td",[e.readOnly?e._e():o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-icon",[e._v("chevron_left")]),e._v(" "),o("v-icon",[e._v("close")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.editarDetalle(t.index,t.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),o("span",[e._v("Editar")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.eliminarDetalle(t.index,t.item.id)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("delete")])],1),e._v(" "),o("span",[e._v("Eliminar")])],1)],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("\n                            "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n                          ")]}},{key:"footer",fn:function(){return[o("td",{attrs:{colspan:e.headers.length}},[o("v-spacer"),e._v(" "),o("strong",[e._v("Valor compromiso: "+e._s(e._f("numberFormat")(e.obligacion.valor_obligacion,0,"$")))])],1)]},proxy:!0}],null,!1,3280452766)},[e._v(" "),o("template",{slot:"no-data"},[e.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n                              Estamos cargando los registros. "),o("v-icon",[e._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n                              Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)]],2):e._e()],1)],1)],1)],1)],1)],1)],1),e._v(" "),o("v-divider"),e._v(" "),"Confirmada"!==e.estado&&"Anulada"!==e.estado?o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[e.obligacion.id?o("v-btn",{attrs:{dark:"",color:"danger",loading:e.loadingSubmit},on:{click:function(t){e.dialogAnular=!0}}},[e._v("Anular")]):e._e()],1),e._v(" "),o("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},["Confirmada"!==e.estado&&"Anulada"!==e.estado?o("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Guardar")]):e._e(),e._v(" "),o("v-btn",{attrs:{slot:"activator",color:"success"},on:{click:e.confirmar},slot:"activator"},[e.seEstaCreando?o("span",[e._v("Guardar y Confirmar")]):o("span",[e._v("Confirmar")])])],1)],1)],1):e._e()],1)],1)},r=[],i={render:a,staticRenderFns:r};t.a=i},664:function(e,t,o){"use strict";function a(e){o(2170)}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1210),i=o(2172),n=o(1),s=a,l=n(r.a,i.a,!1,s,"data-v-65868d79",null);t.default=l.exports}});
//# sourceMappingURL=166.910714854c797b08c424.js.map