webpackJsonp([267],{1104:function(e,r,o){"use strict";var t=o(13),i=o.n(t),a=o(14),s=o.n(a),n=o(40),c=o(248),d=o(12);r.a={name:"RegistroSupervisor",props:["parametros"],data:function(){return{dialogSave:!1,dialogCodigo:!1,buscandoCodigo:!1,ordenEdit:!1,param:{},supervisor:{id:null,tercero:{nombre_completo:"",identificacion_completa:""}}}},components:{Postulador:function(){return o.e(287).then(o.bind(null,747))}},watch:{},methods:{validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},supervisorByCod:function(){var e=this;return s()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.supervisor.codigo&&(e.buscandoCodigo=!0,e.axios.get("ce_supervisores/codigo/"+e.supervisor.codigo).then(function(r){r.data.exists&&(e.supervisor=r.data.supervisor,e.dialogCodigo=!0),e.buscandoCodigo=!1}).catch(function(r){e.$store.commit(d.a,{expression:" Al intentar consultar codigo. ",error:r})}));case 1:case"end":return r.stop()}},r,e)}))()},submit:function(){var e=this;return s()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.validador("formSupervisor");case 2:if(!r.sent){r.next=6;break}e.supervisor.id?e.axios.put("ce_supervisores/"+e.supervisor.id,e.supervisor).then(function(r){e.$store.commit(d.b,{msg:r.data.message,color:"success"}),e.$store.dispatch(n.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(c._20,{item:r.data.data,estado:"editar",key:e.parametros.key})}).catch(function(r){e.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+r.response,color:"danger"})}):e.axios.post("ce_supervisores",e.supervisor).then(function(r){e.$store.commit(d.b,{msg:"El Supervisor se creo correctamente",color:"success"}),e.$store.dispatch(n.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(c._20,{item:r.data.data,estado:"crear",key:e.parametros.key})}).catch(function(r){e.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+r.response,color:"danger"})}),r.next=7;break;case 6:e.$store.commit(d.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return r.stop()}},r,e)}))()},getRegistro:function(e){var r=this;this.axios.get("ce_supervisores/"+e).then(function(e){e.data.exists&&r.edit(e.data.data)}).catch(function(e){r.$store.commit(d.a,{expression:" al traer el supervisor. ",error:e})})},edit:function(e){this.ordenEdit=!0,this.supervisor=e},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.dialogCodigo=!1,this.ordenEdit=!1},formReset:function(){this.dialogCodigo=!1,this.ordenEdit=!1,this.supervisor={}},terceroSeleccionado:function(e){null==this.supervisor.id&&null!=e&&(this.supervisor.tercero=e,this.supervisor.gn_tercero_id=e.id,this.supervisor.nombre=e.razon_social)}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},1916:function(e,r,o){"use strict";var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",[o("v-card",[e.ordenEdit?o("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      Editar Supervisor\n    ")]):o("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      Registrar Supervisor\n    ")]),e._v(" "),o("v-card-text",[o("v-form",{attrs:{"data-vv-scope":"formSupervisor"}},[o("v-container",{attrs:{fluid:"","grid-list-xl":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:"",md2:"",lg2:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:16",expression:"'required|max:16'"}],key:"codigo",attrs:{label:"Codigo",name:"codigo","error-messages":e.errors.collect("codigo"),disabled:e.ordenEdit,hint:e.buscandoCodigo?"Estamos buscando el codigo":"","persistent-hint":"",required:""},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.supervisorByCod(r)},blur:e.supervisorByCod},model:{value:e.supervisor.codigo,callback:function(r){e.$set(e.supervisor,"codigo",r)},expression:"supervisor.codigo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md10:"",lg10:""}},[o("postulador",{ref:"postuladorTercero",attrs:{nodata:"Busqueda por identificacion o nombre",required:"",hint:"nombre_completo",itemtext:"identificacion_completa",datatitle:"identificacion_completa",datasubtitle:"nombre_completo",filter:"identificacion_completa,nombre_completo",label:"Tercero",scope:"formSupervisor",entidad:"terceros",preicon:"person",value:e.supervisor.tercero,clearable:""},on:{change:function(r){return e.supervisor.gn_tercero_id=r},objectReturn:function(r){return e.terceroSeleccionado(r)}}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.supervisor.nombre,callback:function(r){e.$set(e.supervisor,"nombre",r)},expression:"supervisor.nombre"}})],1)],1)],1)],1)],1),e._v(" "),o("v-divider"),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.submit}},[e._v("\n        Guardar\n      ")])],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogCodigo,callback:function(r){e.dialogCodigo=r},expression:"dialogCodigo"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Codigo del Supervisor")]),e._v(" "),o("v-card-text",[e._v("El codigo del Supervisor ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.editarByCodigo}},[e._v("Cargar datos")]),e._v(" "),o("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.cerrarByCodigo}},[e._v("Cerrar")])],1)],1)],1)],1)},i=[],a={render:t,staticRenderFns:i};r.a=a},580:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=o(1104),i=o(1916),a=o(1),s=a(t.a,i.a,!1,null,null,null);r.default=s.exports}});
//# sourceMappingURL=267.ced7573fc7f4ba05912c.js.map