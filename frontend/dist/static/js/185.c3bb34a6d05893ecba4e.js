webpackJsonp([185],{460:function(e,t,a){"use strict";function n(e){a(883)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(834),s=a(885),o=a(1),r=n,l=o(i.a,s.a,!1,r,"data-v-52c018ca",null);t.default=l.exports},834:function(e,t,a){"use strict";var n=a(7),i=a.n(n),s=a(12);t.a={name:"NivelesCuenta",data:function(){return{nivelesCuenta:[],nivelCuentaEdicion:"",nivelCuenta:{},tableLoading:!0,dialog:!1,pagination:{},nombresUsados:"",search:"",headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Descripción",align:"left",sortable:!1,value:"desc_digitos"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},mounted:function(){var e={custom:{nombre:{not_in:"Este nombre ya esta en el registro."}}};this.$validator.localize("es",e)},beforeMount:function(){this.formReset()},beforeCreate:function(){var e=this;this.axios.get("nivcuentas").then(function(t){e.nivelesCuenta=t.data.data,e.pagination.totalItems=e.nivelesCuenta.length,e.tableLoading=!1}).catch(function(e){return console.log("Hay un error. "+e),!1})},watch:{dialog:function(e){!1===e&&this.close()}},computed:{modalTitulo:function(){return this.nivelCuenta.id?"Edición del Nivel Cuenta: "+this.nivelCuenta.nombre:"Nuevo Nivel Cuenta"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)},infoComponent:function(){return this.$store.getters.getInfoComponent("nivelesCuenta")}},methods:{formReset:function(){this.nivelCuenta={id:"",codigo:"",nombre:"",auxiliar:0,digitos:"",desc_digitos:"",estado:"Activo"},this.nombresUsados=this.getNombresUsados()},getNombresUsados:function(e){if(""===e||""===this.nivelCuenta.id){return this.nivelesCuenta.map(function(e){return e.nombre})}},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},edit:function(e){this.dialog=!0,this.nivelCuentaEdicion=e,this.nivelCuenta=JSON.parse(i()(e)),this.nombresUsados=this.getNombresUsados(e)},save:function(){var e=this;this.$validator.validateAll().then(function(t){if(t){(e.nivelCuenta.id?e.axios.put("nivcuentas/"+e.nivelCuenta.id,e.nivelCuenta):e.axios.post("nivcuentas",e.nivelCuenta)).then(function(t){e.nivelCuenta.id?(e.$store.commit(s.b,{msg:"El nivel cuenta se actualizó correctamente",color:"success"}),e.nivelesCuenta.splice(e.nivelesCuenta.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.$store.commit(s.b,{msg:"El nivle cuenta se creó correctamente",color:"success"}),e.nivelesCuenta.push(t.data.data)),e.close()}).catch(function(t){e.$store.commit(s.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})})}})}}}},883:function(e,t,a){var n=a(884);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(456)("17c29db1",n,!0,{})},884:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"NivelesCuenta.vue",sourceRoot:""}])},885:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("form",{ref:"form"},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3"},[a("span",{staticClass:"headline"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),a("v-divider"),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:"",md3:""}},[a("v-text-field",{attrs:{disabled:""===e.nivelCuenta.id||""!==e.nivelCuenta.id,label:"Código"},model:{value:e.nivelCuenta.codigo,callback:function(t){e.$set(e.nivelCuenta,"codigo",t)},expression:"nivelCuenta.codigo"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm8:"",md9:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+e.nombresUsados,expression:"'required|max:150|not_in:' + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.nivelCuenta.nombre,callback:function(t){e.$set(e.nivelCuenta,"nombre",t)},expression:"nivelCuenta.nombre"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:11|numeric",expression:"'required|max:11|numeric'"}],key:"digitos del nivel cuenta",attrs:{type:"number",label:"Digitos",name:"digitos del nivel cuenta",required:"","error-messages":e.errors.collect("digitos del nivel cuenta")},model:{value:e.nivelCuenta.digitos,callback:function(t){e.$set(e.nivelCuenta,"digitos",e._n(t))},expression:"nivelCuenta.digitos"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:45",expression:"'required|max:45'"}],key:"descripción digitos",attrs:{label:"Descripción digitos",name:"descripción digitos",required:"","error-messages":e.errors.collect("descripción digitos")},model:{value:e.nivelCuenta.desc_digitos,callback:function(t){e.$set(e.nivelCuenta,"desc_digitos",t)},expression:"nivelCuenta.desc_digitos"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-switch",{attrs:{color:"success",label:e.nivelCuenta.auxiliar,label:"Auxiliar","true-value":1,"false-value":0},model:{value:e.nivelCuenta.auxiliar,callback:function(t){e.$set(e.nivelCuenta,"auxiliar",t)},expression:"nivelCuenta.auxiliar"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-switch",{attrs:{color:"success",label:e.nivelCuenta.estado,"true-value":"Activo","false-value":"Inactivo"},model:{value:e.nivelCuenta.estado,callback:function(t){e.$set(e.nivelCuenta,"estado",t)},expression:"nivelCuenta.estado"}})],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){return t.preventDefault(),e.save()}}},[e._v("Guardar")])],1)],1)],1)]),e._v(" "),a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"",hint:"Buscar por el codigo de la cuenta","hide-details":"",flat:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("v-spacer"),e._v(" "),e.infoComponent&&e.infoComponent.permisos.agregar?a("v-btn",{attrs:{fab:"",small:"",color:"accent"},nativeOn:{click:function(t){e.dialog=!0}}},[a("v-icon",[e._v("add")])],1):e._e()],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.nivelesCuenta,loading:e.tableLoading,pagination:e.pagination,"hide-actions":"",search:e.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.codigo))]),e._v(" "),a("td",[e._v(e._s(t.item.nombre))]),e._v(" "),a("td",[e._v(e._s(t.item.desc_digitos))]),e._v(" "),a("td",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){return e.edit(t.item)}}},[a("v-icon",{attrs:{small:"",color:"accent"}},[e._v("edit")])],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("\n        "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n      ")]}}])},[e._v(" "),a("template",{slot:"no-data"},[e.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1),e._v(" "),e._v(" "),a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        No se encontraron resultados de "'+e._s(e.search)+'"\n      ')])],2)],1),e._v(" "),e.nivelesCuenta.length>5?a("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[a("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1):e._e()],1)},i=[],s={render:n,staticRenderFns:i};t.a=s}});
//# sourceMappingURL=185.c3bb34a6d05893ecba4e.js.map