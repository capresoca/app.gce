webpackJsonp([367],{1011:function(t,e,i){"use strict";e.a={name:"AnticiposDialog",props:{comprobante:{type:Object,default:null},concepto:{type:Object,default:null}},components:{InputNumber:function(){return new Promise(function(t){t()}).then(i.bind(null,254))}},data:function(){return{siDirecto:!1,anticipoDirecto:0,registros:[],dialog:!1,loading:!1,contratos:[],anticipos:[],headers:[{text:"Contrato",align:"center",sortable:!1},{text:"Plan cobertura",align:"center",sortable:!1},{text:"Valor",align:"right",sortable:!1},{text:"",align:"center",sortable:!1}]}},watch:{siDirecto:function(t){!t&&(this.anticipoDirecto=0)},dialog:function(t){t&&this.getDataTerceroConcepto()}},methods:{crearRegistro:function(){this.registros.push({contrato:null,plan_cobertura:null,valor:0})},asignar:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.siDirecto&&t.registros.push({contrato:null,plan_cobertura:null,valor:t.anticipoDirecto}),t.$emit("returnItems",t.registros),t.dialog=!1)})},getDataTerceroConcepto:function(){var t=this;this.loading=!0,this.axios.get("anti_compegresos/"+this.comprobante.tercero.id+"/"+this.concepto.id).then(function(e){t.anticipos=e.data.anticipos,t.contratos=e.data.contratos,t.siDirecto=!1,t.anticipoDirecto=0,t.registros=[],t.loading=!1}).catch(function(e){t.loading=!1,t.$store.commit("SNACK_ERROR_LIST",{expression:" al traer las cxps. ",error:e})})}}}},1624:function(t,e,i){"use strict";function a(t){i(1625)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1011),n=i(1627),r=i(1),s=a,l=r(o.a,n.a,!1,s,"data-v-b56846c8",null);e.default=l.exports},1625:function(t,e,i){var a=i(1626);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(456)("51077908",a,!0,{})},1626:function(t,e,i){e=t.exports=i(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"AnticiposDialog.vue",sourceRoot:""}])},1627:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"",width:"1200"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{small:"",flat:""}},a),[t._v("\n      Anticipos\n    ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),i("v-card",[i("v-toolbar",{attrs:{dense:""}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("Anticipos")]),t._v(" "),i("v-list-tile-sub-title",[t._v(t._s(t.comprobante.tercero.identificacion_completa)+" - "+t._s(t.comprobante.tercero.nombre_completo))])],1)],1),t._v(" "),i("v-spacer"),t._v(" "),i("v-tooltip",{attrs:{left:""}},[i("v-btn",{attrs:{slot:"activator",flat:"",icon:""},on:{click:function(e){t.dialog=!1}},slot:"activator"},[i("v-icon",[t._v("close")])],1),t._v(" "),i("span",[t._v("Cerrar")])],1)],1),t._v(" "),t.anticipos.length?i("v-expansion-panel",{attrs:{dark:""}},[i("v-expansion-panel-content",{scopedSlots:t._u([{key:"header",fn:function(){return[i("span",[i("v-badge",{scopedSlots:t._u([{key:"badge",fn:function(){return[i("span",[t._v(t._s(t.anticipos.length))])]},proxy:!0}],null,!1,1014625448)},[t._v("\n            Anticipos del tercero\n          ")])],1)]},proxy:!0}],null,!1,2586639714)},[t._v(" "),i("v-data-table",{attrs:{items:t.anticipos,"hide-actions":""},scopedSlots:t._u([{key:"headers",fn:function(e){return[i("tr",{staticStyle:{height:"10px !important"}},[i("th",{staticClass:"text-xs-center"},[t._v("No.")]),t._v(" "),i("th",[t._v("Fecha")]),t._v(" "),i("th",[t._v("Cuenta")]),t._v(" "),i("th",[t._v("Origen")]),t._v(" "),i("th",{staticClass:"text-xs-right"},[t._v("Valor")])])]}},{key:"items",fn:function(e){return[i("tr",[i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.consecutivo))]),t._v(" "),i("td",[t._v(t._s(e.item.fecha_documento))]),t._v(" "),i("td",[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.item.cuenta.nombre))]),t._v(" "),i("v-list-tile-sub-title",[t._v("CÃ³digo: "+t._s(e.item.cuenta.codigo))])],1)],1)],1),t._v(" "),i("td",[t._v(t._s(e.item.origen))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(t.currency(e.item.valor)))])])]}}],null,!1,445387086)})],1)],1):t._e(),t._v(" "),i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-card",[i("v-data-table",{attrs:{items:[1],"hide-actions":"","hide-headers":"","no-data-text":""},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",{staticStyle:{height:"10px !important"}},[i("th",[i("v-switch",{attrs:{label:"Anticipo directo al tercero","hide-details":""},model:{value:t.siDirecto,callback:function(e){t.siDirecto=e},expression:"siDirecto"}})],1),t._v(" "),i("th",{staticClass:"text-xs-center"},[i("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"`required|min_value:0`"}],key:"inputDirecto",staticClass:"ma-0 py-1",attrs:{disabled:!t.siDirecto,name:"anticipo directo","prepend-icon":"attach_money","data-vv-as":"Valor","error-messages":t.errors.collect("anticipo directo")},model:{value:t.anticipoDirecto,callback:function(e){t.anticipoDirecto=t._n(e)},expression:"anticipoDirecto"}})],1)])]}}])}),t._v(" "),i("v-divider"),t._v(" "),i("v-card-title",{staticClass:"py-1"},[i("span",{staticClass:"title"},[t._v("Anticipos a contratos")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.crearRegistro(e)}}},[i("v-icon",{attrs:{left:""}},[t._v("add")]),t._v("\n              Crear anticipo\n            ")],1)],1),t._v(" "),i("v-data-table",{attrs:{items:t.registros,headers:t.headers,"hide-actions":"","no-data-text":"No registra anticipos a contratos."},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",[i("td",[i("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"autocompleteContrato"+e.index,attrs:{placeholder:"Seleccionar contrato",items:t.contratos,name:"contrato"+e.index,"return-object":"","data-vv-as":"contrato","error-messages":t.errors.collect("contrato"+e.index)},on:{change:function(t){e.item.plan_cobertura=null}},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("div",{staticClass:"content-v-list-tile-p0",staticStyle:{width:"100% !important"}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("No. "+t._s(e.item.numero_contrato))]),t._v(" "),i("v-list-tile-sub-title",[t._v(t._s(e.item.entidad.nombre))])],1)],1)],1)]}},{key:"item",fn:function(e){return[i("div",{staticStyle:{width:"100% !important"}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("No. "+t._s(e.item.numero_contrato))]),t._v(" "),i("v-list-tile-sub-title",[t._v(t._s(e.item.entidad.nombre))])],1)],1)],1)]}}],null,!0),model:{value:e.item.contrato,callback:function(i){t.$set(e.item,"contrato",i)},expression:"props.item.contrato"}})],1),t._v(" "),i("td",{staticClass:"text-xs-center"},[i("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"selectPlanCobertura"+e.index,attrs:{disabled:!e.item.contrato,placeholder:"Seleccionar plan de cobertura",items:e.item.contrato?t.contratos.find(function(t){return t.id===e.item.contrato.id}).planes_cobertura:[],name:"planCobertura"+e.index,"return-object":"","data-vv-as":"plan de cobertura","error-messages":t.errors.collect("planCobertura"+e.index)},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("div",{staticClass:"content-v-list-tile-p0",staticStyle:{width:"100% !important"}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.item.nombre))]),t._v(" "),i("v-list-tile-sub-title",[t._v("Estado: "+t._s(e.item.estado))])],1)],1)],1)]}},{key:"item",fn:function(e){return[i("div",{staticStyle:{width:"100% !important"}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.item.nombre))]),t._v(" "),i("v-list-tile-sub-title",[t._v("Estado: "+t._s(e.item.estado))])],1)],1)],1)]}}],null,!0),model:{value:e.item.plan_cobertura,callback:function(i){t.$set(e.item,"plan_cobertura",i)},expression:"props.item.plan_cobertura"}})],1),t._v(" "),i("td",{staticClass:"text-xs-center",staticStyle:{"min-width":"200px !important"}},[i("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:1",expression:"`required|min_value:1`"}],key:"numberValor"+e.index,attrs:{name:"valor"+e.index,"prepend-icon":"attach_money","data-vv-as":"valor","error-messages":t.errors.collect("valor"+e.index)},model:{value:e.item.valor,callback:function(i){t.$set(e.item,"valor",t._n(i))},expression:"props.item.valor"}})],1),t._v(" "),i("td",{staticClass:"text-xs-center"},[i("v-tooltip",{attrs:{right:""}},[i("v-btn",{staticClass:"darken-3",attrs:{slot:"activator",flat:"",icon:"",color:"red"},on:{click:function(i){return i.stopPropagation(),t.registros.splice(e.index,1)}},slot:"activator"},[i("v-icon",[t._v("delete")])],1),t._v(" "),i("span",[t._v("Borrar")])],1)],1)])]}}])})],1)],1)],1),t._v(" "),i("v-divider"),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        Cerrar\n      ")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.asignar}},[t._v("\n        Guardar\n      ")])],1)],1)],1)},o=[],n={render:a,staticRenderFns:o};e.a=n}});
//# sourceMappingURL=367.ab546007bbfb5638f28f.js.map