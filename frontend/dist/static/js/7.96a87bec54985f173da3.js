webpackJsonp([7],{1503:function(e,a,o){var t=o(1504);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);o(456)("e03d2112",t,!0,{})},1504:function(e,a,o){a=e.exports=o(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"AnexosDeclaracion.vue",sourceRoot:""}])},1505:function(e,a,o){"use strict";var t=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",[o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[o("form",{ref:"form"},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3"},[o("span",{staticClass:"headline"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),o("v-divider"),e._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5|not_in:"+e.codigosUsados,expression:"'required|max:5|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":e.errors.collect("codigo")},model:{value:e.anexoDeclaracion.codigo,callback:function(a){e.$set(e.anexoDeclaracion,"codigo",a)},expression:"anexoDeclaracion.codigo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.anexoDeclaracion.nombre,callback:function(a){e.$set(e.anexoDeclaracion,"nombre",a)},expression:"anexoDeclaracion.nombre"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[o("v-switch",{attrs:{color:"success",label:e.anexoDeclaracion.estado,"true-value":"Activo","false-value":"Inactivo"},model:{value:e.anexoDeclaracion.estado,callback:function(a){e.$set(e.anexoDeclaracion,"estado",a)},expression:"anexoDeclaracion.estado"}})],1)],1)],1)],1),e._v(" "),o("v-divider"),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{flat:""},on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(a){return e.save()}}},[e._v("Guardar")])],1)],1)],1)]),e._v(" "),o("v-dialog",{attrs:{"max-width":"290"},model:{value:e.destroyFila,callback:function(a){e.destroyFila=a},expression:"destroyFila"}},[o("v-card",[o("v-card-text",{attrs:{color:"blue-grey darken-1"}},[e._v("¿Está seguro/a de eliminar el campo "),o("span",{domProps:{textContent:e._s(e.anexoDeclaracion.nombre+"?")}})]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(a){e.destroyFila=!1}}},[e._v("No")]),e._v(" "),o("v-btn",{attrs:{color:"primary",flat:"flat"},on:{click:function(a){return e.eliminar(e.anexoDeclaracion)}}},[e._v("Si")])],1)],1)],1),e._v(" "),o("v-card",[o("v-toolbar",{staticClass:"elevation-0 toolbar--dense"},[o("v-toolbar-title",[e._v("Anexos de Declaración ")]),e._v(" "),o("v-spacer"),e._v(" "),e.infoComponent&&e.infoComponent.permisos.agregar?o("v-btn",{attrs:{fab:"",small:"",color:"accent"},nativeOn:{click:function(a){e.dialog=!0}}},[o("v-icon",[e._v("add")])],1):e._e()],1),e._v(" "),o("v-card-title",[o("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","hide-details":"",flat:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.anexosDeclaracion,loading:e.tableLoading,pagination:e.pagination,"hide-actions":"",search:e.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(a){e.pagination=a}},scopedSlots:e._u([{key:"items",fn:function(a){return[o("td",[e._v(e._s(a.item.codigo))]),e._v(" "),o("td",[e._v(e._s(a.item.nombre))]),e._v(" "),o("td",[e._v(e._s(a.item.estado))]),e._v(" "),o("td",{staticClass:"text-xs-center"},[o("v-layout",{staticClass:"pa-1",attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs6:""}},[o("v-btn",{attrs:{icon:""},on:{click:function(o){return e.edit(a.item)}}},[o("v-icon",{attrs:{small:"",color:"accent"}},[e._v("edit")])],1)],1),e._v(" "),o("v-flex",{attrs:{xs6:""}},[a.item.removable?o("v-btn",{attrs:{icon:""},on:{click:function(o){return e.pregutar(a.item)}}},[o("v-icon",{attrs:{small:"",color:"accent"}},[e._v("delete")])],1):e._e()],1)],1)],1)]}},{key:"pageText",fn:function(a){return[e._v("\n        "+e._s(a.pageStart)+" - "+e._s(a.pageStop)+" de "+e._s(a.itemsLength)+"\n      ")]}}])},[e._v(" "),o("template",{staticStyle:{margin:"0 auto",top:"50% !important"},slot:"no-data"},[e.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),o("v-icon",[e._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1),e._v(" "),e._v(" "),o("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        No se encontraron resultados de "'+e._s(e.search)+'"\n      ')])],2),e._v(" "),o("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[o("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(a){e.$set(e.pagination,"page",a)},expression:"pagination.page"}})],1)],1)],1)},n=[],i={render:t,staticRenderFns:n};a.a=i},465:function(e,a,o){"use strict";function t(e){o(1503)}Object.defineProperty(a,"__esModule",{value:!0});var n=o(967),i=o(1505),s=o(1),r=t,c=s(n.a,i.a,!1,r,"data-v-374f691a",null);a.default=c.exports},967:function(e,a,o){"use strict";var t=o(7),n=o.n(t),i=o(12);a.a={name:"AnexosDeclaracion",data:function(){return{anexosDeclaracion:[],dialog:!1,anexoDeclaracion:{},anexoDeclaracionEdicion:"",tableLoading:!0,destroyFila:!1,pagination:{},codigosUsados:"",persistent:!1,search:"",headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},watch:{dialog:function(e){!1===e&&this.close()}},mounted:function(){var e={custom:{codigo:{not_in:"Este código ya esta registrado."}}};this.$validator.localize("es",e)},beforeMount:function(){this.formReset()},beforeCreate:function(){var e=this;this.axios.get("anedeclaraciones").then(function(a){e.anexosDeclaracion=a.data.data,e.pagination.totalItems=e.anexosDeclaracion.length,e.tableLoading=!1}).catch(function(e){return console.log("Hay un error. "+e),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("anexosDeclaracion")},modalTitulo:function(){return this.anexoDeclaracion.id?"Edición del Anexo Declaración: "+this.anexoDeclaracion.nombre:"Nuevo Anexo Declaración"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.anexoDeclaracion={id:"",codigo:"",nombre:"",estado:"Activo"},this.codigosUsados=this.getCodigosUsados()},getCodigosUsados:function(e){if(""===e||""===this.anexoDeclaracion.id){return this.anexosDeclaracion.map(function(e){return e.codigo})}},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},pregutar:function(e){this.anexoDeclaracion=e,this.destroyFila=!0},eliminar:function(e){var a=this;this.destroyFila=!1,this.axios.delete("anedeclaraciones/"+e.id).then(function(o){console.log("Eliminado"),a.anexosDeclaracion.splice(a.anexosDeclaracion.indexOf(e),1),a.$store.commit(i.b,{msg:"Anexo eliminado correctamente. ",color:"success"})})},edit:function(e){this.dialog=!0,this.anexoDeclaracionEdicion=e,this.anexoDeclaracion=JSON.parse(n()(e)),this.codigosUsados=this.getCodigosUsados(e)},save:function(){var e=this;this.$validator.validateAll().then(function(a){if(a){(e.anexoDeclaracion.id?e.axios.put("anedeclaraciones/"+e.anexoDeclaracion.id,e.anexoDeclaracion):e.axios.post("anedeclaraciones",e.anexoDeclaracion)).then(function(a){console.log(a),e.anexoDeclaracion.id?(e.$store.commit(i.b,{msg:"Anexo actualizado correctamente",color:"success"}),e.anexosDeclaracion.splice(e.anexosDeclaracion.findIndex(function(e){return e.id===a.data.data.id}),1,a.data.data)):(e.$store.commit(i.b,{msg:"Anexo creado correctamente",color:"success"}),e.anexosDeclaracion.splice(0,0,a.data.data)),e.close()}).catch(function(a){e.$store.commit(i.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})})}})}}}}});
//# sourceMappingURL=7.96a87bec54985f173da3.js.map