webpackJsonp([3],{1145:function(a,e,t){"use strict";var l=t(13),o=t.n(l),i=t(14),s=t.n(i),n=t(7),r=t.n(n),c=t(249),d=t.n(c),f=t(59),u=t(58),v=t(12);e.a={name:"FallosDetalle",components:{ToolbarList:function(){return new Promise(function(a){a()}).then(t.bind(null,247))},Loading:u.default,InputFile:function(){return t.e(288).then(t.bind(null,748))}},props:{tutelaId:{type:Number,default:0}},data:function(){return{fallos:[],fallo:{},instancias:["Primera Instancia","Segunda Instancia"],fallosIntegrales:["Si","No"],tiposFallos:["A Favor","En Contra"],payload:null,numeroTutela:null,menuDate:!1,dialog:!1,loading:!1,tableLoading:!1,loadingSubmit:!1,headers:[{text:"No. tutela",align:"left",sortable:!1,value:"noTutela"},{text:"Instancia",align:"left",sortable:!1,value:"instancia"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Fallo integral",align:"left",sortable:!1,value:"falloIntegral"},{text:"Tipo fallo",align:"left",sortable:!1,value:"tipo fallo"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},created:function(){this.getData(),this.formReset()},computed:{complementos:function(){return f.b.getters.complementosTutelas},modalTitulo:function(){return this.fallo.id?"Edición":"Nuevo Fallo"},infoComponent:function(){return this.$store.getters.getInfoComponent("fallosDetalle")},computedDateFormatted:function(){return this.formDate(this.fallo.fecha)}},methods:{getData:function(){var a=this;this.loading=!0,this.tableLoading=!0,this.axios.get("oj_tutelas/"+this.tutelaId).then(function(e){""!==e.data&&(a.fallos=e.data.data.fallos,a.numeroTutela=e.data.data.no_tutela,a.loading=!1,a.tableLoading=!1)}).catch(function(e){a.loading=!1,a.tableLoading=!1,a.$store.commit(v.b,{msg:"Error al traer los datos básicos del fallo. "+e.response,color:"danger"})})},formReset:function(){this.fallo.archivo&&this.$refs.archivoAdjunto.reset(),this.fallo={id:"",archivo:null,oj_tutela_id:this.tutelaId,no_fallo:null,instancia:null,oj_juzgado_id:null,fecha:null,fallo_integral:null,tipo_fallo:null,desc_fallo:null}},formDate:function(a){if(!a)return null;var e=a.split("-"),t=d()(e,3);return t[0]+"/"+t[1]+"/"+t[2]},edit:function(a){this.dialog=!0,this.fallo=JSON.parse(r()(a))},close:function(){this.dialog=!1,this.loadingSubmit=!1,this.formReset(),this.$validator.reset()},validador:function(a){return this.$validator.validateAll(a).then(function(a){return a})},addFormData:function(){var a=new FormData;a.append("id",this.fallo.id),a.append("oj_tutela_id",this.fallo.oj_tutela_id),a.append("no_fallo",this.fallo.no_fallo),a.append("instancia",this.fallo.instancia),a.append("oj_juzgado_id",this.fallo.oj_juzgado_id),a.append("fecha",this.fallo.fecha),a.append("fallo_integral",this.fallo.fallo_integral),a.append("tipo_fallo",this.fallo.tipo_fallo),a.append("desc_fallo",this.fallo.desc_fallo),a.append("archivo",void 0===this.fallo.archivo?"":this.fallo.archivo),this.payload=a},save:function(){var a=this;return s()(o.a.mark(function e(){var t,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$refs.archivoAdjunto.validate("formFallos");case 2:return t=e.sent,e.next=5,a.validador("formFallos");case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}e.t0=t;case 8:if(!e.t0){e.next=15;break}a.loadingSubmit=!0,a.addFormData(),l=a.fallo.id?a.axios.post("oj_tutfallos/"+a.fallo.id,a.payload):a.axios.post("oj_tutfallos",a.payload),l.then(function(e){if(a.fallo.id)a.$store.commit(v.b,{msg:"El fallo se actualizó correctamente",color:"success"}),a.fallos.splice(a.fallos.findIndex(function(a){return a.id===e.data.data.id}),1,e.data.data);else{a.$store.commit(v.b,{msg:"El fallo se creó correctamente",color:"success"});var t=e.data.data;t.oj_juzgado_id=parseInt(t.oj_juzgado_id),a.fallos.splice(0,0,e.data.data)}a.close()}).catch(function(e){a.$store.commit(v.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"}),a.close()}),e.next=16;break;case 15:a.$store.commit(v.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 16:case"end":return e.stop()}},e,a)}))()}}}},2049:function(a,e,t){var l=t(2050);"string"==typeof l&&(l=[[a.i,l,""]]),l.locals&&(a.exports=l.locals);t(456)("6fa2325d",l,!0,{})},2050:function(a,e,t){e=a.exports=t(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"FallosDetalle.vue",sourceRoot:""}])},2051:function(a,e,t){"use strict";var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("v-dialog",{attrs:{width:"720px"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[t("v-form",{attrs:{"data-vv-scope":"formFallos"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[t("span",{staticClass:"title"},[a._v(a._s(a.modalTitulo))])]),a._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"no. tutela",attrs:{label:"No. Tutela","prepend-icon":"description",disabled:"",name:"no. tutela","error-messages":a.errors.collect("no. tutela")},model:{value:a.numeroTutela,callback:function(e){a.numeroTutela=e},expression:"numeroTutela"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"no. fallo",attrs:{label:"No. Fallo",name:"no. fallo","error-messages":a.errors.collect("no. fallo")},model:{value:a.fallo.no_fallo,callback:function(e){a.$set(a.fallo,"no_fallo",e)},expression:"fallo.no_fallo"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:a.instancias,name:"instancia",label:"Instancia","error-messages":a.errors.collect("instancia"),required:""},model:{value:a.fallo.instancia,callback:function(e){a.$set(a.fallo,"instancia",e)},expression:"fallo.instancia"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Juzgado",items:a.complementos.juzgados,"item-value":"id","item-text":"nombre",name:"juzgado",required:"","error-messages":a.errors.collect("juzgado"),clearable:""},scopedSlots:a._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:a._s(e.item.nombre)}})],1)]]}}]),model:{value:a.fallo.oj_juzgado_id,callback:function(e){a.$set(a.fallo,"oj_juzgado_id",e)},expression:"fallo.oj_juzgado_id"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:a.menuDate,callback:function(e){a.menuDate=e},expression:"menuDate"}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",readonly:"",name:"fecha","error-messages":a.errors.collect("fecha")},slot:"activator",model:{value:a.computedDateFormatted,callback:function(e){a.computedDateFormatted=e},expression:"computedDateFormatted"}}),a._v(" "),t("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(e){a.menuDate=!1},change:function(){var e=a.$validator.errors.items.findIndex(function(a){return"fecha"===a.field});a.$validator.errors.items.splice(-1!==e?e:0,-1!==e?1:0)}},model:{value:a.fallo.fecha,callback:function(e){a.$set(a.fallo,"fecha",e)},expression:"fallo.fecha"}})],1)],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:a.fallosIntegrales,label:"Fallo integral",name:"fallo integral","error-messages":a.errors.collect("fallo integral"),required:""},model:{value:a.fallo.fallo_integral,callback:function(e){a.$set(a.fallo,"fallo_integral",e)},expression:"fallo.fallo_integral"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:a.tiposFallos,label:"Tipo fallo",name:"tipo fallo","error-messages":a.errors.collect("tipo fallo"),required:""},model:{value:a.fallo.tipo_fallo,callback:function(e){a.$set(a.fallo,"tipo_fallo",e)},expression:"fallo.tipo_fallo"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("v-layout",{attrs:{"align-center":"","fill-height":""}},[t("v-flex",{attrs:{"d-flex":"",xs10:"",sm8:""}},[t("input-file",{ref:"archivoAdjunto",staticClass:"mb-3",attrs:{label:"Adjuntar archivo","file-name":a.fallo.archivo?a.fallo.archivo.nombre:null,accept:"application/pdf",hint:"Extenciones aceptadas: pdf","prepend-icon":"attach_file"},model:{value:a.fallo.archivo,callback:function(e){a.$set(a.fallo,"archivo",e)},expression:"fallo.archivo"}})],1),a._v(" "),t("v-flex",{attrs:{"d-flex":"",xs2:"",sm4:""}},[t("v-tooltip",{attrs:{bottom:""}},[t("v-btn",{attrs:{slot:"activator",fab:"",color:"success",small:"",href:a.fallo.archivo?a.fallo.archivo.url_signed:"",target:"_blank"},slot:"activator"},[t("v-icon",[a._v("remove_red_eye")])],1),a._v(" "),t("span",[a._v("Ver archivo")])],1)],1)],1)],1),a._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"descFallo",attrs:{label:"Descripción","prepend-icon":"format_align_left",name:"descripcion fallo","error-messages":a.errors.collect("descripcion fallo")},model:{value:a.fallo.desc_fallo,callback:function(e){a.$set(a.fallo,"desc_fallo",e)},expression:"fallo.desc_fallo"}})],1)],1)],1),a._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-spacer"),a._v(" "),t("v-btn",{attrs:{loading:a.loadingSubmit},on:{click:a.close}},[a._v("Cancelar")]),a._v(" "),t("v-btn",{attrs:{color:"primary",loading:a.loadingSubmit,disabled:a.errors.any()},on:{click:a.save}},[a._v("Guardar")])],1)],1)],1)],1),a._v(" "),t("v-card",[t("toolbar-list",{attrs:{info:a.infoComponent,title:"Fallos",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Fallo",btnplustruncate:""},on:{click:function(e){a.dialog=!0}}}),a._v(" "),t("v-container",{attrs:{fluid:""}},[t("loading",{model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}}),a._v(" "),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.fallos,loading:a.tableLoading,"rows-per-page-text":"Registros por página"},scopedSlots:a._u([{key:"items",fn:function(e){return[t("td",[a._v(a._s(a.numeroTutela))]),a._v(" "),t("td",[a._v(a._s(e.item.instancia))]),a._v(" "),t("td",[a._v(a._s(e.item.fecha))]),a._v(" "),t("td",[a._v(a._s(e.item.fallo_integral))]),a._v(" "),t("td",[a._v(a._s(e.item.tipo_fallo))]),a._v(" "),t("td",[a._v(a._s(e.item.desc_fallo))]),a._v(" "),t("td",[t("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(t){a.$set(e.item,"show",t)},expression:"props.item.show"}},[t("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(t){a.$set(e.item,"show",t)},expression:"props.item.show"}},[t("v-icon",[a._v("chevron_left")]),a._v(" "),t("v-icon",[a._v("close")])],1),a._v(" "),t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(t){return a.edit(e.item)}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"}},[a._v("mode_edit")])],1),a._v(" "),t("span",[a._v("Editar")])],1)],1)],1)]}}])},[a._v(" "),t("template",{slot:"no-data"},[a.tableLoading?t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[a._v("\n            Estamos cargando los registros. "),t("v-icon",[a._v("sentiment_satisfied_alt")])],1):t("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[a._v("\n            Lo sentimos, no tenemos registros para mostrar. "),t("v-icon",[a._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)],1)},o=[],i={render:l,staticRenderFns:o};e.a=i},467:function(a,e,t){"use strict";function l(a){t(2049)}Object.defineProperty(e,"__esModule",{value:!0});var o=t(1145),i=t(2051),s=t(1),n=l,r=s(o.a,i.a,!1,n,"data-v-49375ed0",null);e.default=r.exports}});
//# sourceMappingURL=3.396ffaead73003a286e2.js.map