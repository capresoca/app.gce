webpackJsonp([211],{1040:function(e,t,a){"use strict";var r=a(249),o=a.n(r),c=a(13),n=a.n(c),i=a(14),l=a.n(i),s=a(7),u=a.n(s),d=a(59),v=a(40),f=a(248),m=a(12),_=a(0),p=a.n(_);t.a={name:"RegistroCuentaPorCobrar",components:{RegistroNiif:function(){return a.e(0).then(a.bind(null,457))},Postulador:function(){return a.e(287).then(a.bind(null,747))}},props:["parametros"],data:function(){return{cxcs:[],search:"",fechaActual:"2018-01-01",pickerFechaActual:!1,pickerFechaFactura:!1,indexUpdateConceptoCxc:0,dialogFormNiif:!1,confirmar:!1,imprime:!1,dialog:!1,dialog2:!1,dialog3:!1,dialogEliminar:!1,detalle_anulacion:null,cuentaNiff:null,niifNueva:null,cardDialog:!1,tableLoading:!1,numeroFacturaResgistrado:null,valorBase:0,valorRetencion:0,valorFacturado:null,estados:["Registrado","Confirmado","Anulado"],cr_cuentaxcobrar:{id:null,consecutivo:null,observaciones:null,estado:null,fecha:this.moment().format("YYYY-MM-DD"),fecha_factura:this.moment().format("YYYY-MM-DD"),fecha_vencimiento:null,plazo:null,numero_factura:null,valor:0,creditos:0,debitos:0,nf_cencosto_id:null,nf_niif_id:null,cr_cliente_id:null,cliente:null,niif:null,cencosto:null,detalles:[]},detalle:{},pickerFechaActivoNuevo:!1,date:"",pagination:{},headers:[{text:"Concepto",value:"concepto.codigo",align:"left",sortable:!1},{text:"Descripcion",value:"concepto.nombre",align:"left",sortable:!1},{text:"Naturaleza",value:"naturaleza",align:"left",sortable:!1},{text:"Cuenta",value:"niif.codigo",align:"left",sortable:!1},{text:"Valor concepto",value:"valor",align:"left",sortable:!1},{text:"Opciones",value:"id",align:"left",sortable:!1}]}},computed:{tituloDetalle:function(){return this.detalle.id?"En Edición del Detalle con Concepto N° "+(this.detalle.concepto?this.detalle.concepto.codigo:" ####"):"Nuevo Detalle de Cuenta por Cobrar"},complementosFormCxc:function(){return d.b.getters.complementosFormComDiario},tapTitulo:function(){return this.cr_cuentaxcobrar.id?"En Edición":"Nueva Cuenta por Cobrar"}},watch:{"cr_cuentaxcobrar.cliente":function(e){this.cr_cuentaxcobrar.niif=e?e.niif:null,this.cr_cuentaxcobrar.plazo=e?parseInt(e.plazo):null},"cr_cuentaxcobrar.plazo":function(e){this.cr_cuentaxcobrar.fecha_vencimiento=e?this.calcularPlazo(this.cr_cuentaxcobrar.fecha_factura,e):null},"cr_cuentaxcobrar.fecha":function(e){var t=this.parseDate(e);null!=t&&(this.cr_cuentaxcobrar.fecha=t)},"cr_cuentaxcobrar.fecha_factura":function(e){var t=this.parseDate(e);null!=t&&(this.cr_cuentaxcobrar.fecha_factura=t);var a=parseInt(this.cr_cuentaxcobrar.plazo);this.cr_cuentaxcobrar.fecha_vencimiento=e?this.calcularPlazo(e,a):null},"cr_cuentaxcobrar.detalles":function(e){var t=this;if(this.cr_cuentaxcobrar.debitos=0,this.cr_cuentaxcobrar.creditos=0,e.forEach(function(e){"Crédito"!==e.concepto.niif.clascuenta.naturaleza?t.cr_cuentaxcobrar.debitos=t.cr_cuentaxcobrar.debitos+e.valor:t.cr_cuentaxcobrar.creditos=t.cr_cuentaxcobrar.creditos+e.valor}),this.cr_cuentaxcobrar.valor=this.cr_cuentaxcobrar.debitos-this.cr_cuentaxcobrar.creditos,!(this.cr_cuentaxcobrar.valor<0))return this.cr_cuentaxcobrar.valor;this.cr_cuentaxcobrar.valor=0},"detalle.concepto":function(e){null===e?(this.$validator.reset(),this.formReset()):(this.detalle.niif=e?e.niif:null,this.detalle.nf_niif_id=e?e.niif.id:null)},"detalle.niif":function(e){this.detalle.tercero=e&&e.maneja_tercero?this.cr_cuentaxcobrar.cliente.tercero:null,this.detalle.cencosto=e&&e.maneja_ccosto?this.detalle.cencosto:null},"detalle.tercero":function(e){null===e&&this.$validator.reset()},valorBase:function(e){if(e){var t=this.detalle.conrtf?this.detalle.conrtf.porcentaje:null;this.valorRetencion=e*(t/100),this.detalle.valor=this.valorRetencion}},cardDialog:function(e){!1===e&&this.dialogDetalle(e)},dialogFormNiif:function(e){e||(this.niifNueva=null)},"detalle.conrtf":function(e){null===e?this.$validator.reset():""===e.porcentaje&&this.$store.commit(m.b,{msg:"El concepto de retención no cuenta con un porcentaje. ",color:"danger"})}},methods:{refresh:function(){this.$validator.reset(),this.cr_cuentaxcobrar=JSON.parse(u()(this.cr_cuentaxcobrar))},close:function(){this.formReset(),this.refresh(),this.$store.dispatch(v.c,{contexto:this,itemId:this.parametros.tabOrigin})},openNuevaNiif:function(e){this.niifNueva=e,this.dialogFormNiif=!0},goNiif:function(e){1===this.niifNueva?this.cr_cuentaxcobrar.niif=e:2===this.niifNueva&&(this.detalle.niif=e),this.dialogFormNiif=!1},getRegistro:function(e){var t=this;this.axios.get("cr_cuentasxcobrars/"+e).then(function(e){t.cr_cuentaxcobrar=e.data.data,t.numeroFacturaResgistrado=t.getNumFacturaUsado()}).catch(function(e){t.$store.commit(m.a,{msg:"Hay un error al traer la cuenta por cobrar.",color:"danger"})})},calcularPlazo:function(e,t){if(e&&t)return p()(e).add(t,"d").format("YYYY-MM-DD")},getNumFacturaUsado:function(){var e=this;return this.cxcs.map(function(t){if(null==e.cr_cuentaxcobrar.numero_factura||e.cr_cuentaxcobrar.numero_factura!==t.numero_factura)return t.numero_factura})},openCardDialog:function(){this.cr_cuentaxcobrar.cr_cliente_id?this.cardDialog=!this.cardDialog:(this.cardDialog=!1,this.$store.commit(m.b,{msg:"Debe seleccionar un cliente.",color:"error"}))},dialogDetalle:function(e){"abrir"===e?this.cardDialog=!0:(this.cardDialog=!1,this.formReset(),this.$validator.reset())},editarDetalle:function(e){this.cardDialog=!0,this.detalle=JSON.parse(u()(e))},eliminarDetalle:function(e){this.dialogEliminar=!1,this.cr_cuentaxcobrar.detalles.splice(this.cr_cuentaxcobrar.detalles.indexOf(e),1),this.formReset()},agregarCxcDetalle:function(e){var t=this;return l()(n.a.mark(function a(){var r,o,c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$refs.postulaConcepto.validate();case 2:return r=a.sent,a.next=5,t.$refs.postulaCuentaconcepto.validate();case 5:return o=a.sent,a.next=8,t.$refs.postulaTercero.validate();case 8:return c=a.sent,a.next=11,t.validador("formCxcdetalle");case 11:if(a.t2=a.sent,!a.t2){a.next=14;break}a.t2=r;case 14:if(a.t1=a.t2,!a.t1){a.next=17;break}a.t1=o;case 17:if(a.t0=a.t1,!a.t0){a.next=20;break}a.t0=c;case 20:if(!a.t0){a.next=25;break}e.id?(t.cr_cuentaxcobrar.detalles.splice(t.cr_cuentaxcobrar.detalles.findIndex(function(t){return t.id===e.id}),1),t.cr_cuentaxcobrar.detalles.push(e)):t.cr_cuentaxcobrar.detalles.push(e),t.formReset(),a.next=27;break;case 25:console.log("erroor"),null==t.detalle.cr_concepto_id?t.$store.commit(m.b,{msg:"No se ha seleccionado el concepto.",color:"error"}):null==t.detalle.nf_niif_id?t.$store.commit(m.b,{msg:"No se ha seleccionado la cuenta del concepto.",color:"error"}):null===t.detalle.concepto.niif.clascuenta.naturaleza&&t.$store.commit(m.b,{msg:"La cuenta no presenta naturaleza.",color:"error"});case 27:case"end":return a.stop()}},a,t)}))()},confirmarEstado:function(e){"yesConfirmar"===e?(this.confirmar&&this.imprime?(this.cr_cuentaxcobrar.estado="Confirmado",this.imprimirCuenta()):this.cr_cuentaxcobrar.estado="Confirmado",this.dialog=!1,this.dialog2=!1,this.save(),this.$store.commit(m.b,{msg:"El estado de la cuenta ha sido Confirmado",color:"success"})):(this.imprime&&this.imprimirCuenta(),this.confirmar=!1,this.dialog=!1,this.dialog2=!1,this.cr_cuentaxcobrar.estado="Registrado",this.save(),this.$store.commit(m.b,{msg:"El estado de la cuenta ha sido Registrado",color:"success"}))},esAnulado:function(e,t){this.dialog3=!1,this.dialog2=!1,e.detalle_anulacion=t,this.save()},enviarCambio:function(){this.confirmar?this.dialog=!0:this.confirmar&&this.imprime?this.dialog=!0:this.imprime?(this.cr_cuentaxcobrar.estado="Registrado",this.imprimirCuenta(),this.save()):"Anulado"===this.cr_cuentaxcobrar.estado?this.dialog3=!0:"Anulado"===this.cr_cuentaxcobrar.estado&&this.imprime?this.dialog3=!0:(this.cr_cuentaxcobrar.estado="Registrado",this.save(),this.$store.commit(m.b,{msg:"El estado de la cuenta ha sido Registrado",color:"success"}))},save:function(){var e=this,t=this.cr_cuentaxcobrar.id?"editar":"crear";this.axios.post("cr_cuentasxcobrars",this.cr_cuentaxcobrar).then(function(a){console.log("LOGO",a),e.$store.commit(m.b,{msg:"Se "+(e.cr_cuentaxcobrar.id?"actualizaron los datos":"realizó el registro")+" correctamente de la No. CXC "+a.data.data.numero_factura+".",color:"success"}),e.$store.commit(f.C,{cr_cuentaxcobrar:a.data.data,estado:t,key:e.parametros.key}),e.$store.dispatch(v.c,{contexto:e,itemId:e.parametros.tabOrigin})}).catch(function(t){e.$store.commit(m.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})})},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},parseDate:function(e){if(!e)return null;if(3!==e.split("/").length)return null;var t=e.split("/"),a=o()(t,3),r=a[0],c=a[1];return a[2]+"-"+r.padStart(2,"0")+"-"+c.padStart(2,"0")},confirmarSave:function(){var e=this;return l()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.postulaCliente.validate();case 2:return a=t.sent,t.next=5,e.$refs.buscarCuentaxcobrar.validate();case 5:return r=t.sent,t.next=8,e.validador("formCuentaPorCobrar");case 8:if(t.t2=t.sent,!t.t2){t.next=11;break}t.t2=a;case 11:if(t.t1=t.t2,!t.t1){t.next=14;break}t.t1=r;case 14:if(t.t0=t.t1,!t.t0){t.next=17;break}t.t0=e.cr_cuentaxcobrar.detalles>1;case 17:if(!t.t0){t.next=21;break}e.dialog2=!0,t.next=22;break;case 21:e.cr_cuentaxcobrar.detalles.length?e.cr_cuentaxcobrar.creditos>e.cr_cuentaxcobrar.debitos?e.$store.commit(m.b,{msg:"El valor crédito no puede ser superior al del débito.",color:"error"}):e.dialog2=!0:e.$store.commit(m.b,{msg:"Se deben agregar al menos dos detalles.",color:"error"});case 22:case"end":return t.stop()}},t,e)}))()},calcularValorCxc:function(){this.cr_cuentaxcobrar.creditos=0,this.cr_cuentaxcobrar.debitos=0,this.cr_cuentaxcobrar.valor=0;for(var e=0;e<this.conceptosCuentasPorCobrar.length;e++)"Crédito"===this.conceptosCuentasPorCobrar[e].naturaleza&&(this.cr_cuentaxcobrar.creditos=parseInt(this.cr_cuentaxcobrar.creditos)+parseInt(this.conceptosCuentasPorCobrar[e].valor),this.cr_cuentaxcobrar.valor=parseInt(this.cr_cuentaxcobrar.valor)-parseInt(this.conceptosCuentasPorCobrar[e].valor)),"Débito"===this.conceptosCuentasPorCobrar[e].naturaleza&&(this.cr_cuentaxcobrar.debitos=parseInt(this.cr_cuentaxcobrar.debitos)+parseInt(this.conceptosCuentasPorCobrar[e].valor),this.cr_cuentaxcobrar.valor=parseInt(this.cr_cuentaxcobrar.valor)+parseInt(this.conceptosCuentasPorCobrar[e].valor))},eliminarConceptoCuenta:function(e){this.conceptosCuentasPorCobrar.splice(e.index,1),this.calcularValorCxc()},edit:function(e,t){this.ordenEdit=!0,this.cr_cuentaxcobrar=e,this.conceptosCuentasPorCobrar=t},formReset:function(){this.detalle={id:null,cr_concepto_id:null,cr_cuentaxcobrar_id:null,gn_tercero_id:null,nf_cencosto_id:null,nf_conrtf_id:null,nf_niif_id:null,valor:null,niif:null,tercero:null,cencosto:null,conrtf:null,concepto:null}}},formCuenta:function(){this.pickerFechaActual=!1,this.pickerFechaFactura=!1,this.fechaActual=p()().format("YYYY-MM-DD"),this.cr_cuentaxcobrar.fecha=p()().format("YYYY-MM-DD"),this.cr_cuentaxcobrar.fecha_factura=p()().format("YYYY-MM-DD"),this.ordenEdit=!1},beforeCreate:function(){var e=this;this.axios.get("cr_cuentasxcobrars").then(function(t){e.cxcs=t.data.data,e.numeroFacturaResgistrado=e.getNumFacturaUsado()}).catch(function(){e.$store.commit(m.b,{msg:"Hay un error al traer las cuentas por cobrar. ",color:"danger"})})},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id);var e={custom:{factura:{not_in:"El número factura ya se encuentra registrado."}}};this.$validator.localize("es",e)},beforeMount:function(){this.formReset(),this.fechaActual=p()().format("YYYY-MM-DD"),this.cr_cuentaxcobrar.fecha=p()().format("YYYY-MM-DD"),this.cr_cuentaxcobrar.fecha_factura=p()().format("YYYY-MM-DD")}}},1719:function(e,t,a){var r=a(1720);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(456)("7f6b3790",r,!0,{})},1720:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroCuentaPorCobrar.vue",sourceRoot:""}])},1721:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-text",{staticClass:"title font-weight-light"},[e._v("¿Esta seguro que desea confirmar el estado de la cuenta?")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.confirmarEstado()}}},[e._v("No")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.confirmarEstado("yesConfirmar")}}},[e._v("Si")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3"},[a("span",{staticClass:"title"},[e._v("¿Qué desea hacer?")])]),e._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{staticClass:"justify-center",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-checkbox",{staticClass:"shrink mr-2",attrs:{color:"teal","off-icon":"done","on-icon":"done_all",default:"",value:"Confirmado"==e.cr_cuentaxcobrar.estado,disabled:"Anulado"==e.cr_cuentaxcobrar.estado,label:"Anulado"!=e.cr_cuentaxcobrar.estado?"Confirmar":"Anulado","hide-details":""},model:{value:e.confirmar,callback:function(t){e.confirmar=t},expression:"confirmar"}})],1),e._v(" "),a("v-flex",{attrs:{xs4:""}},[null!=e.cr_cuentaxcobrar.id?a("v-checkbox",{staticClass:"shrink mr-2",attrs:{color:"black","off-icon":"far fa-file-pdf","on-icon":"far fa-file-pdf","hide-details":"",label:"Imprimir"},model:{value:e.imprime,callback:function(t){e.imprime=t},expression:"imprime"}}):e._e()],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.enviarCambio()}}},[e._v("Aceptar")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog3,callback:function(t){e.dialog3=t},expression:"dialog3"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3"},[a("v-card-text",{staticClass:"title"},[e._v("¿Por qué anula esta cuenta?")])],1),e._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:e.detalle_anulacion,callback:function(t){e.detalle_anulacion=t},expression:"detalle_anulacion"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                  Detalle de anulación\n                ")])])],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.esAnulado(e.cr_cuentaxcobrar,e.detalle_anulacion)}}},[e._v("Enviar")])],1)],1)],1)],1),e._v(" "),a("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[a("v-toolbar-title",[e._v(" "+e._s(e.tapTitulo)+" ")]),e._v("  \n    "),a("v-spacer"),e._v(" "),null!=e.cr_cuentaxcobrar.id?a("h2",{staticClass:"title"},[e._v("Cuenta por Cobrar")]):e._e(),e._v(" "),null!=e.cr_cuentaxcobrar.id?a("div",[a("v-chip",{attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[a("span",{staticClass:"subheading"},[e._v("N°")]),e._v(" \n        "),a("span",{staticClass:"subheading",domProps:{textContent:e._s(null==e.cr_cuentaxcobrar.consecutivo?"0000":e.cr_cuentaxcobrar.consecutivo)}})])],1):e._e()],1),e._v(" "),a("registro-niif",{attrs:{value:e.dialogFormNiif,cue:e.cuentaNiff},on:{cancelar:function(t){e.dialogFormNiif=!1},crear:function(t){return e.goNiif(t)}}}),e._v(" "),a("v-form",{attrs:{"data-vv-scope":"formCuentaPorCobrar"}},[a("v-container",{attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md9:"",lg9:"",xl9:""}},[a("v-layout",{staticClass:"pa-0",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:"",xl6:""}},[a("postulador",{ref:"postulaCliente",attrs:{nodata:"Busqueda por nombre o número de documento.",required:"",hint:"tercero.nombre_completo",itemtext:"tercero.identificacion_completa",datatitle:"tercero.identificacion_completa",datasubtitle:"tercero.nombre_completo",filter:"tercero.identificacion_completa,tercero.nombre_completo",label:"Cliente",scope:"formCuentaPorCobrar",entidad:"clientes",preicon:"person_pin",value:e.cr_cuentaxcobrar.cliente,clearable:""},on:{change:function(t){return e.cr_cuentaxcobrar.cr_cliente_id=t},objectReturn:function(t){return e.cr_cuentaxcobrar.cliente=t}}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:"",xl6:""}},[a("postulador",{ref:"buscarCuentaxcobrar",attrs:{nodata:"Busqueda por código o nombre.",required:"",hint:"nombre",itemtext:"codigo",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:e.cr_cuentaxcobrar.nf_niif_id?"Cuenta":"cuenta",scope:"formCuentaPorCobrar",entidad:"niifs",preicon:"list_alt",routeparams:"nivel:auxiliar=1",value:e.cr_cuentaxcobrar.niif,clearable:"",btnplustruncate:""},on:{change:function(t){return e.cr_cuentaxcobrar.nf_niif_id=t},objectReturn:function(t){return e.cr_cuentaxcobrar.niif=t},click:function(t){return e.openNuevaNiif(1)}}})],1),e._v(" "),a("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm12:"",md6:"",lg6:"",xl6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"centro de costo",attrs:{label:"Centro de Costo","persistent-hint":"",disabled:e.cr_cuentaxcobrar.niif?0===e.cr_cuentaxcobrar.niif.maneja_ccosto:null,items:e.complementosFormCxc.cencostos,"item-value":"id","item-text":"nombre",name:"centro de costo","error-messages":e.errors.collect("centro de costo"),"prepend-icon":"center_focus_weak",required:"","return-object":"",clearable:""},on:{change:function(t){return e.cr_cuentaxcobrar.nf_cencosto_id=t?t.id:null}},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}})],1)]]}}]),model:{value:e.cr_cuentaxcobrar.cencosto,callback:function(t){e.$set(e.cr_cuentaxcobrar,"cencosto",t)},expression:"cr_cuentaxcobrar.cencosto"}})],1),e._v(" "),a("v-flex",{staticClass:"pt-0",class:{"md6 lg6 xl6":!e.cr_cuentaxcobrar.id},attrs:{xs12:"",sm12:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50|not_in:"+e.numeroFacturaResgistrado,expression:"'required|max:50|not_in:' + numeroFacturaResgistrado"}],key:"factura",attrs:{prefix:null!==e.cr_cuentaxcobrar.numero_factura&&""!==e.cr_cuentaxcobrar.numero_factura?"N°":"",name:"factura",required:"",disabled:!e.cr_cuentaxcobrar.cr_cliente_id,"error-messages":e.errors.collect("factura"),label:"No. Factura"},model:{value:e.cr_cuentaxcobrar.numero_factura,callback:function(t){e.$set(e.cr_cuentaxcobrar,"numero_factura",t)},expression:"cr_cuentaxcobrar.numero_factura"}})],1),e._v(" "),e.cr_cuentaxcobrar.id?a("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm12:"",md2:"",lg2:"",xl2:""}},[a("v-select",{key:"estado",attrs:{items:e.estados,label:"Estado",name:"estado","error-messages":e.errors.collect("estado")},model:{value:e.cr_cuentaxcobrar.estado,callback:function(t){e.$set(e.cr_cuentaxcobrar,"estado",t)},expression:"cr_cuentaxcobrar.estado"}})],1):e._e(),e._v(" "),a("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"observaciones",attrs:{color:"primary",name:"observaciones",required:"","error-messages":e.errors.collect("observaciones")},model:{value:e.cr_cuentaxcobrar.observaciones,callback:function(t){e.$set(e.cr_cuentaxcobrar,"observaciones",t)},expression:"cr_cuentaxcobrar.observaciones"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                  Observaciones\n                ")])])],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:"",lg3:"",xl3:""}},[a("v-flex",{staticClass:"pa-1",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-dialog",{ref:"pickerFechaActual",attrs:{"return-value":e.cr_cuentaxcobrar.fecha,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.cr_cuentaxcobrar,"fecha",t)},"update:return-value":function(t){return e.$set(e.cr_cuentaxcobrar,"fecha",t)}},model:{value:e.pickerFechaActual,callback:function(t){e.pickerFechaActual=t},expression:"pickerFechaActual"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY-MM-DD",expression:"'required|date_format:YYYY-MM-DD'"}],key:"fecha actual",attrs:{slot:"activator",label:"Fecha Actual","prepend-icon":"event",name:"fecha actual","error-messages":e.errors.collect("fecha actual"),readonly:""},slot:"activator",model:{value:e.cr_cuentaxcobrar.fecha,callback:function(t){e.$set(e.cr_cuentaxcobrar,"fecha",t)},expression:"cr_cuentaxcobrar.fecha"}}),e._v(" "),a("v-date-picker",{attrs:{min:e.fechaActual,locale:"es",scrollable:""},on:{change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha actual"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.cr_cuentaxcobrar.fecha,callback:function(t){e.$set(e.cr_cuentaxcobrar,"fecha",t)},expression:"cr_cuentaxcobrar.fecha"}},[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.pickerFechaActual=!1}}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$refs.pickerFechaActual.save(e.cr_cuentaxcobrar.fecha)}}},[e._v("OK")])],1)],1)],1),e._v(" "),a("v-flex",{staticClass:"pa-1",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-dialog",{ref:"pickerFechaFactura",attrs:{"return-value":e.cr_cuentaxcobrar.fecha_factura,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.cr_cuentaxcobrar,"fecha_factura",t)},"update:return-value":function(t){return e.$set(e.cr_cuentaxcobrar,"fecha_factura",t)}},model:{value:e.pickerFechaFactura,callback:function(t){e.pickerFechaFactura=t},expression:"pickerFechaFactura"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY-MM-DD",expression:"'required|date_format:YYYY-MM-DD'"}],key:"fecha factura",attrs:{slot:"activator",label:"Fecha de la Factura","prepend-icon":"event","data-vv-delay":"1000",name:"fecha factura","error-messages":e.errors.collect("fecha factura"),readonly:""},slot:"activator",model:{value:e.cr_cuentaxcobrar.fecha_factura,callback:function(t){e.$set(e.cr_cuentaxcobrar,"fecha_factura",t)},expression:"cr_cuentaxcobrar.fecha_factura"}}),e._v(" "),a("v-date-picker",{attrs:{min:e.fechaActual,locale:"es",scrollable:""},model:{value:e.cr_cuentaxcobrar.fecha_factura,callback:function(t){e.$set(e.cr_cuentaxcobrar,"fecha_factura",t)},expression:"cr_cuentaxcobrar.fecha_factura"}},[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.pickerFechaFactura=!1}}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$refs.pickerFechaFactura.save(e.cr_cuentaxcobrar.fecha_factura)}}},[e._v("OK")])],1)],1)],1),e._v(" "),a("v-flex",{staticClass:"pa-1 pt-3 mb-2",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"plazo",staticClass:"mt-0 pt-0",attrs:{label:"Plazo","prepend-icon":"today",name:"plazo","error-messages":e.errors.collect("plazo"),min:"0",suffix:e.cr_cuentaxcobrar.plazo?1!==e.cr_cuentaxcobrar.plazo?"días":"día":""},model:{value:e.cr_cuentaxcobrar.plazo,callback:function(t){e.$set(e.cr_cuentaxcobrar,"plazo",e._n(t))},expression:"cr_cuentaxcobrar.plazo"}})],1),e._v(" "),a("v-flex",{staticClass:"pa-1 pt-3",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"fecha vencimiento",staticClass:"mt-0 pt-0",attrs:{"prepend-icon":"event",label:"Fecha de Vencimiento",name:"fecha vencimiento",disabled:"","error-messages":e.errors.collect("fecha vencimiento"),readonly:"",required:""},model:{value:e.cr_cuentaxcobrar.fecha_vencimiento,callback:function(t){e.$set(e.cr_cuentaxcobrar,"fecha_vencimiento",t)},expression:"cr_cuentaxcobrar.fecha_vencimiento"}})],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pb-0",attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[a("v-text-field",{attrs:{prefix:0!==e.cr_cuentaxcobrar.debitos?"$":"",label:"Valor Débito",value:e._f("numberFormat")(e.cr_cuentaxcobrar.debitos,2),box:"",readonly:"",required:""}})],1),e._v(" "),a("v-flex",{staticClass:"pb-0",attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[a("v-text-field",{attrs:{prefix:0!==e.cr_cuentaxcobrar.creditos?"$":"",label:"Valor Crédito",value:e._f("numberFormat")(e.cr_cuentaxcobrar.creditos,2),box:"",readonly:"",required:""}})],1),e._v(" "),a("v-flex",{staticClass:"pb-0",attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[a("v-text-field",{attrs:{prefix:0!==e.cr_cuentaxcobrar.debitos?"$":"",label:"Valor Total",value:e._f("numberFormat")(e.cr_cuentaxcobrar.valor,2),box:"",readonly:"",required:""}})],1)],1),e._v(" "),a("v-divider")],1)],1),e._v(" "),a("v-container",{staticClass:"pt-1",attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-right pa-0",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-btn",{attrs:{color:"primary",dark:""},domProps:{textContent:e._s("Agregar Detalle")},on:{click:e.openCardDialog}}),e._v(" "),a("v-slide-x-reverse-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.cardDialog,expression:"cardDialog"}],staticClass:"mt-3"},[a("v-card-title",{staticClass:"grey lighten-3"},[a("span",{staticClass:"title",domProps:{textContent:e._s(e.tituloDetalle)}})]),e._v(" "),a("v-form",{attrs:{"data-vv-scope":"formCxcdetalle"}},[a("v-container",{attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[a("postulador",{ref:"postulaConcepto",attrs:{nodata:"Busqueda por nombre o código.",required:"",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre,tipo_concepto",label:e.detalle.cr_concepto_id?"Concepto Cartera":"concepto cartera",scope:"formCxcdetalle",entidad:"conceptoscartera",preicon:"subtitles",value:e.detalle.concepto,clearable:""},on:{change:function(t){return e.detalle.cr_concepto_id=t},objectReturn:function(t){return e.detalle.concepto=t}}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[a("postulador",{ref:"postulaCuentaconcepto",attrs:{nodata:"Busqueda por código o nombre.",required:"",hint:"nombre",itemtext:"codigo",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:e.detalle.nf_niif_id?"Cuenta":"cuenta",scope:"formCxcdetalle",entidad:"niifs",preicon:"list_alt",routeparams:"nivel:auxiliar=1",value:e.detalle.niif,clearable:"",btnplustruncate:""},on:{change:function(t){return e.detalle.nf_niif_id=t},objectReturn:function(t){return e.detalle.niif=t},click:function(t){return e.openNuevaNiif(2)}}})],1),e._v(" "),null!==e.detalle.cr_concepto_id?a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[a("v-slide-y-transition",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[a("postulador",{ref:"postulaTercero",attrs:{nodata:"Busqueda por nombre o número de documento.",required:"",disabled:e.detalle.concepto&&e.detalle.niif?!e.detalle.concepto.niif.maneja_tercero&&!e.detalle.niif.maneja_tercero:null,hint:"nombre_completo",itemtext:"identificacion_completa",datatitle:"identificacion_completa",datasubtitle:"nombre_completo",filter:"identificacion_completa,nombre_completo",label:null==e.detalle.gn_tercero_id?"tercero":"Tercero",scope:"formCxcdetalle",entidad:"terceros",preicon:"person",value:e.detalle.tercero,clearable:""},on:{change:function(t){return e.detalle.gn_tercero_id=t},objectReturn:function(t){return e.detalle.tercero=t}}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Centro de Costo",items:e.complementosFormCxc.cencostos,"item-value":"id","item-text":"nombre",name:"centro de costo",required:"",disabled:e.detalle.niif?!e.detalle.niif.maneja_ccosto:"","error-messages":e.errors.collect("centro de costo"),"return-object":"",clearable:""},on:{change:function(t){return e.detalle.nf_cencosto_id=t?t.id:null}},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}})],1)]]}}],null,!1,3069282642),model:{value:e.detalle.cencosto,callback:function(t){e.$set(e.detalle,"cencosto",t)},expression:"detalle.cencosto"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[(e.detalle.niif?"Retencion"!==e.detalle.niif.tipo:null)?a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor base",attrs:{prefix:null!==e.detalle.valor&&""!==e.detalle.valor?"$":"",name:"valor base",required:"",min:"0","error-messages":e.errors.collect("valor base"),label:"Valor Base"},model:{value:e.detalle.valor,callback:function(t){e.$set(e.detalle,"valor",e._n(t))},expression:"detalle.valor"}}):a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor base",attrs:{prefix:null!==e.detalle.valor&&""!==e.detalle.valor?"$":"",value:e._f("numberFormat")(e.detalle.valor,2),name:"valor base",required:"",min:"0",disabled:!e.detalle.cr_concepto_id,"error-messages":e.errors.collect("valor base"),label:"Valor Base"}})],1)],1)],1)],1):e._e(),e._v(" "),(e.detalle.niif?"Retencion"===e.detalle.niif.tipo:null)?a("v-flex",{staticClass:"pl-0 pr-0",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[a("v-slide-y-transition",[a("v-card",{staticClass:"elevation-0"},[a("v-card-title",{staticClass:"grey lighten-2"},[a("span",{staticClass:"title"},[e._v("Concepto de Retención")])]),e._v(" "),a("v-container",{staticClass:"pa-3",attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md8:"",xl8:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:null===e.detalle.nf_conrtf_id?"Buscar concepto de retención":"Concepto de Retención",items:e.complementosFormCxc.conrtfs,"item-value":"id","item-text":"codigo_nombre",name:"concepto de retención",required:"","error-messages":e.errors.collect("concepto de retención"),"return-object":"",clearable:""},on:{change:function(t){return e.detalle.nf_conrtf_id=t?t.id:null}},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.codigo_nombre)}})],1)]]}}],null,!1,2902909700),model:{value:e.detalle.conrtf,callback:function(t){e.$set(e.detalle,"conrtf",t)},expression:"detalle.conrtf"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:"",sm6:"",md4:"",xl4:""}},[a("v-text-field",{attrs:{readonly:"",value:e.detalle.nf_conrtf_id?e.detalle.conrtf.porcentaje:null,suffix:"%",label:"Porcentaje"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:"",sm6:"",md6:"",xl6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor base",attrs:{prefix:"$",label:"Valor Base",disabled:null===e.detalle.conrtf||null===e.detalle.conrtf.porcentaje,required:"",name:"valor base","error-messages":e.errors.collect("valor base")},model:{value:e.valorBase,callback:function(t){e.valorBase=t},expression:"valorBase"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:"",sm6:"",md6:"",xl6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor retención",attrs:{prefix:"$",label:"Valor retención",value:e._f("numberFormat")(e.valorRetencion,2),required:"",readonly:"",name:"valor retención","error-messages":e.errors.collect("valor retención")}})],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-divider"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.dialogDetalle()}}},[e._v("Cerrar")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){return t.preventDefault(),e.agregarCxcDetalle(e.detalle)}}},[e._v(" "+e._s(e.detalle.id?"Actualizar":"Agregar"))])],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"400"},model:{value:e.dialogEliminar,callback:function(t){e.dialogEliminar=t},expression:"dialogEliminar"}},[a("v-card",[a("v-card-text",{staticClass:"title font-weight-light"},[e._v("¿Desea eliminar el detalle de la cuenta?")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){e.dialogEliminar=!1}}},[e._v("No")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.eliminarDetalle(e.detalle)}}},[e._v("Si")])],1)],1)],1),e._v(" "),e.cr_cuentaxcobrar.detalles.length?a("v-flex",{staticClass:"pr-0 pl-0",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-expand-transition",[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3"},[a("h3",[e._v("Detalles de la Cuenta por Cobrar")])]),e._v(" "),a("v-divider"),e._v(" "),a("v-data-table",{attrs:{headers:e.headers,items:e.cr_cuentaxcobrar.detalles,loading:e.tableLoading,pagination:e.pagination,"hide-actions":"","rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.concepto?t.item.concepto.codigo:null))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.concepto?t.item.concepto.nombre:null))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.niif?t.item.niif.clascuenta.naturaleza:null))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.niif?t.item.niif.codigo:null))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(e._f("numberFormat")(t.item.valor,2,"$")))]),e._v(" "),a("td",[a("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.item.id,expression:"props.item.id"}],attrs:{top:""}},[a("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.editarDetalle(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("edit")])],1),e._v(" "),a("span",[e._v("Editar")])],1),e._v(" "),a("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.item.id,expression:"!props.item.id"}],attrs:{top:""}},[a("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.eliminarConceptoCuenta(t)}},slot:"activator"},[a("v-icon",{attrs:{color:"danger"}},[e._v("delete_forever")])],1),e._v(" "),a("span",[e._v("Eliminar")])],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("\n                "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n              ")]}}],null,!1,3578322288)},[e._v(" "),a("template",{slot:"no-data"},[e.tableLoading?a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n                  Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1):a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n                  Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1)],1)],2)],1)],1)],1):e._e()],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[a("v-btn",{domProps:{textContent:e._s("Limpiar")},on:{click:function(t){return e.refresh(null)}}})],1),e._v(" "),a("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[a("v-btn",{domProps:{textContent:e._s("Cancelar")},on:{click:function(t){return e.close()}}}),e._v(" "),a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Guardar")},on:{click:function(t){return t.preventDefault(),e.confirmarSave(t)}}})],1)],1)],1)],1)},o=[],c={render:r,staticRenderFns:o};t.a=c},535:function(e,t,a){"use strict";function r(e){a(1719)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1040),c=a(1721),n=a(1),i=r,l=n(o.a,c.a,!1,i,"data-v-998276ee",null);t.default=l.exports}});
//# sourceMappingURL=211.10e93828769b8b1e14f9.js.map