webpackJsonp([382],{1266:function(a,t,e){"use strict";var o=e(13),s=e.n(o),i=e(14),l=e.n(i),r=e(249),n=e.n(r),c=e(7),d=e.n(c),v=e(12),u=e(58);t.a={name:"Hallazgos",components:{Loading:u.default},props:{data:{type:Object,default:null},concurrencia:{type:Object,default:{}}},data:function(){return{hallazgo:{},clasesHallazgo:["ACCESIBILIDAD","CONTINUIDAD","OPORTUNIDAD","PERTINENCIA","SEGURIDAD"],dialog:!1,loading:!1,loadingSubmit:!1,headers:[{text:"id",align:"left",sortable:!1,value:"id"},{text:"Clase",align:"left",sortable:!1,value:"clase"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.resetDialog()},methods:{resetDialog:function(){this.hallazgo={id:"",cm_convisita_id:null,clase:null,observaciones:null}},edit:function(a){this.openDialog(),this.hallazgo=JSON.parse(d()(a))},openDialog:function(){this.dialog=!0,this.hallazgo.cm_convisita_id=this.data.id},close:function(){this.dialog=!1,this.resetDialog()},formDate:function(a){if(!a)return null;var t=a.split("-"),e=n()(t,3);return e[0]+"/"+e[1]+"/"+e[2]},validador:function(a){return this.$validator.validateAll(a).then(function(a){return a})},guardar:function(){var a=this;return l()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.validador("form");case 2:if(!t.sent){t.next=8;break}a.loadingSubmit=!0,e=a.hallazgo.id?a.axios.put("cuentasmedicas/concurrencia/hallazgos/"+a.hallazgo.id,a.hallazgo):a.axios.post("cuentasmedicas/concurrencia/hallazgos",a.hallazgo),e.then(function(t){a.hallazgo.id?(a.loadingSubmit=!1,a.$store.commit(v.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),a.data.hallazgos.splice(a.data.hallazgos.findIndex(function(a){return a.id===t.data.data.id}),1,t.data.data)):(a.loadingSubmit=!1,a.$store.commit(v.b,{msg:"Item creado satisfactoriamente",color:"success"}),a.data.hallazgos.unshift(t.data.data)),a.close()}).catch(function(t){a.loadingSubmit=!1,a.$store.commit(v.a,{expression:" al guardar el registro. ",error:t})}),t.next=9;break;case 8:a.$store.commit(v.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return t.stop()}},t,a)}))()}}}},2359:function(a,t,e){"use strict";function o(a){e(2360)}Object.defineProperty(t,"__esModule",{value:!0});var s=e(1266),i=e(2362),l=e(1),r=o,n=l(s.a,i.a,!1,r,"data-v-099ffbdd",null);t.default=n.exports},2360:function(a,t,e){var o=e(2361);"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);e(456)("5261e4b7",o,!0,{})},2361:function(a,t,e){t=a.exports=e(455)(!0),t.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Hallazgos.vue",sourceRoot:""}])},2362:function(a,t,e){"use strict";var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("v-dialog",{attrs:{width:"720px"},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[e("v-form",{attrs:{"data-vv-scope":"form"}},[e("v-card",[e("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[e("span",{staticClass:"title"},[a._v("Hallazgo")])]),a._v(" "),e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:"",sm6:""}},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:a.clasesHallazgo,label:"Clase",name:"clase","prepend-icon":"input","error-messages":a.errors.collect("clase"),required:""},model:{value:a.hallazgo.clase,callback:function(t){a.$set(a.hallazgo,"clase",t)},expression:"hallazgo.clase"}})],1),a._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-textarea",{attrs:{outline:"",name:"observaciones",label:"Observaciones"},model:{value:a.hallazgo.observaciones,callback:function(t){a.$set(a.hallazgo,"observaciones",t)},expression:"hallazgo.observaciones"}})],1)],1)],1),a._v(" "),e("v-card-actions",{staticClass:"grey lighten-4"},[e("v-spacer"),a._v(" "),e("v-btn",{on:{click:a.close}},[a._v("Cancelar")]),a._v(" "),e("v-btn",{attrs:{color:"primary",loading:a.loadingSubmit},on:{click:a.guardar}},[a._v("Guardar")])],1)],1)],1)],1),a._v(" "),e("v-card",[e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-toolbar-title",[a._v("Hallazgos")]),a._v(" "),e("small",{staticClass:"mt-2 ml-1"},[a._v(" Registro y gestión")]),a._v(" "),e("v-spacer"),a._v(" "),e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",fab:"",color:"accent",small:"",disabled:"Cerrada"===a.concurrencia.estado},on:{click:function(t){return a.openDialog()}},slot:"activator"},[e("v-icon",[a._v("add")])],1),a._v(" "),e("span",[a._v(a._s("Abierta"===a.concurrencia.estado?"Crear registro":"Concurrencia cerrada"))])],1)],1),a._v(" "),e("loading",{model:{value:a.loading,callback:function(t){a.loading=t},expression:"loading"}}),a._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.data.hallazgos,loading:a.loading,"rows-per-page-text":"Registros por página"},scopedSlots:a._u([{key:"items",fn:function(t){return[e("td",[a._v(a._s(t.item.id))]),a._v(" "),e("td",[a._v(a._s(t.item.clase))]),a._v(" "),e("td",[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",icon:"",disabled:"Cerrada"===a.concurrencia.estado},on:{click:function(e){return a.edit(t.item)}},slot:"activator"},[e("v-icon",{attrs:{color:"accent"}},[a._v("edit")])],1),a._v(" "),e("span",[a._v(a._s("Abierta"===a.concurrencia.estado?"Editar":"Concurrencia cerrada"))])],1)],1)]}}])},[a._v(" "),e("template",{slot:"no-data"},[a.loading?e("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[a._v("\n          Estamos cargando los registros. "),e("v-icon",[a._v("sentiment_satisfied_alt")])],1):e("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[a._v("\n          Lo sentimos, no tenemos registros para mostrar. "),e("v-icon",[a._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},s=[],i={render:o,staticRenderFns:s};t.a=i}});
//# sourceMappingURL=382.bc990f1848f38c1756fe.js.map