webpackJsonp([329],{1227:function(t,a,e){"use strict";var i=e(7),s=e.n(i),r=e(58),o=e(12);a.a={name:"RegistroEntidadCapacidadInstalada",props:["value"],components:{Loading:r.default},data:function(){return{showFormRegistro:!1,loading:!1,item:null,makeItem:{id:null,rs_entidades_id:null,tipo:null,rs_tipcapinstalada_id:null,cantidad:null},tiposCapaciadad:[],search:null,headers:[{text:"tipo",align:"left",sortable:!1,value:"tipo.tipo"},{text:"Descripción",align:"left",sortable:!1,value:"tipo.descripcion"},{text:"Cantidad",align:"center",sortable:!1,value:"cantidad"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},watch:{showFormRegistro:function(t){!t&&this.refreshCapacidad()}},created:function(){this.getTiposCapacidad(),this.refreshCapacidad()},methods:{getTiposCapacidad:function(){var t=this;this.axios.get("tipcapinstaladas").then(function(a){t.tiposCapaciadad=a.data.data}).catch(function(a){t.$store.commit(o.a,{expression:" al los tipos de items de capacidad instalada. ",error:a})})},capacidadEditar:function(t){this.refreshCapacidad(),this.item=JSON.parse(s()(t)),this.$vuetify.goTo("#flag-top",{selector:"#flag-top",duration:300,offset:-120,easing:"easeInOutQuad"}),this.showFormRegistro=!0},capacidadBorrar:function(t){var a=this;this.loading=!0,this.showFormRegistro=!1,this.axios.post("entidades/remove-capinstalada/"+t.id).then(function(e){var i=a.value.capinstaladas.findIndex(function(a){return a.id===t.id});a.value.capinstaladas.splice(i>-1?i:0,i>-1?1:0),a.loading=!1}).catch(function(t){a.loading=!1,a.$store.commit(o.a,{expression:" al borrar el registro. ",error:t})})},submitItem:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.loading=!0,t.item.rs_entidades_id=t.value.id,t.axios.post("entidades/add-capinstalada",t.item).then(function(a){var e=t.value.capinstaladas.findIndex(function(t){return t.id===a.data.data.id});t.value.capinstaladas.splice(e>-1?e:0,e>-1?1:0,a.data.data),t.refreshCapacidad(),t.loading=!1}).catch(function(a){t.loading=!1,t.$store.commit(o.a,{expression:" al realizar el registro. ",error:a})}))})},refreshCapacidad:function(){this.item=JSON.parse(s()(this.makeItem)),this.$validator.reset()}}}},2228:function(t,a,e){"use strict";function i(t){e(2229)}Object.defineProperty(a,"__esModule",{value:!0});var s=e(1227),r=e(2231),o=e(1),n=i,d=o(s.a,r.a,!1,n,"data-v-746b7e20",null);a.default=d.exports},2229:function(t,a,e){var i=e(2230);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(456)("8f645334",i,!0,{})},2230:function(t,a,e){a=t.exports=e(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroEntidadCapacidadInstalada.vue",sourceRoot:""}])},2231:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-layout",{attrs:{row:"",wrap:"",id:"flag-top"}},[e("loading",{model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}}),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-toolbar-title",{domProps:{innerHTML:t._s("Items de capacidad instalada")}}),t._v(" "),e("small",{staticClass:"mt-2 ml-1"},[t._v(" Registro y gestión por entidad")]),t._v(" "),e("v-spacer"),t._v(" "),t.showFormRegistro?t._e():e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",fab:"",right:"",small:"",color:"accent"},on:{click:function(a){t.showFormRegistro=!0}},slot:"activator"},[e("v-icon",[t._v("add")])],1),t._v(" "),e("span",[t._v("Crear item")])],1)],1),t._v(" "),e("v-scroll-y-transition",[t.showFormRegistro?e("div",[e("v-card-text",[e("v-form",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:"",sm9:"",md10:""}},[e("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:t.item.tipo?"item.tipo.description":"",items:t.tiposCapaciadad,label:"Tipo","item-text":"tipo","item-value":"id","persistent-hint":"",name:"Tipo","error-messages":t.errors.collect("Tipo")},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.submitItem(a)}},model:{value:t.item.rs_tipcapinstalada_id,callback:function(a){t.$set(t.item,"rs_tipcapinstalada_id",a)},expression:"item.rs_tipcapinstalada_id"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:0",expression:"'required|numeric|min_value:0'"}],attrs:{label:"Cantidad",min:"0",type:"number",name:"Cantidad","error-messages":t.errors.collect("Cantidad")},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.submitItem(a)}},model:{value:t.item.cantidad,callback:function(a){t.$set(t.item,"cantidad",t._n(a))},expression:"item.cantidad"}})],1)],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{flat:""},on:{click:function(a){a.stopPropagation(),t.showFormRegistro=!1}}},[t._v("Cancelar")]),t._v(" "),e("v-btn",{attrs:{color:"primary"},on:{click:function(a){return a.stopPropagation(),t.submitItem(a)}}},[t._v("Registrar")])],1)],1):t._e()])],1)],1),t._v(" "),e("v-flex",{staticClass:"pa-0 ma-0",attrs:{xs12:""}},[e("v-card",{staticClass:"elevation-0"},[e("v-card-title",[e("v-spacer"),t._v(" "),e("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.value.capinstaladas,search:t.search,"rows-per-page-text":"Registros por página:"},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",[t._v(t._s(a.item.tipo.tipo))]),t._v(" "),e("td",[t._v(t._s(a.item.tipo.descripcion))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.cantidad))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:function(e){return t.capacidadBorrar(a.item)}},slot:"activator"},[e("v-icon",[t._v("delete")])],1),t._v(" "),e("span",[t._v("Borrar")])],1),t._v(" "),e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:function(e){return t.capacidadEditar(a.item)}},slot:"activator"},[e("v-icon",[t._v("edit")])],1),t._v(" "),e("span",[t._v("Editar")])],1)],1)]}},{key:"pageText",fn:function(a){return[t._v("\n          Mostrando registros del "+t._s(a.pageStart)+" al "+t._s(a.pageStop)+" de "+t._s(a.itemsLength)+"\n        ")]}}])},[t._v(" "),e("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v("\n          No hay registros para mostrar"+t._s(t.search?" segun criterio de busqueda : "+t.search:".")+"\n        ")])],1)],1)],1)],1)},s=[],r={render:i,staticRenderFns:s};a.a=r}});
//# sourceMappingURL=329.459e809596c3c98fda01.js.map