webpackJsonp([73],{1324:function(t,a,o){"use strict";var e=o(13),n=o.n(e),i=o(14),r=o.n(i),l=o(252),s=o.n(l),c=o(12),u=o(58),v=o(743);a.a={name:"extraLaboral",components:{Loading:u.default,Confirmar:v.a,ToolbarList:function(){return new Promise(function(t){t()}).then(o.bind(null,247))}},data:function(){return{dialogA:{visible:!1,content:null,registroID:null},extras:[],extra:{},tipoContable:[{tipo_valor_nomina:"38",nombre:"Vacaciones"},{tipo_valor_nomina:"8",nombre:"Descuento de Seguro de Vida Colectivo"},{tipo_valor_nomina:"11",nombre:"Hora Extra Diurna"},{tipo_valor_nomina:"12",nombre:"Hora Extra Festiva Nocturna"},{tipo_valor_nomina:"13",nombre:"Hora Extra Nocturna"},{tipo_valor_nomina:"14",nombre:"Hora Festiva Diurna"},{tipo_valor_nomina:"15",nombre:"Hora Festiva Nocturna"},{tipo_valor_nomina:"17",nombre:"Incapacidad General"},{tipo_valor_nomina:"20",nombre:"Licencia de Maternidad"},{tipo_valor_nomina:"21",nombre:"Licencia No Remunerada"},{tipo_valor_nomina:"22",nombre:"Otros Deducidos"},{tipo_valor_nomina:"23",nombre:"Otros Devengados"},{tipo_valor_nomina:"25",nombre:"Pago Mera Liberalidad"},{tipo_valor_nomina:"30",nombre:"Recargo Nocturno"},{tipo_valor_nomina:"31",nombre:"Retención en la Fuente"},{tipo_valor_nomina:"39",nombre:"Auxilio de Rodamiento"}],tipo:[{tipo_documento_nomina:"1",nombre:"Deducido"},{tipo_documento_nomina:"2",nombre:"Devengado"},{tipo_documento_nomina:"3",nombre:"Empresa"},{tipo_documento_nomina:"4",nombre:"Deducido Constitutivo Salarial"},{tipo_documento_nomina:"5",nombre:"Devengado Constitutivo Salarial"}],search:"",dialog:!1,tableLoading:!1,localLoading:!1,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Consecutivo",align:"left",sortable:!1,value:"consecutivo_extra_laboral"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion"},{text:"Documento nómina",align:"left",sortable:!1,value:"tipo_documento_nomina"},{text:"T. valor nómina",align:"left",sortable:!1,value:"tipo_valor_nomina"},{text:"Opciones",align:"left",sortable:!1,value:"consecutivo_extra_laboral"}]}},beforeMount:function(){this.formReset()},mounted:function(){},created:function(){this.reloadPage()},watch:{"pagination.per_page":function(){this.pagination.current_page=1,this.reloadPage()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("extraLaboral")},modalTitulo:function(){return this.extra.consecutivo_extra_laboral?"Editar extra laboral: "+this.extra.consecutivo_extra_laboral:"Nuevo extra laboral"},complementos:function(){},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{reloadPage:function(){var t=this;this.tableLoading=!0,this.localLoading=!0,this.axios.get("extra?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25").then(function(a){a.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(a.data.meta.per_page)})?parseInt(a.data.meta.per_page):-1,t.pagination=a.data.meta,t.extras=a.data.data,t.tableLoading=!1,t.localLoading=!1}).catch(function(a){return t.tableLoading=!1,t.localLoading=!1,!1})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),formReset:function(){this.extra={consecutivo_extra_laboral:null,tipo_documento_nomina:null,tipo_valor_nomina:null}},eliminar:function(t){this.dialogA.content="¿Está seguro de eliminar?",this.dialogA.registroID=t,this.dialogA.visible=!0},cancelaAnulacion:function(){this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registroID=null},confirmaAnulacion:function(t){var a=this;this.localLoading=!0,this.axios.delete("extra/eliminar/"+this.dialogA.registroID).then(function(t){a.$store.commit(c.b,{msg:"El extra laboral se eliminó correctamente",color:"success"}),a.reloadPage(),a.cancelaAnulacion(),a.localLoading=!1,a.$refs.confirmo.pararCarga()}).catch(function(t){a.localLoading=!1,a.$store.commit(c.b,{msg:"Hay un error al eliminar el registro. "+t.response,color:"danger"})})},editar:function(t){this.dialog=!0,this.extra=s()({},t);for(var a=0;a<this.tipoContable.length;a++){var o=this.tipoContable[a];t.tipo_valor_nomina.toString()===o.tipo_valor_nomina&&(this.extra.tipo_valor_nomina=o.nombre)}for(var e=0;e<this.tipo.length;e++){var n=this.tipo[e];t.tipo_documento_nomina.toString()===n.tipo_documento_nomina&&(this.extra.tipo_documento_nomina=n.nombre)}},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},save:function(){var t=this;return r()(n.a.mark(function a(){var o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.validador("formPago");case 2:if(!a.sent){a.next=9;break}t.dialog=!1,t.localLoading=!0,o=t.extra.consecutivo_extra_laboral?t.axios.put("extra/actualizar/"+t.extra.consecutivo_extra_laboral,t.extra):t.axios.post("extra/crear",t.extra),o.then(function(a){t.localLoading=!1,t.extra.consecutivo_extra_laboral?t.$store.commit(c.b,{msg:"El extra laboral se actualizó correctamente",color:"success"}):(t.$store.commit(c.b,{msg:"Registro exitoso",color:"success"}),t.reloadPage()),t.dialog=!1}).catch(function(a){t.localLoading=!1,t.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}),a.next=10;break;case 9:t.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 10:t.formReset();case 11:case"end":return a.stop()}},a,t)}))()}},filters:{valorNomina:function(t,a){for(var o=0;o<a.length;o++){var e=a[o];if(t.toString()===e.tipo_valor_nomina)return e.nombre}},documentoNomina:function(t,a){for(var o=0;o<a.length;o++){var e=a[o];if(t.toString()===e.tipo_documento_nomina)return e.nombre}}}}},2554:function(t,a,o){var e=o(2555);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);o(456)("78dd91c2",e,!0,{})},2555:function(t,a,o){a=t.exports=o(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ExtraLaboral.vue",sourceRoot:""}])},2556:function(t,a,o){"use strict";var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("v-dialog",{attrs:{width:"500px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formPago"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[t._v(t._s(t.modalTitulo))])]),t._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|",expression:"'required|max:150|'"}],key:"descripcion",attrs:{label:"Descripción",name:"descripcion",required:"","error-messages":t.errors.collect("descripcion")},model:{value:t.extra.descripcion,callback:function(a){t.$set(t.extra,"descripcion",a)},expression:"extra.descripcion"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Tipo valor nómina",items:t.tipoContable,name:"tipo valor","error-messages":t.errors.collect("tipo valor")},model:{value:t.extra.tipo_valor_nomina,callback:function(a){t.$set(t.extra,"tipo_valor_nomina",a)},expression:"extra.tipo_valor_nomina"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Tipo documento nómina",items:t.tipo,name:"tipo documento","error-messages":t.errors.collect("tipo documento")},model:{value:t.extra.tipo_documento_nomina,callback:function(a){t.$set(t.extra,"tipo_documento_nomina",a)},expression:"extra.tipo_documento_nomina"}})],1)],1)],1),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),t._v(" "),o("v-btn",{on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"primary",disabled:t.errors.any()},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),o("v-card",[o("toolbar-list",{attrs:{info:t.infoComponent,title:"Extra laboral",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear registro",btnplustruncate:""},on:{click:function(a){t.dialog=!0}}}),t._v(" "),o("v-container",{attrs:{fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-right",attrs:{xs1:"",sm3:"",md6:""}},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:t.reloadPage},slot:"activator"},[o("v-icon",[t._v("cached")])],1),t._v(" "),o("span",[t._v("Actualizar registros")])],1)],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[o("v-select",{attrs:{label:"Registros por página",items:t.items_page,"item-text":"text","item-value":"value"},model:{value:t.pagination.per_page,callback:function(a){t.$set(t.pagination,"per_page",a)},expression:"pagination.per_page"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-text-field",{attrs:{"append-icon":"search",label:"Buscar"},on:{input:t.buscar},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),t._v(" "),o("loading",{model:{value:t.localLoading,callback:function(a){t.localLoading=a},expression:"localLoading"}}),t._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.extras,loading:t.tableLoading,pagination:t.pagination,"total-items":t.extras.length,search:t.search,"hide-actions":""},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[o("td",[t._v(t._s(a.item.consecutivo_extra_laboral))]),t._v(" "),o("td",[t._v(t._s(a.item.descripcion))]),t._v(" "),o("td",[t._v(t._s(t._f("documentoNomina")(a.item.tipo_documento_nomina,t.tipo)))]),t._v(" "),o("td",[t._v(t._s(t._f("valorNomina")(a.item.tipo_valor_nomina,t.tipoContable)))]),t._v(" "),o("td",[o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:a.item.show,callback:function(o){t.$set(a.item,"show",o)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:a.item.show,callback:function(o){t.$set(a.item,"show",o)},expression:"props.item.show"}},[o("v-icon",[t._v("chevron_left")]),t._v(" "),o("v-icon",[t._v("close")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return t.eliminar(a.item.consecutivo_extra_laboral)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("delete")])],1),t._v(" "),o("span",[t._v("Eliminar")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return t.editar(a.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1),t._v(" "),o("span",[t._v("Editar")])],1)],1)],1)]}}])},[t._v(" "),o("template",{slot:"no-data"},[t.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n            Estamos cargando los registros. "),o("v-icon",[t._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1),t._v(" "),o("template",{slot:"footer"},[o("td",{staticClass:"text-xs-center",attrs:{colspan:"100%"}},[o("v-pagination",{attrs:{"total-visible":7,length:t.pagination.last_page},on:{input:t.reloadPage},model:{value:t.pagination.current_page,callback:function(a){t.$set(t.pagination,"current_page",a)},expression:"pagination.current_page"}})],1)])],2)],1)],1),t._v(" "),o("confirmar",{ref:"confirmo",attrs:{value:t.dialogA.visible,content:t.dialogA.content},on:{cancelar:t.cancelaAnulacion,aceptar:function(a){return t.confirmaAnulacion(a)}}})],1)},n=[],i={render:e,staticRenderFns:n};a.a=i},713:function(t,a,o){"use strict";function e(t){o(2554)}Object.defineProperty(a,"__esModule",{value:!0});var n=o(1324),i=o(2556),r=o(1),l=e,s=r(n.a,i.a,!1,l,"data-v-c5963922",null);a.default=s.exports},742:function(t,a,o){"use strict";var e=o(13),n=o.n(e),i=o(14),r=o.n(i),l=o(58);a.a={name:"Confirmar",props:{value:{type:Boolean,default:!1},content:{type:String},requiereMotivo:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},components:{Loading:l.default},data:function(){return{loadingSubmit:!1,motivo:null}},watch:{value:function(t){t||(this.motivo=null,this.$validator.reset())}},methods:{submit:function(){var t=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$validator.validateAll();case 2:if(!a.sent){a.next=5;break}t.loadingSubmit=!0,t.$emit("aceptar",t.motivo);case 5:case"end":return a.stop()}},a,t)}))()},pararCarga:function(){this.loadingSubmit=!1}}}},743:function(t,a,o){"use strict";function e(t){o(744)}var n=o(742),i=o(746),r=o(1),l=e,s=r(n.a,i.a,!1,l,"data-v-3773d9ac",null);a.a=s.exports},744:function(t,a,o){var e=o(745);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);o(456)("0e7a280b",e,!0,{})},745:function(t,a,o){a=t.exports=o(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Confirmar2.vue",sourceRoot:""}])},746:function(t,a,o){"use strict";var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{key:"dialogConfirm",attrs:{persistent:"","max-width":"400"},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}},[o("loading",{model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}}),t._v(" "),o("v-card",[o("v-card-text",{staticClass:"title font-weight-light text-xs-center",domProps:{innerHTML:t._s(t.content)}}),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{flat:""},on:{click:function(a){return a.stopPropagation(),t.$emit("cancelar")}}},[t._v("Cancelar")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary",loading:t.loadingSubmit},on:{click:function(a){return a.stopPropagation(),t.submit(a)}}},[t._v("Aceptar")])],1)],1)],1)],1)},n=[],i={render:e,staticRenderFns:n};a.a=i}});
//# sourceMappingURL=73.b18546c3b3b76d2aea2a.js.map