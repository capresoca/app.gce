webpackJsonp([45,302],{1248:function(t,e,a){"use strict";var i=a(13),n=a.n(i),s=a(14),r=a.n(s),o=a(12),l=a(59),d=a(754),c=a(40),u=a(248);e.a={name:"RegistroEncuesta",components:{VDatetimePicker:d.default,PostuladorV2:function(){return new Promise(function(t){t()}).then(a.bind(null,61))},ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))}},data:function(){return{detalleAfiliado:function(){return a.e(290).then(a.bind(null,750))},encuesta:{},preguntas:[],respuesta:null,row:null,tableLoading:!1,headers:[{text:"Número",align:"left",sortable:!1,value:"codigo"},{text:"Pregunta",align:"left",sortable:!1,value:"nombre"},{text:"Opciones",align:"left",sortable:!1,value:"id",width:"200px"}]}},beforeCreate:function(){var t=this;this.axios.get("encuesta_complementos").then(function(e){e.data.preguntas&&(e.data.preguntas.map(function(t){t.respuesta=null}),t.preguntas=e.data.preguntas)}).catch(function(){t.$store.commit(o.b,{msg:"Hay un error al traer los complementos.",color:"danger"})})},created:function(){},beforeMount:function(){this.formReset()},watch:{"encuesta.afiliado":function(t){console.log("valores",t),this.encuesta.gn_municipio_id=t?t.gn_municipio_id:null}},methods:{formReset:function(){this.encuesta={id:null,as_afiliado_id:null,fecha:this.moment().format("YYYY-MM-DD HH:mm:ss"),gn_municipio_id:null,lugar:null,afiliado:null,municipio:null,respuestas:[]}},updateDatetime:function(t){this.encuesta.fecha=t},refresh:function(){this.$validator.reset(),this.formReset()},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(c.c,{contexto:this,itemId:null})},save:function(){var t=this;return r()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validador("formEncuesta");case 2:if(!e.sent){e.next=6;break}t.encuesta.respuestas=t.preguntas.map(function(t){return{au_encpregunta_id:t.id,respuesta:t.respuesta}}),a=t.encuesta.id?"editar":"crear",t.axios.post("au_encuestas",t.encuesta).then(function(e){t.$store.commit(o.b,{msg:"Se ha creado la encuesta correctamente.",color:"success"}),t.$store.commit(u.I,{item:e.data.data,estado:a,key:null}),t.$store.dispatch(c.c,{contexto:t,itemId:null})}).catch(function(){t.$store.commit(o.b,{msg:"Hay un error al crear el registro.",color:"error"})});case 6:case"end":return e.stop()}},e,t)}))()},filterMunicipios:function(t,e){var a=function(t){return null!=t?t:""},i=a(t.nombre+" "+t.nombre_departamento),n=a(e);return i.toString().toLowerCase().indexOf(n.toString().toLowerCase())>-1},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})}},computed:{tapTitulo:function(){return this.encuesta.id?"En Edición de Encuesta del Afiliado: "+(this.afiliado?this.afiliado.nombre1:"####"):"Nueva Encuesta del Estado de Salud"},complementos:function(){return l.b.getters.complementosPostuladorAfiliados}}}},2303:function(t,e,a){var i=a(2304);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(456)("ef1fb066",i,!0,{})},2304:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"table.v-table tbody td[data-v-480cd88a],table.v-table tbody th[data-v-480cd88a]{height:30px!important}.dividerTwo[data-v-480cd88a]{padding:.1mm}.dividerTwo[data-v-480cd88a],.refSpace .spacer[data-v-480cd88a]{background-color:#f5f5f5!important;border-color:#f5f5f5!important}@media (max-width:601px){.head2[data-v-480cd88a]{text-align:right!important}}@media (min-width:602px) and (max-width:959px){.head1[data-v-480cd88a]{padding-top:4px!important}.head2[data-v-480cd88a]{text-align:right}.head2 h2[data-v-480cd88a]{font-size:20px!important;font-weight:500;line-height:1!important;letter-spacing:.02em!important;font-family:Roboto,sans-serif!important}}@media (max-width:959px){.dNone[data-v-480cd88a],.refSpace .spacer[data-v-480cd88a]{display:none!important}}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/atencionUsuario/encuesta_salud/RegistroEncuesta.vue"],names:[],mappings:"AACA,gFACE,qBAAwB,CACzB,AACD,6BACE,YAAe,CAGhB,AACD,gEAHE,mCAAqC,AACrC,8BAAiC,CAKlC,AACD,yBACA,wBACI,0BAA6B,CAChC,CACA,AACD,+CACA,wBACI,yBAA4B,CAC/B,AACD,wBACI,gBAAkB,CACrB,AACD,2BACI,yBAA2B,AAC3B,gBAAiB,AACjB,wBAA0B,AAC1B,+BAAkC,AAClC,uCAA6C,CAChD,CACA,AACD,yBAIA,2DACI,sBAAyB,CAC5B,CACA",file:"RegistroEncuesta.vue",sourcesContent:["\ntable.v-table tbody td[data-v-480cd88a], table.v-table tbody th[data-v-480cd88a] {\n  height: 30px !important;\n}\n.dividerTwo[data-v-480cd88a] {\n  padding: 0.1mm;\n  background-color: #f5f5f5 !important;\n  border-color: #f5f5f5 !important;\n}\n.refSpace .spacer[data-v-480cd88a] {\n  background-color: #f5f5f5 !important;\n  border-color: #f5f5f5 !important;\n}\n@media (max-width: 601px) {\n.head2[data-v-480cd88a] {\n    text-align: right !important;\n}\n}\n@media (min-width: 602px) and (max-width: 959px){\n.head1[data-v-480cd88a] {\n    padding-top: 4px !important;\n}\n.head2[data-v-480cd88a] {\n    text-align: right;\n}\n.head2 h2[data-v-480cd88a] {\n    font-size: 20px !important;\n    font-weight: 500;\n    line-height: 1 !important;\n    letter-spacing: 0.02em !important;\n    font-family: 'Roboto', sans-serif !important;\n}\n}\n@media (max-width: 959px) {\n.dNone[data-v-480cd88a] {\n    display: none !important;\n}\n.refSpace .spacer[data-v-480cd88a] {\n    display: none !important;\n}\n}\n"],sourceRoot:""}])},2305:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",[a("v-card",[a("v-form",{attrs:{"data-vv-scope":"formEncuesta"}},[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{staticClass:"refSpace",attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"grey lighten-4",attrs:{xs12:"",sm12:"",md5:"",lg5:"",xl5:""}},[a("v-toolbar",{staticClass:"grey lighten-4 elevation-0 toolbar--dense"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pa-0 pt-2 head1",attrs:{xs12:"",sm6:"",md12:""}},[a("v-toolbar-title",[t._v(" "+t._s(t.tapTitulo)+" ")])],1)],1)],1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-divider",{staticClass:"dNone pl-1",attrs:{vertical:""}}),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:"",lg3:"",xl3:""}},[a("v-datetime-picker",{attrs:{label:"Fecha Encuesta",datetime:t.encuesta.fecha,timeData:t.encuesta.fecha},on:{input:t.updateDatetime}})],1),t._v(" "),a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",sm12:"",md8:"",lg8:"",xl8:""}},[a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por nombre o número de documento.",hint:"identificacion_completa","item-text":"nombre_completo","data-title":"identificacion_completa","data-subtitle":"nombre_completo",label:"Afiliado",detail:t.detalleAfiliado,entidad:"afiliados",preicon:"person",name:"afiliado",rules:"required",clearable:"","error-messages":t.errors.collect("afiliado")},on:{changeid:function(e){return t.encuesta.as_afiliado_id=e}},model:{value:t.encuesta.afiliado,callback:function(e){t.$set(t.encuesta,"afiliado",e)},expression:"encuesta.afiliado"}})],1),t._v(" "),a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",sm12:"",md4:"",lg4:"",xl4:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Municipio",items:t.complementos.municipios,"item-value":"id","item-text":"nombre",name:"municipio",required:"","error-messages":t.errors.collect("municipio"),filter:t.filterMunicipios},scopedSlots:t._u([{key:"item",fn:function(e){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.nombre)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.nombre_departamento)}})],1)]]}}]),model:{value:t.encuesta.gn_municipio_id,callback:function(e){t.$set(t.encuesta,"gn_municipio_id",e)},expression:"encuesta.gn_municipio_id"}})],1),t._v(" "),a("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"lugar",attrs:{color:"primary",name:"lugar",required:"","error-messages":t.errors.collect("lugar")},model:{value:t.encuesta.lugar,callback:function(e){t.$set(t.encuesta,"lugar",e)},expression:"encuesta.lugar"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("h4",{staticClass:"font-weight-thin",domProps:{textContent:t._s("Lugar")}})])])],1),t._v(" "),a("v-flex",{staticClass:"pt-0",attrs:{xs12:"",md12:""}},[a("v-subheader",{staticClass:"pl-0"},[t._v("Preguntas de la Encuesta")]),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.preguntas,loading:t.tableLoading,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[a("v-chip",{staticClass:"pa-1",attrs:{label:"",color:"teal",outline:""},domProps:{textContent:t._s(e.item.numero<10?"0"+e.item.numero:e.item.numero)}})],1),t._v(" "),a("td",{staticClass:"text-xs-justify pa-0"},[t._v(t._s(e.item.pregunta))]),t._v(" "),a("td",{staticClass:"pa-0"},[a("v-container",{staticClass:"pb-0",attrs:{fluid:""}},[a("v-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"respuesta"+e.index,attrs:{row:"","data-vv-as":"respuesta","error-messages":t.errors.collect("respuesta"+e.index),name:"respuesta"+e.index},model:{value:e.item.respuesta,callback:function(a){t.$set(e.item,"respuesta",a)},expression:"props.item.respuesta"}},[a("v-radio",{attrs:{label:"Si",value:1}}),t._v(" "),a("v-radio",{attrs:{label:"No",value:0}})],1)],1)],1)])]}}])},[t._v(" "),a("template",{slot:"no-data"},[t.tableLoading?a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n                  Lo sentimos, no se han cargado las preguntas. "),a("v-icon",[t._v("sentiment_very_dissatisfied")])],1):a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n                  Estamos cargando las preguntas. "),a("v-icon",[t._v("sentiment_satisfied_alt")])],1)],1)],2)],1)],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[a("v-btn",{on:{click:function(e){return t.refresh(null)}}},[t._v("Limpiar")])],1),t._v(" "),a("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[a("v-btn",{on:{click:function(e){return t.close()}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Guardar")])],1)],1)],1)],1)],1)},n=[],s={render:i,staticRenderFns:n};e.a=s},683:function(t,e,a){"use strict";function i(t){a(2303)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1248),s=a(2305),r=a(1),o=i,l=r(n.a,s.a,!1,o,"data-v-480cd88a",null);e.default=l.exports},753:function(t,e,a){"use strict";e.a={name:"VDatetimePicker",props:{readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},timeData:{type:String,default:""},datetime:{type:String,required:!0},label:{type:String,default:""},max:{type:String,default:""},min:{type:String,default:""},showCurrent:{type:String,default:""}},data:function(){return{dateModel:"",timeModel:"",menu:!1,selectedTab:"calendar"}},watch:{menu:function(t){t&&(this.selectedTab="calendar",this.$refs.timer&&(this.$refs.timer.selectingHour=!0))},timeData:function(t){if(t){var e=t.split(" ")[0];this.dateModel=e;var a=t.split(" ")[1];this.timeModel=a}}},computed:{actualDatetime:function(){return this.dateModel+" "+this.timeModel}},methods:{checkMinutes:function(t){!1===this.$refs.timer.selectingHour&&(this.timeModel=t,this.$refs.timer.selectingHour=!0,this.selectedTab="calendar",this.$emit("input",this.actualDatetime),this.menu=!1)},checkHours:function(t){this.dateModel=t,this.selectedTab="timer",this.$emit("input",this.actualDatetime),this.menu=!1}},created:function(){this.dateModel=this.datetime.split(" ")[0],this.timeModel=this.datetime.split(" ")[1],this.$emit("input",this.actualDatetime)}}},754:function(t,e,a){"use strict";function i(t){a(772)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(753),s=a(774),r=a(1),o=i,l=r(n.a,s.a,!1,o,"data-v-306a942a",null);e.default=l.exports},772:function(t,e,a){var i=a(773);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(456)("46cd2d38",i,!0,{})},773:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"div.d_flex1>div.v-card[data-v-306a942a]{height:290px;width:290px!important}@media (max-width:959px){.lWidth[data-v-306a942a]{width:290px}}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/general/VDatetimePicker.vue"],names:[],mappings:"AACA,wCACE,aAAc,AACd,qBAAwB,CACzB,AACD,yBACA,yBACI,WAAa,CAChB,CACA",file:"VDatetimePicker.vue",sourcesContent:["\ndiv.d_flex1 > div.v-card[data-v-306a942a] {\n  height: 290px;\n  width: 290px !important;\n}\n@media (max-width: 959px) {\n.lWidth[data-v-306a942a] {\n    width: 290px;\n}\n}\n\n"],sourceRoot:""}])},774:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","nudge-left":1,"full-width":"","max-width":"600px","min-width":"290px"},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-text-field",{attrs:{slot:"activator",label:t.label,"prepend-icon":"today",disabled:t.disabled,readonly:t.readonly,value:t.timeData},slot:"activator",model:{value:t.actualDatetime,callback:function(e){t.actualDatetime=e},expression:"actualDatetime"}}),t._v(" "),[a("v-layout",{staticClass:"lWidth",attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"d_flex1",attrs:{xs12:"",sm12:"",md6:""}},[a("v-date-picker",{ref:"date",attrs:{locale:"es","no-title":"",scrollable:"",actions:"",readonly:t.readonly,disabled:t.disabled,"show-current":t.showCurrent,max:t.max?t.max.split(" ")[0]:"",min:t.min?t.min.split(" ")[0]:""},on:{input:t.checkHours},model:{value:t.dateModel,callback:function(e){t.dateModel=e},expression:"dateModel"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-time-picker",{ref:"timer",attrs:{"no-title":"",scrollable:"",readonly:t.readonly,disabled:t.disabled,format:"24hr",min:t.min&&t.dateModel===t.min.split(" ")[0]?t.min.split(" ")[1]:"",max:t.max&&t.dateModel===t.max.split(" ")[0]?t.max.split(" ")[1]:"",actions:""},on:{input:t.checkMinutes},model:{value:t.timeModel,callback:function(e){t.timeModel=e},expression:"timeModel"}})],1)],1)]],2)},n=[],s={render:i,staticRenderFns:n};e.a=s}});
//# sourceMappingURL=45.3a78306c8e3c8ee49236.js.map