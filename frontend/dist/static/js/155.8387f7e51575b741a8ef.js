webpackJsonp([155],{1579:function(t,e,o){var a=o(1580);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(456)("0ce91f39",a,!0,{})},1580:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Bancos.vue",sourceRoot:""}])},1581:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-dialog",{attrs:{width:"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formPago"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[t._v(t._s(t.modalTitulo))])]),t._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5|not_in:"+t.codigosUsados,expression:"'required|max:5|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":t.errors.collect("codigo")},model:{value:t.banco.codigo,callback:function(e){t.$set(t.banco,"codigo",e)},expression:"banco.codigo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+t.nombresUsados,expression:"'required|max:150|not_in:'  + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":t.errors.collect("nombre")},model:{value:t.banco.nombre,callback:function(e){t.$set(t.banco,"nombre",e)},expression:"banco.nombre"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("postulador",{ref:"postulaTercero",attrs:{nodata:"Busqueda por nombre o número de documento.",required:"",hint:"identificacion",itemtext:"nombre_completo",datatitle:"identificacion",datasubtitle:"nombre_completo",filter:"identificacion_completa,nombre_completo",label:null!=t.banco.gn_tercero_id?"Tercero seleccionado ":"tercero ",scope:"formPago",entidad:"terceros",preicon:"person",value:t.banco.tercero,routeparams:"gn_tipdocidentidad_id=12",clearable:""},on:{change:function(e){return t.banco.gn_tercero_id=e},objectReturn:function(e){return t.terceroSeleccionado(e)}}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-slide-y-transition",[t.banco.tercero?o("v-layout",[o("v-card",{staticClass:"grey lighten-4 d-flex cardProveedor pt-1"},[o("v-card-title",{staticClass:"grey lighten-2 pr-0"},[o("span",{staticClass:"title",domProps:{textContent:t._s("Datos Básicos Proveedor: ")}})]),t._v(" "),o("v-container",{staticClass:"pr-0",attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-card",{staticClass:"grey lighten-4 elevation-0",staticStyle:{"max-width":"100% !important"}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs6:"",sm6:"",md7:"",xl7:""}},[o("v-card-title",{staticClass:"pa-1 pt-1",attrs:{"primary-title":""}},[o("div",[o("div",[o("v-icon",{attrs:{size:"20"}},[t._v("portrait")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.banco.tercero.nombre1?t.banco.tercero.nombre1+" "+t.banco.tercero.apellido1:t.banco.tercero.razon_social)}})],1),t._v(" "),o("div",[o("v-icon",{attrs:{size:"20"}},[t._v("near_me")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.banco.tercero.identificacion)}})],1),t._v(" "),o("div",[o("v-icon",{attrs:{size:"20"}},[t._v("phone")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.banco.tercero.telefono_fijo?t.banco.tercero.telefono_fijo:"No registra.")}})],1),t._v(" "),o("div",[o("v-icon",{attrs:{size:"20"}},[t._v("phone_android")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.banco.tercero.celular?t.banco.tercero.celular:"No registra.")}})],1)])])],1),t._v(" "),o("v-flex",{staticClass:"pb-1",attrs:{xs6:"",sm6:"",md5:"",xl5:""}},[o("div",{staticClass:"text-xs-center",staticStyle:{"max-width":"100%"}},[o("v-icon",{staticClass:"icone",attrs:{size:"86",color:"#375d7b"}},[t._v("store_mall_directory")])],1)])],1)],1)],1)],1)],1)],1)],1):t._e()],1)],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:",expression:"'required|max:150|not_in:'"}],key:"codigoACH",attrs:{label:"Código ACH",name:"codigoACH",required:"","error-messages":t.errors.collect("codigoACH")},model:{value:t.banco.codigo_ach,callback:function(e){t.$set(t.banco,"codigo_ach",e)},expression:"banco.codigo_ach"}})],1)],1)],1),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),t._v(" "),o("v-btn",{on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"primary",disabled:t.errors.any()},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),o("v-card",[o("toolbar-list",{attrs:{info:t.infoComponent,title:"Bancos",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Banco",btnplustruncate:""},on:{click:function(e){t.dialog=!0}}}),t._v(" "),o("v-card-title",[o("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.bancos,loading:t.tableLoading,pagination:t.pagination,"hide-actions":"",search:t.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[10,25,50,{text:"Todos",value:-1}]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",[t._v(t._s(e.item.codigo))]),t._v(" "),o("td",[t._v(t._s(e.item.nombre))]),t._v(" "),o("td",[t._v(t._s(e.item.tercero.nombre_completo))]),t._v(" "),o("td",[t._v(t._s(e.item.codigo_ach))]),t._v(" "),o("td",{staticClass:"text-xs-center"},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(o){return t.edit(e.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("edit")])],1),t._v(" "),o("span",[t._v("Editar")])],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("\n        "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" de "+t._s(e.itemsLength)+"\n      ")]}}])},[t._v(" "),o("template",{slot:"no-data"},[t.tableLoading?o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n          Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[t._v("sentiment_very_dissatisfied")])],1):o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n          Estamos cargando los registros. "),o("v-icon",[t._v("sentiment_satisfied_alt")])],1)],1),t._v(" "),t._v(" "),o("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('\n        No se encontraron resultados de "'+t._s(t.search)+'"\n      ')])],2),t._v(" "),o("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[o("v-pagination",{attrs:{length:t.pages},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},n=[],s={render:a,staticRenderFns:n};e.a=s},507:function(t,e,o){"use strict";function a(t){o(1579)}Object.defineProperty(e,"__esModule",{value:!0});var n=o(992),s=o(1581),r=o(1),i=a,c=r(n.a,s.a,!1,i,"data-v-fd80b33e",null);e.default=c.exports},992:function(t,e,o){"use strict";var a=o(13),n=o.n(a),s=o(14),r=o.n(s),i=o(7),c=o.n(i),l=o(12);e.a={name:"bancos",components:{Postulador:function(){return o.e(287).then(o.bind(null,747))},ToolbarList:function(){return new Promise(function(t){t()}).then(o.bind(null,247))}},data:function(){return{bancos:[],banco:{},search:"",dialog:!1,tableLoading:!1,pagination:{},codigosUsados:"",nombresUsados:"",headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Tercero",align:"left",sortable:!1,value:"tercero"},{text:"Código ACH",align:"left",sortable:!1,value:"codigoACH"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset()},mounted:function(){var t={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",t)},watch:{"banco.tercero":function(t){if(null===t)return null!=t?this.banco.tercero:null}},beforeCreate:function(){var t=this;this.tableLoading=!0,this.axios.get("bancos").then(function(e){t.bancos=e.data.data,t.pagination.totalItems=t.bancos.length,t.tableLoading=!1,t.codigosUsados=t.getCodigosUsados(),t.nombresUsados=t.getNombresUsados()}).catch(function(t){return console.log("Hay un error. "+t),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("bancos")},modalTitulo:function(){return this.banco.id?"Edición del banco: "+this.banco.nombre:"Nuevo Banco"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{terceroSeleccionado:function(t){this.banco.tercero=t,null!==t&&!1===this.dialog&&(this.dialog=!0)},formReset:function(){this.banco={id:"",codigo:null,nombre:null,tercero:null,gn_tercero_id:null,codigo_ach:null},this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},edit:function(t){this.dialog=!0,this.banco=JSON.parse(c()(t)),this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(){var t=this;return this.bancos.map(function(e){if(null==t.banco.codigo||t.banco.codigo!==e.codigo)return e.codigo})},getNombresUsados:function(){var t=this;return this.bancos.map(function(e){if(null==t.banco.nombre||t.banco.nombre!==e.nombre)return e.nombre})},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},save:function(){var t=this;return r()(n.a.mark(function e(){var o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validador("formPago");case 2:if(!e.sent){e.next=7;break}o=t.banco.id?t.axios.put("bancos/"+t.banco.id,t.banco):t.axios.post("bancos",t.banco),o.then(function(e){t.banco.id?(t.$store.commit(l.b,{msg:"El banco se actualizó correctamente",color:"success"}),t.bancos.splice(t.bancos.findIndex(function(t){return t.id===e.data.data.id}),1,e.data.data)):(t.$store.commit(l.b,{msg:"El banco se creó correctamente",color:"success"}),t.bancos.splice(0,0,e.data.data)),t.dialog=!1,t.close()}).catch(function(e){t.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:t.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return e.stop()}},e,t)}))()}}}}});
//# sourceMappingURL=155.8387f7e51575b741a8ef.js.map