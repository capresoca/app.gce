webpackJsonp([183],{1140:function(e,t,o){"use strict";var a=o(13),i=o.n(a),n=o(14),s=o.n(n),r=o(7),l=o.n(r),c=o(12),d=o(59),u=o(58);t.a={name:"Juzgados",components:{Postulador:function(){return o.e(287).then(o.bind(null,747))},ToolbarList:function(){return new Promise(function(e){e()}).then(o.bind(null,247))},Loading:u.default},data:function(){return{juzgados:[],juzgado:{},codigosUsados:"",nombresUsados:"",search:"",dialog:!1,tableLoading:!1,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Municipio",align:"left",sortable:!1,value:"municipio"},{text:"Dirección",align:"left",sortable:!1,value:"direccion"},{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},created:function(){this.formReset(),this.reloadPage()},mounted:function(){var e={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",e)},watch:{"pagination.per_page":function(e){this.pagination.current_page=1,this.reloadPage()}},computed:{complementos:function(){return JSON.parse(l()(d.b.getters.complementosTercerosFormBasicos))},modalTitulo:function(){return this.juzgado.id?"Edición del juzgado: "+this.juzgado.nombre:"Nuevo Juzgado"},infoComponent:function(){return this.$store.getters.getInfoComponent("juzgados")},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{reloadPage:function(){var e=this;this.tableLoading=!0,this.axios.get("oj_juzgados?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25").then(function(t){t.data.meta.per_page=e.items_page.find(function(e){return e.value===parseInt(t.data.meta.per_page)})?parseInt(t.data.meta.per_page):-1,e.pagination=t.data.meta,e.juzgados=t.data.data,e.tableLoading=!1}).catch(function(t){return e.tableLoading=!1,console.log("Hay un error. "+t),!1})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),formReset:function(){this.juzgado={id:"",codigo:null,nombre:null,gn_municipio_id:null,direccion:null,telefono:null,email:null},this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},edit:function(e){this.dialog=!0,this.juzgado=JSON.parse(l()(e)),this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},filterMunicipios:function(e,t){var o=function(e){return null!=e?e:""},a=o(e.nombre+" "+e.nombre_departamento),i=o(t);return a.toString().toLowerCase().indexOf(i.toString().toLowerCase())>-1},openDialog:function(){this.dialog=!0,this.formReset()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(){var e=this;return this.juzgados.map(function(t){if(null==e.juzgado.codigo||e.juzgado.codigo!==t.codigo)return t.codigo})},getNombresUsados:function(){var e=this;return this.juzgados.map(function(t){if(null==e.juzgado.nombre||e.juzgado.nombre!==t.nombre)return t.nombre})},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},save:function(){var e=this;return s()(i.a.mark(function t(){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formJuzgados");case 2:if(!t.sent){t.next=7;break}o=e.juzgado.id?e.axios.put("oj_juzgados/"+e.juzgado.id,e.juzgado):e.axios.post("oj_juzgados",e.juzgado),o.then(function(t){e.juzgado.id?(e.$store.commit(c.b,{msg:"El juzgado se actualizó correctamente",color:"success"}),e.juzgados.splice(e.juzgados.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.$store.commit(c.b,{msg:"El juzgado se creó correctamente",color:"success"}),e.juzgados.splice(0,0,t.data.data)),e.dialog=!1,e.close()}).catch(function(t){e.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}),t.next=8;break;case 7:e.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return t.stop()}},t,e)}))()}}}},2034:function(e,t,o){var a=o(2035);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(456)("4e849296",a,!0,{})},2035:function(e,t,o){t=e.exports=o(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Juzgados.vue",sourceRoot:""}])},2036:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-dialog",{attrs:{width:"720px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formJuzgados"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+e.nombresUsados,expression:"'required|max:150|not_in:'  + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.juzgado.nombre,callback:function(t){e.$set(e.juzgado,"nombre",t)},expression:"juzgado.nombre"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Municipio Origen",items:e.complementos.municipios,"item-value":"id","item-text":"nombre",name:"municipio origen",required:"","error-messages":e.errors.collect("municipio origen"),filter:e.filterMunicipios},scopedSlots:e._u([{key:"item",fn:function(t){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.nombre_departamento)}})],1)]]}}]),model:{value:e.juzgado.gn_municipio_id,callback:function(t){e.$set(e.juzgado,"gn_municipio_id",t)},expression:"juzgado.gn_municipio_id"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[o("v-text-field",{key:"direccion",attrs:{label:"Dirección",name:"direccion"},model:{value:e.juzgado.direccion,callback:function(t){e.$set(e.juzgado,"direccion",t)},expression:"juzgado.direccion"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[o("v-text-field",{key:"direccion",attrs:{label:"Teléfono",name:"telefono"},model:{value:e.juzgado.telefono,callback:function(t){e.$set(e.juzgado,"telefono",t)},expression:"juzgado.telefono"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[o("v-text-field",{key:"email",attrs:{label:"Email",name:"email"},model:{value:e.juzgado.email,callback:function(t){e.$set(e.juzgado,"email",t)},expression:"juzgado.email"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"not_in:"+e.codigosUsados,expression:"'not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo","error-messages":e.errors.collect("codigo")},model:{value:e.juzgado.codigo,callback:function(t){e.$set(e.juzgado,"codigo",t)},expression:"juzgado.codigo"}})],1)],1)],1),e._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{color:"primary",disabled:e.errors.any()},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),o("v-card",[o("toolbar-list",{attrs:{info:e.infoComponent,title:"Juzgados",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Juzgado",btnplustruncate:""},on:{click:e.openDialog}}),e._v(" "),o("loading",{model:{value:e.tableLoading,callback:function(t){e.tableLoading=t},expression:"tableLoading"}}),e._v(" "),o("v-container",{attrs:{fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-right",attrs:{xs1:"",sm3:"",md6:""}},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:e.reloadPage},slot:"activator"},[o("v-icon",[e._v("cached")])],1),e._v(" "),o("span",[e._v("Actualizar registros")])],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[o("v-select",{attrs:{label:"Registros por página",items:e.items_page,"item-text":"text","item-value":"value"},model:{value:e.pagination.per_page,callback:function(t){e.$set(e.pagination,"per_page",t)},expression:"pagination.per_page"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-text-field",{attrs:{"append-icon":"search",label:"Buscar"},on:{input:e.buscar},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.juzgados,loading:e.tableLoading,pagination:e.pagination,"total-items":e.juzgados.length,search:e.search,"hide-actions":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",[e._v(e._s(t.item.nombre))]),e._v(" "),o("td",[e._v(e._s(t.item.municipio.nombre))]),e._v(" "),o("td",[e._v(e._s(t.item.direccion?t.item.direccion:"No registra"))]),e._v(" "),o("td",[e._v(e._s(t.item.codigo?t.item.codigo:"No registra"))]),e._v(" "),o("td",[o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-icon",[e._v("chevron_left")]),e._v(" "),o("v-icon",[e._v("close")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.edit(t.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),o("span",[e._v("Editar")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("far fa-file-pdf")])],1),e._v(" "),o("span",[e._v("Imprimir")])],1)],1)],1)]}}])},[e._v(" "),o("template",{slot:"no-data"},[e.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n            Estamos cargando los registros. "),o("v-icon",[e._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n            Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1),e._v(" "),o("template",{slot:"footer"},[o("td",{staticClass:"text-xs-center",attrs:{colspan:"100%"}},[o("v-pagination",{attrs:{"total-visible":7,length:e.pagination.last_page},on:{input:e.reloadPage},model:{value:e.pagination.current_page,callback:function(t){e.$set(e.pagination,"current_page",t)},expression:"pagination.current_page"}})],1)])],2)],1)],1)],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},604:function(e,t,o){"use strict";function a(e){o(2034)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(1140),n=o(2036),s=o(1),r=a,l=s(i.a,n.a,!1,r,"data-v-74033c9e",null);t.default=l.exports}});
//# sourceMappingURL=183.6b1a7f668dbcca7c60b6.js.map