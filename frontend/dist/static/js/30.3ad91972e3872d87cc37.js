webpackJsonp([30],{1347:function(e,a,t){"use strict";var o=t(13),n=t.n(o),i=t(14),s=t.n(i),r=t(7),l=t.n(r),c=t(58),u=t(2632),m=t(2636);a.a={name:"Recompensaciones",components:{Loading:c.default,DialogDescargaFtp:m.a,FiltroRegistroCompensaciones:u.a},data:function(){return{loading:!1,showForm:!0,rutaBaseUno:null,dataTableCom:{nameItemState:"tableReccompensaciones",route:"reccompensaciones/pilas",makeHeaders:[{text:"Fecha de Pago",align:"left",sortable:!1,value:"fecha_pago",classData:"",component:{template:"<span>{{value.fecha_pago ? value.fecha_pago : ''}}</span>",props:["value"]}},{text:"Operador",align:"left",sortable:!1,value:"operador",classData:"",component:{template:"<span>{{value.operador ? value.operador : ''}}</span>",props:["value"]}},{text:"Número Planilla",align:"left",sortable:!1,value:"numero_planilla"},{text:"Periodo Pago",align:"left",sortable:!1,value:"periodo_pago"},{text:"Tipo Archivo",align:"left",sortable:!1,value:"tipo_archivo"},{text:"Tipo Identificación",align:"left",sortable:!1,value:"tipo_documento"},{text:"N° Identificación",align:"left",sortable:!1,value:"numero_documento"},{text:"Fecha Descarga",align:"left",sortable:!1,value:"fecha_descarga"},{text:"Fecha Cargue",align:"left",sortable:!1,value:"fecha_cargue"},{text:"Resultado",align:"left",sortable:!1,value:"resultado",component:{template:"<span>\n                {{'CARGUE ' + (value.resultado\n                    ? (value.resultado === 1\n                      ? 'EXITOSO'\n                      : (value.resultado === 0\n                        ? 'CON INCONSISTENCIAS'\n                        : (value.resultado === 2\n                          ? 'CON INCONSISTENCIAS CONTENIDO'\n                          : (value.resultado === 3\n                            ? 'ACTIVO'\n                            : 'SIN REGISTRO')))) : '')}}</span>",props:["value"]}},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0",value:"id"}]}}},created:function(){this.rutaBaseUno=this.clone(this.dataTableCom.route)},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("recCompensaciones")}},methods:{resetOptions:function(e){return e.options=[],this.infoComponent&&this.infoComponent.permisos.imprimir&&e.options.push({event:"descargar",icon:"save_alt",tooltip:"Descargue PILA"}),this.infoComponent&&this.infoComponent.permisos.agregar&&e.options.push({event:"eliminarItem",icon:"save_alt",tooltip:"Eliminar PILA"}),e},filterOrSet:function(e){switch(console.log("CARGUE",e),e.opcion){case"uno":var a=this.clone(this.rutaBaseUno);if(null!==e.fecha_inicio||null!==e.fecha_fin||null!==e.numero_planilla||null!==e.numero_documento||null!==e.periodo_pago||null!==e.tipo_archivo||null!==e.estadoC||null!==e.otraEPS){var t={fechaInicio:e.fecha_inicio,fechaFin:e.fecha_fin,numeroPlanilla:e.numero_planilla,numeroDocumento:e.numero_documento,periodoPago:e.periodo_pago,tipoArchivo:e.tipo_archivo,estadoC:e.estadoC,otraEPS:e.otraEPS};null!==a&&0===a.indexOf("param")&&(a=this.rutaBaseUno);var o=l()(t);a=a+(a.indexOf("?")>-1?"&":"?")+"collection="+o}this.dataTableCom.route=a;break;case"dos":this.dataTableCom.route=this.rutaBaseUno,this.$refs.compensacionesTable.opcionEvent("ocho");break;case"tres":this.$refs.dialogFTP.assign(null);break;case"seis":this.exportar(e)}},exportar:function(e){if(null===e.fecha_inicio||null===e.fecha_fin)this.$store.commit("SNACK_SHOW",{msg:"Error: Fecha Inicio y Fecha Fin son obligatorios. ",color:"error"});else if(null===e.estadoC)this.$store.commit("SNACK_SHOW",{msg:"Error: Debe seleccionar un resultado de cargue. ",color:"error"});else if("I"!==e.tipo_archivo&&"IP"!==e.tipo_archivo)this.$store.commit("SNACK_SHOW",{msg:"Error: El tipo de archivo está vacío o no es válido para exportar masivo. ",color:"error"});else{var a={fechaInicio:e.fecha_inicio,fechaFin:e.fecha_fin,numeroPlanilla:e.numero_planilla,numeroDocumento:e.numero_documento,periodoPago:e.periodo_pago,tipoArchivo:e.tipo_archivo,estadoC:e.estadoC,otraEPS:e.otraEPS},t=l()(a);this.filePrint("reportes-reccompensaciones-pila&collection="+t)}},descargarOriginal:function(e){this.loading=!0,this.filePrint("reporte-pila&ìd="+e.consecutivo_recaudo+"&error="+!1),this.loading=!this.loading},eliminarItem:function(e){var a=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.axios.get("reccompensaciones/planilla-conciliada/"+e.consecutivo_recaudo).then(function(t){void 0!==t.data.data&&!1===t.data.data?a.axios.delete("reccompensaciones/eliminar-conciliada/"+e.consecutivo_recaudo).then(function(e){e.data.data?a.$store.commit("SNACK_SHOW",{msg:"La planilla conciliada se ha eliminado correctamente.",color:"success"}):a.$store.commit("SNACK_SHOW",{msg:"Error No Manejado.",color:"error"})}).catch(function(e){a.$store.commit("SNACK_ERROR_LIST",{expression:" al eliminar el registro. ",error:e})}):a.$store.commit("SNACK_SHOW",{msg:"No es posible eliminar la planilla, ya se encuentra conciliada. ",color:"error"})}).catch(function(e){a.$store.commit("SNACK_ERROR_LIST",{expression:" al realizar la validación. ",error:e})});case 2:console.log("RESULTADO",e);case 3:case"end":return t.stop()}},t,a)}))()}}}},1348:function(e,a,t){"use strict";a.a={name:"FiltroRegistroCompensaciones",data:function(){return{minDate:"1900-01-01",item:null}},created:function(){this.formReset()},computed:{tipoArchivos:function(){return[{valor:"A"},{valor:"I"},{valor:"AP"},{valor:"IP"},{valor:"AR"},{valor:"IR"}]},resultados:function(){return[{id:1,nombre:"Cargue Exitoso"},{id:0,nombre:"Con Inconsistencias"}]},epss:function(){return[{id:1,nombre:"Si"},{id:0,nombre:"No"}]}},methods:{opcionEvent:function(e){if("ocho"===e)this.formReset();else{var a=this.clone(this.item);a.opcion=e,this.$emit("filterOrSet",a)}},formReset:function(){this.item={fecha_inicio:null,fecha_fin:null,fecha_pago:null,operador:null,numero_planilla:null,tipo_archivo:null,fecha_descarga:null,fecha_cargue:null,tipo_documento:null,numero_documento:null,periodo_pago:null,codigo_eps_transfiere:null,estadoC:null,otraEPS:null}}}}},1349:function(e,a,t){"use strict";var o=t(13),n=t.n(o),i=t(14),s=t.n(i);a.a={name:"DialogDescargaFtp",components:{InputNumber:function(){return new Promise(function(e){e()}).then(t.bind(null,254))}},data:function(){return{show:!1,minDate:"1900-01-01",maxDate:(new Date).toISOString().substr(0,10),active:[],loadingSubmit:!1,item:null,pila:null,datos:[],message:"",dialogLoading:!1,activarLoad:!1,open:["Recaudos"],isLoading:!1,tree:[],types:[],archivos:[],headers:[{text:"Archivo",align:"left",sortable:!1,value:"archivo"},{text:"Fecha Descarga",align:"left",sortable:!1,value:"fecha_descarga"}]}},watch:{show:function(e){var a=this;e||setTimeout(function(){a.loadingSubmit=!1,a.item=null,a.open=[],a.$validator.reset(),a.formReset()},500)}},created:function(){this.formReset()},methods:{assign:function(e){this.getDescarga(),this.show=!this.show},submit:function(){var e=this;return s()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.dialogLoading=!0,e.message="Enviando archivo...",a.next=4,e.axios.post("reccompensaciones/pilas",{}).then(function(a){if(""!==a.data){console.log("RESPUESTA",a);var t=a.data.data;e.resultado[0].value=t.archivosProcesados,e.resultado[1].value=t.archivosExitosos,e.resultado[2].value=t.archivosErroneos,e.activarLoad=!e.activarLoad,e.$store.commit("SNACK_SHOW",{msg:a.data.message,color:"success"}),e.dialogLoading=!0,e.message=""}}).catch(function(a){e.$store.commit("SNACK_ERROR_LIST",{expression:" Error al obtener los datos.",error:a})});case 4:console.log("Enviar...");case 5:case"end":return a.stop()}},a,e)}))()},getDescarga:function(){var e=this;return s()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.axios.get("reccompensaciones/directories/descargas").then(function(a){console.log("response..",a),""!==a.data&&(e.pila.fecha_pago=a.data.data.diaSeleccionado,e.pila.pendientes=a.data.data.diasRestantes,e.pila.archivos=a.data.data.archivos)}).catch(function(a){e.$store.commit("SNACK_ERROR_LIST",{expression:" error al obtener los datos.",error:a})});case 2:case"end":return a.stop()}},a,e)}))()},formReset:function(){this.pila={fecha_pago:null,pendientes:0,archivos:[]},this.datos=[],this.resultado=[{name:"Cantidad Archivos Procesados",value:0,color:"black--text"},{name:"Cantidad Archivos Cargados Èxitosamente",value:0,color:"green--text"},{name:"Cantidad Archivos Con Inconsistencias",value:0,color:"red--text"}]}}}},2630:function(e,a,t){var o=t(2631);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t(456)("7d1b636c",o,!0,{})},2631:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Recompensaciones.vue",sourceRoot:""}])},2632:function(e,a,t){"use strict";function o(e){t(2633)}var n=t(1348),i=t(2635),s=t(1),r=o,l=s(n.a,i.a,!1,r,"data-v-70a1cdea",null);a.a=l.exports},2633:function(e,a,t){var o=t(2634);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t(456)("49670438",o,!0,{})},2634:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"FiltroRegistroCompensaciones.vue",sourceRoot:""}])},2635:function(e,a,t){"use strict";var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",[t("toolbar-list",{attrs:{title:"Cargue PILA"}}),e._v(" "),t("v-form",{attrs:{"data-vv-scope":"formDatos"}},[t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[t("input-date",{directives:[{name:"validate",rawName:"v-validate",value:"fechaValida:YYYY-MM-DD",expression:"'fechaValida:YYYY-MM-DD'"}],attrs:{label:"Fecha Inicio (Año-Mes-Día)",format:"YYYY-MM-DD",min:e.minDate,max:e.item.fecha_fin,name:"fecha","error-messages":e.errors.collect("fecha")},model:{value:e.item.fecha_inicio,callback:function(a){e.$set(e.item,"fecha_inicio",a)},expression:"item.fecha_inicio"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[t("input-date",{directives:[{name:"validate",rawName:"v-validate",value:"fechaValida:YYYY-MM-DD",expression:"'fechaValida:YYYY-MM-DD'"}],attrs:{label:"Fecha Fin (Año-Mes-Día)",format:"YYYY-MM-DD",min:e.item.fecha_inicio,name:"fecha","error-messages":e.errors.collect("fecha")},model:{value:e.item.fecha_fin,callback:function(a){e.$set(e.item,"fecha_fin",a)},expression:"item.fecha_fin"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[t("v-text-field",{key:"número planilla",attrs:{label:"Número Planilla",name:"número planilla"},model:{value:e.item.numero_planilla,callback:function(a){e.$set(e.item,"numero_planilla",a)},expression:"item.numero_planilla"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[t("v-text-field",{key:"número de documento",attrs:{label:"Número de Documento",name:"número de documento"},model:{value:e.item.numero_documento,callback:function(a){e.$set(e.item,"numero_documento",a)},expression:"item.numero_documento"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[t("v-text-field",{key:"periodo de pago",attrs:{label:"Periodo de Pago",name:"periodo de pago"},model:{value:e.item.periodo_pago,callback:function(a){e.$set(e.item,"periodo_pago",a)},expression:"item.periodo_pago"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[t("v-select",{attrs:{items:e.tipoArchivos,"item-value":"valor","item-text":"valor",name:"tipo archivo",label:"Tipo Archivo",clearable:""},model:{value:e.item.tipo_archivo,callback:function(a){e.$set(e.item,"tipo_archivo",a)},expression:"item.tipo_archivo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[t("v-select",{attrs:{items:e.resultados,"item-value":"id","item-text":"nombre",name:"Resultado",label:"Resultado",clearable:""},model:{value:e.item.estadoC,callback:function(a){e.$set(e.item,"estadoC",a)},expression:"item.estadoC"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[t("v-select",{attrs:{items:e.epss,"item-value":"id","item-text":"nombre",name:"otra eps",label:"Otra Eps",clearable:""},model:{value:e.item.otraEPS,callback:function(a){e.$set(e.item,"otraEPS",a)},expression:"item.otraEPS"}})],1)],1)],1)],1),e._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-spacer"),e._v(" "),t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-flex",{attrs:{xs2:""}},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.opcionEvent("uno")}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"},domProps:{textContent:e._s("fas fa-search")}})],1),e._v(" "),t("span",[e._v("Buscar")])],1)],1),e._v(" "),t("v-flex",{attrs:{xs2:""}},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.opcionEvent("dos")}},slot:"activator"},[t("v-icon",{attrs:{color:"teal"},domProps:{textContent:e._s("fas fa-minus-circle")}})],1),e._v(" "),t("span",[e._v("Limpiar")])],1)],1),e._v(" "),t("v-flex",{attrs:{xs2:""}},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.opcionEvent("tres")}},slot:"activator"},[t("v-icon",{attrs:{color:"lime lighten-1"},domProps:{textContent:e._s("fas fa-download")}})],1),e._v(" "),t("span",[e._v("Descargar FTP")])],1)],1),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),t("v-flex",{attrs:{xs2:""}},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.opcionEvent("seis")}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"},domProps:{textContent:e._s("fas fa-file-export")}})],1),e._v(" "),t("span",[e._v("Exportar")])],1)],1),e._v(" "),e._e()],1),e._v(" "),t("v-spacer")],1)],1)},n=[],i={render:o,staticRenderFns:n};a.a=i},2636:function(e,a,t){"use strict";function o(e){t(2637)}var n=t(1349),i=t(2639),s=t(1),r=o,l=s(n.a,i.a,!1,r,"data-v-6a5a4c36",null);a.a=l.exports},2637:function(e,a,t){var o=t(2638);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t(456)("08ed176b",o,!0,{})},2638:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"DialogDescargaFtp.vue",sourceRoot:""}])},2639:function(e,a,t){"use strict";var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-dialog",{attrs:{width:"900"},model:{value:e.show,callback:function(a){e.show=a},expression:"show"}},[t("v-card",[t("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogLoading,callback:function(a){e.dialogLoading=a},expression:"dialogLoading"}},[t("v-card",{attrs:{color:"primary",dark:""}},[t("v-card-text",[t("span",{domProps:{textContent:e._s(e.message)}}),e._v(" "),t("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),t("toolbar-list",{attrs:{title:"Descargue FTP",subtitle:"Cargue PILA"}}),e._v(" "),t("v-layout",{attrs:{"justify-space-between":"","pa-3":""}},[t("v-flex",{attrs:{xs12:""}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3 pa-2"},[t("h3",{staticClass:"body-1 font-weight-thin",domProps:{textContent:e._s(e.activarLoad?"Cargue PILA":"Archivos Pendientes por Procesar")}})]),e._v(" "),e.activarLoad?t("v-slide-y-transition",[t("v-container",[t("v-layout",[t("v-flex",{attrs:{xs12:"",sm12:""}},e._l(e.resultado,function(a,o){return t("v-list-tile",{key:o,attrs:{avatar:""}},[t("v-list-tile-content",[t("v-list-tile-title",{class:a.color,domProps:{innerHTML:e._s(""+a.name)}})],1),e._v(" "),t("v-list-tile-avatar",[t("v-btn",{attrs:{fab:"",flat:""},domProps:{innerHTML:e._s("<b>"+a.value+"</b>")}})],1)],1)}),1)],1)],1)],1):t("v-form",{ref:"formContratos"},[t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("input-date",{attrs:{label:"Día seleccionado",format:"YYYY-MM-DD",min:e.minDate,max:e.maxDate,name:"día seleccionado",readonly:""},model:{value:e.pila.fecha_pago,callback:function(a){e.$set(e.pila,"fecha_pago",a)},expression:"pila.fecha_pago"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{key:"días restantes",attrs:{label:"Días restantes",name:"días restantes",readonly:""},model:{value:e.pila.pendientes,callback:function(a){e.$set(e.pila,"pendientes",a)},expression:"pila.pendientes"}})],1)],1),e._v(" "),t("v-flex",{staticClass:"pt-0 mt-0",attrs:{xs12:""}},[t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.pila.archivos},scopedSlots:e._u([{key:"items",fn:function(a){return[t("td",{domProps:{textContent:e._s(a.item.nombre_archivo)}}),e._v(" "),t("td",{domProps:{textContent:e._s(a.item.fecha_descarga)}})]}}],null,!1,4266467269)})],1)],1)],1)],1)],1)],1),e._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-btn",{on:{click:function(a){e.show=!1}}},[e._v("Cancelar")]),e._v(" "),t("v-spacer"),e._v(" "),e.activarLoad?e._e():t("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(a){return a.preventDefault(),e.submit(a)}}},[e._v("Ejecutar Cargue")])],1)],1)],1)},n=[],i={render:o,staticRenderFns:n};a.a=i},2640:function(e,a,t){"use strict";var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",[t("loading",{model:{value:e.loading,callback:function(a){e.loading=a},expression:"loading"}}),e._v(" "),t("dialog-descarga-ftp",{ref:"dialogFTP"}),e._v(" "),t("toolbar-list",{attrs:{info:e.infoComponent,title:"Compensaciones",subtitle:"Carga de archivos"}}),e._v(" "),t("v-slide-y-transition",[t("filtro-registro-compensaciones",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}],ref:"compensacionesTable",on:{filterOrSet:function(a){return e.filterOrSet(a)},cancel:function(a){e.showForm=!1}},model:{value:e.showForm,callback:function(a){e.showForm=a},expression:"showForm"}})],1),e._v(" "),t("data-table-v2",{ref:"tableReccompensaciones",attrs:{"con-registro":!1,"con-columnas":!1,"con-buscador":!1},on:{resetOption:function(a){return e.resetOptions(a)},descargar:function(a){return e.descargarOriginal(a)},eliminarItem:function(a){return e.eliminarItem(a)}},model:{value:e.dataTableCom,callback:function(a){e.dataTableCom=a},expression:"dataTableCom"}})],1)},n=[],i={render:o,staticRenderFns:n};a.a=i},725:function(e,a,t){"use strict";function o(e){t(2630)}Object.defineProperty(a,"__esModule",{value:!0});var n=t(1347),i=t(2640),s=t(1),r=o,l=s(n.a,i.a,!1,r,"data-v-d946c204",null);a.default=l.exports}});
//# sourceMappingURL=30.3ad91972e3872d87cc37.js.map