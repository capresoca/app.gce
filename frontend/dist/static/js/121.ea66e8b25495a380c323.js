webpackJsonp([121],{1086:function(t,a,e){"use strict";var i=e(23),o=e.n(i),r=e(7),s=e.n(r),n=e(13),l=e.n(n),c=e(14),d=e.n(c),u=e(58),m=e(59),_=e(12),v=e(248),f=e(251);a.a={name:"DetalleAutorizacion",props:["parametros"],components:{PostuladorV2:function(){return new Promise(function(t){t()}).then(e.bind(null,61))},InputDetailFlex:function(){return new Promise(function(t){t()}).then(e.bind(null,250))},InputFile:function(){return e.e(288).then(e.bind(null,748))},Confirmar:function(){return e.e(289).then(e.bind(null,749))},Loading:u.default},data:function(){return{menuDate:!1,minDate:"1900-01-01",maxDate:(new Date).toISOString().substr(0,10),loading:!1,loadingContratos:!1,detalleAfiliado:function(){return e.e(290).then(e.bind(null,750))},filterIPSDestino:function(t,a){var e=function(t){return null!=t?t:""},i=e(t.entidad.nombre+" "+t.numero_contrato),o=e(a);return i.toString().toLowerCase().indexOf(o.toString().toLowerCase())>-1},filterModalidades:function(t,a){var e=function(t){return null!=t?t:""},i=e(t.codigo+" "+t.tipo+" "+t.modalidad),o=e(a);return i.toString().toLowerCase().indexOf(o.toString().toLowerCase())>-1},filterServicios:function(t,a){var e=function(t){return null!=t?t:""},i=e(t.servicio.codigo+" "+t.servicio.nombre),o=e(a);return i.toString().toLowerCase().indexOf(o.toString().toLowerCase())>-1},headersDetails:[{text:"Status",align:"center",sortable:!1},{text:"Tipo",sortable:!1},{text:"Código",sortable:!1},{text:"Descripción",sortable:!1},{text:"Cantidad",align:"center",sortable:!1},{text:"Valor unitario",align:"right",sortable:!1},{text:"Valor total",align:"right",sortable:!1}],headersDetailsAprobadas:[{text:"Tipo",sortable:!1},{text:"Código",sortable:!1},{text:"Descripción",sortable:!1},{text:"Cantidad",align:"center",sortable:!1},{text:"Valor usuario",align:"right",sortable:!1},{text:"Valor total",align:"right",sortable:!1}],headersDetailsSolicitadas:[{text:"Tipo",sortable:!1},{text:"Código",sortable:!1},{text:"Descripción",sortable:!1},{text:"Cantidad solicitada",align:"center",sortable:!1},{text:"Cantidad aprobada",align:"center",sortable:!1},{text:"Valor usuario",align:"right",sortable:!1},{text:"Valor total",align:"right",sortable:!1}],registroDetalle:null,tipoDetalle:{id:1,ruta:"cumcontratados",text:"Medicamentos"},tiposDetalle:[{id:1,ruta:"cumcontratados",text:"Medicamentos"},{id:2,ruta:"cupcontratados",text:"Procedimientos"},{id:3,ruta:"otroscontratados",text:"Otros"}],marcaTutela:!1,fab:!1,idAfiliadoValido:null,dialogA:{visible:!1,content:null,registroID:null},item:null,makeAutorizacion:{id:null,as_afiliado_id:null,as_regimen_id:null,entidad_origen_id:null,tipo_origen:null,tipo_destino:null,cie10_principal_id:null,cie10_rel1_id:null,cie10_rel2_id:null,au_modservicio_id:null,rs_contrato_id:null,rs_servicio_id:null,orden_medica:null,fecha_orden:null,historia_clinica:null,oj_tutela_id:null,alto_costo:0,pyp:0,atencion_materna:0,enfermedad_trasmisible:0,catastrofe:0,estado:"Registrada",observaciones:null,afiliado:null,contrato:null,servicio:null,entidad_origen:null,cie10_principal:null,cie10_rel1:null,cie10_rel2:null,detalles:[]},orden_medica:null,historia_clinica:null,contratosActivos:[],serviciosContratados:[],tutelas:[],cuotaCopagos:null,rangoActivo:null,calculoPagoError:null,multiplesTiposError:null,tipoValorPermitido:null,valorTotal:0,valorEPS:0,valorUsuario:0,generaSolicitud:!1}},watch:{contratosActivos:function(t){var a=this;t.find(function(t){return t.id===a.item.rs_contrato_id})||(this.item.contrato=null)},"item.contrato":function(t,a){var e=this;if(t){console.log("el val del contrato",t),this.item.rs_contrato_id=t.id;var i=t.servicios_contratados?t.servicios_contratados:[],o=i.find(function(t){return t.id===e.item.rs_servicio_id});this.item.rs_servicio_id=o?o.id:null,this.serviciosContratados=i,a&&t!==a&&(this.item.detalles=[],this.$refs.postuladorDetalle.reset())}else this.item.detalles=[],this.item.rs_contrato_id=null,this.serviciosContratados=[],this.item.rs_servicio_id=null},"item.afiliado":function(t,a){var e=this;return d()(l.a.mark(function i(){return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!t){i.next=12;break}return i.next=3,e.getTotalAutorizado();case 3:if(e.item.afiliado.total_autorizado=i.sent,e.getContratos(),null!==e.cuotaCopagos){i.next=9;break}return i.next=8,e.getCuotaCopagos();case 8:e.cuotaCopagos=i.sent;case 9:e.getRangoActivo(),e.tutelas=t.tutelas?t.tutelas:[],e.reloadPagos();case 12:a&&t!==a&&(e.item.cie10_principal=null,e.item.cie10_rel1=null,e.item.cie10_rel2=null,e.$refs.postuladorCie10P.reset(),e.$refs.postuladorCie10S.reset(),e.$refs.postuladorCie10T.reset());case 13:case"end":return i.stop()}},i,e)}))()},tutelas:function(t){var a=this;if(t){var e=t.find(function(t){return t.id===a.item.oj_tutela_id});this.item.oj_tutela_id=e?e.id:null,this.marcaTutela=null!==this.item.oj_tutela_id}},registroDetalle:function(t){var a=this;return d()(l.a.mark(function e(){var i,o,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a.item.detalles){e.next=9;break}return console.log("val registro",t),e.next=4,JSON.parse(s()(t));case 4:i=e.sent,o=a.item.detalles.find(function(t){return t.rs_cum_id===(i.rs_cum_id?i.id:null)&&t.rs_cups_id===(i.rs_cups_id?i.id:null)&&t.rs_otros_id===(i.rs_otros_id?i.id:null)}),o?(o.cantidad_solicitada++,o.valorTotal=o.valor*o.cantidad_solicitada):(r={au_autaprobada_id:null,au_autorizacion_id:a.item.id,au_autsolicitud_id:null,cantidad_aprobada:null,cantidad_solicitada:1,codigo:i.codigo,descripcion:i.descripcion,id:null,observaciones:null,rs_cum_id:i.rs_cum_id?i.id:null,rs_cups_id:i.rs_cups_id?i.id:null,rs_otros_id:i.rs_otros_id?i.id:null,tipo_valor:i.tipo_valor,valor:i.tarifa,valorTotal:i.tarifa,valor_usuario:null,status:!a.tipoValorPermitido||a.tipoValorPermitido===i.tipo_valor,requiere_aprobacion:!!i.nivel_autorizacion&&(i.nivel_autorizacion&&"Asesor"!==i.nivel_autorizacion)},a.item.detalles.unshift(r)),a.valorTotal=a.getValorTotal(),a.registroDetalle=null;case 9:case"end":return e.stop()}},e,a)}))()},okChecks:function(){this.reloadPagos()},"item.detalles":function(t){t&&(t.length?(this.tipoValorPermitido=t[t.length-1].tipo_valor,this.reloadStatus()):this.tipoValorPermitido=null,this.generaSolicitud=!!t.find(function(t){return t.requiere_aprobacion}),this.valorTotal=this.getValorTotal())},valorTotal:function(){this.reloadPagos()},"multiplesTipos.length":function(t,a){var e=this;this.$refs.postuladorDetalle&&0!==a&&this.$refs.postuladorDetalle.reset(),1===t&&(this.tipoDetalle=this.tiposDetalle.find(function(t){return t.id===e.multiplesTipos[0]}))}},computed:{multiplesTipos:function(){var t=[];return this.item&&this.item.detalles&&this.item.detalles.forEach(function(a){t.push(a.rs_cum_id?1:a.rs_cups_id?2:3)}),window.lodash.uniq(t)},complementos:function(){return m.b.getters.complementosFormAutorizacion},okChecks:function(){return this.item&&(this.item.alto_costo||this.item.pyp||this.item.atencion_materna||this.item.enfermedad_trasmisible||this.item.catastrofe)}},created:function(){this.getData()},beforeMount:function(){var t=this;f.a.extend("afiliadoValidoAutorizacion",{validate:function(a){return new o.a(function(e){if(null!==a&&void 0!==a&&""!==a){var i=t.item&&t.item.as_afiliado_id&&t.item.afiliado?3===t.item.afiliado.estado?{valido:!0,mensaje:null}:{valido:!1,mensaje:"El afiliado seleccionado no es valido para este trámite, su estado debe ser: "+t.complementos.estadosAfiliado.find(function(t){return 3===t.id}).nombre+"."}:{valido:!0,mensaje:null};return e({valid:i.valido,data:{message:i.mensaje}})}})},getMessage:function(t,a,e){return e.message}})},methods:{imprimir:function(t){var a=this;this.axios.get("firmar-ruta?nombre_ruta=autorizacione&id="+t).then(function(t){a.goRuta(t.data)}).catch(function(t){a.$store.commit(_.a,{expression:" al generar el documento. ",error:t})})},reloadStatus:function(){var t=this;this.item.detalles.forEach(function(a){a.status=a.tipo_valor===t.tipoValorPermitido})},getRangoActivo:function(){if(console.log("this.cuotaCopagos",this.cuotaCopagos),console.log("this.item.afiliado",this.item.afiliado),this.cuotaCopagos&&this.cuotaCopagos.length&&this.item.afiliado)if(2===this.item.afiliado.as_regimene_id)this.rangoActivo=this.cuotaCopagos.find(function(t){return"Sisben Nivel 2"===t.grupo});else{var t=this.item.afiliado.ingreso_total/this.cuotaCopagos[0].salminimo.valor;console.log("salMinimosCotizante",t);var a=JSON.parse(s()(this.cuotaCopagos));a.splice(this.cuotaCopagos.findIndex(function(t){return"Sisben Nivel 2"===t.grupo}),1),console.log("rangosContributivos",a),this.rangoActivo=a.find(function(a){return("Incluido"===a.limite_inferior_salario?t>=a.salminimos_inicio:t>a.salminimos_inicio)&&("Incluido"===a.limite_superior_salario?t<=a.salminimos_fin:t<a.salminimos_fin)})}console.log("rango activo",this.rangoActivo)},getValorTotal:function(){return window.lodash.sum(this.item.detalles.map(function(t){return t.valorTotal}))},reloadPagos:function(){var t=this;return d()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("el filtro",t.multiplesTipos.length),!(t.multiplesTipos.length>1)){a.next=6;break}t.calculoPagoError=null,t.multiplesTiposError="Solo se pueden asignar items que pertenezcan a un mismo tipo.",a.next=42;break;case 6:if(t.multiplesTiposError=null,!(!t.rangoActivo||null!==t.tipoValorPermitido&&t.item.detalles.length&&t.item.detalles.filter(function(a){return a.tipo_valor!==t.tipoValorPermitido}).length)){a.next=11;break}t.rangoActivo?t.calculoPagoError='No se puede generar Copago y Cuota moderadora en una misma autorización, hay items que infringen éste mandato. Para continuar, remueva los items con status "En conflicto".':t.calculoPagoError="No existen rangos configurados o el afiliado no aplica a ninguno de los rangos, ésto es indispensable para realizar el calculo de la liquidación de la autorización.",a.next=42;break;case 11:if(t.calculoPagoError=null,!t.item.afiliado||!(2===t.item.afiliado.as_regimene_id&&t.item.afiliado.nivel_sisben>=2&&!t.okChecks||1===t.item.afiliado.as_regimene_id)){a.next=41;break}if(!(2===t.item.afiliado.as_regimene_id&&t.item.afiliado.nivel_sisben>=2)){a.next=20;break}return t.valorUsuario=t.valorTotal*(t.rangoActivo.copago/100),a.next=17,t.getValorUsuarioTopes(t.valorUsuario);case 17:t.valorUsuario=a.sent,a.next=39;break;case 20:if(console.log("spy contributivo"),"Copago"!==t.tipoValorPermitido){a.next=37;break}if(!t.okChecks){a.next=27;break}t.valorUsuario=0,console.log("spy contributivo copago ok check"),a.next=35;break;case 27:if(1!==t.item.afiliado.as_tipafiliado_id){a.next=31;break}t.valorUsuario=0,a.next=35;break;case 31:return t.valorUsuario=t.valorTotal*(t.rangoActivo.copago/100),a.next=34,t.getValorUsuarioTopes(t.valorUsuario);case 34:t.valorUsuario=a.sent;case 35:a.next=39;break;case 37:t.valorUsuario=t.rangoActivo.cuota_moderadora,console.log("spy contributivo cuota");case 39:a.next=42;break;case 41:t.valorUsuario=0;case 42:t.valorEPS=t.valorTotal-t.valorUsuario;case 43:case"end":return a.stop()}},a,t)}))()},getValorUsuarioTopes:function(t){console.log("entrante",t);var a=JSON.parse(s()(t));a=a>this.rangoActivo.limite_evento?this.rangoActivo.limite_evento:a,console.log("regla tope",a);var e=a+this.item.afiliado.total_autorizado-this.rangoActivo.limite_anio;return console.log("diferecioa",e),a=e>0?a-e:a,console.log("regla tope año",a),a},getContratos:function(){var t=this;this.item.afiliado&&(this.loadingContratos=!0,this.axios.get("contratos?"+(this.item.afiliado.portabilidad_activa?"portabilidad":1===this.item.afiliado.as_regimene_id?"contributivo":"subsidiado")+"=1").then(function(a){""!==a.data&&(console.log("el response",a),t.contratosActivos=a.data.data,t.loadingContratos=!1)}).catch(function(a){t.loadingContratos=!1,t.$store.commit(_.a,{expression:" al traer los contratos para realizar la autorización. ",error:a})}))},getTotalAutorizado:function(){var t=this;return new o.a(function(a){t.axios.get("afiliados/"+t.item.afiliado.id+"?copago_anual=1").then(function(t){""!==t.data&&a(t.data.data.copago_anual)}).catch(function(e){a(0),t.$store.commit(_.a,{expression:" al traer el valor autorizado anual del afiliado. ",error:e})})})},getCuotaCopagos:function(){var t=this;return new o.a(function(a){t.axios.get("cuotacopagos").then(function(t){""!==t.data&&a(t.data.data)}).catch(function(e){a(!1),t.$store.commit(_.a,{expression:" al traer los registros activos de cuotas y copagos. ",error:e})})})},getData:function(){var t=this;return d()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.loading=!0,t.axios.get("autorizaciones/"+t.parametros.entidad.id).then(function(a){""!==a.data&&(t.idAfiliadoValido=JSON.parse(s()(a.data.data.as_afiliado_id)),a.data.data.detalles.forEach(function(t){t.valorTotal=t.cantidad_solicitada*t.valor,t.status=!0}),t.orden_medica=a.data.data.orden_medica?a.data.data.orden_medica.nombre:null,t.historia_clinica=a.data.data.historia_clinica?a.data.data.historia_clinica.nombre:null,t.item=a.data.data,t.loading=!1)}).catch(function(a){t.loading=!1,t.$store.commit(_.a,{expression:" al traer los datos de la autorización. ",error:a})});case 2:case"end":return a.stop()}},a,t)}))()},refresh:function(){this.item=JSON.parse(s()(this.makeAutorizacion)),this.idAfiliadoValido=null,this.$refs.ordenMedica&&this.$refs.ordenMedica.reset(),this.$refs.historiaClinica&&this.$refs.historiaClinica.reset(),this.$validator.reset()},getBase64:function(t){return new o.a(function(a,e){console.log("file",t);var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return a(i.result)},i.onerror=function(t){return e(t)}})},guardarConfirmar:function(){var t=this;return d()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.validado();case 2:if(!a.sent){a.next=5;break}t.dialogA.content="Si decide Aceptar, el formulario se procesará y no podrá editar estos datos.",t.dialogA.visible=!0;case 5:case"end":return a.stop()}},a,t)}))()},cancelaConfirmacion:function(){this.dialogA.visible=!1,this.dialogA.content=null},aceptaConfirmacion:function(){var t=this;return d()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.item.estado="Confirmada",a.next=3,t.submit();case 3:t.cancelaConfirmacion();case 4:case"end":return a.stop()}},a,t)}))()},validado:function(){var t=this;return d()(l.a.mark(function a(){var e,i,o,r;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$refs.ordenMedica.validate();case 2:return e=a.sent,a.next=5,t.$refs.historiaClinica.validate();case 5:return i=a.sent,a.next=8,t.$validator.validateAll();case 8:return o=a.sent,r=t.item.detalles.length,r||t.$store.commit(_.b,{msg:"Hay que registrar al menos un detalle.",color:"warning"}),a.abrupt("return",o&&r&&i&&e&&!t.calculoPagoError&&!t.multiplesTiposError);case 12:case"end":return a.stop()}},a,t)}))()},submit:function(){var t=this;return d()(l.a.mark(function a(){var e,i;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.validado();case 2:if(!a.sent){a.next=25;break}if(t.loading=!0,!(t.orden_medica instanceof File)){a.next=12;break}return a.t0=t.orden_medica.name,a.t1=t.orden_medica.size,a.t2=t.orden_medica.type,a.next=10,t.getBase64(t.orden_medica);case 10:a.t3=a.sent,t.item.orden_medica={id:null,name:a.t0,size:a.t1,type:a.t2,string:a.t3};case 12:if(!(t.historia_clinica instanceof File)){a.next=20;break}return a.t4=t.orden_medica.name,a.t5=t.orden_medica.size,a.t6=t.orden_medica.type,a.next=18,t.getBase64(t.historia_clinica);case 18:a.t7=a.sent,t.item.historia_clinica={id:null,name:a.t4,size:a.t5,type:a.t6,string:a.t7};case 20:e=t.item.id?"editar":"crear",i="editar"===e?t.axios.put("autorizaciones/"+t.item.id,t.item):t.axios.post("autorizaciones",t.item),i.then(function(a){console.log("response autorización",a),t.item=a.data.item,t.$store.commit(v.i,{item:a.data.item_o,estado:e,key:t.parametros.key}),t.loading=!1}).catch(function(a){t.loading=!1,t.$store.commit(_.a,{expression:"al guardar el registro de la autorización.",error:a})}),a.next=26;break;case 25:t.item.estado="Registrada";case 26:case"end":return a.stop()}},a,t)}))()}}}},1870:function(t,a,e){var i=e(1871);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(456)("d9716754",i,!0,{})},1871:function(t,a,e){a=t.exports=e(455)(!0),a.push([t.i,".table-detalle-solicitud table tbody td input{text-align:center!important}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/atencionUsuario/autorizaciones/DetalleAutorizacion.vue"],names:[],mappings:"AACA,8CACE,2BAA8B,CAC/B",file:"DetalleAutorizacion.vue",sourcesContent:["\n.table-detalle-solicitud table tbody td input{\n  text-align: center !important;\n}\n"],sourceRoot:""}])},1872:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",[e("loading",{model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}}),t._v(" "),e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-icon",[t._v("assignment")]),t._v(" "),e("v-toolbar-title",[t._v("Detalle autorización")])],1),t._v(" "),t.item?e("v-container",{attrs:{fluid:"","grid-list-xl":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("input-detail-flex",{attrs:{"flex-class":"xs12 sm8 md9",label:"Afiliado",text:t.item.afiliado.nombre_completo,hint:t.item.afiliado.identificacion_completa,"prepend-icon":t.item.afiliado.emoticon,suffix:"Estado: "+t.item.afiliado.estado_afiliado.codigo+" - "+t.item.afiliado.estado_afiliado.nombre,"append-button":{tooltip:"ver detalle",icon:"more_horiz",color:"blue-grey"}},on:{clickAppend:function(a){t.$store.commit("NAV_ADD_ITEM",{ruta:"detalleGeneralAfiliado",titulo:"Detalle afiliado",parametros:{entidad:t.item.afiliado,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm4 md3",label:"Regimen",text:t.item.afiliado.regimen.codigo+" - "+t.item.afiliado.regimen.nombre}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12",label:"Diagnóstico Principal",text:t.item.cie10_principal.descripcion,hint:t.item.cie10_principal.codigo,"prepend-icon":"local_hospital"}}),t._v(" "),t.item.cie10_rel1?e("input-detail-flex",{attrs:{"flex-class":"xs12",label:"Diagnóstico Relacionado 1",text:t.item.cie10_rel1.descripcion,hint:t.item.cie10_rel1.codigo,"prepend-icon":"queue"}}):t._e(),t._v(" "),t.item.cie10_rel2?e("input-detail-flex",{attrs:{"flex-class":"xs12",label:"Diagnóstico Relacionado 2",text:t.item.cie10_rel2.descripcion,hint:t.item.cie10_rel2.codigo,"prepend-icon":"queue"}}):t._e(),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm6 md8",label:"IPS Origen",text:t.item.entidad_origen.nombre,hint:t.item.entidad_origen.tercero.identificacion_completa,"prepend-icon":"location_city"}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm6 md4",label:"Tipo Origen",text:t.item.tipo_origen}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm6 md8",label:"Contrato",text:t.item.contrato.contrato.entidad.nombre,hint:"Contrato No. "+t.item.contrato.contrato.numero_contrato,"prepend-icon":"location_city"}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm6 md4",label:"Tipo Destino",text:t.item.tipo_destino}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm6 md8",label:"Servicio",text:t.serviciosContratados&&t.item.rs_servicio_id&&t.serviciosContratados.find(function(a){return a.id===t.item.rs_servicio_id})&&t.serviciosContratados.find(function(a){return a.id===t.item.rs_servicio_id}).servicio.codigo+" - "+t.serviciosContratados.find(function(a){return a.id===t.item.rs_servicio_id}).servicio.nombre}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm6 md4",label:"Modalidad servicio",text:t.complementos&&t.complementos.modalidadesServicio&&t.item.au_modservicio_id&&t.complementos.modalidadesServicio.find(function(a){return a.id===t.item.au_modservicio_id})&&t.complementos.modalidadesServicio.find(function(a){return a.id===t.item.au_modservicio_id}).codigo+" - "+t.complementos.modalidadesServicio.find(function(a){return a.id===t.item.au_modservicio_id}).tipo,hint:t.complementos&&t.complementos.modalidadesServicio&&t.item.au_modservicio_id&&t.complementos.modalidadesServicio.find(function(a){return a.id===t.item.au_modservicio_id})&&t.complementos.modalidadesServicio.find(function(a){return a.id===t.item.au_modservicio_id}).modalidad}}),t._v(" "),e("v-flex",{attrs:{dflex:""}},[e("v-checkbox",{attrs:{readonly:"",label:"Alto costo","false-value":0,"true-value":1},model:{value:t.item.alto_costo,callback:function(a){t.$set(t.item,"alto_costo",a)},expression:"item.alto_costo"}})],1),t._v(" "),e("v-flex",{attrs:{dflex:""}},[e("v-checkbox",{attrs:{readonly:"",label:"P y P","false-value":0,"true-value":1},model:{value:t.item.pyp,callback:function(a){t.$set(t.item,"pyp",a)},expression:"item.pyp"}})],1),t._v(" "),e("v-flex",{attrs:{dflex:""}},[e("v-checkbox",{attrs:{readonly:"",label:"Atención materna","false-value":0,"true-value":1},model:{value:t.item.atencion_materna,callback:function(a){t.$set(t.item,"atencion_materna",a)},expression:"item.atencion_materna"}})],1),t._v(" "),e("v-flex",{attrs:{dflex:""}},[e("v-checkbox",{attrs:{readonly:"",label:"Enfermedad trasmisible","false-value":0,"true-value":1},model:{value:t.item.enfermedad_trasmisible,callback:function(a){t.$set(t.item,"enfermedad_trasmisible",a)},expression:"item.enfermedad_trasmisible"}})],1),t._v(" "),e("v-flex",{attrs:{dflex:""}},[e("v-checkbox",{attrs:{readonly:"",label:"Catastrofe","false-value":0,"true-value":1},model:{value:t.item.catastrofe,callback:function(a){t.$set(t.item,"catastrofe",a)},expression:"item.catastrofe"}})],1),t._v(" "),t.tutelas.length?e("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[e("v-layout",{attrs:{"align-center":"","fill-height":""}},[e("v-flex",{attrs:{xs1:"",dflex:""}},[e("v-checkbox",{attrs:{readonly:"",label:t.marcaTutela?"":"Tutela"},model:{value:t.marcaTutela,callback:function(a){t.marcaTutela=a},expression:"marcaTutela"}})],1),t._v(" "),e("input-detail-flex",{attrs:{label:"Tutela",text:t.tutelas&&t.item.oj_tutela_id&&t.tutelas.find(function(a){return a.id===t.item.oj_tutela_id})&&t.tutelas.find(function(a){return a.id===t.item.oj_tutela_id}).no_tutela+" - "+t.tutelas.find(function(a){return a.id===t.item.oj_tutela_id}).tipo_tutela,hint:t.tutelas&&t.item.oj_tutela_id&&t.tutelas.find(function(a){return a.id===t.item.oj_tutela_id})&&"Fecha notificación: "+t.tutelas.find(function(a){return a.id===t.item.oj_tutela_id}).fecha_notificacion+" | Estado actual: "+t.tutelas.find(function(a){return a.id===t.item.oj_tutela_id}).estado,"append-button":{tooltip:"ver detalle",icon:"more_horiz",color:"blue-grey"}},on:{clickAppend:function(a){t.$store.commit("NAV_ADD_ITEM",{ruta:"detalleTutela",titulo:"Detalle tutela",parametros:{entidad:{id:t.item.oj_tutela_id},tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}}})],1)],1):t._e(),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12",label:"Observaciones",text:t.item.observaciones}}),t._v(" "),e("v-flex",{attrs:{xs12:""}},["Registrada"===t.item.estado?e("v-card",[e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-icon",[t._v("assignment")]),t._v(" "),e("v-toolbar-title",[t._v("Detalles de la autorización")]),t._v(" "),e("small",{staticClass:"mt-2 ml-1"},[t._v(" Medicamentos, Procedimientos, Otros")])],1),t._v(" "),e("v-data-table",{staticClass:"elevation-1 table-detalle-solicitud",attrs:{headers:t.headersDetails,items:t.item.detalles,"hide-actions":"","no-data-text":"No hay detalles registrados"},scopedSlots:t._u([{key:"headers",fn:function(a){return[e("tr",t._l(a.headers,function(a,i){return 1!==i||1===i&&null!==t.calculoPagoError?e("th",{key:a.text},[t._v("\n                  "+t._s(a.text)+"\n                ")]):t._e()}),0)]}},{key:"items",fn:function(a){return[null!==t.calculoPagoError?e("td",{staticClass:"text-xs-center",attrs:{width:"20px"}},[e("v-tooltip",{attrs:{top:""}},[e("v-icon",{attrs:{slot:"activator",color:a.item.status?"success":"error"},on:{click:function(t){}},slot:"activator"},[t._v(t._s(a.item.status?"verified_user":"warning"))]),t._v(" "),e("span",[t._v(t._s(a.item.status?"OK":"En conflicto"))])],1)],1):t._e(),t._v(" "),e("td",[t._v("\n                "+t._s(a.item.rs_cum_id?"Medicamento":a.item.rs_cups_id?"Procedimiento":"Otro")+"\n                "),a.item.requiere_aprobacion?e("v-tooltip",{attrs:{top:""}},[e("v-btn",{staticClass:"ma-0",attrs:{slot:"activator",flat:"",icon:"",color:"warning"},slot:"activator"},[e("v-icon",[t._v("warning")])],1),t._v(" "),e("span",[t._v("Requiere aprobación")])],1):t._e()],1),t._v(" "),e("td",[t._v(t._s(a.item.codigo))]),t._v(" "),e("td",[t._v(t._s(a.item.descripcion))]),t._v(" "),e("td",{staticClass:"text-xs-center",attrs:{width:"200px"}},[t._v(t._s(a.item.cantidad_solicitada))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.item.valor,2)))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.item.valorTotal,2)))])]}}],null,!1,286653693)},[t._v(" "),t._v(" "),e("template",{slot:"footer"},[t.calculoPagoError||t.multiplesTiposError?[e("tr",[e("td",{staticClass:"text-xs-center",attrs:{colspan:t.calculoPagoError?t.headersDetails.length:t.headersDetails.length-1}},[e("v-alert",{attrs:{value:!0,type:"error"}},[t.multiplesTiposError?e("span",[t._v(t._s(t.multiplesTiposError))]):t._e(),t._v(" "),t.calculoPagoError?e("span",[t._v(t._s(t.calculoPagoError))]):t._e()])],1)])]:[e("tr",[e("td",{staticClass:"text-xs-right",attrs:{colspan:t.headersDetails.length-2}},[e("strong",[t._v("Valor EPS")])]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v("\n                    "+t._s("$")+t._s(t._f("numberFormat")(t.valorEPS,2))+"\n                  ")])]),t._v(" "),e("tr",[e("td",{staticClass:"text-xs-right",attrs:{colspan:t.headersDetails.length-2}},[e("strong",[t._v("Valor Usuario")])]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v("\n                    "+t._s("$")+t._s(t._f("numberFormat")(t.valorUsuario,2))+"\n                  ")])])],t._v(" "),e("tr",[e("td",{staticClass:"text-xs-right",attrs:{colspan:t.headersDetails.length-2}},[e("strong",[t._v("TOTAL")])]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v("\n                  "+t._s("$")+t._s(t._f("numberFormat")(t.valorTotal,2))+"\n                ")])])],2)],2)],1):t._e(),t._v(" "),"Confirmada"===t.item.estado?[t.item.aprobaciones.length?e("v-card",[e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-icon",[t._v("assignment_turned_in")]),t._v(" "),e("v-toolbar-title",[t._v("Items Aprobados")])],1),t._v(" "),e("v-card-text",t._l(t.item.aprobaciones,function(a,i){return e("v-card",{key:"card-aprobaciones-"+i},[e("v-data-table",{staticClass:"elevation-1 table-detalle-solicitud",attrs:{headers:t.headersDetailsAprobadas,items:a.detalles,"hide-actions":"","no-data-text":"No hay detalles registrados"},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",[t._v("\n                      "+t._s(a.item.rs_cum_id?"Medicamento":a.item.rs_cups_id?"Procedimiento":"Otro")+"\n                    ")]),t._v(" "),e("td",[t._v(t._s(a.item.codigo))]),t._v(" "),e("td",[t._v(t._s(a.item.descripcion))]),t._v(" "),e("td",{staticClass:"text-xs-center",attrs:{width:"200px"}},[t._v(t._s(a.item.cantidad_aprobada))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.item.valor_usuario*a.item.cantidad_aprobada,2)))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.item.valor*a.item.cantidad_aprobada,2)))])]}}],null,!0)}),t._v(" "),e("v-card",{staticClass:"mx-auto",attrs:{color:"blue-grey",dark:""}},[e("v-card-actions",[e("span",{staticClass:"subheading"},[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{staticClass:"white--text",attrs:{slot:"activator",small:"",color:"blue-grey lighten-2"},on:{click:function(e){return t.imprimir(a.id)}},slot:"activator"},[e("v-icon",{attrs:{left:"",dark:""}},[t._v("link")]),t._v("\n                      Consecutivo N° "+t._s(a.consecutivo)+"\n                    ")],1),t._v(" "),e("span",[t._v("Ir al documento")])],1),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2"},[t._v("Fecha aprobación: "+t._s(t.moment(a.fecha).format("DD/MM/YYYY")))]),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2"},[t._v("Fecha vencimiento: "+t._s(t.moment(a.fecha_vencimiento).format("DD/MM/YYYY")))])],1),t._v(" "),e("v-spacer",{staticClass:"mx-4"}),t._v(" "),e("span",{attrs:{"align-center":"","justify-end":""}},[e("span",{staticClass:"body-2 mr-1"},[t._v("Usuario:")]),t._v(" "),e("span",{staticClass:"body-2"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.valor_usuario,2)))]),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2 mr-1"},[t._v("EPS:")]),t._v(" "),e("span",{staticClass:"body-2"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.valor_total-a.valor_usuario,2)))]),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2 mr-1"},[t._v("TOTAL:")]),t._v(" "),e("span",{staticClass:"body-2"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.valor_total,2)))])])],1)],1)],1)}),1)],1):t._e(),t._v(" "),e("v-divider"),t._v(" "),t.item.solicitudes.length?e("v-card",[e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-icon",[t._v("assignment_late")]),t._v(" "),e("v-toolbar-title",[t._v("Items Solicitados")])],1),t._v(" "),e("v-card-text",t._l(t.item.solicitudes,function(a,i){return e("v-card",{key:"card-solicitudes-"+i},[e("v-data-table",{staticClass:"elevation-1 table-detalle-solicitud",attrs:{headers:t.headersDetailsSolicitadas,items:a.detalles,"hide-actions":"","no-data-text":"No hay detalles registrados"},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",[t._v("\n                      "+t._s(a.item.rs_cum_id?"Medicamento":a.item.rs_cups_id?"Procedimiento":"Otro")+"\n                    ")]),t._v(" "),e("td",[t._v(t._s(a.item.codigo))]),t._v(" "),e("td",[t._v(t._s(a.item.descripcion))]),t._v(" "),e("td",{staticClass:"text-xs-center",attrs:{width:"200px"}},[t._v(t._s(a.item.cantidad_solicitada))]),t._v(" "),e("td",{staticClass:"text-xs-center",attrs:{width:"200px"}},[t._v(t._s(a.item.cantidad_aprobada))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.item.valor_usuario*a.item.cantidad_aprobada,2)))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.item.valor*a.item.cantidad_aprobada,2)))])]}}],null,!0)}),t._v(" "),e("v-card",{staticClass:"mx-auto",attrs:{color:"blue-grey",dark:""}},[e("v-card-actions",[e("span",{staticClass:"subheading"},[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{staticClass:"white--text",attrs:{slot:"activator",small:"",color:"blue-grey lighten-2"},on:{click:function(e){t.$store.commit("NAV_ADD_ITEM",{ruta:"detalleSolicitudAutorizacion",titulo:"Detalle Solicitud Autorización",parametros:{entidad:a,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[e("v-icon",{attrs:{left:"",dark:""}},[t._v("find_in_page")]),t._v("\n                      Consecutivo N° "+t._s(a.consecutivo)+"\n                    ")],1),t._v(" "),e("span",[t._v("Ir al detalle")])],1),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2"},[t._v("Fecha aprobación: "+t._s(t.moment(a.fecha).format("DD/MM/YYYY")))]),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2"},[t._v("Estado: "+t._s(a.estado))])],1),t._v(" "),e("v-spacer",{staticClass:"mx-4"}),t._v(" "),e("span",{attrs:{"align-center":"","justify-end":""}},[e("span",{staticClass:"body-2 mr-1"},[t._v("Usuario:")]),t._v(" "),e("span",{staticClass:"body-2"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.valor_usuario,2)))]),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2 mr-1"},[t._v("EPS:")]),t._v(" "),e("span",{staticClass:"body-2"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.valor_total-a.valor_usuario,2)))]),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("span",{staticClass:"body-2 mr-1"},[t._v("TOTAL:")]),t._v(" "),e("span",{staticClass:"body-2"},[t._v(t._s("$")+t._s(t._f("numberFormat")(a.valor_total,2)))])])],1)],1)],1)}),1)],1):t._e()]:t._e()],2),t._v(" "),t.generaSolicitud?[t.item.solicitudes.find(function(t){return t.anexo3})?t._e():[e("input-detail-flex",{attrs:{"flex-class":"xs12 sm7 md9",label:"Orden Médica","prepend-icon":"description",text:t.item.orden_medica.nombre,hint:"Extenciones aceptadas: pdf","append-button":{tooltip:"Ir al archivo",icon:"link",color:"blue-grey"}},on:{clickAppend:function(a){return t.goRuta(t.item.orden_medica.url_signed)}}}),t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12 sm5 md3",label:"Fecha orden médica","prepend-icon":"event",text:t.item.fecha_orden}})],t._v(" "),e("input-detail-flex",{attrs:{"flex-class":"xs12",label:"Historia Clínica","prepend-icon":"description",text:t.item.historia_clinica.nombre,hint:"Extenciones aceptadas: pdf","append-button":{tooltip:"Ir al archivo",icon:"link",color:"blue-grey"}},on:{clickAppend:function(a){return t.goRuta(t.item.historia_clinica.url_signed)}}})]:t._e()],2),t._v(" "),e("confirmar",{attrs:{value:t.dialogA.visible,content:t.dialogA.content,"requiere-motivo":!1},on:{cancelar:t.cancelaConfirmacion,aceptar:t.aceptaConfirmacion}})],1):t._e(),t._v(" "),e("v-divider")],1)},o=[],r={render:i,staticRenderFns:o};a.a=r},562:function(t,a,e){"use strict";function i(t){e(1870)}Object.defineProperty(a,"__esModule",{value:!0});var o=e(1086),r=e(1872),s=e(1),n=i,l=s(o.a,r.a,!1,n,null,null);a.default=l.exports}});
//# sourceMappingURL=121.ea66e8b25495a380c323.js.map