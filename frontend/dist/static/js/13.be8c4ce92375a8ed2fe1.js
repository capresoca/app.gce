webpackJsonp([13],{1150:function(o,e,t){"use strict";var r=t(13),a=t.n(r),n=t(14),i=t.n(n),s=t(7),l=t.n(s),c=t(58),u=t(12);e.a={name:"GruposInventario",components:{ToolbarList:function(){return new Promise(function(o){o()}).then(t.bind(null,247))},Loading:c.default,Postulador:function(){return t.e(287).then(t.bind(null,747))}},data:function(){return{grupos:[],grupo:{},dialog:!1,loading:!1,tableLoading:!1,loadingSubmit:!1,headers:[{text:"Codigo",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Clase",align:"left",sortable:!1,value:"clase"},{text:"Opciones",align:"left",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]}},mounted:function(){this.getData(),this.formReset()},computed:{modalTitulo:function(){return this.grupo.id?"Edición":"Nuevo grupo"},infoComponent:function(){return this.$store.getters.getInfoComponent("gruposinventarios")}},methods:{getData:function(){var o=this;this.loading=!0,this.tableLoading=!0,this.axios.get("in_grupos").then(function(e){""!==e.data&&(o.grupos=e.data.data,o.loading=!1,o.tableLoading=!1)}).catch(function(e){o.loading=!1,o.tableLoading=!1,o.$store.commit(u.b,{msg:"Error al traer los datos."+e,color:"danger"}),console.log("error",e)})},formReset:function(){this.grupo={id:""}},edit:function(o){this.dialog=!0,this.grupo=JSON.parse(l()(o))},close:function(){this.dialog=!1,this.loadingSubmit=!1,this.formReset()},validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},save:function(){var o=this;return i()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validador("form");case 2:if(!e.sent){e.next=8;break}o.loadingSubmit=!0,t=o.grupo.id?o.axios.put("in_grupos/"+o.grupo.id,o.grupo):o.axios.post("in_grupos",o.grupo),t.then(function(e){o.grupo.id?(o.$store.commit(u.b,{msg:"La contestación se actualizó correctamente",color:"success"}),o.grupos.splice(o.grupos.findIndex(function(o){return o.id===e.data.data.id}),1,e.data.data)):(o.$store.commit(u.b,{msg:"La contestación se creó correctamente",color:"success"}),o.grupos.splice(0,0,e.data.data)),o.close()}).catch(function(e){o.$store.commit(u.a,{msg:"Hay un error al guardar el registro. "+e.errors,color:"danger"}),o.close()}),e.next=9;break;case 8:o.$store.commit(u.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return e.stop()}},e,o)}))()}}}},2064:function(o,e,t){"use strict";var r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("v-dialog",{attrs:{width:"720px"},model:{value:o.dialog,callback:function(e){o.dialog=e},expression:"dialog"}},[t("v-form",{attrs:{"data-vv-scope":"form"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[t("span",{staticClass:"title"},[o._v(o._s(o.modalTitulo))])]),o._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"codigo",attrs:{label:"Codigo",name:"Codigo","error-messages":o.errors.collect("Codigo"),required:""},model:{value:o.grupo.codigo,callback:function(e){o.$set(o.grupo,"codigo",e)},expression:"grupo.codigo"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","error-messages":o.errors.collect("Nombre"),required:""},model:{value:o.grupo.nombre,callback:function(e){o.$set(o.grupo,"nombre",e)},expression:"grupo.nombre"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[o._v("\n              Clase\n              "),t("v-radio-group",{model:{value:o.grupo.clase,callback:function(e){o.$set(o.grupo,"clase",e)},expression:"grupo.clase"}},[t("v-radio",{key:"claseProductos",attrs:{label:"Productos",value:"Productos"}}),o._v(" "),t("v-radio",{key:"claseServicios",attrs:{label:"Servicios",value:"Servicios"}}),o._v(" "),t("v-radio",{key:"claseConsignacion",attrs:{label:"Consignacion",value:"Consignacion"}})],1)],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador",{ref:"buscarCuentaIngresos",attrs:{nodata:"Busqueda por código o nombre.",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:"Cuenta de ingresos",lite:"",scope:"formRegistroGruposInventarios",entidad:"niifs",routeparams:"nivel:auxiliar=1",preicon:"person",value:o.grupo.ingresos,clearable:""},on:{change:function(e){return o.grupo.nf_niif_ingresos_id=e},objectReturn:function(e){return o.grupo.ingresos=e}}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador",{ref:"buscarCuentaGastos",attrs:{nodata:"Busqueda por código o nombre.",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:"Cuenta Gastos / Inventarios",lite:"",scope:"formRegistroGruposInventarios",entidad:"niifs",routeparams:"nivel:auxiliar=1",preicon:"person",value:o.grupo.gastos,clearable:""},on:{change:function(e){return o.grupo.nf_niif_gastos_id=e},objectReturn:function(e){return o.grupo.gastos=e}}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador",{ref:"buscarCuentaVenta",attrs:{nodata:"Busqueda por código o nombre.",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:"Costos de venta",lite:"",scope:"formRegistroGruposInventarios",entidad:"niifs",routeparams:"nivel:auxiliar=1",preicon:"person",value:o.grupo.venta,clearable:""},on:{change:function(e){return o.grupo.nf_niif_venta_id=e},objectReturn:function(e){return o.grupo.venta=e}}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador",{ref:"buscarCuentaEnCompras",attrs:{nodata:"Busqueda por código o nombre.",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:"RTF en compras",lite:"",scope:"formRegistroGruposInventarios",entidad:"niifs",routeparams:"nivel:auxiliar=1",preicon:"person",value:o.grupo.rtfencompras,clearable:""},on:{change:function(e){return o.grupo.nf_niif_rtfencompras_id=e},objectReturn:function(e){return o.grupo.rtfencompras=e}}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador",{ref:"buscarRetencionCompras",attrs:{nodata:"Busqueda por código o nombre.",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:"RTF para compras compras",lite:"",scope:"formRegistroGruposInventarios",entidad:"conrtfs",preicon:"person",value:o.grupo.rtfparacompras,clearable:""},on:{change:function(e){return o.grupo.nf_rtfs_paracompras_id=e},objectReturn:function(e){return o.grupo.rtfparacompras=e}}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[o._v("\n              Retencion ICA\n              "),t("v-radio-group",{attrs:{column:!1},model:{value:o.grupo.ica,callback:function(e){o.$set(o.grupo,"ica",e)},expression:"grupo.ica"}},[t("v-radio",{key:"icaSi",attrs:{label:"Si",value:"Si"}}),o._v(" "),t("v-radio",{key:"icaNo",attrs:{label:"No",value:"No"}})],1)],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[o._v("\n              IVA al costo\n              "),t("v-radio-group",{attrs:{column:!1},model:{value:o.grupo.iva,callback:function(e){o.$set(o.grupo,"iva",e)},expression:"grupo.iva"}},[t("v-radio",{key:"ivaSi",attrs:{label:"Si",value:"Si"}}),o._v(" "),t("v-radio",{key:"ivaNo",attrs:{label:"No",value:"No"}})],1)],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador",{ref:"buscarRubro",attrs:{nodata:"Busqueda descripcion.",itemtext:"descripcion",datatitle:"descripcion",filter:"descripcion",label:"Rubro presupuestal",lite:"",scope:"formRegistroGruposInventarios",entidad:"pr_rubros",preicon:"person",value:o.grupo.rubro,clearable:""},on:{change:function(e){return o.grupo.pr_rubro_id=e},objectReturn:function(e){return o.grupo.rubro=e}}})],1)],1)],1),o._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-spacer"),o._v(" "),t("v-btn",{on:{click:o.close}},[o._v("Cancelar")]),o._v(" "),t("v-btn",{attrs:{color:"primary",loading:o.loadingSubmit,disabled:o.errors.any()},on:{click:o.save}},[o._v("Guardar")])],1)],1)],1)],1),o._v(" "),t("v-card",[t("toolbar-list",{attrs:{info:o.infoComponent,title:"Grupos de inventarios",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear grupo",btnplustruncate:""},on:{click:function(e){o.dialog=!0}}}),o._v(" "),t("loading",{model:{value:o.loading,callback:function(e){o.loading=e},expression:"loading"}}),o._v(" "),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:o.headers,items:o.grupos,loading:o.tableLoading,"rows-per-page-text":"Registros por página"},scopedSlots:o._u([{key:"items",fn:function(e){return[t("td",[o._v(o._s(e.item.codigo))]),o._v(" "),t("td",[o._v(o._s(e.item.nombre))]),o._v(" "),t("td",[o._v(o._s(e.item.clase))]),o._v(" "),t("td",[t("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(t){o.$set(e.item,"show",t)},expression:"props.item.show"}},[t("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(t){o.$set(e.item,"show",t)},expression:"props.item.show"}},[t("v-icon",[o._v("chevron_left")]),o._v(" "),t("v-icon",[o._v("close")])],1),o._v(" "),t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(t){return o.edit(e.item)}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"}},[o._v("mode_edit")])],1),o._v(" "),t("span",[o._v("Editar")])],1)],1)],1)]}}])},[o._v(" "),t("template",{slot:"no-data"},[o.tableLoading?t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[o._v("\n            Estamos cargando los registros. "),t("v-icon",[o._v("sentiment_satisfied_alt")])],1):t("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[o._v("\n            Lo sentimos, no tenemos registros para mostrar. "),t("v-icon",[o._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},a=[],n={render:r,staticRenderFns:a};e.a=n},471:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t(1150),a=t(2064),n=t(1),i=n(r.a,a.a,!1,null,null,null);e.default=i.exports}});
//# sourceMappingURL=13.be8c4ce92375a8ed2fe1.js.map