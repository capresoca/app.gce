webpackJsonp([132],{1489:function(t,i,a){var e=a(1490);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a(456)("c239aef2",e,!0,{})},1490:function(t,i,a){i=t.exports=a(455)(!0),i.push([t.i,".estado[data-v-50dab626]{height:10px;padding:0}.p-12[data-v-50dab626]{height:10px;padding:12px}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/aseguramiento/portabilidad/DetallePortabilidad.vue"],names:[],mappings:"AACA,yBACE,YAAa,AACb,SAAW,CACZ,AACD,uBACE,YAAa,AACb,YAAc,CACf",file:"DetallePortabilidad.vue",sourcesContent:["\n.estado[data-v-50dab626] {\n  height: 10px;\n  padding: 0;\n}\n.p-12[data-v-50dab626] {\n  height: 10px;\n  padding: 12px;\n}\n"],sourceRoot:""}])},1491:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-card",[a("v-toolbar",{attrs:{dense:""}},[a("v-list-tile",{staticClass:"content-v-list-tile-p0"},[a("v-list-tile-avatar",{attrs:{color:"primary"}},[a("v-icon",{staticClass:"white--text"},[t._v(t._s(t.infoComponent?t.infoComponent.icono:""))])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"font-weight-bold title"},[t._v("Detalle de portabilidad")])],1)],1),t._v(" "),t.portabilidad?[a("v-spacer"),t._v(" "),a("v-chip",{staticClass:"text-xs-right",attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[a("span",{staticClass:"subheading"},[t._v("N°")]),t._v(" \n        "),a("span",{staticClass:"subheading"},[t._v(t._s(t.portabilidad.consecutivo))])])]:t._e()],2),t._v(" "),a("v-container",{attrs:{fluid:"","grid-list-sm":""}},[a("loading",{model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}}),t._v(" "),a("v-slide-y-transition",{attrs:{group:""}},[t.portabilidad?[a("v-layout",{key:"seccion1",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Estado")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.estado))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Identificación")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.afiliado.identificacion_completa))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Afiliado")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.afiliado.nombre_completo))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Municipio")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.municipio_receptor.nombre+", "+t.portabilidad.municipio_receptor.nombre_departamento))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Dirección")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.direccion))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Telefono")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.telefono))])],1)],1)],1),t._v(" "),a("v-layout",{key:"seccion2",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Fecha solicitud")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.fecha_solicitud))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Inicio portabilidad")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.fecha_inicio))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Fin portabilidad")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.fecha_fin))])],1)],1),t._v(" "),null!==t.portabilidad.observaciones?a("v-flex",{attrs:{xs12:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Observaciones")]),t._v(" "),a("span",[t._v(t._s(t.portabilidad.observaciones))])],1)],1):t._e()],1),t._v(" "),a("v-layout",{key:"seccion3",staticClass:"mt-3",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[t.portabilidadCopy?a("v-card",{attrs:{flat:""}},[a("v-list",{attrs:{"two-line":""}},[[a("v-divider"),t._v(" "),a("v-list-tile",[a("v-list-tile-avatar",{attrs:{color:"success"}},[a("v-icon",{attrs:{dark:""}},[t._v("input")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                        Respuesta\n                      ")]),t._v(" "),"Registrado"===t.portabilidadCopy.estado?a("v-list-tile-sub-title",[t._v("Estado: "+t._s(t.estadoProceso?t.estadoProceso:"Pendiente"))]):a("v-list-tile-sub-title",[t._v("Estado: "+t._s(t.portabilidadCopy.estado))])],1)],1),t._v(" "),a("v-divider")]],2),t._v(" "),"Registrado"===t.portabilidadCopy.estado?a("v-card-text",[a("loading",{model:{value:t.loadingSubmit,callback:function(i){t.loadingSubmit=i},expression:"loadingSubmit"}}),t._v(" "),a("v-slide-y-transition",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{staticClass:"estado"},[t._v("Estado")]),t._v(" "),a("v-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{row:"",name:"estado","error-messages":t.errors.collect("estado")},on:{change:t.getPrestadores},model:{value:t.estadoProceso,callback:function(i){t.estadoProceso=i},expression:"estadoProceso"}},[a("v-radio",{attrs:{label:"Aceptado",value:"Aceptado"}}),t._v(" "),a("v-radio",{attrs:{label:"Negado",value:"Negado"}})],1)],1),t._v(" "),"Aceptado"==t.estadoProceso?a("v-flex",{attrs:{xs12:""}},[a("v-toolbar",{staticClass:"elevation-1 white",attrs:{dense:""}},[a("v-avatar",{staticClass:"white--text",attrs:{size:"36",color:"primary"}},[a("v-icon",[t._v("widgets")])],1),t._v(" "),a("v-toolbar-title",[t._v("Asignación de servicios")])],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{items:t.serviciosPrimarios,"hide-actions":"",headers:t.headers},scopedSlots:t._u([{key:"items",fn:function(i){return[a("td",[t._v(t._s(i.item.codigo)+" - "+t._s(i.item.nombre))]),t._v(" "),a("td",[i.item.habilitados.filter(function(i){return i.entidad&&i.entidad.gn_municipiosede_id===t.portabilidadCopy.munreceptor_id}).length?a("v-autocomplete",{attrs:{placeholder:"Seleccionar IPS",items:i.item.habilitados.filter(function(i){return i.entidad&&(i.entidad.gn_municipiosede_id===t.portabilidadCopy.munreceptor_id||67091===i.rs_entidad_id||37546===i.rs_entidad_id)}),"item-value":"id","item-text":"nombre",filter:t.filterIPSs,clearable:""},scopedSlots:t._u([{key:"selection",fn:function(i){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(i.item.entidad.nombre)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s("Código: "+i.item.entidad.cod_habilitacion+" - Dirección: "+i.item.entidad.direccion_sede)}})],1)]]}},{key:"item",fn:function(i){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(i.item.entidad.nombre)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s("Código: "+i.item.entidad.cod_habilitacion+" - Dirección: "+i.item.entidad.direccion_sede)}})],1)]]}}],null,!0),model:{value:t.portabilidadCopy.servicios_portabilidad[i.index],callback:function(a){t.$set(t.portabilidadCopy.servicios_portabilidad,i.index,a)},expression:"portabilidadCopy.servicios_portabilidad[props.index]"}}):a("span",[t._v("\n                              No disponible\n                            ")])],1)]}}],null,!1,2550289901)})],1):t._e(),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{key:"observaciones",attrs:{label:"Observaciones",name:"observaciones",required:"","error-messages":t.errors.collect("respuesta")},model:{value:t.portabilidadCopy.observaciones,callback:function(i){t.$set(t.portabilidadCopy,"observaciones",i)},expression:"portabilidadCopy.observaciones"}})],1)],1)],1)],1):t._e(),t._v(" "),"Aceptado"===t.portabilidadCopy.estado?a("v-card-text",[a("v-toolbar",{staticClass:"elevation-1 white",attrs:{dense:""}},[a("v-avatar",{staticClass:"white--text",attrs:{size:"36",color:"primary"}},[a("v-icon",[t._v("widgets")])],1),t._v(" "),a("v-toolbar-title",[t._v("Servicios asignados")])],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{items:t.serviciosPrimarios,"hide-actions":"",headers:t.headers},scopedSlots:t._u([{key:"items",fn:function(i){return[a("td",[t._v(t._s(i.item.codigo)+" - "+t._s(i.item.nombre))]),t._v(" "),a("td",[t.filterServicioAsignado(i.item.habilitados)?a("v-list-tile",{staticClass:"content-v-list-tile-p0"},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"body-2"},[t._v(t._s(t.filterServicioAsignado(i.item.habilitados).entidad.nombre))]),t._v(" "),a("v-list-tile-sub-title",{staticClass:"caption"},[a("v-icon",{attrs:{size:"small"}},[t._v("fas fa-phone-alt")]),t._v(" "+t._s(t.filterServicioAsignado(i.item.habilitados).entidad.telefono_sede)+" - "),a("v-icon",{attrs:{size:"small"}},[t._v("fas fa-map-signs")]),t._v(" "+t._s(t.filterServicioAsignado(i.item.habilitados).entidad.direccion_sede))],1)],1)],1):a("span",[t._v("No asignado")])],1)]}}],null,!1,193748819)})],1):t._e(),t._v(" "),"Cancelada"===t.portabilidad.estado?a("v-card-text",{staticStyle:{"padding-top":"0 !important","margin-top":"0 !important"}},[a("v-flex",{attrs:{xs12:""}},[a("v-list-tile-content",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-sub-title",{staticClass:"caption grey--text"},[t._v("Descripción")]),t._v(" "),a("span",[t._v(t._s(null!==t.portabilidadCopy.cancel_portabilidad?t.portabilidadCopy.cancel_portabilidad.descripcion:null))])],1)],1)],1):t._e()],1):t._e()],1)],1)]:t._e()],2)],1),t._v(" "),a("v-slide-x-transition",{attrs:{group:""}},[t.portabilidad&&"Registrado"===t.portabilidad.estado?[a("v-divider",{key:"divideractions"}),t._v(" "),a("v-card-actions",{key:"buttonsactions",staticClass:"grey lighten-4"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("Guardar")])],1)],1)],1)]:t._e()],2)],1)},s=[],o={render:e,staticRenderFns:s};i.a=o},487:function(t,i,a){"use strict";function e(t){a(1489)}Object.defineProperty(i,"__esModule",{value:!0});var s=a(962),o=a(1491),r=a(1),l=e,n=r(s.a,o.a,!1,l,"data-v-50dab626",null);i.default=n.exports},962:function(t,i,a){"use strict";var e=a(7),s=a.n(e),o=a(8),r=a.n(o);i.a={name:"DetallePortabilidad",components:{ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))},InputDetailFlex:function(){return new Promise(function(t){t()}).then(a.bind(null,250))},PostuladorV2:function(){return new Promise(function(t){t()}).then(a.bind(null,61))}},props:["parametros"],data:function(){return{estadoProceso:null,portabilidad:null,portabilidadCopy:null,serviciosPrimarios:[],headers:[{text:"Servicio",align:"left",sortable:!1},{text:"IPS",align:"left",sortable:!1}],filterIPSs:function(t,i){var a=function(t){return null!=t?t:""},e=a(t.cod_habilitacion+" "+t.nombre),s=a(i);return e.toString().toLowerCase().indexOf(s.toString().toLowerCase())>-1},loading:!1,loadingSubmit:!1}},created:function(){null!==this.parametros.entidad&&this.getRegisto(this.parametros.entidad.id),this.getServiciosPrimarios()},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("portabilidad")}},methods:{getPrestadores:function(){console.log("esta en ",this.estadoProceso)},filterServicioAsignado:function(t){var i=this;return t.find(function(t){return t.id===i.portabilidadCopy.servicios_portabilidad.map(function(t){return t.rs_servportabilidad_id}).find(function(i){return t.id===i})})},getRegisto:function(t){var i=this;this.loading=!0,this.axios.get("portabilidades/"+t).then(function(t){""!==t.data&&(i.portabilidad=t.data.data,i.portabilidadCopy=r()({},i.portabilidad)),i.loading=!1}).catch(function(t){i.loading=!1,i.$store.commit("SNACK_ERROR_LIST",{expression:" al traer el registro de la portabilidad. ",error:t})})},getServiciosPrimarios:function(){var t=this;this.axios.get("servicios/primarios").then(function(i){t.serviciosPrimarios=i.data.data}).catch(function(i){t.$store.commit("SNACK_ERROR_LIST",{expression:" al traer los servicios primarios. ",error:i})})},close:function(){this.$validator.reset(),this.$store.dispatch("NAV_RESPONSE_CONTENT_ITEM",{contexto:this,itemId:this.parametros.tabOrigin})},submit:function(){var t=this,i=JSON.parse(s()(this.portabilidadCopy));i.servicios_portabilidad=i.servicios_portabilidad.filter(Boolean),this.$validator.validateAll().then(function(a){a&&(i.estado=t.estadoProceso,"Aceptado"===i.estado&&i.servicios_portabilidad.length||"Negado"===i.estado?(t.loadingSubmit=!0,t.axios.put("portabilidades/"+i.id,i).then(function(i){t.$store.commit("PORTABILIDAD_RELOAD_ITEM",{item:{},estado:"reload",key:t.parametros.key}),t.$store.commit("SNACK_SHOW",{msg:"Portabilidad actualizada correctamente",color:"success"}),t.$store.dispatch("NAV_RESPONSE_CONTENT_ITEM",{contexto:t,itemId:t.parametros.tabOrigin}),t.loadingSubmit=!1}).catch(function(i){t.loadingSubmit=!1,t.$store.commit("SNACK_ERROR_LIST",{expression:" al actualizar el registro de la portabilidad. ",error:i})})):t.$store.commit("SNACK_SHOW",{msg:"Se debe asignar IPS al menos a uno de los servicios.",color:"warning"}))})}}}}});
//# sourceMappingURL=132.b95d26dbfb4b5074d672.js.map