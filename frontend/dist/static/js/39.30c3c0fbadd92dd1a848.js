webpackJsonp([39],{1032:function(i,e,a){"use strict";var t=a(13),o=a.n(t),s=a(14),n=a.n(s),r=a(7),l=a.n(r),d=a(59),c=a(886),u=this;e.a={name:"RegistroMS",components:{DetalleEliminacion:c.a},props:["parametros"],data:function(){return{bduas:[],expand:!1,loading:!1,afiliado:null,no_afafiliado_id:null,minDate:"1900-01-01",maxDate:(new Date).toISOString().substr(0,10),components:{DetalleEliminacion:c.a},datosBasicosAfiliado:{id:null,gn_tipdocidentidad_id:null,identificacion:null,nombre1:null,nombre2:null,apellido1:null,apellido:null,fecha_nacimiento:null,gn_municipio_id:null,gn_zona_id:null,gn_sexo_id:null,fecha_afiliacion:null,rs_entidade_id:null,entidad:null},headers:[{text:"Fecha NEG",align:"left",sortable:!1,value:"fecha_inicio_novedad"},{text:"Reporte",sortable:!1,value:"afiliado"},{text:"Glosa",sortable:!1,value:"informacion_ns"}]}},computed:{complementos:function(){var i=JSON.parse(l()(d.b.getters.complementosFormAfiliados));return i.tipdocidentidades&&(i.tipdocidentidades=i.tipdocidentidades.filter(function(i){return 12!==i.id})),i},tipo_identidad:function(){return 1===this.datosBasicosAfiliado.gn_tipdocidentidad_id||12===this.datosBasicosAfiliado.gn_tipdocidentidad_id?"number":"text"},longitudDocumento:function(){var i=this;if(this.complementos.tipdocidentidades&&this.complementos.tipdocidentidades.length&&this.datosBasicosAfiliado.gn_tipdocidentidad_id)return this.complementos.tipdocidentidades.find(function(e){return e.id===i.datosBasicosAfiliado.gn_tipdocidentidad_id}).longitud}},watch:{afiliado:function(i){i&&(console.log("DAta",i),this.datosBasicosAfiliado=this.clone(i))}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id)},methods:{saveDepuracion:function(){var i=this;return n()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.loading=!0,e.next=3,i.$validator.validateAll("formDepuracionBDUA");case 3:if(!e.sent){e.next=5;break}i.axios.post("bduas/depuracionms?no_afafiliado_id="+i.no_afafiliado_id,i.datosBasicosAfiliado).then(function(e){i.$store.commit("SNACK_SHOW",{msg:"La depuración en la glosa de BDUA se realizó éxitoamente.",color:"success"}),i.loading=!1,i.refresh(!0)}).catch(function(e){i.loading=!1,i.$store.commit("SNACK_ERROR_LIST",{expression:" al cargar el registro. ",error:e})});case 5:case"end":return e.stop()}},e,i)}))()},openExpandDetalle:function(i,e){"uno"===e&&(i.expanded=!i.expanded),"dos"===e&&this.$refs.negeliminar.assign(JSON.parse(l()(i)),e)},aceptarEliminar:function(i){var e=this;this.axios.post("bduas/eliminars/"+this.no_afafiliado_id,i).then(function(i){e.$store.commit("reloadTable","tableDepuracionMs"),e.$store.commit("SNACK_SHOW",{msg:"Se ha eliminado la glosa de BDUA.",color:"success"})}).catch(function(i){e.$store.commit("SNACK_ERROR_LIST",{expression:" al intentar eliminar la glosa de BDUA. ",error:i})})},filterMunicipiosExpedicion:function(i,e){return u.getFilter(i,e,i.nombre+" "+i.nombre_departamento)},getFilter:function(i,e,a){var t=function(i){return null!=i?i:""},o=t(a),s=t(e);return o.toString().toLowerCase().indexOf(s.toString().toLowerCase())>-1},getProperty:function(i,e){return window.toProperty(i,e)},getRegistro:function(i){var e=this;this.axios.get("bduas/depuracionms/"+i).then(function(i){console.log("respuesta",i),e.afiliado=i.data.data.afiliado.afiliado,e.no_afafiliado_id=e.clone(i.data.data.afiliado.consecutivo_ns),e.bduas.push(i.data.data.log)}).catch(function(i){e.$store.commit("SNACK_ERROR_LIST",{expression:" al cargar el registro. ",error:i})})},refresh:function(i){this.$validator.reset(),this.afiliado=null,i&&this.$store.commit("reloadTable","tableDepuracionMs")}}}},1697:function(i,e,a){var t=a(1698);"string"==typeof t&&(t=[[i.i,t,""]]),t.locals&&(i.exports=t.locals);a(456)("478e4638",t,!0,{})},1698:function(i,e,a){e=i.exports=a(455)(!0),e.push([i.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroMS.vue",sourceRoot:""}])},1699:function(i,e,a){"use strict";var t=function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("v-card",[a("toolbar-list",{attrs:{title:"Glosas BDUA",subtitle:"ms - mc"}}),i._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:i.headers,items:i.bduas,expand:i.expand,"item-key":"consecutivo_ms","hide-actions":""},scopedSlots:i._u([{key:"items",fn:function(e){return[a("tr",[a("td",[i._v(i._s(e.item.fecha_inicio_novedad))]),i._v(" "),a("td",[i._v(i._s(e.item.tipo_identificacion_afiliado+" "+e.item.numero_identificacion_afiliado))]),i._v(" "),a("td",[i._v("\n        \t"+i._s(e.item.informacion)+"\n        ")])])]}},{key:"expand",fn:function(e){return[a("v-card",{attrs:{flat:""}},[a("loading",{model:{value:i.loading,callback:function(e){i.loading=e},expression:"loading"}}),i._v(" "),a("toolbar-list",{attrs:{title:"Datos Depuración",subtitle:""}}),i._v(" "),a("v-container",{staticClass:"pt-0",attrs:{fluid:"","grid-list-xl":""}},[a("v-form",{attrs:{"data-vv-scope":"formDepuracionBDUA"}},[a("v-divider",{staticClass:"gray mb-3"}),i._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"datosBasicosAfiliado.nombre1",expression:"'datosBasicosAfiliado.nombre1'"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Primer nombre",name:"Primer nombre",required:"","error-messages":i.errors.collect("Primer nombre"),"prepend-icon":"person"},model:{value:i.datosBasicosAfiliado.nombre1,callback:function(e){i.$set(i.datosBasicosAfiliado,"nombre1",e)},expression:"datosBasicosAfiliado.nombre1"}})],1),i._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"datosBasicosAfiliado.nombre2",expression:"'datosBasicosAfiliado.nombre2'"}],attrs:{label:"Segundo nombre","prepend-icon":"person"},model:{value:i.datosBasicosAfiliado.nombre2,callback:function(e){i.$set(i.datosBasicosAfiliado,"nombre2",e)},expression:"datosBasicosAfiliado.nombre2"}})],1),i._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"datosBasicosAfiliado.apellido1",expression:"'datosBasicosAfiliado.apellido1'"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Primer apellido",name:"Primer apellido",required:"","error-messages":i.errors.collect("Primer apellido"),"prepend-icon":"person"},model:{value:i.datosBasicosAfiliado.apellido1,callback:function(e){i.$set(i.datosBasicosAfiliado,"apellido1",e)},expression:"datosBasicosAfiliado.apellido1"}})],1),i._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"datosBasicosAfiliado.apellido2",expression:"'datosBasicosAfiliado.apellido2'"}],attrs:{label:"Segundo apellido","prepend-icon":"person"},model:{value:i.datosBasicosAfiliado.apellido2,callback:function(e){i.$set(i.datosBasicosAfiliado,"apellido2",e)},expression:"datosBasicosAfiliado.apellido2"}})],1)],1),i._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Municipio",items:i.complementos.municipios,"item-value":"id","item-text":"nombre",name:"Municipio",required:"","error-messages":i.errors.collect("Municipio"),filter:i.filterMunicipiosExpedicion,"prepend-icon":"location_city"},scopedSlots:i._u([{key:"item",fn:function(e){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:i._s(e.item.nombre)}}),i._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:i._s(e.item.nombre_departamento)}})],1)]]}}],null,!0),model:{value:i.datosBasicosAfiliado.gn_municipio_id,callback:function(e){i.$set(i.datosBasicosAfiliado,"gn_municipio_id",e)},expression:"datosBasicosAfiliado.gn_municipio_id"}})],1),i._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{label:"Zona",items:i.complementos.zonas,"item-value":"id","item-text":"nombre",name:"Zona",disabled:!i.afiliado.gn_municipio_id},model:{value:i.datosBasicosAfiliado.gn_zona_id,callback:function(e){i.$set(i.datosBasicosAfiliado,"gn_zona_id",e)},expression:"datosBasicosAfiliado.gn_zona_id"}})],1),i._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("input-date",{directives:[{name:"validate",rawName:"v-validate",value:"required|fechaValida:DD-MM-YYYY",expression:"'required|fechaValida:DD-MM-YYYY'"}],attrs:{label:"Fecha afiliación (Día-Mes-Año)",format:"DD-MM-YYYY",min:i.minDate,max:i.maxDate,name:"Fecha afiliación","error-messages":i.errors.collect("Fecha afiliación")},model:{value:i.datosBasicosAfiliado.fecha_afiliacion,callback:function(e){i.$set(i.datosBasicosAfiliado,"fecha_afiliacion",e)},expression:"datosBasicosAfiliado.fecha_afiliacion"}})],1),i._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Búsqueda por razon social u código de habilitación.",hint:"tercero.identificacion_completa","item-text":"nombre","data-title":"tercero.identificacion_completa","data-subtitle":"nombre",label:"IPS Primaria",entidad:"entidades",preicon:"location_city","route-params":"rs_tipentidade_id=1",name:"IPS Primaria",rules:"required","error-messages":i.errors.collect("IPS Primaria"),"no-btn-create":"","min-characters-search":3},on:{changeid:function(e){return i.datosBasicosAfiliado.rs_entidade_id=e}},model:{value:i.datosBasicosAfiliado.entidad,callback:function(e){i.$set(i.datosBasicosAfiliado,"entidad",e)},expression:"datosBasicosAfiliado.entidad"}})],1)],1)],1)],1),i._v(" "),a("v-card-actions",[a("v-btn",{on:{click:function(e){return i.refresh(!0)}}},[i._v("Cancelar")]),i._v(" "),a("v-spacer"),i._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),i.saveDepuracion(e)}}},[i._v("Actualizar")])],1)],1)]}}])}),i._v(" "),a("detalle-eliminacion",{ref:"negeliminar",on:{eliminar:function(e){return i.aceptarEliminar(e)}}})],1)},o=[],s={render:t,staticRenderFns:o};e.a=s},527:function(i,e,a){"use strict";function t(i){a(1697)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(1032),s=a(1699),n=a(1),r=t,l=n(o.a,s.a,!1,r,"data-v-ac9b8d98",null);e.default=l.exports},839:function(i,e,a){"use strict";e.a={name:"DetalleEliminacion",data:function(){return{show:!1,datos:null,data:null,info:null,makeData:{id:null,observacion:null,gs_usuario_id:null,index:null},mostrar:!1}},watch:{show:function(i){var e=this;i||setTimeout(function(){e.datos=null,e.info=null,e.mostrar=!1},500)}},methods:{assign:function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("aa",e),this.data=this.clone(this.makeData),this.$validator.reset(),this.datos=i,this.data.index=this.datos.index,"dos"===e?(this.info="Al continuar procederá con desistir del ingreso del afiliado, se marcará entonces el retiro.",this.mostrar=!0):(this.info="Al continuar procederá con desistir de la novedad del afiliado, y esto implica regresarlo a los datos anteriores sin generarle novedad.",this.mostrar=!1),this.show=!0},aceptarEliminar:function(){var i=this;this.$validator.validateAll().then(function(e){e&&(i.$emit("eliminar",i.data),i.show=!1)})}}}},886:function(i,e,a){"use strict";function t(i){a(887)}var o=a(839),s=a(889),n=a(1),r=t,l=n(o.a,s.a,!1,r,"data-v-863201ce",null);e.a=l.exports},887:function(i,e,a){var t=a(888);"string"==typeof t&&(t=[[i.i,t,""]]),t.locals&&(i.exports=t.locals);a(456)("a46d1524",t,!0,{})},888:function(i,e,a){e=i.exports=a(455)(!0),e.push([i.i,"","",{version:3,sources:[],names:[],mappings:"",file:"DetalleEliminacion.vue",sourceRoot:""}])},889:function(i,e,a){"use strict";var t=function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:i.show,callback:function(e){i.show=e},expression:"show"}},[i.datos?a("v-card",[a("v-toolbar",{attrs:{dense:""}},[a("v-toolbar-title",{staticClass:"subheading red--text",domProps:{textContent:i._s("¿Está seguro de continuar?")}}),i._v(" "),a("v-spacer"),i._v(" "),a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(e){e.stopPropagation(),i.show=!1}}},[a("v-icon",[i._v("close")])],1)],1),i._v(" "),a("v-card-text",[a("h2",{staticClass:"body-2",domProps:{textContent:i._s(i.info)}})]),i._v(" "),i.mostrar?a("v-container",{staticClass:"pt-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Observaciones",name:"observaciones","error-messages":i.errors.collect("observaciones"),rows:"1"},model:{value:i.data.observacion,callback:function(e){i.$set(i.data,"observacion",e)},expression:"data.observacion"}})],1)],1)],1):i._e(),i._v(" "),a("v-divider"),i._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(e){e.stopPropagation(),i.show=!1}}},[i._v("Cancelar")]),i._v(" "),a("v-spacer"),i._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),i.aceptarEliminar(e)}}},[i._v("Continuar")])],1)],1):i._e()],1)},o=[],s={render:t,staticRenderFns:o};e.a=s}});
//# sourceMappingURL=39.30c3c0fbadd92dd1a848.js.map