webpackJsonp([326],{1226:function(t,e,o){"use strict";var r=o(7),a=o.n(r),s=o(59),i=o(58),n=o(12);e.a={name:"RegistroEntidadOtros",props:["value"],components:{Loading:i.default,dataTable:function(){return new Promise(function(t){t()}).then(o.bind(null,60))}},data:function(){return{showFormRegistro:!1,loading:!1,otro:null,makeOtro:{id:null,rs_entidades_id:null,codigo:null,nombre:null,tarifa:null,estado:"Activo"},selections:[],dataTable:{nameItemState:null,route:null,makeHeaders:[{text:"Código",align:"left",sortable:!0,value:"codigo"},{text:"Nombre",align:"left",sortable:!0,value:"nombre"},{text:"Tarifa",align:"right",sortable:!1,value:"tarifa",classData:"text-xs-right",component:{component:{template:"<span className=\"white--text caption\">{{'$'}}{{value.tarifa | numberFormat(2)}}</span>",props:["value"]}}},{text:"Estado",align:"center",sortable:!0,value:"estado",classData:"text-xs-center"},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]}}},watch:{showFormRegistro:function(t){!t&&this.refreshOtro()}},computed:{estadosBasicos:function(){return s.b.state.estadosBasicos}},created:function(){this.refreshOtro()},mounted:function(){this.dataTable.route="otrosentidades?entidad:id="+this.value.id},methods:{otroEditar:function(t){this.refreshOtro(),this.otro=JSON.parse(a()(t)),this.$vuetify.goTo("#flag-top",{selector:"#flag-top",duration:300,offset:-120,easing:"easeInOutQuad"}),this.showFormRegistro=!0},resetOptions:function(t){return t.options=[],t.options.push({event:"editar",icon:"edit",tooltip:"Editar"}),t},submitOtro:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){t.loading=!0,t.otro.rs_entidades_id=t.value.id;(t.otro.id?t.axios.put("otrosentidades/"+t.otro.id,t.otro):t.axios.post("otrosentidades",t.otro)).then(function(e){t.$refs.tablaOtros.reloadPage(),t.refreshOtro(),t.loading=!1}).catch(function(e){t.loading=!1,t.$store.commit(n.a,{expression:" al realizar el registro. ",error:e})})}})},refreshOtro:function(){this.otro=JSON.parse(a()(this.makeOtro)),this.$validator.reset()}}}},2224:function(t,e,o){"use strict";function r(t){o(2225)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1226),s=o(2227),i=o(1),n=r,l=i(a.a,s.a,!1,n,"data-v-40fc6e5f",null);e.default=l.exports},2225:function(t,e,o){var r=o(2226);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o(456)("83b76e6c",r,!0,{})},2226:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroEntidadOtros.vue",sourceRoot:""}])},2227:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{row:"",wrap:"",id:"flag-top"}},[o("loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{domProps:{innerHTML:t._s("Otros bienes y servicios")}}),t._v(" "),o("small",{staticClass:"mt-2 ml-1"},[t._v(" Registro y gestión por entidad")]),t._v(" "),o("v-spacer"),t._v(" "),t.showFormRegistro?t._e():o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",right:"",small:"",color:"accent"},on:{click:function(e){t.showFormRegistro=!0}},slot:"activator"},[o("v-icon",[t._v("add")])],1),t._v(" "),o("span",[t._v("Crear item")])],1)],1),t._v(" "),o("v-scroll-y-transition",[t.showFormRegistro?o("div",[o("v-card-text",[o("v-form",[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:"",md4:t.otro.id,md3:!t.otro.id}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Código",name:"Código","error-messages":t.errors.collect("Código")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitOtro(e)}},model:{value:t.otro.codigo,callback:function(e){t.$set(t.otro,"codigo",e)},expression:"otro.codigo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md4:t.otro.id,md3:!t.otro.id}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],attrs:{label:"Tarifa",name:"Tarifa",min:"0",type:"number","error-messages":t.errors.collect("Tarifa")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitOtro(e)}},model:{value:t.otro.tarifa,callback:function(e){t.$set(t.otro,"tarifa",t._n(e))},expression:"otro.tarifa"}})],1),t._v(" "),t.otro.id?o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Estado",items:t.estadosBasicos,name:"Estado","error-messages":t.errors.collect("Estado")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitOtro(e)}},model:{value:t.otro.estado,callback:function(e){t.$set(t.otro,"estado",e)},expression:"otro.estado"}})],1):t._e(),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:t.otro.id,md6:!t.otro.id}},[o("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"auto-grow":"",label:"Nombre",rows:"1",name:"Nombre","error-messages":t.errors.collect("Nombre")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitOtro(e)}},model:{value:t.otro.nombre,callback:function(e){t.$set(t.otro,"nombre",e)},expression:"otro.nombre"}})],1)],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{flat:""},on:{click:function(e){e.stopPropagation(),t.showFormRegistro=!1}}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitOtro(e)}}},[t._v("Registrar")])],1)],1):t._e()])],1)],1),t._v(" "),o("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[t.dataTable.route?o("data-table",{ref:"tablaOtros",on:{resetOption:function(e){return t.resetOptions(e)},editar:function(e){return t.otroEditar(e)}},model:{value:t.dataTable,callback:function(e){t.dataTable=e},expression:"dataTable"}}):t._e()],1)],1)},a=[],s={render:r,staticRenderFns:a};e.a=s}});
//# sourceMappingURL=326.339e3374bf75c97a20ae.js.map