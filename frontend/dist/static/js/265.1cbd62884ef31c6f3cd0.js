webpackJsonp([265],{1096:function(e,a,r){"use strict";var o=r(13),t=r.n(o),i=r(14),s=r.n(i),d=r(40),n=r(248),c=r(12);a.a={name:"RegistroAseguradora",props:["parametros"],data:function(){return{dialogSave:!1,dialogCodigo:!1,buscandoCodigo:!1,ordenEdit:!1,param:{},aseguradora:{id:null,tercero:{nombre_completo:"",identificacion_completa:""}}}},components:{Postulador:function(){return r.e(287).then(r.bind(null,747))}},watch:{},methods:{validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},aseguradoraByCod:function(){var e=this;return s()(t.a.mark(function a(){return t.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.aseguradora.codigo&&(e.buscandoCodigo=!0,e.axios.get("ce_aseguradora/codigo/"+e.aseguradora.codigo).then(function(a){a.data.exists&&(e.aseguradora=a.data.aseguradora,e.dialogCodigo=!0),e.buscandoCodigo=!1}).catch(function(a){e.$store.commit(c.a,{expression:" Al intentar consultar codigo. ",error:a})}));case 1:case"end":return a.stop()}},a,e)}))()},submit:function(){var e=this;return s()(t.a.mark(function a(){return t.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.validador("formAseguradora");case 2:if(!a.sent){a.next=6;break}e.aseguradora.id?e.axios.put("ce_aseguradora/"+e.aseguradora.id,e.aseguradora).then(function(a){e.$store.commit(c.b,{msg:a.data.message,color:"success"}),e.$store.dispatch(d.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(n.g,{item:a.data.data,estado:"editar",key:e.parametros.key})}).catch(function(a){e.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}):e.axios.post("ce_aseguradora",e.aseguradora).then(function(a){e.$store.commit(c.b,{msg:"El aseguradora se creo correctamente",color:"success"}),e.$store.dispatch(d.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(n.g,{item:a.data.data,estado:"crear",key:e.parametros.key})}).catch(function(a){e.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}),a.next=7;break;case 6:e.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return a.stop()}},a,e)}))()},getRegistro:function(e){var a=this;this.axios.get("ce_aseguradora/"+e).then(function(e){e.data.exists&&a.edit(e.data.data)}).catch(function(e){a.$store.commit(c.a,{expression:" al traer el aseguradora. ",error:e})})},edit:function(e){this.ordenEdit=!0,this.aseguradora=e},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.dialogCodigo=!1,this.ordenEdit=!1},formReset:function(){this.dialogCodigo=!1,this.ordenEdit=!1,this.aseguradora={}},terceroSeleccionado:function(e){null==this.aseguradora.id&&null!=e&&(this.aseguradora.tercero=e,this.aseguradora.gn_tercero_id=e.id,this.aseguradora.nombre=e.razon_social,this.aseguradora.direccion=e.direccion,this.aseguradora.telefono=e.telefono)}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},1900:function(e,a,r){"use strict";var o=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("v-card",[e.ordenEdit?r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      Editar Aseguradora\n    ")]):r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      Registrar Aseguradora\n    ")]),e._v(" "),r("v-card-text",[r("v-form",{attrs:{"data-vv-scope":"formAseguradora"}},[r("v-container",{attrs:{fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm12:"",md2:"",lg2:""}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:16",expression:"'required|max:16'"}],key:"codigo",attrs:{label:"Codigo de la aseguradora",name:"codigo","error-messages":e.errors.collect("codigo"),disabled:e.ordenEdit,hint:e.buscandoCodigo?"Estamos buscando el codigo":"","persistent-hint":"",required:""},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.aseguradoraByCod(a)},blur:e.aseguradoraByCod},model:{value:e.aseguradora.codigo,callback:function(a){e.$set(e.aseguradora,"codigo",a)},expression:"aseguradora.codigo"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",sm12:"",md10:"",lg10:""}},[r("postulador",{ref:"postuladorTercero",attrs:{nodata:"Busqueda por identificacion o nombre",required:"",hint:"nombre_completo",itemtext:"identificacion_completa",datatitle:"identificacion_completa",datasubtitle:"nombre_completo",filter:"identificacion_completa,nombre_completo",label:"Tercero",scope:"formAseguradora",entidad:"terceros",preicon:"person",value:e.aseguradora.tercero,clearable:""},on:{change:function(a){return e.aseguradora.gn_tercero_id=a},objectReturn:function(a){return e.terceroSeleccionado(a)}}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg6:""}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.aseguradora.nombre,callback:function(a){e.$set(e.aseguradora,"nombre",a)},expression:"aseguradora.nombre"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg3:""}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],key:"direccion",attrs:{label:"Direccion",name:"direccion",required:"","error-messages":e.errors.collect("direccion")},model:{value:e.aseguradora.direccion,callback:function(a){e.$set(e.aseguradora,"direccion",a)},expression:"aseguradora.direccion"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg3:""}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],key:"telefono",attrs:{label:"Telefono",name:"telefono",required:"","error-messages":e.errors.collect("telefono")},model:{value:e.aseguradora.telefono,callback:function(a){e.$set(e.aseguradora,"telefono",a)},expression:"aseguradora.telefono"}})],1)],1)],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.submit}},[e._v("\n        Guardar\n      ")])],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogCodigo,callback:function(a){e.dialogCodigo=a},expression:"dialogCodigo"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Codigo del aseguradora")]),e._v(" "),r("v-card-text",[e._v("El codigo del aseguradora ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.editarByCodigo}},[e._v("Cargar datos")]),e._v(" "),r("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.cerrarByCodigo}},[e._v("Cerrar")])],1)],1)],1)],1)},t=[],i={render:o,staticRenderFns:t};a.a=i},572:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=r(1096),t=r(1900),i=r(1),s=i(o.a,t.a,!1,null,null,null);a.default=s.exports}});
//# sourceMappingURL=265.1cbd62884ef31c6f3cd0.js.map