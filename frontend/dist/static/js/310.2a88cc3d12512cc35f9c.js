webpackJsonp([310],{1356:function(t,e,o){"use strict";var a=o(249),i=o.n(a),n=o(252),r=o.n(n),l=o(13),s=o.n(l),c=o(14),d=o.n(c),v=o(7),u=o.n(v),p=o(59),m=o(12),f=o(743);e.a={name:"detalle",props:["tipodetalles"],components:{Confirmar:f.a},data:function(){return{evento:"",dialogA:{visible:!1,content:null,registroID:null},dialog:!1,tableLoading:!1,headers:[{text:"Tipo Soporte",align:"left",sortable:!1,value:""},{text:"Activo",align:"left",sortable:!1,value:""},{text:"Obligatorio",align:"left",sortable:!1,value:""},{text:"Opciones",align:"left",sortable:!1,value:"id"}],tabs:null,dataDetalles:{detalles:[]},dicotomia:[{value:"1",nombre:"Si"},{value:"0",nombre:"No"}],detalles:{},detalle:{},filterTipo:function(t,e){var o=function(t){return null!=t?t:""},a=o(t.descripcion+" "+t.profesion),i=o(e);return a.toString().toLowerCase().indexOf(i.toString().toLowerCase())>-1}}},mounted:function(){},created:function(){this.reloadPage()},watch:{},filers:{},computed:{complementosTiposSoportes:function(){return JSON.parse(u()(p.b.getters.complementosTipoSoporte))}},methods:{reloadPage:function(){var t=this;this.tableLoading=!0,this.localLoading=!0,this.axios.get("soportedetalle?idProceso="+this.tipodetalles).then(function(e){t.dataDetalles.detalles=e.data,t.tableLoading=!1,t.localLoading=!1}).catch(function(e){return t.tableLoading=!1,t.localLoading=!1,!1})},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},saveDetalle:function(){var t=this;return d()(s.a.mark(function e(){var o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validador("formTipo");case 2:if(!e.sent){e.next=10;break}t.detalle.consecutivo_proceso=t.tipodetalles,t.localLoading=!0,o="","crear"===t.evento?o=t.axios.post("soportedetalle/crear",t.detalle):"editar"===t.evento&&(o=t.axios.put("soportedetalle/actualizar/"+t.detalle.consecutivo_proceso+"/"+t.detalle.consecutivo_soporte,t.detalle)),o.then(function(e){t.localLoading=!1,"editar"===t.evento?t.$store.commit(m.b,{msg:"El detalle se actualizó correctamente",color:"success"}):(t.$store.commit(m.b,{msg:"Detalle agregado exitosamente",color:"success"}),t.reloadPage()),t.dialog=!1}).catch(function(e){t.localLoading=!1,t.$store.commit(m.b,{msg:"Existe un registro de detalle con tipo soporte ya existente. Por favor verifique. ",color:"danger"})}),e.next=11;break;case 10:t.$store.commit(m.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 11:t.formTableReset();case 12:case"end":return e.stop()}},e,t)}))()},eliminarDetalle:function(t){this.dialogA.content="¿Está seguro de eliminar?",this.dialogA.registroID1=t.item.consecutivo_proceso,this.dialogA.registroID2=t.item.consecutivo_soporte,this.dialogA.visible=!0},cancelaAnulacion:function(){this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registroID1=null,this.dialogA.registroID2=null},confirmaAnulacion:function(t){var e=this;this.localLoading=!0,this.axios.delete("soportedetalle/eliminar/"+this.dialogA.registroID1+"/"+this.dialogA.registroID2).then(function(t){e.$store.commit(m.b,{msg:"El detalle se eliminó correctamente",color:"success"}),e.reloadPage(),e.cancelaAnulacion()}).catch(function(t){e.localLoading=!1,e.$store.commit(m.b,{msg:"Hay un error al eliminar el registro. "+t.response,color:"danger"})})},editarDetalle:function(t,e){this.dialog=!0,this.detalle=r()({},t),this.i=e,1===this.detalle.sw_activo?this.detalle.sw_activo="Si":this.detalle.sw_activo="No",1===this.detalle.sw_obligatorio?this.detalle.sw_obligatorio="Si":this.detalle.sw_obligatorio="No"},closeTable:function(){this.formTableReset()},formTableReset:function(){this.i=null,this.evento="",this.detalle={consecutivo_proceso:null,consecutivo_soporte:null,sw_activo:null,sw_obligatorio:null},this.dialog=!1},formDate:function(t){if(!t)return null;var e=t.split("-"),o=i()(e,3);return o[0]+"/"+o[1]+"/"+o[2]}},filters:{descripcionSoporte:function(t){for(var e=0;e<p.b.getters.complementosTipoSoporte.tiposoporte.length;e++){var o=p.b.getters.complementosTipoSoporte.tiposoporte[e];if(t===o.consecutivo_soporte)return o.descripcion}},descripcionDicotomia:function(t){return 1===t?"Si":"No"}}}},2659:function(t,e,o){"use strict";function a(t){o(2660)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1356),n=o(2662),r=o(1),l=a,s=r(i.a,n.a,!1,l,"data-v-204cfb08",null);e.default=s.exports},2660:function(t,e,o){var a=o(2661);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(456)("0023f80f",a,!0,{})},2661:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,".tipo[data-v-204cfb08]{height:10px;padding:0}.no-padding[data-v-204cfb08]{padding:0}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/atencionUsuario/tiposSoporte/Detalle.vue"],names:[],mappings:"AACA,uBACE,YAAa,AACb,SAAW,CACZ,AACD,6BACE,SAAW,CACZ",file:"Detalle.vue",sourcesContent:["\n.tipo[data-v-204cfb08] {\n  height: 10px;\n  padding: 0;\n}\n.no-padding[data-v-204cfb08] {\n  padding: 0;\n}\n"],sourceRoot:""}])},2662:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-dialog",{attrs:{width:"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formTipo"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[t._v("Agregar detalles")])]),t._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tipo Soporte",items:t.complementosTiposSoportes.tiposoporte,"item-value":"consecutivo_soporte","item-text":"descripcion",name:"tipo soporte",required:"","error-messages":t.errors.collect("tipo soporte"),filter:t.filterTipo},scopedSlots:t._u([{key:"item",fn:function(e){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.descripcion)}})],1)]]}}]),model:{value:t.detalle.consecutivo_soporte,callback:function(e){t.$set(t.detalle,"consecutivo_soporte",e)},expression:"detalle.consecutivo_soporte"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Activo",items:t.dicotomia,name:"activo","error-messages":t.errors.collect("activo")},model:{value:t.detalle.sw_activo,callback:function(e){t.$set(t.detalle,"sw_activo",e)},expression:"detalle.sw_activo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Obligatorio",items:t.dicotomia,name:"vivienda propia","error-messages":t.errors.collect("vivienda propia")},model:{value:t.detalle.sw_obligatorio,callback:function(e){t.$set(t.detalle,"sw_obligatorio",e)},expression:"detalle.sw_obligatorio"}})],1)],1)],1),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),t._v(" "),o("v-btn",{on:{click:t.closeTable}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:t.saveDetalle}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),o("v-card",{attrs:{flat:""}},[o("v-card",[o("v-card-text",[o("v-toolbar",{attrs:{dense:"",short:"",flat:""}},[t._v("\n          Detalles\n          "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{icon:""}},[o("v-icon",{attrs:{color:"green",title:"agregar"},on:{click:function(e){t.dialog=!0,t.evento="crear"}}},[t._v("add")])],1)],1),t._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.dataDetalles.detalles,loading:t.tableLoading,"total-items":t.dataDetalles.length,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",[t._v(t._s(t._f("descripcionSoporte")(e.item.consecutivo_soporte)))]),t._v(" "),o("td",[t._v(t._s(t._f("descripcionDicotomia")(e.item.sw_activo)))]),t._v(" "),o("td",[t._v(t._s(t._f("descripcionDicotomia")(e.item.sw_obligatorio)))]),t._v(" "),o("td",[o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(o){t.$set(e.item,"show",o)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(o){t.$set(e.item,"show",o)},expression:"props.item.show"}},[o("v-icon",[t._v("chevron_left")]),t._v(" "),o("v-icon",[t._v("close")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return t.eliminarDetalle(e)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("delete")])],1),t._v(" "),o("span",[t._v("Eliminar")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){t.editarDetalle(e.item,e.index),t.evento="editar"}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1),t._v(" "),o("span",[t._v("Editar")])],1)],1)],1)]}}])},[t._v(" "),o("template",{slot:"no-data"},[t.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n              Estamos cargando los registros. "),o("v-icon",[t._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n              No tenemos registros para mostrar. "),o("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)],1),t._v(" "),o("confirmar",{attrs:{value:t.dialogA.visible,content:t.dialogA.content},on:{cancelar:t.cancelaAnulacion,aceptar:function(e){return t.confirmaAnulacion(e)}}})],1)},i=[],n={render:a,staticRenderFns:i};e.a=n},742:function(t,e,o){"use strict";var a=o(13),i=o.n(a),n=o(14),r=o.n(n),l=o(58);e.a={name:"Confirmar",props:{value:{type:Boolean,default:!1},content:{type:String},requiereMotivo:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},components:{Loading:l.default},data:function(){return{loadingSubmit:!1,motivo:null}},watch:{value:function(t){t||(this.motivo=null,this.$validator.reset())}},methods:{submit:function(){var t=this;return r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(!e.sent){e.next=5;break}t.loadingSubmit=!0,t.$emit("aceptar",t.motivo);case 5:case"end":return e.stop()}},e,t)}))()},pararCarga:function(){this.loadingSubmit=!1}}}},743:function(t,e,o){"use strict";function a(t){o(744)}var i=o(742),n=o(746),r=o(1),l=a,s=r(i.a,n.a,!1,l,"data-v-3773d9ac",null);e.a=s.exports},744:function(t,e,o){var a=o(745);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(456)("0e7a280b",a,!0,{})},745:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Confirmar2.vue",sourceRoot:""}])},746:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{key:"dialogConfirm",attrs:{persistent:"","max-width":"400"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[o("loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),o("v-card",[o("v-card-text",{staticClass:"title font-weight-light text-xs-center",domProps:{innerHTML:t._s(t.content)}}),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{flat:""},on:{click:function(e){return e.stopPropagation(),t.$emit("cancelar")}}},[t._v("Cancelar")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary",loading:t.loadingSubmit},on:{click:function(e){return e.stopPropagation(),t.submit(e)}}},[t._v("Aceptar")])],1)],1)],1)],1)},i=[],n={render:a,staticRenderFns:i};e.a=n}});
//# sourceMappingURL=310.2a88cc3d12512cc35f9c.js.map