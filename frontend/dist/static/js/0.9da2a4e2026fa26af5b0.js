webpackJsonp([0],{1532:function(e,t,a){var n=a(1533);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(456)("03b11392",n,!0,{})},1533:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroNiif.vue",sourceRoot:""}])},1534:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.value,persistent:"","max-width":"920px"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3"},[a("span",{staticClass:"headline"},[e._v("Nueva Cuenta")])]),e._v(" "),a("v-divider"),e._v(" "),a("v-form",{attrs:{"data-vv-scope":"formNewCuenta"}},[a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md5:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"clase",attrs:{items:e.registros,required:"","item-value":"id","item-text":"nombre",hint:e.formCuenta.clase?"Código: "+e.formCuenta.clase.codigo:"","persistent-hint":"",label:"Clase",name:"clase","error-messages":e.errors.collect("clase"),"return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.codigo+" - "+t.item.nombre)}})],1)]]}}]),model:{value:e.formCuenta.clase,callback:function(t){e.$set(e.formCuenta,"clase",t)},expression:"formCuenta.clase"}},[e._v(" "),a("template",{staticClass:"error",slot:"no-data"},[a("div",{staticClass:"pa-1 pl-2 text--white"},[e._v("\n                    Lo sentimos, no se presentan registros de la clases. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)])],2)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md7:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"grupo",attrs:{items:e.formCuenta.clase?e.formCuenta.clase.children:[],disabled:!e.formCuenta.clase,required:"","item-value":"id","item-text":"nombre",hint:e.formCuenta.grupo?"Código: "+e.formCuenta.grupo.codigo:"","persistent-hint":"",label:"Grupo",name:"grupo","error-messages":e.errors.collect("grupo"),"return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.codigo+" - "+t.item.nombre)}})],1)]]}}]),model:{value:e.formCuenta.grupo,callback:function(t){e.$set(e.formCuenta,"grupo",t)},expression:"formCuenta.grupo"}},[e._v(" "),a("template",{staticClass:"error",slot:"no-data"},[a("div",{staticClass:"pa-1 pl-2 text--white"},[e._v("\n                    Lo sentimos, la clase no presenta registros. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)])],2)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"cuenta",attrs:{items:e.formCuenta.grupo?e.formCuenta.grupo.children:[],disabled:!e.formCuenta.grupo,required:"","item-value":"id","item-text":"nombre",hint:e.formCuenta.nCuenta?"Código: "+e.formCuenta.nCuenta.codigo:"","persistent-hint":"",label:"Cuenta",name:"cuenta","error-messages":e.errors.collect("cuenta"),"return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.codigo+" - "+t.item.nombre)}})],1)]]}}]),model:{value:e.formCuenta.nCuenta,callback:function(t){e.$set(e.formCuenta,"nCuenta",t)},expression:"formCuenta.nCuenta"}},[e._v(" "),a("template",{staticClass:"error",slot:"no-data"},[a("div",{staticClass:"pa-1 pl-2 text--white"},[e._v("\n                    Lo sentimos, el grupo no presenta registros. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)])],2)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"subcuenta",attrs:{items:e.formCuenta.nCuenta?e.formCuenta.nCuenta.children:[],disabled:!e.formCuenta.nCuenta,required:"","item-value":"id","item-text":"nombre",hint:e.formCuenta.subcuenta?"Código: "+e.formCuenta.subcuenta.codigo:"","persistent-hint":"",label:"Subcuenta",name:"subcuenta","error-messages":e.errors.collect("subcuenta"),"return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.codigo+" - "+t.item.nombre)}})],1)]]}}]),model:{value:e.formCuenta.subcuenta,callback:function(t){e.$set(e.formCuenta,"subcuenta",t)},expression:"formCuenta.subcuenta"}},[e._v(" "),a("template",{staticClass:"error",slot:"no-data"},[a("div",{staticClass:"pa-1 pl-2 text--white"},[e._v("\n                    Lo sentimos, la cuenta no presenta registros. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)])],2)],1),e._v(" "),(null!=e.formCuenta.subcuenta?""!=e.formCuenta.subcuenta.children:null)?a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:"",sm9:"",md9:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"auxiliar",attrs:{items:e.formCuenta.subcuenta?e.formCuenta.subcuenta.children:[],disabled:!e.formCuenta.subcuenta||0!=e.auxiliar,required:"","item-value":"id","item-text":"nombre",hint:e.formCuenta.nauxiliar?"Código: "+e.formCuenta.nauxiliar.codigo:"","persistent-hint":"",label:"Auxiliar",name:"auxiliar","error-messages":e.errors.collect("auxiliar"),"return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.codigo+" - "+t.item.nombre)}})],1)]]}}],null,!1,837467315),model:{value:e.formCuenta.nauxiliar,callback:function(t){e.$set(e.formCuenta,"nauxiliar",t)},expression:"formCuenta.nauxiliar"}},[e._v(" "),a("template",{staticClass:"error",slot:"no-data"},[a("div",{staticClass:"pa-1 pl-2 text--white"},[e._v("\n                        Lo sentimos, la cuenta no presenta registros. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)])],2)],1),e._v(" "),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-switch",{attrs:{color:"success",label:"Nuevo Auxiliar",disabled:!e.formCuenta.subcuenta},model:{value:e.auxiliar,callback:function(t){e.auxiliar=t},expression:"auxiliar"}})],1)],1)],1):e._e(),e._v(" "),(null!=e.formCuenta.subcuenta?""==e.formCuenta.subcuenta.children||0!=e.auxiliar||null!=e.formCuenta.nauxiliar:null)?[a("v-card",{staticClass:"mt-1",attrs:{width:"100%"}},[a("v-toolbar",{staticClass:"elevation-0 toolbar--dense"},[a("v-toolbar-title",[e._v(e._s(e.subtituloForm)+" ")]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pr-0",attrs:{xs6:"",sm6:"",md2:"",lg2:""}},[a("v-text-field",{attrs:{value:5===e.formCuenta.nf_nivcuenta_id?e.formCuenta.subcuenta?e.formCuenta.subcuenta.codigo:"":e.formCuenta.nauxiliar?e.formCuenta.nauxiliar.codigo:"",label:"Código Padre",disabled:""}})],1),e._v(" "),a("v-flex",{staticClass:"pl-0",attrs:{xs6:"",sm6:"",md3:"",lg3:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|length:"+e.nPadre.digitos+"|not_in:"+e.codsUsados,expression:"'required|length:' + nPadre.digitos + '|not_in:' + codsUsados"}],key:"codigo",attrs:{name:"codigo",label:"Código",maxlength:e.nPadre.digitos,required:"","error-messages":e.errors.collect("codigo")},model:{value:e.codeDigi,callback:function(t){e.codeDigi=t},expression:"codeDigi"}}),e._v(" "),e.formCuenta.id<0?a("v-text-field",{model:{value:e.formCuenta.codigo,callback:function(t){e.$set(e.formCuenta,"codigo",t)},expression:"formCuenta.codigo"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md7:"",lg7:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{name:"nombre",label:"Nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.formCuenta.nombre,callback:function(t){e.$set(e.formCuenta,"nombre",t)},expression:"formCuenta.nombre"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-select",{key:"tipo",attrs:{items:e.complements.tiposniif,label:"Tipo","error-messages":e.errors.collect("tipo"),name:"tipo"},model:{value:e.formCuenta.tipo,callback:function(t){e.$set(e.formCuenta,"tipo",t)},expression:"formCuenta.tipo"}})],1),e._v(" "),"Retencion"===e.formCuenta.tipo?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-select",{key:"tipo retención",attrs:{items:e.complements.tiposreteniif,label:"Tipo Retención","error-messages":e.errors.collect("tipo retención"),name:"tipo retención"},model:{value:e.formCuenta.tipo_retencion,callback:function(t){e.$set(e.formCuenta,"tipo_retencion",t)},expression:"formCuenta.tipo_retencion"}})],1):e._e(),e._v(" "),e.esDian?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-text-field",{attrs:{label:"Tercero",disabled:"",value:e.complements.dian.razon_social}})],1):e._e(),e._v(" "),"Retención ICA"===e.formCuenta.tipo_retencion?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tercero ente Territorial",disabled:"",required:"",value:e.complements.alcaldia.razon_social}})],1):e._e(),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"anexo declaración",attrs:{items:e.complements.anexosdeclaracion,"item-value":"id","item-text":"nombre",label:"Anexo declaración",required:"",name:"anexo declaración","error-messages":e.errors.collect("anexo declaración")},model:{value:e.formCuenta.nf_anedeclaracione_id,callback:function(t){e.$set(e.formCuenta,"nf_anedeclaracione_id",t)},expression:"formCuenta.nf_anedeclaracione_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"disponibilidad",attrs:{items:e.disponibilidades,"item-value":"id","item-text":"nombre",label:"Disponibilidad",required:"",name:"disponibilidad","error-messages":e.errors.collect("disponibilidad")},model:{value:e.formCuenta.disponibilidad,callback:function(t){e.$set(e.formCuenta,"disponibilidad",t)},expression:"formCuenta.disponibilidad"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-switch",{attrs:{color:"accent",label:"Maneja tercero","true-value":"1","false-value":"0"},model:{value:e.formCuenta.maneja_tercero,callback:function(t){e.$set(e.formCuenta,"maneja_tercero",t)},expression:"formCuenta.maneja_tercero"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-switch",{attrs:{color:"accent",label:"Maneja Centro de Costo","true-value":"1","false-value":"0"},model:{value:e.formCuenta.maneja_ccosto,callback:function(t){e.$set(e.formCuenta,"maneja_ccosto",t)},expression:"formCuenta.maneja_ccosto"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[a("v-switch",{attrs:{color:"success",label:e.formCuenta.estado,readonly:0===e.nPadre.auxiliar,"true-value":"Activo","false-value":"Inactivo"},model:{value:e.formCuenta.estado,callback:function(t){e.$set(e.formCuenta,"estado",t)},expression:"formCuenta.estado"}})],1)],1)],1)],1)]:e._e()],2),e._v(" "),a("div",{staticClass:"text-xs-right"},[a("small",[e._v("*Si no existe el registro para los campos clase, grupo, cuenta y subcuenta. Por favor, reportar con contabilidad ")])])],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){return t.stopPropagation(),e.$emit("cancelar")}}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.guardaNiif()}}},[e._v("Guardar")])],1)],1)],1)},i=[],r={render:n,staticRenderFns:i};t.a=r},457:function(e,t,a){"use strict";function n(e){a(1532)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(977),r=a(1534),o=a(1),s=n,l=o(i.a,r.a,!1,s,"data-v-97ebffa4",null);t.default=l.exports},977:function(e,t,a){"use strict";var n=a(13),i=a.n(n),r=a(14),o=a.n(r),s=a(12);t.a={name:"RegistroNiif",props:["value","cue"],data:function(){return{tab:null,auxiliar:!1,cuentaCreada:null,registros:[],formCuenta:{},clases:[],disponibilidades:["Corriente","No Corriente"],niveles:null,nPadre:Object,codsUsados:"",codeDigi:"",complements:null}},beforeCreate:function(){var e=this;this.axios.get("niifs/puc").then(function(t){e.registros=t.data.data}).catch(function(t){e.$store.commit(s.b,{msg:"Hay un error al hacer la busqueda de registros. "+t.response,color:"danger"})})},created:function(){this.getComplements()},watch:{value:function(e){e||this.formReset()},"formCuenta.clase":function(e){this.formCuenta.grupo=null,this.formCuenta.nf_clascuenta_id=e?e.codigo:null},"formCuenta.grupo":function(e){this.formCuenta.nCuenta=null},"formCuenta.nCuenta":function(e){this.formCuenta.subcuenta=null},"formCuenta.subcuenta":function(e){var t=this;e&&(this.formCuenta.nauxiliar=null,this.formCuenta.nf_padre_id=e.id,this.formCuenta.nf_nivcuenta_id=e.nf_nivcuenta_id+1,this.nPadre=this.complements.nivelescuentas.find(function(e){return e.id===t.formCuenta.nf_nivcuenta_id}),this.codsUsados=this.getCodUsados(e.children),this.auxiliar=!e.children.length)},"formCuenta.nauxiliar":function(e){var t=this;e&&(this.formCuenta.nf_padre_id=e.id,this.formCuenta.nf_nivcuenta_id=e.nf_nivcuenta_id+1,this.nPadre=this.complements.nivelescuentas.find(function(e){return e.id===t.formCuenta.nf_nivcuenta_id}),this.codsUsados=this.getCodUsados(e.children))},auxiliar:function(e){var t=this;!1!==e&&(this.formCuenta.nauxiliar=null,this.formCuenta.nf_padre_id=this.formCuenta.subcuenta.id,this.formCuenta.nf_nivcuenta_id=this.formCuenta.subcuenta.nf_nivcuenta_id+1,this.nPadre=this.complements.nivelescuentas.find(function(e){return e.id===t.formCuenta.nf_nivcuenta_id}),this.codsUsados=this.getCodUsados(this.formCuenta.subcuenta.children))},"formCuenta.tipo":function(e){"Retencion"!==e&&(this.formCuenta.tipo_retencion=null)},codeDigi:function(e){5===this.formCuenta.nf_nivcuenta_id&&!1!==this.auxiliar?this.formCuenta.codigo=(this.formCuenta.subcuenta?this.formCuenta.subcuenta.codigo:"")+e:this.formCuenta.codigo=(this.formCuenta.nauxiliar?this.formCuenta.nauxiliar.codigo:"")+e}},computed:{subtituloForm:function(){return this.auxiliar?"Nuevo Auxiliar":"Nuevo Subauxiliar"},esDian:function(){return("Retención IVA"===this.formCuenta.tipo_retencion||"Retención en la fuente"===this.formCuenta.tipo_retencion||"Otras"===this.formCuenta.tipo_retencion)&&"Retencion"===this.formCuenta.tipo}},beforeMount:function(){this.formReset(),null!=this.cue&&(this.formCuenta=this.cue)},methods:{formReset:function(){this.formCuenta={clase:null,grupo:null,nCuenta:null,subcuenta:null,nauxiliar:null,id:null,codigo:null,nombre:null,nf_nivcuenta_id:null,nf_clascuenta_id:null,tipo:null,tipo_retencion:null,nf_anedeclaracione_id:null,nf_padre_id:null,maneja_tercero:"0",maneja_ccosto:"0",estado:"Activo",disponibilidad:"Corriente"},this.$validator.reset(),this.codeDigi=""},getCodUsados:function(e){var t=this,a=this;return e.map(function(e){if(null==t.codeDigi||t.codeDigi!==e.codigo)return e.codigo.slice(-1*a.nPadre.digitos)})},getComplements:function(){var e=this;this.axios.get("niifs/complementos").then(function(t){e.complements=t.data.data}).catch(function(t){e.$store.commit(s.b,{msg:"Hay un error al hacer la busqueda de registros. "+t.response,color:"danger"})})},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},guardaNiif:function(e){var t=this;return o()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validador("formNewCuenta");case 2:if(!e.sent){e.next=7;break}a=t.formCuenta.id?t.axios.put("niifs/"+t.formCuenta.id,t.formCuenta):t.axios.post("niifs",t.formCuenta),a.then(function(e){t.formCuenta.id?t.$store.commit(s.b,{msg:"La cuenta se actualizó correctamente",color:"success"}):t.$store.commit(s.b,{msg:"La cuenta se creó correctamente",color:"success"}),t.formCuenta=e.data.data,t.$emit("crear",t.formCuenta)}).catch(function(e){t.$store.commit(s.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:console.log("Existen campos sin completar.");case 8:case"end":return e.stop()}},e,t)}))()},codPadre:function(e){5===this.formCuenta.nf_nivcuenta_id?this.formCuenta.subcuenta.codigo.toString():this.formCuenta.nauxiliar.codigo.toString()}},mounted:function(){var e={custom:{codigo:{not_in:"Este código ya fue usado"}}};this.$validator.localize("es",e)}}}});
//# sourceMappingURL=0.9da2a4e2026fa26af5b0.js.map