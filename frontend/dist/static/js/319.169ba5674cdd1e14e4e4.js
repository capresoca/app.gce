webpackJsonp([319],{1231:function(e,t,a){"use strict";var i=a(13),r=a.n(i),o=a(14),n=a.n(o);t.a={name:"RegistroServicios",props:["value"],data:function(){return{loading:!1,items_generales:[],items_primarios:[],paginationGenerales:{sortBy:"codigo"},searchGenerales:null,headersPrimarios:[{text:"Código",align:"center",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Porcetaje afiliados",align:"center",sortable:!0,value:"porcentaje"},{text:"Porcetaje contratado",align:"center",sortable:!0,value:"porcentaje_contratado"}]}},created:function(){this.buildServisces()},watch:{value:function(e){e&&this.buildServisces()}},methods:{changeSort:function(e){this.paginationGenerales.sortBy===e?this.paginationGenerales.descending=!this.paginationGenerales.descending:(this.paginationGenerales.sortBy=e,this.paginationGenerales.descending=!1)},submit:function(){var e=this;return n()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(!t.sent){t.next=7;break}e.loading=!0,a=e.items_primarios.filter(function(e){return e.porcentaje_contratado||e.porcentaje}).concat(e.items_generales.filter(function(e){return e.porcentaje_contratado||e.porcentaje})).map(function(e){return{id:e.id,porcentaje:e.porcentaje,porcentaje_contratado:e.porcentaje_contratado}}),console.log("registrosregistrosregistros",a),e.axios.post("contratos/"+e.value.id+"/add-servicios",{servicios:a}).then(function(t){e.loading=!1}).catch(function(t){e.loading=!1,e.$store.commit("SNACK_ERROR_LIST",{expression:" al registrar servicios contratados. ",error:t})});case 7:case"end":return t.stop()}},t,e)}))()},buildServisces:function(){var e=this;this.items_primarios=this.value.contrato.entidad.servicios_primarios.map(function(t){var a=e.value.servicios_primarios.find(function(e){return e.id===t.id});return{id:t.id,codigo:t.codigo,nombre:t.nombre,primario:t.primario,porcentaje:a&&a.pivot.porcentaje_afiliados?a.pivot.porcentaje_afiliados:null,porcentaje_contratado:a&&a.pivot.porcentaje_contratado?a.pivot.porcentaje_contratado:null}}),this.items_generales=this.value.contrato.entidad.servicios_generales.map(function(t){var a=e.value.servicios_generales.find(function(e){return e.id===t.id});return{id:t.id,codigo:t.codigo,nombre:t.nombre,primario:t.primario,porcentaje:a&&a.pivot.porcentaje_afiliados?a.pivot.porcentaje_afiliados:null,porcentaje_contratado:a&&a.pivot.porcentaje_contratado?a.pivot.porcentaje_contratado:null}})}}}},2242:function(e,t,a){"use strict";function i(e){a(2243)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1231),o=a(2245),n=a(1),s=i,c=n(r.a,o.a,!1,s,null,null);t.default=c.exports},2243:function(e,t,a){var i=a(2244);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(456)("0c646939",i,!0,{})},2244:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,".table-servicios-primarios table tbody td input{text-align:center!important}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/redservicios/planesCobertura/registroPlanCobertura/RegistroServicios.vue"],names:[],mappings:"AACA,gDACE,2BAA8B,CAC/B",file:"RegistroServicios.vue",sourcesContent:["\n.table-servicios-primarios table tbody td input{\n  text-align: center !important;\n}\n"],sourceRoot:""}])},2245:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:""}},[a("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",{staticClass:"elevation-2"},[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",{domProps:{innerHTML:e._s("Servicios primarios")}}),e._v(" "),a("small",{staticClass:"mt-2 ml-1"},[e._v(" Configuración de servicios primarios")])],1),e._v(" "),a("v-data-table",{staticClass:"table-servicios-primarios",attrs:{headers:e.headersPrimarios,items:e.items_primarios,"hide-actions":"","disable-initial-sort":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.codigo))]),e._v(" "),a("td",[e._v(e._s(t.item.nombre))]),e._v(" "),a("td",{staticClass:"text-xs-center",attrs:{width:"180px"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min_value:0|max_value:100",expression:"'min_value:0|max_value:100'"}],key:"porcenjate"+t.item.id,ref:"porcenjate"+t.item.id,attrs:{name:"porcenjate"+t.item.id,"data-vv-as":"Porcentaje",placeholder:"Afiliados",suffix:"%",step:"0.1",min:"0",max:"100",type:"number","error-messages":e.errors.collect("porcenjate"+t.item.id),disabled:!!e.value.actaInicio},model:{value:t.item.porcentaje,callback:function(a){e.$set(t.item,"porcentaje",e._n(a))},expression:"props.item.porcentaje"}})],1),e._v(" "),a("td",{staticClass:"text-xs-center",attrs:{width:"180px"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min_value:0|max_value:100",expression:"`min_value:0|max_value:100`"}],key:"porcenjate_contratado"+t.item.id,ref:"porcenjate_contratado"+t.item.id,attrs:{name:"porcenjate_contratado"+t.item.id,"data-vv-as":"porcentaje contratado",placeholder:"Contratado",suffix:"%",step:"0.1",min:"0",max:"100",type:"number","error-messages":e.errors.collect("porcenjate_contratado"+t.item.id),disabled:!!e.value.actaInicio},model:{value:t.item.porcentaje_contratado,callback:function(a){e.$set(t.item,"porcentaje_contratado",e._n(a))},expression:"props.item.porcentaje_contratado"}})],1)]}}])})],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",{staticClass:"elevation-1"},[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",{domProps:{innerHTML:e._s("Servicios generales")}}),e._v(" "),a("small",{staticClass:"mt-2 ml-1"},[e._v(" Selección de servicios")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-text-field",{staticClass:"mb-2",attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.searchGenerales,callback:function(t){e.searchGenerales=t},expression:"searchGenerales"}})],1),e._v(" "),a("v-data-table",{attrs:{items:e.items_generales,search:e.searchGenerales,pagination:e.paginationGenerales,headers:e.headersPrimarios,"item-key":"id","disable-initial-sort":""},on:{"update:pagination":function(t){e.paginationGenerales=t}},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",e._l(t.headers,function(t){return a("th",{key:t.text,class:["column sortable",e.paginationGenerales.descending?"desc":"asc",t.value===e.paginationGenerales.sortBy?"active":""],on:{click:function(a){return e.changeSort(t.value)}}},[a("v-icon",{attrs:{small:""}},[e._v("arrow_upward")]),e._v("\n              "+e._s(t.text)+"\n            ")],1)}),0)]}},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.codigo))]),e._v(" "),a("td",[e._v(e._s(t.item.nombre))]),e._v(" "),a("td",{staticClass:"text-xs-center",attrs:{width:"180px"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min_value:0|max_value:100",expression:"'min_value:0|max_value:100'"}],key:"porcenjate"+t.item.id,attrs:{name:"porcenjate"+t.item.id,"data-vv-as":"Porcentaje",placeholder:"Afiliados",suffix:"%",min:"0",max:"100",step:"0.1",type:"number","error-messages":e.errors.collect("porcenjate"+t.item.id),disabled:!!e.value.actaInicio},model:{value:t.item.porcentaje,callback:function(a){e.$set(t.item,"porcentaje",e._n(a))},expression:"props.item.porcentaje"}})],1),e._v(" "),a("td",{staticClass:"text-xs-center",attrs:{width:"180px"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min_value:0|max_value:100",expression:"'min_value:0|max_value:100'"}],key:"porcenjate_contratado"+t.item.id,attrs:{name:"porcenjate_contratado"+t.item.id,"data-vv-as":"porcentaje contratado",placeholder:"Contratado",suffix:"%",min:"0",max:"100",step:"0.1",type:"number","error-messages":e.errors.collect("porcenjate_contratado"+t.item.id),disabled:!!e.value.actaInicio},model:{value:t.item.porcentaje_contratado,callback:function(a){e.$set(t.item,"porcentaje_contratado",e._n(a))},expression:"props.item.porcentaje_contratado"}})],1)]}}])})],1),e._v(" "),e.value.actaInicio?e._e():a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"mb-3",attrs:{slot:"activator",fixed:"",dark:"",fab:"",bottom:"",right:"",color:"primary"},on:{click:e.submit},slot:"activator"},[a("v-icon",[e._v("save")])],1),e._v(" "),a("span",[e._v("Guardar")])],1)],1)],1)},r=[],o={render:i,staticRenderFns:r};t.a=o}});
//# sourceMappingURL=319.169ba5674cdd1e14e4e4.js.map