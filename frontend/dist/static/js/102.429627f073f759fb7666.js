webpackJsonp([102],{1355:function(e,t,a){"use strict";var o=a(13),i=a.n(o),r=a(14),s=a.n(r),n=a(252),l=a.n(n),c=a(7),d=a.n(c),v=a(59),p=a(12),m=a(40),u=a(248);t.a={name:"RegistroEmpleado",components:{Detalles:function(){return a.e(310).then(a.bind(null,2659))}},props:["parametros"],data:function(){return{ID:null,ordenEdit:!1,tableLoading:!1,loadingSubmit:!1,mostrarTabla:!1,i:null,dialog:!1,headers:[{text:"Tipo Soporte",align:"left",sortable:!1,value:""},{text:"Activo",align:"left",sortable:!1,value:""},{text:"Obligatorio",align:"left",sortable:!1,value:""},{text:"Opciones",align:"left",sortable:!1,value:"id"}],dicotomia:[{value:"1",nombre:"Si"},{value:"0",nombre:"No"}],tipoIncapacidad:[{proceso:"2",nombre:"Incapacidad Enfermedad General"}],tabs:null,dataDetalles:{detalle:[]},encabezado:{},detalle:{},filterTipo:function(e,t){var a=function(e){return null!=e?e:""},o=a(e.descripcion+" "+e.profesion),i=a(t);return o.toString().toLowerCase().indexOf(i.toString().toLowerCase())>-1}}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.consecutivo_proceso)},created:function(){this.getID()},watch:{},computed:{complementos:function(){return v.b.getters.complementosTercerosFormComplementarios},complementosTiposSoportes:function(){return JSON.parse(d()(v.b.getters.complementosTipoSoporte))}},methods:{getID:function(){this.ID=this.parametros.entidad.consecutivo_proceso},saveDetalle:function(){""!==this.i&&null!==this.i?(this.dataDetalles.detalle[this.i].consecutivo_soporte=this.detalle.consecutivo_soporte,this.dataDetalles.detalle[this.i].sw_obligatorio=this.detalle.sw_obligatorio,this.dataDetalles.detalle[this.i].sw_activo=this.detalle.sw_activo):this.dataDetalles.detalle.push(this.detalle),this.formTableReset()},eliminarDetalle:function(e){this.dataDetalles.detalle.splice(e,1)},editarDetalle:function(e,t){this.dialog=!0,this.detalle=l()({},e),this.i=t},closeTable:function(){this.dialog=!1,this.formTableReset()},formTableReset:function(){this.i=null,this.detalle={consecutivo_soporte:null,sw_activo:null,sw_obligatorio:null},this.dialog=!1},getRegistro:function(e){var t=this,a=this.$loading.show({container:this.$refs.loaderRef.$el});this.axios.get("soportexincapacidad/"+e).then(function(e){if(""!==e.data){t.encabezado=e.data.data,t.dataDetalles.detalle=e.data.detalle,t.mostrarTabla=!0;for(var o=0;o<t.tipoIncapacidad.length;o++){var i=t.tipoIncapacidad[o];t.encabezado.proceso.toString()===i.proceso&&(t.encabezado.proceso=i.nombre)}}a.hide()}).catch(function(e){a.hide(),t.$store.commit(p.a,{expression:" al hacer la busqueda de registros. ",error:e})})},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},submit:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formTipo");case 2:if(!t.sent){t.next=8;break}e.loadingSubmit=!0,e.encabezado=[].concat(e.encabezado,e.dataDetalles),e.encabezado[0].consecutivo_proceso?e.axios.put("soportexincapacidad/actualizar/"+e.encabezado[0].consecutivo_proceso,e.encabezado).then(function(t){e.$store.commit(p.b,{msg:"El empleado se actualizo correctamente",color:"success"}),e.formReset(),console.log("data en actualiza",t.data.data),e.$store.dispatch(m.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(u._17,{item:t.data.data,estado:"editar",key:e.parametros.key})}).catch(function(t){console.log(t),e.$store.commit(p.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}):e.axios.post("soportexincapacidad/crear",e.encabezado).then(function(t){e.$store.commit(p.b,{msg:"El soporte se creó correctamente",color:"success"}),e.formReset(),console.log("data en crea",t.data.data),e.$store.dispatch(m.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(u._17,{item:t.data.data,estado:"crear",key:e.parametros.key})}).catch(function(t){console.log(t),e.$store.commit(p.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}),t.next=9;break;case 8:e.$store.commit(p.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return t.stop()}},t,e)}))()},formReset:function(){this.mostrarTabla=!1,this.ID=null},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(m.c,{contexto:this,itemId:this.parametros.tabOrigin})}},filters:{descripcionSoporte:function(e){for(var t=0;t<v.b.getters.complementosTipoSoporte.tiposoporte.length;t++){var a=v.b.getters.complementosTipoSoporte.tiposoporte[t];if(e===a.consecutivo_soporte)return a.descripcion}}}}},2657:function(e,t,a){var o=a(2658);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(456)("70a162a1",o,!0,{})},2658:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,".tipo[data-v-1d362720]{height:10px;padding:0}.no-padding[data-v-1d362720]{padding:0}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/atencionUsuario/tiposSoporte/RegistroSoporteIncapacidad.vue"],names:[],mappings:"AACA,uBACE,YAAa,AACb,SAAW,CACZ,AACD,6BACE,SAAW,CACZ",file:"RegistroSoporteIncapacidad.vue",sourcesContent:["\n.tipo[data-v-1d362720] {\n  height: 10px;\n  padding: 0;\n}\n.no-padding[data-v-1d362720] {\n  padding: 0;\n}\n"],sourceRoot:""}])},2663:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[e._v("Agregar detalles")])]),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tipo Soporte",items:e.complementosTiposSoportes.tiposoporte,"item-value":"consecutivo_soporte","item-text":"descripcion",name:"tipo soporte",required:"","error-messages":e.errors.collect("tipo soporte"),filter:e.filterTipo},scopedSlots:e._u([{key:"item",fn:function(t){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.descripcion)}})],1)]]}}]),model:{value:e.detalle.consecutivo_soporte,callback:function(t){e.$set(e.detalle,"consecutivo_soporte",t)},expression:"detalle.consecutivo_soporte"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Activo",items:e.dicotomia,name:"activo","error-messages":e.errors.collect("activo")},model:{value:e.detalle.sw_activo,callback:function(t){e.$set(e.detalle,"sw_activo",t)},expression:"detalle.sw_activo"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Obligatorio",items:e.dicotomia,name:"vivienda propia","error-messages":e.errors.collect("vivienda propia")},model:{value:e.detalle.sw_obligatorio,callback:function(t){e.$set(e.detalle,"sw_obligatorio",t)},expression:"detalle.sw_obligatorio"}})],1)],1)],1),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.closeTable}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveDetalle}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),a("v-card",{ref:"loaderRef"},[a("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[a("v-toolbar-title",[e._v(" "+e._s(e.ordenEdit?"Edicion de tipo de soporte por incapacidad":"Registro de tipo de soporte por incapacidad")+" ")])],1),e._v(" "),a("v-card-text",{staticClass:"no-padding"},[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{attrs:{"data-vv-scope":"formTipo"}},[a("v-card",[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"item-text":"nombre","item-value":"nombre",label:"Tipo Incapacidad",items:e.tipoIncapacidad,name:"tipo incapacidad","error-messages":e.errors.collect("tipo incapacidad")},model:{value:e.encabezado.proceso,callback:function(t){e.$set(e.encabezado,"proceso",t)},expression:"encabezado.proceso"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:200",expression:"'required|max:200'"}],key:"descripción",attrs:{label:"Descripción",name:"descripción","error-messages":e.errors.collect("descripción")},model:{value:e.encabezado.descripcion,callback:function(t){e.$set(e.encabezado,"descripcion",t)},expression:"encabezado.descripcion"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.mostrarTabla,expression:"!mostrarTabla"}],attrs:{flat:""}},[a("v-card",[a("v-card-text",[a("v-toolbar",{attrs:{dense:"",short:"",flat:""}},[e._v("\n                  Detalles\n                  "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"green",title:"agregar"},on:{click:function(t){e.dialog=!0}}},[e._v("add")])],1)],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dataDetalles.detalle,loading:e.tableLoading,"total-items":e.dataDetalles.length,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(e._f("descripcionSoporte")(t.item.consecutivo_soporte)))]),e._v(" "),a("td",[e._v(e._s(t.item.sw_activo))]),e._v(" "),a("td",[e._v(e._s(t.item.sw_obligatorio))]),e._v(" "),a("td",[a("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:t.item.show,callback:function(a){e.$set(t.item,"show",a)},expression:"props.item.show"}},[a("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:t.item.show,callback:function(a){e.$set(t.item,"show",a)},expression:"props.item.show"}},[a("v-icon",[e._v("chevron_left")]),e._v(" "),a("v-icon",[e._v("close")])],1),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return e.eliminarDetalle(t.index)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Eliminar")])],1),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return e.editarDetalle(t.item,t.index)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),a("span",[e._v("Editar")])],1)],1)],1)]}}])},[e._v(" "),a("template",{slot:"no-data"},[e.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n                      Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n                      No tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)],1),e._v(" "),a("Detalles",{directives:[{name:"show",rawName:"v-show",value:e.mostrarTabla,expression:"mostrarTabla"}],attrs:{tipodetalles:e.ID}})],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("v-btn",{on:{click:function(t){return e.close()}}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Guardar")])],1)],1)],1)],1)],1)},i=[],r={render:o,staticRenderFns:i};t.a=r},730:function(e,t,a){"use strict";function o(e){a(2657)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1355),r=a(2663),s=a(1),n=o,l=s(i.a,r.a,!1,n,"data-v-1d362720",null);t.default=l.exports}});
//# sourceMappingURL=102.429627f073f759fb7666.js.map