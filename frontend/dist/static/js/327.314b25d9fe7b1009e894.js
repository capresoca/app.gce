webpackJsonp([327],{1225:function(e,t,a){"use strict";var i=a(7),o=a.n(i),n=a(58),r=a(12);t.a={name:"RegistroEntidadMedicamentos",props:["value"],components:{PostuladorV2:function(){return new Promise(function(e){e()}).then(a.bind(null,61))},Loading:n.default,dataTable:function(){return new Promise(function(e){e()}).then(a.bind(null,60))}},data:function(){return{showFormRegistro:!1,loading:!1,medicamento:null,makeMedicamento:{cum:null,id:null,rs_cum_id:null,rs_entidad_id:null,tarifa:null},selections:[],dataTable:{nameItemState:null,route:null,makeHeaders:[{text:"C贸digo",align:"left",sortable:!0,value:"cum.codigo"},{text:"Producto",align:"left",sortable:!0,value:"cum.producto"},{text:"Laboratorio",align:"left",sortable:!0,value:"cum.titular"},{text:"Descripci贸n",align:"left",sortable:!1,value:"cum.descripcion_comercial"},{text:"Tarifa",align:"right",sortable:!1,value:"tarifa",component:{component:{template:"<span className=\"white--text caption\">{{'$'}}{{value.tarifa | numberFormat(2)}}</span>",props:["value"]}}},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]}}},watch:{showFormRegistro:function(e){!e&&this.refreshMedicamento()}},created:function(){this.refreshMedicamento()},mounted:function(){this.dataTable.route="entidades/"+this.value.id+"/cums"},methods:{medicamentoEditar:function(e){var t=this;this.refreshMedicamento(),this.medicamento=JSON.parse(o()(e)),this.$vuetify.goTo("#flag-top",{selector:"#flag-top",duration:300,offset:-120,easing:"easeInOutQuad"}),this.showFormRegistro=!0,setTimeout(function(){t.$refs.postuladorMedicamento.focus()},400)},medicamentoBorrar:function(e){var t=this;this.loading=!0,this.showFormRegistro=!1,this.axios.post("entidades/remove-cum/"+e.id).then(function(e){t.$refs.tablaMedicamentos.reloadPage(),t.loading=!1}).catch(function(e){t.loading=!1,t.$store.commit(r.a,{expression:" al borrar el medicamento. ",error:e})})},resetOptions:function(e){return e.options=[],e.options.push({event:"editar",icon:"edit",tooltip:"Editar"}),e.options.push({event:"borrar",icon:"delete",tooltip:"Borrar"}),e},submitMedicamento:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.loading=!0,e.medicamento.rs_entidad_id=e.value.id,e.axios.post("entidades/add-cum",e.medicamento).then(function(t){e.$refs.tablaMedicamentos.reloadPage(),e.refreshMedicamento(),e.$refs.postuladorMedicamento.focus(),e.loading=!1}).catch(function(t){e.loading=!1,e.$store.commit(r.a,{expression:" al registrar el medicamento. ",error:t})}))})},refreshMedicamento:function(){this.medicamento=JSON.parse(o()(this.makeMedicamento)),this.$validator.reset()}}}},2220:function(e,t,a){"use strict";function i(e){a(2221)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1225),n=a(2223),r=a(1),s=i,l=r(o.a,n.a,!1,s,"data-v-56723e28",null);t.default=l.exports},2221:function(e,t,a){var i=a(2222);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(456)("1ddbb8b6",i,!0,{})},2222:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroEntidadMedicamentos.vue",sourceRoot:""}])},2223:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:"",id:"flag-top"}},[a("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",{domProps:{innerHTML:e._s("Registro de medicamentos")}}),e._v(" "),a("small",{staticClass:"mt-2 ml-1"},[e._v(" Vinculaci贸n a la entidad")]),e._v(" "),a("v-spacer"),e._v(" "),e.showFormRegistro?e._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",right:"",small:"",color:"accent"},on:{click:function(t){e.showFormRegistro=!0}},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v("Agregar medicamento")])],1)],1),e._v(" "),a("v-scroll-y-transition",[e.showFormRegistro?a("div",[a("v-card-text",[a("v-form",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md10:"",sm8:"",xs12:""}},[a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"postuladorMedicamento",attrs:{"no-data":"Busqueda por c贸digo, nombre o registro sanitario.","item-text":"producto","data-title":"producto","data-subtitle":"expediente",label:"Medicamento",entidad:"rs_cums","no-btn-create":"","no-btn-edit":"",name:"Medicamento",rules:"required","error-messages":e.errors.collect("Medicamento"),"min-characters-search":4,"slot-data":{template:'\n                    <v-list-tile>\n                    <v-list-tile-action>\n                      <v-chip\n                      color="indigo lighten-2"\n                      label\n                      small\n                      >\n                      {{ value.estado_cum }}\n                      </v-chip>\n                      </v-list-tile-action>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.expediente}} - {{ value.producto }} - {{value.titular}}</v-list-tile-title>\n                        <v-list-tile-sub-title class=caption>{{ value.descripcion_comercial }}</v-list-tile-sub-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                    ',props:["value"]}},on:{changeid:function(t){return e.medicamento.rs_cum_id=t}},model:{value:e.medicamento.cum,callback:function(t){e.$set(e.medicamento,"cum",t)},expression:"medicamento.cum"}})],1),e._v(" "),a("v-flex",{attrs:{md2:"",sm4:"",xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],attrs:{label:"Tarifa",name:"Tarifa",min:"0",type:"number","error-messages":e.errors.collect("Tarifa")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitMedicamento(t)}},model:{value:e.medicamento.tarifa,callback:function(t){e.$set(e.medicamento,"tarifa",e._n(t))},expression:"medicamento.tarifa"}})],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showFormRegistro=!1}}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.submitMedicamento(t)}}},[e._v("Registrar")])],1)],1):e._e()])],1)],1),e._v(" "),a("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[e.dataTable.route?a("data-table",{ref:"tablaMedicamentos",on:{resetOption:function(t){return e.resetOptions(t)},editar:function(t){return e.medicamentoEditar(t)},borrar:function(t){return e.medicamentoBorrar(t)}},model:{value:e.dataTable,callback:function(t){e.dataTable=t},expression:"dataTable"}}):e._e()],1)],1)},o=[],n={render:i,staticRenderFns:o};t.a=n}});
//# sourceMappingURL=327.314b25d9fe7b1009e894.js.map