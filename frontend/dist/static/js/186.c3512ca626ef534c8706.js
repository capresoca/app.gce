webpackJsonp([186],{459:function(e,a,t){"use strict";function s(e){t(880)}Object.defineProperty(a,"__esModule",{value:!0});var n=t(833),o=t(882),i=t(1),r=s,l=i(n.a,o.a,!1,r,"data-v-45fd8ddc",null);a.default=l.exports},833:function(e,a,t){"use strict";var s=t(7),n=t.n(s),o=t(12);a.a={name:"ClasesCuenta",data:function(){return{clasesCuenta:[],dialog:!1,claseCuenta:{},claseCuentaEdicion:"",tableLoading:!0,codigosUsados:"",search:"",pagination:{},tiposCuenta:["Presupuesto","Balance","Resultado","Orden"],natuCuenta:["Débito","Crédito"],headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},watch:{dialog:function(e){!1===e&&this.close()}},mounted:function(){var e={custom:{codigo:{not_in:"Este código ya esta registrado."}}};this.$validator.localize("es",e)},beforeMount:function(){this.formReset()},beforeCreate:function(){var e=this;this.axios.get("clascuentas").then(function(a){e.clasesCuenta=a.data.data,e.pagination.totalItems=e.clasesCuenta.length,e.tableLoading=!1}).catch(function(e){return console.log("Hay un error. "+e),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("clasesCuenta")},modalTitulo:function(){return this.claseCuenta.id?"Edición de la Clase Cuenta: "+this.claseCuenta.nombre:"Nueva Clase Cuenta"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.claseCuenta={id:"",codigo:"",nombre:"",tipo:"",naturaleza:"",patrimonio:0,estado:"Activo"},this.codigosUsados=this.getCodigosUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(e){if(""===e||""===this.claseCuenta.id){return this.clasesCuenta.map(function(e){return e.codigo})}},edit:function(e){this.dialog=!0,this.claseCuentaEdicion=e,this.claseCuenta=JSON.parse(n()(e)),this.codigosUsados=this.getCodigosUsados(e)},save:function(){var e=this;this.$validator.validateAll().then(function(a){if(a){(e.claseCuenta.id?e.axios.put("clascuentas/"+e.claseCuenta.id,e.claseCuenta):e.axios.post("clascuentas",e.claseCuenta)).then(function(a){e.claseCuenta.id?(e.$store.commit(o.b,{msg:"La clase cuenta se actualizó correctamente",color:"success"}),e.clasesCuenta.splice(e.clasesCuenta.findIndex(function(e){return e.id===a.data.data.id}),1,a.data.data)):(e.$store.commit(o.b,{msg:"La clase cuenta se creó correctamente",color:"success"}),e.clasesCuenta.splice(0,0,a.data.data)),e.close()}).catch(function(a){e.$store.commit(o.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})})}})}}}},880:function(e,a,t){var s=t(881);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(456)("0cde3fe2",s,!0,{})},881:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ClasesCuenta.vue",sourceRoot:""}])},882:function(e,a,t){"use strict";var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("v-dialog",{attrs:{"max-width":"500px","hide-overlay":!1},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("form",{ref:"form"},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3"},[t("span",{staticClass:"headline"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),t("v-divider"),e._v(" "),t("v-card-text",[t("v-container",{attrs:{"grid-list-md":""}},[t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5|not_in:"+e.codigosUsados,expression:"'required|max:5|not_in:' + codigosUsados"}],key:"codigo",attrs:{disabled:""!==e.claseCuenta.id,label:"Código",name:"codigo",required:"","error-messages":e.errors.collect("codigo")},model:{value:e.claseCuenta.codigo,callback:function(a){e.$set(e.claseCuenta,"codigo",a)},expression:"claseCuenta.codigo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.claseCuenta.nombre,callback:function(a){e.$set(e.claseCuenta,"nombre",a)},expression:"claseCuenta.nombre"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposCuenta,label:"Tipo",name:"tipo","error-messages":e.errors.collect("tipo"),required:""},model:{value:e.claseCuenta.tipo,callback:function(a){e.$set(e.claseCuenta,"tipo",a)},expression:"claseCuenta.tipo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.natuCuenta,label:"Naturaleza",name:"naturaleza","error-messages":e.errors.collect("naturaleza"),required:""},model:{value:e.claseCuenta.naturaleza,callback:function(a){e.$set(e.claseCuenta,"naturaleza",a)},expression:"claseCuenta.naturaleza"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-switch",{attrs:{color:"success",label:"Patrimonio","true-value":1,"false-value":0},model:{value:e.claseCuenta.patrimonio,callback:function(a){e.$set(e.claseCuenta,"patrimonio",a)},expression:"claseCuenta.patrimonio"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-switch",{attrs:{color:"success",label:e.claseCuenta.estado,"true-value":"Activo","false-value":"Inactivo"},model:{value:e.claseCuenta.estado,callback:function(a){e.$set(e.claseCuenta,"estado",a)},expression:"claseCuenta.estado"}})],1)],1)],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:""},on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),t("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(a){return a.preventDefault(),e.save()}}},[e._v("Guardar")])],1)],1)],1)]),e._v(" "),t("v-card",[t("v-card-title",[t("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}}),e._v(" "),t("v-spacer"),e._v(" "),e.infoComponent&&e.clasesCuenta.length<9&&e.infoComponent.permisos.agregar?t("v-btn",{attrs:{fab:"",small:"",color:"accent"},nativeOn:{click:function(a){e.dialog=!0}}},[t("v-icon",[e._v("add")])],1):e._e()],1),e._v(" "),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.clasesCuenta,loading:e.tableLoading,pagination:e.pagination,"hide-actions":"",search:e.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(a){e.pagination=a}},scopedSlots:e._u([{key:"items",fn:function(a){return[t("td",[e._v(e._s(a.item.codigo))]),e._v(" "),t("td",[e._v(e._s(a.item.nombre))]),e._v(" "),t("td",[e._v(e._s(a.item.estado))]),e._v(" "),t("td",{staticClass:"text-xs-center"},[t("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.edit(a.item)}}},[t("v-icon",{attrs:{small:"",color:"accent"}},[e._v("edit")])],1)],1)]}},{key:"pageText",fn:function(a){return[e._v("\n        "+e._s(a.pageStart)+" - "+e._s(a.pageStop)+" de "+e._s(a.itemsLength)+"\n      ")]}}])},[e._v(" "),t("template",{slot:"no-data"},[e.tableLoading?t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),t("v-icon",[e._v("sentiment_satisfied_alt")])],1):t("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),t("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1),e._v(" "),e._v(" "),t("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        No se encontraron resultados de "'+e._s(e.search)+'"\n      ')])],2)],1),e._v(" "),e.clasesCuenta.length>5?t("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[t("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(a){e.$set(e.pagination,"page",a)},expression:"pagination.page"}})],1):e._e()],1)},n=[],o={render:s,staticRenderFns:n};a.a=o}});
//# sourceMappingURL=186.c3512ca626ef534c8706.js.map