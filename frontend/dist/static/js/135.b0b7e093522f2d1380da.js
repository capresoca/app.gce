webpackJsonp([135],{1033:function(a,e,o){"use strict";var t=o(13),s=o.n(t),n=o(14),i=o.n(n),r=o(7),c=o.n(r),l=o(12),d=o(58);e.a={name:"CajasCompensacionFamiliar",components:{ToolbarList:function(){return new Promise(function(a){a()}).then(o.bind(null,247))},Loading:d.default},data:function(){return{cajasCompensacion:[],cajaCompensacion:{},tiposEstadoCaja:["Activo","Inactivo"],search:"",dialog:!1,tableLoading:!1,pagination:{},codigosUsados:"",nombresUsados:"",headers:[{text:"Código Habilitación",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset()},mounted:function(){var a={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",a)},beforeCreate:function(){var a=this;this.tableLoading=!0,this.axios.get("as_ccfs").then(function(e){a.cajasCompensacion=e.data.data,a.pagination.totalItems=a.cajasCompensacion.length,a.tableLoading=!1,a.codigosUsados=a.getCodigosUsados(),a.nombresUsados=a.getNombresUsados()}).catch(function(a){return console.log("Hay un error. "+a),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("cajasCompensacionFamiliar")},modalTitulo:function(){return this.cajaCompensacion.id?"Edición del item: "+this.cajaCompensacion.nombre:"Nuevo item"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.cajaCompensacion={id:"",cod_habilitacion:null,nombre:null,estado:null},this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},edit:function(a){this.dialog=!0,this.cajaCompensacion=JSON.parse(c()(a)),this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(){var a=this;return this.cajasCompensacion.map(function(e){if(null==a.cajaCompensacion.codigo||a.cajaCompensacion.codigo!==e.codigo)return e.codigo})},getNombresUsados:function(){var a=this;return this.cajasCompensacion.map(function(e){if(null==a.cajaCompensacion.nombre||a.cajaCompensacion.nombre!==e.nombre)return e.nombre})},validador:function(a){return this.$validator.validateAll(a).then(function(a){return a})},save:function(){var a=this;return i()(s.a.mark(function e(){var o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validador("formCcfs");case 2:if(!e.sent){e.next=7;break}o=a.cajaCompensacion.id?a.axios.put("as_ccfs/"+a.cajaCompensacion.id,a.cajaCompensacion):a.axios.post("as_ccfs",a.cajaCompensacion),o.then(function(e){a.cajaCompensacion.id?(a.$store.commit(l.b,{msg:"El item se actualizó correctamente",color:"success"}),a.cajasCompensacion.splice(a.cajasCompensacion.findIndex(function(a){return a.id===e.data.data.id}),1,e.data.data)):(a.$store.commit(l.b,{msg:"El item se creó correctamente",color:"success"}),a.cajasCompensacion.splice(0,0,e.data.data)),a.dialog=!1,a.close()}).catch(function(e){a.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:a.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return e.stop()}},e,a)}))()}}}},1700:function(a,e,o){var t=o(1701);"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);o(456)("59356d2c",t,!0,{})},1701:function(a,e,o){e=a.exports=o(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CajasCompensacionFamiliar.vue",sourceRoot:""}])},1702:function(a,e,o){"use strict";var t=function(){var a=this,e=a.$createElement,o=a._self._c||e;return o("div",[o("v-dialog",{attrs:{width:"500px"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formCcfs"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[a._v(a._s(a.modalTitulo))])]),a._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|not_in:"+a.codigosUsados,expression:"'required|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":a.errors.collect("codigo")},model:{value:a.cajaCompensacion.cod_habilitacion,callback:function(e){a.$set(a.cajaCompensacion,"cod_habilitacion",e)},expression:"cajaCompensacion.cod_habilitacion"}})],1),a._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+a.nombresUsados,expression:"'required|max:150|not_in:'  + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":a.errors.collect("nombre")},model:{value:a.cajaCompensacion.nombre,callback:function(e){a.$set(a.cajaCompensacion,"nombre",e)},expression:"cajaCompensacion.nombre"}})],1),a._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:a.tiposEstadoCaja,name:"estado de caja",label:"Estado","error-messages":a.errors.collect("estado de caja"),required:""},model:{value:a.cajaCompensacion.estado,callback:function(e){a.$set(a.cajaCompensacion,"estado",e)},expression:"cajaCompensacion.estado"}})],1)],1)],1),a._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),a._v(" "),o("v-btn",{on:{click:a.close}},[a._v("Cancelar")]),a._v(" "),o("v-btn",{attrs:{color:"primary",disabled:a.errors.any()},on:{click:a.save}},[a._v("Guardar")])],1)],1)],1)],1),a._v(" "),o("v-card",[o("toolbar-list",{attrs:{info:a.infoComponent,title:"Cajas de compensación familiar",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Item",btnplustruncate:""},on:{click:function(e){a.dialog=!0}}}),a._v(" "),o("loading",{model:{value:a.tableLoading,callback:function(e){a.tableLoading=e},expression:"tableLoading"}}),a._v(" "),o("v-card-title",[o("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:a.search,callback:function(e){a.search=e},expression:"search"}})],1),a._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.cajasCompensacion,loading:a.tableLoading,pagination:a.pagination,"hide-actions":"",search:a.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[10,25,50,{text:"Todos",value:-1}]},on:{"update:pagination":function(e){a.pagination=e}},scopedSlots:a._u([{key:"items",fn:function(e){return[o("td",[a._v(a._s(e.item.cod_habilitacion))]),a._v(" "),o("td",[a._v(a._s(e.item.nombre))]),a._v(" "),o("td",[a._v(a._s(e.item.estado))]),a._v(" "),o("td",{staticClass:"text-xs-center"},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(o){return a.edit(e.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[a._v("edit")])],1),a._v(" "),o("span",[a._v("Editar")])],1)],1)]}},{key:"pageText",fn:function(e){return[a._v("\n        "+a._s(e.pageStart)+" - "+a._s(e.pageStop)+" de "+a._s(e.itemsLength)+"\n      ")]}}])},[a._v(" "),o("template",{slot:"no-data"},[a.tableLoading?o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[a._v("\n          Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[a._v("sentiment_very_dissatisfied")])],1):o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[a._v("\n          Estamos cargando los registros. "),o("v-icon",[a._v("sentiment_satisfied_alt")])],1)],1),a._v(" "),a._v(" "),o("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[a._v('\n        No se encontraron resultados de "'+a._s(a.search)+'"\n      ')])],2),a._v(" "),o("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[o("v-pagination",{attrs:{length:a.pages},model:{value:a.pagination.page,callback:function(e){a.$set(a.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},s=[],n={render:t,staticRenderFns:s};e.a=n},528:function(a,e,o){"use strict";function t(a){o(1700)}Object.defineProperty(e,"__esModule",{value:!0});var s=o(1033),n=o(1702),i=o(1),r=t,c=i(s.a,n.a,!1,r,"data-v-6f9538d5",null);e.default=c.exports}});
//# sourceMappingURL=135.b0b7e093522f2d1380da.js.map