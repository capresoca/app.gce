webpackJsonp([14],{1152:function(e,t,a){"use strict";var o=a(13),n=a.n(o),i=a(14),r=a.n(i),s=a(7),l=a.n(s),c=a(58),d=a(12);t.a={name:"Almacen",components:{ToolbarList:function(){return new Promise(function(e){e()}).then(a.bind(null,247))},Loading:c.default},data:function(){return{almacenes:[],almacen:{},dialog:!1,loading:!1,tableLoading:!1,loadingSubmit:!1,headers:[{text:"Codigo",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Opciones",align:"left",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]}},mounted:function(){this.getData(),this.formReset()},computed:{modalTitulo:function(){return this.almacen.id?"Edición":"Nuevo almacen"},infoComponent:function(){return this.$store.getters.getInfoComponent("almaceninventarios")}},methods:{getData:function(){var e=this;this.loading=!0,this.tableLoading=!0,this.axios.get("in_almacen").then(function(t){""!==t.data&&(e.almacenes=t.data.data,e.loading=!1,e.tableLoading=!1)}).catch(function(t){e.loading=!1,e.tableLoading=!1,e.$store.commit(d.b,{msg:"Error al traer los datos."+t,color:"danger"}),console.log("error",t)})},formReset:function(){this.almacen={id:""}},edit:function(e){this.dialog=!0,this.almacen=JSON.parse(l()(e))},close:function(){this.dialog=!1,this.loadingSubmit=!1,this.formReset()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},save:function(){var e=this;return r()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("form");case 2:if(!t.sent){t.next=8;break}e.loadingSubmit=!0,a=e.almacen.id?e.axios.put("in_almacen/"+e.almacen.id,e.almacen):e.axios.post("in_almacen",e.almacen),a.then(function(t){e.almacen.id?(e.$store.commit(d.b,{msg:"La contestación se actualizó correctamente",color:"success"}),e.almacenes.splice(e.almacenes.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.$store.commit(d.b,{msg:"La contestación se creó correctamente",color:"success"}),e.almacenes.splice(0,0,t.data.data)),e.close()}).catch(function(t){e.$store.commit(d.a,{msg:"Hay un error al guardar el registro. "+t,color:"danger"}),e.close()}),t.next=9;break;case 8:e.$store.commit(d.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return t.stop()}},t,e)}))()}}}},2066:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"720px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"form"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"codigo",attrs:{label:"Codigo",name:"Codigo","error-messages":e.errors.collect("codigo"),required:""},model:{value:e.almacen.codigo,callback:function(t){e.$set(e.almacen,"codigo",t)},expression:"almacen.codigo"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","error-messages":e.errors.collect("nombre"),required:""},model:{value:e.almacen.nombre,callback:function(t){e.$set(e.almacen,"nombre",t)},expression:"almacen.nombre"}})],1)],1)],1),e._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit,disabled:e.errors.any()},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),a("v-card",[a("toolbar-list",{attrs:{info:e.infoComponent,title:"Almacen de inventarios",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear almacen",btnplustruncate:""},on:{click:function(t){e.dialog=!0}}}),e._v(" "),a("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.almacenes,loading:e.tableLoading,"rows-per-page-text":"Registros por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.codigo))]),e._v(" "),a("td",[e._v(e._s(t.item.nombre))]),e._v(" "),a("td",[a("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:t.item.show,callback:function(a){e.$set(t.item,"show",a)},expression:"props.item.show"}},[a("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:t.item.show,callback:function(a){e.$set(t.item,"show",a)},expression:"props.item.show"}},[a("v-icon",[e._v("chevron_left")]),e._v(" "),a("v-icon",[e._v("close")])],1),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return e.edit(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),a("span",[e._v("Editar")])],1)],1)],1)]}}])},[e._v(" "),a("template",{slot:"no-data"},[e.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),a("v-icon",[e._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},n=[],i={render:o,staticRenderFns:n};t.a=i},473:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(1152),n=a(2066),i=a(1),r=i(o.a,n.a,!1,null,null,null);t.default=r.exports}});
//# sourceMappingURL=14.ff899f22abca3e3c7342.js.map