webpackJsonp([48,362],{1026:function(t,e,a){"use strict";var s=a(255),o=a.n(s),r=a(7),i=a.n(r),n=a(835),l=a(12),c=a(265);window.io=a(267),e.a={props:["parametros"],name:"RespuestasBDUA",components:{FileInputArchive:n.default,ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))}},data:function(){return{errorArchivo:"",loadingArchivo:!1,respuestaBDUA:{},procesoRespuesta:{as_bduaproceso_id:null,files:[]},dialog:!1,offsetTop:0,socketMessages:[],messages:null,containerPx:"180px",detallesProceso:[],buffer:10,bufferValue:100}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("respuestasBDUA")}},watch:{"respuestaBDUA.as_bduaproceso_id":function(t){var e=this;if(t){new c.a({broadcaster:"socket.io",host:"http://"+window.location.hostname+":6001",auth:{headers:{Authorization:"Bearer "+localStorage.getItem("token")}},key:"0330753d0e16efd42bf6b7d0b88488a5"}).private("bdua-proceso."+t).listen("BduaProcesosEvent",function(t){e.procesoType(t.type,t),e.scrollToBottom()})}}},created:function(){null!==this.parametros.entidad&&this.getProceso(this.parametros.entidad.id)},beforeMount:function(){this.reset()},mounted:function(){this.messages=document.getElementById("scroll-target-1")},methods:{procesoType:function(t,e){switch(t){case"monitor":this.socketMessages.push(e.message);break;case"avance":var a=this.detallesProceso.find(function(t){return t.id===e.respuesta.as_bduaarchivo_id});if(a.respuestas.length){var s=a.respuestas.findIndex(function(t){return t.id===e.respuesta.id});a.respuestas.splice(s>-1?s:0,s>-1?1:0,e.respuesta)}else a.respuestas.push(e.respuesta);break;default:this.$store.commit(l.b,{msg:"No existe: "+t+".",color:"danger"})}},scrollToBottom:function(){this.messages.scrollTop=this.messages.scrollHeight},onScroll:function(t){this.offsetTop=t.target.scrollTop},reset:function(){this.$validator.reset(),this.respuestaBDUA=JSON.parse(i()(this.procesoRespuesta))},save:function(){var t=this;this.dialog=!0;var e=new FormData,a=!0,s=!1,r=void 0;try{for(var i,n=o()(this.respuestaBDUA.files);!(a=(i=n.next()).done);a=!0){var c=i.value;e.append("files[]",c)}}catch(t){s=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw r}}e.append("as_bduaproceso_id",this.respuestaBDUA.as_bduaproceso_id),this.axios.post("bduarespuestas",e).then(function(e){t.$store.commit(l.b,{msg:t.respuestaBDUA.files.length>1?"Los archivos se han enviado.":"El archivo se ha enviado.",color:"success"}),t.reset(),t.dialog=!1}).catch(function(e){t.dialog=!1,t.$store.commit(l.b,{msg:"Hay un error al enviar."+e.response,color:"danger"})})},getProceso:function(t){var e=this,a=this.$loading.show({container:this.$refs.cargar});this.axios.get("bduaprocesos/"+t).then(function(t){t.data.data&&(e.respuestaBDUA.as_bduaproceso_id=t.data.data.id,e.detallesProceso=t.data.data.archivos),a.hide()}).catch(function(t){a.hide(),e.$store.commit(l.b,{msg:"Hay un error al traer el proceso BDUA "+t.response,color:"danger"})})},irADetalleRespuesta:function(t){this.$store.commit("NAV_ADD_ITEM",{ruta:"detalleRespuestas",titulo:"Detalle Respuestas",parametros:{entidad:t,tabOrigin:this.$store.state.nav.currentItem.split("tab-")[1]}})}}}},1678:function(t,e,a){var s=a(1679);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(456)("15dd57d2",s,!0,{})},1679:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Inconsolata);",""]),e.push([t.i,".captionMsg[data-v-1db1fee5]{font-family:Inconsolata,monospace;font-size:11.5px!important;font-weight:lighter;color:#3af933}.back_console[data-v-1db1fee5]{background:-webkit-gradient(linear,left top,left bottom,from(#171717),to(#242424))!important;background:linear-gradient(#171717,#242424)!important;-webkit-background-clip:text;color:transparent}.console-success[data-v-1db1fee5]{color:#3af933!important}.newSub[data-v-1db1fee5]{height:14px;padding:0!important;-webkit-box-align:unset;-ms-flex-align:unset;align-items:unset;color:rgba(0,0,0,.87)}@media (min-width:960px){.pa-xl-bottom[data-v-1db1fee5]{padding-bottom:2.555%!important}.pa-xl-top[data-v-1db1fee5]{padding-top:2.5555%!important}}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/misional/aseguramiento/bdua/respuestas/RespuestasBDUA.vue"],names:[],mappings:"AAEA,6BACE,kCAAsC,AACtC,2BAA6B,AAC7B,oBAAqB,AACrB,aAAwB,CAEzB,AACD,+BAEE,6FAAmG,AACnG,sDAAyD,AACzD,6BAA8B,AAC9B,iBAAmB,CACpB,AACD,kCACE,uBAAmC,CACpC,AACD,yBACE,YAAa,AACb,oBAAsB,AACtB,wBAAyB,AACrB,qBAAsB,AAClB,kBAAmB,AAC3B,qBAAwB,CACzB,AACD,yBACA,+BACI,+BAAkC,CACrC,AACD,4BACI,6BAAgC,CACnC,CACA",file:"RespuestasBDUA.vue",sourcesContent:["\n@import url('https://fonts.googleapis.com/css?family=Inconsolata');\n.captionMsg[data-v-1db1fee5] {\n  font-family: 'Inconsolata', monospace;\n  font-size: 11.5px !important;\n  font-weight: lighter;\n  color: rgb(58, 249, 51);\n  /*#87f9b0*/\n}\n.back_console[data-v-1db1fee5] {\n  /*background-color: #081918 !important;*/\n  background: -webkit-gradient(linear, left top, left bottom, from(#171717), to(#242424)) !important;\n  background: linear-gradient(#171717, #242424) !important;\n  -webkit-background-clip: text;\n  color: transparent;\n}\n.console-success[data-v-1db1fee5] {\n  color: rgb(58, 249, 51) !important;\n}\n.newSub[data-v-1db1fee5]{\n  height: 14px;\n  padding: 0 !important;\n  -webkit-box-align: unset;\n      -ms-flex-align: unset;\n          align-items: unset;\n  color: rgba(0,0,0,0.87);\n}\n@media (min-width: 960px){\n.pa-xl-bottom[data-v-1db1fee5] {\n    padding-bottom: 2.555% !important;\n}\n.pa-xl-top[data-v-1db1fee5] {\n    padding-top: 2.5555% !important;\n}\n}\n"],sourceRoot:""}])},1680:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"grey lighten-3"}},[a("v-card-text",[a("span",{staticClass:"body-1 font-weight-regular text--black",domProps:{textContent:t._s("Enviando respuestas")}}),t._v(" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"accent"}})],1)],1)],1),t._v(" "),a("v-card",[a("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[a("v-toolbar-title",[t._v("   Respuestas BDUA ")]),t._v("  \n      "),a("v-spacer"),t._v(" "),a("h2",{staticClass:"title",domProps:{textContent:t._s("Fecha Proceso: ")}}),t._v(" "),a("div",[a("v-chip",{attrs:{label:"",color:"transparent","text-color":"red",dark:"",absolute:"",right:"",top:""}},[a("span",{staticClass:"title",domProps:{textContent:t._s(t.parametros.entidad.fecha)}})])],1)],1),t._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pb-3",attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[a("file-input-archive",{attrs:{title:"Cargar Respuestas","mime-types":"text/plain,application/x-zip-compressed",multiple:!0,container_px:t.containerPx},model:{value:t.respuestaBDUA.files,callback:function(e){t.$set(t.respuestaBDUA,"files",e)},expression:"respuestaBDUA.files"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md5:"","offset-md1":"",xl5:""}},[a("v-card",{staticClass:"elevation-1",attrs:{height:"322.49px"}},[a("toolbar-list",{staticClass:"elevation-0",attrs:{title:"Monitor del Proceso"}}),t._v(" "),a("v-container",{staticClass:"scroll-y back_console pt-2 pl-2 pb-3",staticStyle:{"max-height":"308px !important"},attrs:{id:"scroll-target-1"}},[a("v-content",{directives:[{name:"scroll",rawName:"v-scroll:#scroll-target-1",value:t.onScroll,expression:"onScroll",arg:"#scroll-target-1"}],staticClass:"pt-0",staticStyle:{height:"250px !important"},attrs:{column:"","align-center":"","justify-center":""}},[a("p",{staticClass:"captionMsg mb-1",domProps:{textContent:t._s("> Monitor 1.4")}}),t._v(" "),t._l(t.socketMessages,function(e){return a("p",{staticClass:"msg captionMsg mb-1",class:e.class,domProps:{textContent:t._s("> "+e.text)}})})],2)],1)],1)],1),t._v(" "),t.respuestaBDUA.files.length?a("v-flex",{staticClass:"text-xs-right pt-3",attrs:{slot:"activator",xs12:"",transition:"fade-transition"},slot:"activator"},[a("v-btn",{staticClass:"mr-0",attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Generar")])],1):t._e(),t._v(" "),a("v-flex",{staticClass:"mt-3",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[a("v-card",[a("toolbar-list",{staticClass:"elevation-0",attrs:{title:"Detalle del Proceso"}}),t._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[t._l(t.detallesProceso,function(e,s){return e.total_tramites?a("v-flex",{key:"detallesProceso"+s,staticClass:"pb-3 mb-1",attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-left mb-3",attrs:{xs12:"","align-center":"","fill-height":""}},[a("v-avatar",{staticClass:"accent white--text",attrs:{tile:!1,size:"38px"}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"elevation-0 ma-0",attrs:{slot:"activator",fab:"",small:"",color:"transparent",dark:""},slot:"activator"},[a("span",{staticClass:"body-1 font-weight-bold",domProps:{textContent:t._s(e.tipo.iniciales)}})]),t._v(" "),a("span",{domProps:{textContent:t._s(e.nombre)}})],1)],1),t._v("\n                           \n                          "),a("span",{staticClass:"body-1 font-weight-medium",domProps:{textContent:t._s(e.total_tramites+" Registros")}})],1),t._v(" "),a("v-flex",{staticClass:"grey lighten-4",attrs:{xs12:""}},[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":"","fill-height":""}},t._l(e.respuestas,function(e,s){return a("v-flex",{key:"2"+s,attrs:{xs12:"",sm10:"","offset-sm1":"","offset-md0":"",md6:""},on:{click:function(a){return t.irADetalleRespuesta(e)}}},[a("v-card",{staticClass:"white",staticStyle:{cursor:"pointer"},attrs:{height:"80"}},[a("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:"","fill-height":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[a("v-list-tile-content",[a("v-subheader",{staticClass:"newSub"},[a("span",{staticClass:"body-1 font-weight-medium dark-gray",domProps:{textContent:t._s(e.nombre_archivo)}})]),t._v(" "),a("v-list-tile-title",[a("v-progress-linear",{staticClass:"grey lighten-3",attrs:{width:"6","background-opacity":"0.5",value:100*e.aplicadas/e.total_registros,"buffer-value":100*e.avance/e.total_registros,buffer:""}})],1),t._v(" "),a("v-list-tile-sub-title",{staticClass:"caption text-xs-right",domProps:{textContent:t._s("Procesadas: "+e.avance+", Aplicadas: "+e.aplicadas+", Registros: "+e.total_registros+".")}})],1)],1)],1)],1)],1)],1)],1)}),1)],1)],1)],1)],1):t._e()})],2)],1)],1)],1)],1)],1)],1)],1)},o=[],r={render:s,staticRenderFns:o};e.a=r},522:function(t,e,a){"use strict";function s(t){a(1678)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(1026),r=a(1680),i=a(1),n=s,l=i(o.a,r.a,!1,n,"data-v-1db1fee5",null);e.default=l.exports},776:function(t,e,a){"use strict";e.a={name:"FileInputArchive",props:["value","label","mimeTypes","multiple","title","container_px","nameLength"],components:{ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))}},data:function(){return{valor:0,focus:!1,loadingArchivo:!1,activos:null,errorArchivo:null,deleteFile:!0,typeError:null,files:[],types:[],offsetTop:0,alertFile:!1,mediaTypes:[{icon:"picture_as_pdf",mime:"application/pdf"},{icon:"insert_chart_outlined",mime:"text/csv"},{icon:"photo",mime:"image/png"},{icon:"photo",mime:"image/jpeg"},{icon:"insert_drive_file",mime:"text/plain"},{icon:"far fa-file-archive",mime:"application/x-zip-compressed"}]}},watch:{value:function(t){this.files=t}},mounted:function(){this.types=this.mimeTypes.split(",")},methods:{onScroll:function(t){this.offsetTop=t.target.scrollTop},showFilePicker:function(){this.$refs.file.click(),this.alertFile=!1},onChange:function(t){var e=this,a=t.target.files;if(a.length){for(var s=[],o=0;o<a.length;o++)!function(t){var o=a[t];void 0!==o?e.types.find(function(t){return t===o.type})?o.name.length<=50?s.push(o):(e.alertFile=!0,e.typeError="error",e.errorArchivo="El nombre del archivo que desea cargar es muy largo. Longitud permitida => 50 caracteres."):(e.alertFile=!0,e.typeError="warning",e.types.find(function(t){return t!==o.type})?e.errorArchivo="Algunos archivos que intento cargar no cumplen con el formato.":e.errorArchivo="No se admite el formato del archivo."):(e.alertFile=!0,e.typeError="error",e.errorArchivo="El archivo no es un archivo válido.")}(o);this.$emit("input",s)}else this.alertFile=!0,this.typeError="error",this.errorArchivo="El campo para cargar archivos esta vació."},clearFile:function(t){this.alertFile=!1,"all"===t?this.files=[]:this.files.splice(t,1),this.$emit("input",this.files),document.getElementById("uploadFile").value=""},previewFile:function(t){}}}},835:function(t,e,a){"use strict";function s(t){a(836)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(776),r=a(838),i=a(1),n=s,l=i(o.a,r.a,!1,n,"data-v-068bf8e3",null);e.default=l.exports},836:function(t,e,a){var s=a(837);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(456)("12cf883a",s,!0,{})},837:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,".warning[data-v-068bf8e3]{background-color:#ff8000!important}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/general/FileInput.vue"],names:[],mappings:"AACA,0BACC,kCAAgD,CAChD",file:"FileInput.vue",sourcesContent:["\n.warning[data-v-068bf8e3] {\n background-color: hsl(30, 100%, 50%) !important;\n}\n"],sourceRoot:""}])},838:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"elevation-1 grey lighten-4"},[a("v-card-title",{staticClass:"elevation-1 grey lighten-4 pa-0"},[a("toolbar-list",{attrs:{title:t.title}})],1),t._v(" "),a("v-container",{staticClass:"pa-3",attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("input",{ref:"file",attrs:{type:"file",id:"uploadFile",accept:t.mimeTypes,hidden:"",multiple:t.multiple},on:{change:t.onChange}}),t._v(" "),a("v-flex",{staticClass:"grey lighten-4 elevation-0 pb-2",attrs:{xs12:""}},[a("v-card",{staticClass:"elevation-0 scroll-y",staticStyle:{"max-height":"250px","overflow-x":"hidden"},attrs:{id:"scroll-target",color:"white lighten-2"}},[t.files.length?a("v-container",{directives:[{name:"scroll",rawName:"v-scroll:#scroll-target",value:t.onScroll,expression:"onScroll",arg:"#scroll-target"}],staticClass:"pa-0 pt-1 ma-1",attrs:{id:"content-archive",row:"",wrap:"",height:t.container_px,"align-content-space-around":""}},t._l(t.files,function(e,s){return a("v-chip",{key:""+s,staticClass:"theme--light",attrs:{color:"grey lighten-2","text-color":"black",close:""},on:{input:function(e){return t.clearFile(s)}}},[a("v-avatar",{attrs:{color:"accent"}},[a("v-icon",{attrs:{color:"white",small:""},domProps:{textContent:t._s(t.mediaTypes.find(function(t){return t.mime===e.type}).icon)}})],1),t._v("\n              "+t._s(e.name)+"\n            ")],1)}),1):a("v-card-title",{staticClass:"pt-3"},[a("span",{staticClass:"title font-weight-medium",domProps:{textContent:t._s(!1===t.multiple?"Selecciona un archivo":"Seleccionar archivos")}})])],1),t._v(" "),a("v-divider"),t._v(" "),a("v-alert",{attrs:{value:t.alertFile,type:t.typeError,transition:"scale-transition"}},[t._v("\n          "+t._s(t.errorArchivo)+"\n        ")]),t._v(" "),a("v-flex",{staticClass:"text-xs-right pa-1"},[t.files.length?a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{staticClass:"mr-0",attrs:{slot:"activator",color:"accent",small:"",fab:"",dark:""},on:{click:function(e){return t.clearFile("all")}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Eliminar archivos")])],1):t._e(),t._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{staticClass:"mr-0",attrs:{slot:"activator",color:"accent",small:"",fab:"",dark:""},on:{click:t.showFilePicker},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("attach_file")])],1),t._v(" "),a("span",[t._v("Cargar archivos")])],1)],1)],1)],1)],1)],1)},o=[],r={render:s,staticRenderFns:o};e.a=r}});
//# sourceMappingURL=48.7475c535a672abf25618.js.map