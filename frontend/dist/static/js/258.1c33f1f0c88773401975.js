webpackJsonp([258],{1527:function(e,o,t){"use strict";var r=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n        Repetir Comprobantes de diario\n      ")]),e._v(" "),t("v-card-text",[t("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t("v-form",{attrs:{"data-vv-scope":"formRepetirComprobanteDiario"}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md10:"",lg10:""}},[t("postulador",{ref:"postulaComprobanteOrigen",attrs:{nodata:"Busqueda por consecutivo",required:"",itemtext:"consecutivo",datatitle:"consecutivo",filter:"consecutivo",label:"Comprobante de origen",scope:"formRepetirComprobanteDiario",entidad:"comdiarios",preicon:"assignment_turned_in",value:e.comprobante.comprobanteorigen,clearable:""},on:{change:function(o){return e.comprobante.nf_comdiario_origen_id=o},objectReturn:function(o){return e.comprobante.comprobanteorigen=o}}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md2:"",lg2:""}},[t("v-text-field",{attrs:{label:"Comprobante destino",type:"number",readonly:!0},model:{value:e.comprobante.comdiariodestino,callback:function(o){e.$set(e.comprobante,"comdiariodestino",o)},expression:"comprobante.comdiariodestino"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("v-flex",{staticClass:"pa-1",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("v-dialog",{ref:"fechaComprobanteDestino",attrs:{"return-value":e.comprobante.fecha,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(o){return e.$set(e.comprobante,"fecha",o)},"update:return-value":function(o){return e.$set(e.comprobante,"fecha",o)}},model:{value:e.fechaComprobanteDestino,callback:function(o){e.fechaComprobanteDestino=o},expression:"fechaComprobanteDestino"}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY-MM-DD",expression:"'required|date_format:YYYY-MM-DD'"}],key:"fecha actual",attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",name:"fecha actual","error-messages":e.errors.collect("fecha actual"),readonly:""},slot:"activator",model:{value:e.comprobante.fecha,callback:function(o){e.$set(e.comprobante,"fecha",o)},expression:"comprobante.fecha"}}),e._v(" "),t("v-date-picker",{attrs:{min:e.fechaActual,locale:"es",scrollable:""},on:{change:function(){var o=e.$validator.errors.items.findIndex(function(e){return"fecha actual"===e.field});e.$validator.errors.items.splice(-1!==o?o:0,-1!==o?1:0)}},model:{value:e.comprobante.fecha,callback:function(o){e.$set(e.comprobante,"fecha",o)},expression:"comprobante.fecha"}},[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(o){e.fechaComprobanteDestino=!1}}},[e._v("Cancelar")]),e._v(" "),t("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(o){return e.$refs.fechaComprobanteDestino.save(e.comprobante.fecha)}}},[e._v("OK")])],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"primary",flat:"",disabled:e.errors.any()},on:{click:e.submit}},[e._v("\n          Guardar\n        ")]),e._v(" "),t("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.formReset}},[e._v("\n          Cerrar\n        ")])],1)],1)],1)},a=[],n={render:r,staticRenderFns:a};o.a=n},492:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(974),a=t(1527),n=t(1),c=n(r.a,a.a,!1,null,null,null);o.default=c.exports},974:function(e,o,t){"use strict";var r=t(13),a=t.n(r),n=t(14),c=t.n(n),i=t(12),s=t(0),l=t.n(s);o.a={name:"RepetirComprobanteDiario",data:function(){return{fechaActual:"2018-01-01",fechaComprobanteDestino:!1,mensaje:"asda",comprobante:{fecha:null,comprobanteorigen:null}}},components:{Postulador:function(){return t.e(287).then(t.bind(null,747))}},methods:{submit:function(){var e=this;return c()(a.a.mark(function o(){return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.validador("formRepetirComprobanteDiario");case 2:if(!o.sent){o.next=6;break}e.axios.post("repetir-comprobante-diario",e.comprobante).then(function(o){console.log(o),e.$store.commit(i.b,{msg:"El comprobante de diario se creo correctamente",color:"success"}),e.formReset()}).catch(function(o){console.log(o),e.$store.commit(i.b,{msg:"Hay un error al guardar el registro. "+o.response.data.errors,color:"danger"})}),o.next=7;break;case 6:e.$store.commit(i.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return o.stop()}},o,e)}))()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},formReset:function(){var e=this;this.comprobante={fecha:null,comprobanteorigen:null,comdiariodestino:""},this.axios.get("consecutivo-comdiario").then(function(o){console.log(o),e.comprobante.comdiariodestino=o.data.consecutivo}).catch(function(o){e.$store.commit(i.b,{msg:"Error al obtener el consecutivo "+o.response,color:"danger"})})}},mounted:function(){var e=this;this.axios.get("consecutivo-comdiario").then(function(o){e.comprobante.comdiariodestino=o.data.consecutivo}).catch(function(o){e.$store.commit(i.b,{msg:"Error al obtener el consecutivo "+o.response,color:"danger"})}),this.fechaActual=l()().format("YYYY-MM")+"-01"}}}});
//# sourceMappingURL=258.1c33f1f0c88773401975.js.map