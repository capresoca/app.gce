webpackJsonp([218],{1252:function(e,t,i){"use strict";var a=i(13),r=i.n(a),o=i(14),n=i.n(o),c=i(249),s=i.n(c),l=i(12),d=i(40),u=i(248),m=i(59),v=i(58);t.a={name:"RegistroConcurrencias",props:["parametros"],components:{PostuladorV2:function(){return new Promise(function(e){e()}).then(i.bind(null,61))},Loading:v.default},data:function(){return{concurrencia:{},tiposViaIngreso:["Consulta Externa","Urgencias","Remitido"],menuDate:!1,menuTime:!1,fechaRecepcion:null,horaRecepcion:null,loading:!1,window:0,loadingSubmit:!1,detalleAfiliado:function(){return i.e(290).then(i.bind(null,750))}}},beforeMount:function(){this.formReset()},mounted:function(){null!==this.parametros.entidad&&this.getRegisto(this.parametros.entidad.id)},computed:{complementos:function(){return m.b.getters.complementosConcurrencias},tapTitulo:function(){return"Nuevo Item"},computedDateFormatted:function(){return this.formDate(this.fechaRecepcion)}},methods:{getRegisto:function(e){var t=this,i=this.$loading.show({container:this.$refs.formConcurrencia.$el});this.axios.get("cuentasmedicas/concurrencia/"+e).then(function(e){""!==e.data&&(t.concurrencia=e.data.data),i.hide()}).catch(function(e){i.hide(),t.$store.commit(l.b,{msg:"Hay un error al traer la concurrencia. "+e.response,color:"danger"})})},formReset:function(){this.concurrencia={id:"",consecutivo:null,consecutivo_ips:null,fecha:null,estado:null,as_afiliado_id:null,rs_entidad_id:null,rs_servicio_id:null,rs_especialidad_id:null},this.$validator.reset()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},formDate:function(e){if(!e)return null;var t=e.split("-"),i=s()(t,3);return i[0]+"/"+i[1]+"/"+i[2]},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(d.c,{contexto:this,itemId:this.parametros.tabOrigin})},submit:function(){var e=this;return n()(r.a.mark(function t(){var i,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formConcurrencias");case 2:if(!t.sent){t.next=10;break}e.loadingSubmit=!0,e.concurrencia.fecha=e.fechaRecepcion+" "+e.horaRecepcion,i=e.concurrencia.id?"editar":"crear",a=e.concurrencia.id?e.axios.put("cuentasmedicas/concurrencia/"+e.concurrencia.id,e.concurrencia):e.axios.post("cuentasmedicas/concurrencia",e.concurrencia),a.then(function(t){e.concurrencia.id?(e.$store.commit(l.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.$store.commit(u.v,{item:t.data.data,estado:i,key:e.parametros.key}),e.$store.dispatch(d.c,{contexto:e,itemId:e.parametros.tabOrigin})):(e.$store.commit(l.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.$store.commit(u.v,{item:t.data.data,estado:i,key:e.parametros.key}),e.$store.dispatch(d.c,{contexto:e,itemId:e.parametros.tabOrigin}))}).catch(function(t){e.loadingSubmit=!1,e.$store.commit(l.a,{expression:" al guardar el registro. ",error:t})}),t.next=11;break;case 10:e.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 11:case"end":return t.stop()}},t,e)}))()}}}},2313:function(e,t,i){var a=i(2314);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(456)("19df8cd6",a,!0,{})},2314:function(e,t,i){t=e.exports=i(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroConcurrencias.vue",sourceRoot:""}])},2315:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-card",{ref:"formConcurrencia"},[i("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[i("v-toolbar-title",[e._v(" "+e._s(e.tapTitulo)+" ")])],1),e._v(" "),i("v-container",{staticStyle:{"max-width":"inherit"},attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[i("v-form",{attrs:{"data-vv-scope":"formConcurrencias"}},[i("v-container",{attrs:{fluid:"","grid-list-md":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[i("v-card",[i("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[i("v-toolbar-title",{staticClass:"subheading"},[i("v-icon",[e._v("person")]),e._v(" Afiliado")],1)],1),e._v(" "),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm8:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por nombre o número de documento.",hint:"identificacion_completa","item-text":"nombre_completo","data-title":"identificacion_completa","data-subtitle":"nombre_completo",label:"Afiliado",detail:e.detalleAfiliado,entidad:"afiliados",preicon:"person",name:"Afiliado",rules:"required","error-messages":e.errors.collect("Afiliado"),"slot-append":{template:'<span class="pt-2 caption">Estado: {{value.estado_afiliado.codigo}} - {{value.estado_afiliado.nombre}}</span>',props:["value"]},"no-btn-edit":""},on:{changeid:function(t){return e.concurrencia.as_afiliado_id=t}},model:{value:e.concurrencia.afiliado,callback:function(t){e.$set(e.concurrencia,"afiliado",t)},expression:"concurrencia.afiliado"}})],1)],1)],1)],1)],1),e._v(" "),i("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[i("v-card",[i("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[i("v-toolbar-title",{staticClass:"subheading"},[i("v-icon",[e._v("assignment")]),e._v(" General")],1)],1),e._v(" "),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por NIT, razon social u código de habilitación.",hint:"tercero.identificacion_completa","item-text":"tercero.nombre_completo","data-title":"tercero.identificacion_completa","data-subtitle":"tercero.nombre_completo",label:"IPS",entidad:"entidades",preicon:"location_city",name:"IPS","no-btn-create":"",rules:"required","error-messages":e.errors.collect("IPS")},on:{changeid:function(t){return e.concurrencia.rs_entidad_id=t}},model:{value:e.concurrencia.entidad,callback:function(t){e.$set(e.concurrencia,"entidad",t)},expression:"concurrencia.entidad"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"consecutivo ips",attrs:{label:"Consecutivo IPS",name:"consecutivo ips",required:"","prepend-icon":"subtitles","error-messages":e.errors.collect("consecutivo ips")},model:{value:e.concurrencia.consecutivo_ips,callback:function(t){e.$set(e.concurrencia,"consecutivo_ips",t)},expression:"concurrencia.consecutivo_ips"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos.rsServicios,"item-text":"nombre","item-value":"id",name:"servicio",label:"Servicio","no-data-text":"No hay servicios disponibles","error-messages":e.errors.collect("servicio"),required:"","prepend-icon":"contacts"},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),i("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}]),model:{value:e.concurrencia.rs_servicio_id,callback:function(t){e.$set(e.concurrencia,"rs_servicio_id",t)},expression:"concurrencia.rs_servicio_id"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos.rsServicios,"item-text":"nombre","item-value":"id",name:"especialidad",label:"Especialidad","no-data-text":"No hay especialidades disponibles","error-messages":e.errors.collect("especialidad"),required:"","prepend-icon":"assignment_turned_in"},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),i("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}]),model:{value:e.concurrencia.rs_especialidad_id,callback:function(t){e.$set(e.concurrencia,"rs_especialidad_id",t)},expression:"concurrencia.rs_especialidad_id"}})],1)],1)],1)],1)],1),e._v(" "),i("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[i("v-card",[i("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[i("v-toolbar-title",{staticClass:"subheading"},[i("v-icon",[e._v("label_important")]),e._v(" Ingreso")],1)],1),e._v(" "),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[i("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha de ingreso","prepend-icon":"event",readonly:"",name:"fecha","error-messages":e.errors.collect("fecha")},slot:"activator",model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}}),e._v(" "),i("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(t){e.menuDate=!1},change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.fechaRecepcion,callback:function(t){e.fechaRecepcion=t},expression:"fechaRecepcion"}})],1)],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-menu",{ref:"menuTime",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.horaRecepcion,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.horaRecepcion=t},"update:return-value":function(t){e.horaRecepcion=t}},model:{value:e.menuTime,callback:function(t){e.menuTime=t},expression:"menuTime"}},[i("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{slot:"activator",label:"Hora de ingreso","prepend-icon":"access_time",readonly:"",required:"",name:"hora ingreso","error-messages":e.errors.collect("hora ingreso")},slot:"activator",model:{value:e.horaRecepcion,callback:function(t){e.horaRecepcion=t},expression:"horaRecepcion"}}),e._v(" "),e.menuTime?i("v-time-picker",{attrs:{"full-width":""},on:{change:function(t){return e.$refs.menuTime.save(e.horaRecepcion)}},model:{value:e.horaRecepcion,callback:function(t){e.horaRecepcion=t},expression:"horaRecepcion"}}):e._e()],1)],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposViaIngreso,label:"Via de ingreso",name:"via de ingreso","prepend-icon":"input","error-messages":e.errors.collect("via de ingreso"),required:""},model:{value:e.concurrencia.via_ingreso,callback:function(t){e.$set(e.concurrencia,"via_ingreso",t)},expression:"concurrencia.via_ingreso"}})],1),e._v(" "),"Remitido"===e.concurrencia.via_ingreso?i("v-flex",{attrs:{xs12:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por NIT, razon social u código de habilitación.",hint:"tercero.identificacion_completa","item-text":"tercero.nombre_completo","data-title":"tercero.identificacion_completa","data-subtitle":"tercero.nombre_completo",label:"IPS Origen",entidad:"entidades",preicon:"location_city",name:"IPS","no-btn-create":"",rules:"required","error-messages":e.errors.collect("IPS")},on:{changeid:function(t){return e.concurrencia.rs_entorigen_id=t}},model:{value:e.concurrencia.entidad_origen,callback:function(t){e.$set(e.concurrencia,"entidad_origen",t)},expression:"concurrencia.entidad_origen"}})],1):e._e(),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por código, descripcion y genero",hint:"codigo","item-text":"descripcion","data-title":"codigo","data-subtitle":"descripcion",label:"Diagnóstico Principal",entidad:"rs_cie10s",preicon:"reorder",name:"diagnóstico",rules:"required","error-messages":e.errors.collect("diagnóstico"),"no-btn-create":"","min-characters-search":3,clearable:""},on:{changeid:function(t){return e.concurrencia.rs_cie10_ingreso=t}},model:{value:e.concurrencia.diagnostico_ingreso,callback:function(t){e.$set(e.concurrencia,"diagnostico_ingreso",t)},expression:"concurrencia.diagnostico_ingreso"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("postulador-v2",{attrs:{"no-data":"Busqueda por código, descripcion y genero",hint:"codigo","item-text":"descripcion","data-title":"codigo","data-subtitle":"descripcion",label:"Diagnóstico Relacionado (opcional)",entidad:"rs_cie10s",preicon:"reorder",name:"diagnóstico","no-btn-create":"","min-characters-search":3,clearable:""},on:{changeid:function(t){return e.concurrencia.rs_cie10_relacionado=t}},model:{value:e.concurrencia.diagnostico_relacionado,callback:function(t){e.$set(e.concurrencia,"diagnostico_relacionado",t)},expression:"concurrencia.diagnostico_relacionado"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",{staticClass:"grey lighten-4"},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[i("v-btn",{on:{click:function(t){return e.close()}}},[e._v("Cancelar")]),e._v(" "),i("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Guardar")])],1)],1)],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};t.a=o},687:function(e,t,i){"use strict";function a(e){i(2313)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1252),o=i(2315),n=i(1),c=a,s=n(r.a,o.a,!1,c,"data-v-5bfeabd6",null);t.default=s.exports}});
//# sourceMappingURL=218.d8d221e069f697eea621.js.map