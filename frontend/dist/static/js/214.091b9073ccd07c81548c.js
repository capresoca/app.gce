webpackJsonp([214],{1042:function(t,e,o){"use strict";var a=o(13),r=o.n(a),c=o(14),i=o.n(c),n=o(12),s=o(40),l=o(248);e.a={name:"RegistrarConcepto",props:["parametros"],components:{Postulador:function(){return o.e(287).then(o.bind(null,747))},ToolbarList:function(){return new Promise(function(t){t()}).then(o.bind(null,247))}},data:function(){return{dialogSave:!1,dialogCodigo:!1,ordenEdit:!1,tiposConcepto:["Cuenta por Cobrar","Notas"],conceptoCartera:{},headers:[{text:"Codigo",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Tipo de concepto",align:"left",sortable:!1,value:"tipo_concepto"},{text:"Cuenta",align:"left",sortable:!1,value:"niif.codigo"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset()},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id)},computed:{cardTitle:function(){return this.conceptoCartera.id?"Edición del Concepto de Cartera: "+this.conceptoCartera.nombre:"Nuevo Concepto de Cartera"}},methods:{validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},conceptoByCod:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.conceptoCartera.codigo?t.conceptoCartera.tipo_concepto?t.axios.get("conceptoscartera/codigo/"+t.conceptoCartera.codigo+"/"+t.conceptoCartera.tipo_concepto).then(function(e){if(e.data.exists)t.conceptoCartera=e.data.concepto,t.dialogCodigo=!0;else{var o=t.conceptoCartera.codigo,a=t.conceptoCartera.tipo_concepto;t.$store.commit(n.b,{msg:"Codigo validado",color:"success"}),t.formReset(),t.dialogSave=!0,t.conceptoCartera.codigo=o,t.conceptoCartera.tipo_concepto=a}}).catch(function(e){t.$store.commit(n.a,{expression:" Al intentar consultar codigo. ",error:e})}):t.$store.commit(n.b,{msg:"Seleccione un tipo de concepto para validar el codigo",color:"danger"}):t.$store.commit(n.b,{msg:"Digite el codigo",color:"danger"});case 1:case"end":return e.stop()}},e,t)}))()},submit:function(){var t=this;return i()(r.a.mark(function e(){var o,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.buscarCuenta.validate();case 2:return o=e.sent,e.next=5,t.validador("formConceptos");case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}e.t0=o;case 8:if(!e.t0){e.next=12;break}a=t.conceptoCartera.id?"editar":"crear",c=t.conceptoCartera.id?t.axios.put("conceptoscartera/"+t.conceptoCartera.id,t.conceptoCartera):t.axios.post("conceptoscartera",t.conceptoCartera),c.then(function(e){t.$store.commit(n.b,{msg:"Se "+(t.conceptoCartera.id?"actualizaron los datos":"realizó el registro")+" correctamente del Concepto Cartera "+e.data.data.nombre+".",color:"success"}),t.$store.commit(l.q,{conceptoCartera:e.data.data,estado:a,key:t.parametros.key}),t.$store.dispatch(s.c,{contexto:t,itemId:t.parametros.tabOrigin})}).catch(function(){t.loadingSubmit=!1,t.$store.commit(n.b,{msg:"Hay un error al guardar el registro. ",color:"danger"})});case 12:case"end":return e.stop()}},e,t)}))()},getRegistro:function(t){var e=this;this.axios.get("conceptoscartera/"+t).then(function(t){e.conceptoCartera=t.data.data,e.ordenEdit=!0,e.dialogSave=!0}).catch(function(t){e.$store.commit(n.a,{expression:" Error al traer el concepto. ",error:t})})},edit:function(t){this.dialogSave=!0,this.ordenEdit=!0,this.conceptoCartera=t},editarByCodigo:function(){this.dialogCodigo=!1,this.dialogSave=!0,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.dialogCodigo=!1,this.dialogSave=!0,this.ordenEdit=!1},formReset:function(){this.conceptoCartera={id:null,nombre:null,codigo:null,glosas:"No",tipo_concepto:null,nf_niif_id:null,maneja_tercero:"No",afecta_bancos:"No",afecta_cartera:"No",tipo_aplicacion:"Debito",niif:null}},refresh:function(){this.ordenEdit=!1,this.$validator.reset(),this.formReset()},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(s.c,{contexto:this,itemId:this.parametros.tabOrigin})}}}},1725:function(t,e,o){var a=o(1726);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(456)("84f782f8",a,!0,{})},1726:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistrarConceptos.vue",sourceRoot:""}])},1727:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-card",[o("toolbar-list",{staticClass:"elevation-1 grey lighten-4",attrs:{title:t.cardTitle}}),t._v(" "),o("v-card-text",[o("v-form",{attrs:{"data-vv-scope":"formConceptos"}},[o("v-container",{attrs:{fluid:"","grid-list-xl":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:"",md3:"",lg3:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"tipo de concepto",attrs:{items:t.tiposConcepto,label:"Tipo de Concepto",name:"tipo de concepto","error-messages":t.errors.collect("tipo de concepto")},model:{value:t.conceptoCartera.tipo_concepto,callback:function(e){t.$set(t.conceptoCartera,"tipo_concepto",e)},expression:"conceptoCartera.tipo_concepto"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md3:"",lg3:""}},[o("v-container",{staticClass:"pa-0"},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"pr-0",attrs:{xs9:"",sm10:"",md9:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5",expression:"'required|max:5'"}],key:"código",attrs:{label:"Código",name:"código","error-messages":t.errors.first("código"),disabled:t.ordenEdit,required:""},model:{value:t.conceptoCartera.codigo,callback:function(e){t.$set(t.conceptoCartera,"codigo",e)},expression:"conceptoCartera.codigo"}})],1),t._v(" "),o("v-flex",{staticClass:"text-xs-right pl-0",attrs:{xs3:"",sm2:"",md3:""}},[o("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.ordenEdit,expression:"!ordenEdit"}],attrs:{bottom:""}},[o("v-btn",{attrs:{slot:"activator",color:"transparent",fab:"",dark:"",icon:""},on:{click:t.conceptoByCod},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("done")])],1),t._v(" "),o("span",[t._v("Verificar Código")])],1)],1)],1)],1)],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"nombre",attrs:{label:"Nombre del Concepto",name:"nombre","error-messages":t.errors.collect("nombre"),required:""},model:{value:t.conceptoCartera.nombre,callback:function(e){t.$set(t.conceptoCartera,"nombre",e)},expression:"conceptoCartera.nombre"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[o("v-container",{staticClass:"pa-1",attrs:{fluid:""}},[o("v-radio-group",{attrs:{label:"El Concepto Aplica A:",disabled:"Cuenta por Cobrar"!==t.conceptoCartera.tipo_concepto,row:""},model:{value:t.conceptoCartera.tipo_aplicacion,callback:function(e){t.$set(t.conceptoCartera,"tipo_aplicacion",e)},expression:"conceptoCartera.tipo_aplicacion"}},[o("v-radio",{key:"1",attrs:{label:"Nota debito",value:"Debito"}}),t._v(" "),o("v-radio",{key:"2",attrs:{label:"Nota credito",value:"Credito"}})],1)],1)],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[o("postulador",{ref:"buscarCuenta",attrs:{nodata:"Busqueda por código o nombre.",required:"",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:"cuenta auxiliar",lite:"",scope:"formDetalle",entidad:"niifs",routeparams:"nivel:auxiliar=1",preicon:"person",value:t.conceptoCartera.niif,clearable:""},on:{change:function(e){return t.conceptoCartera.nf_niif_id=e},objectReturn:function(e){return t.conceptoCartera.niif=e}}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[o("v-switch",{attrs:{color:"success",label:"Maneja Tercero","true-value":"Si","false-value":"No"},model:{value:t.conceptoCartera.maneja_tercero,callback:function(e){t.$set(t.conceptoCartera,"maneja_tercero",e)},expression:"conceptoCartera.maneja_tercero"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[o("v-switch",{attrs:{color:"success",label:"Afecta Cartera","true-value":"Si","false-value":"No"},model:{value:t.conceptoCartera.afecta_cartera,callback:function(e){t.$set(t.conceptoCartera,"afecta_cartera",e)},expression:"conceptoCartera.afecta_cartera"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[o("v-switch",{attrs:{color:"success",label:"Afecta Bancos","true-value":"Si","false-value":"No"},model:{value:t.conceptoCartera.afecta_bancos,callback:function(e){t.$set(t.conceptoCartera,"afecta_bancos",e)},expression:"conceptoCartera.afecta_bancos"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[o("v-switch",{attrs:{color:"success",label:"Concepto para Glosas","true-value":"Si","false-value":"No"},model:{value:t.conceptoCartera.glosas,callback:function(e){t.$set(t.conceptoCartera,"glosas",e)},expression:"conceptoCartera.glosas"}})],1)],1)],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[o("v-btn",{on:{click:function(e){return t.refresh(null)}}},[t._v("Limpiar")])],1),t._v(" "),o("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[o("v-btn",{on:{click:function(e){return t.close()}}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogCodigo,callback:function(e){t.dialogCodigo=e},expression:"dialogCodigo"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[t._v("Código del Concepto")]),t._v(" "),o("v-card-text",{staticClass:"text-xs-justify"},[t._v("El código del concepto ya esta registrado, desea cargar los datos para su actualización o utilizar otro código.")]),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.editarByCodigo}},[t._v("Cargar datos")]),t._v(" "),o("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.cerrarByCodigo}},[t._v("Cerrar")])],1)],1)],1)],1)},r=[],c={render:a,staticRenderFns:r};e.a=c},537:function(t,e,o){"use strict";function a(t){o(1725)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1042),c=o(1727),i=o(1),n=a,s=i(r.a,c.a,!1,n,"data-v-50b55ef0",null);e.default=s.exports}});
//# sourceMappingURL=214.091b9073ccd07c81548c.js.map