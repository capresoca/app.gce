webpackJsonp([283],{1169:function(o,e,t){"use strict";var a=t(13),r=t.n(a),s=t(14),i=t.n(s),n=t(40),c=t(248),d=t(12);e.a={name:"RegistroCargosEmpleadosTalentoHumano",props:["parametros"],components:{Postulador:function(){return t.e(287).then(t.bind(null,747))}},data:function(){return{buscandoCodigo:!1,dialogCodigo:!1,ordenEdit:!1,loadingSubmit:!1,cargo:{}}},methods:{findByCodigo:function(){var o=this;this.cargo.codigo&&(this.buscandoCodigo=!0,this.axios.get("th_cargos_empleados/codigo/"+this.cargo.codigo).then(function(e){e.data.exists&&(o.$store.commit(d.b,{msg:"El codigo del cargo de empleado existe",color:"success"}),o.formReset(),o.cargo=e.data.data,o.dialogCodigo=!0),o.buscandoCodigo=!1}).catch(function(e){console.log(e),o.buscandoCodigo=!1,o.$store.commit(d.b,{msg:"Hay un error al consultar el codigo. "+e.response,color:"danger"})}))},validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},submit:function(){var o=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validador("formRegistroCargosEmpleados");case 2:if(!e.sent){e.next=7;break}o.loadingSubmit=!0,o.cargo.id?o.axios.put("th_cargos_empleados/"+o.cargo.id,o.cargo).then(function(e){o.$store.commit(d.b,{msg:"El cargo de empleado se actualizo correctamente",color:"success"}),o.formReset(),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(c.k,{item:e.data.data,estado:"editar",key:o.parametros.key})}).catch(function(e){console.log(e),o.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}):o.axios.post("th_cargos_empleados",o.cargo).then(function(e){o.$store.commit(d.b,{msg:"El cargo de empleado se creó correctamente",color:"success"}),o.formReset(),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(c.k,{item:e.data.data,estado:"crear",key:o.parametros.key})}).catch(function(e){console.log(e),o.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=8;break;case 7:o.$store.commit(d.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return e.stop()}},e,o)}))()},seleccionTercero:function(o){null!==o&&(this.cargo.tercero=o,this.cargo.nombre=o.nombre_completo,this.cargo.gn_tercero_id=o.id)},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.ordenEdit=!1,this.dialogCodigo=!1},formReset:function(){this.cargo={tipo_fondo:[]},this.buscandoCodigo=!1,this.dialogCodigo=!1,this.ordenEdit=!1},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(n.c,{contexto:this,itemId:this.parametros.tabOrigin})},getRegistro:function(o){var e=this;this.axios.get("th_cargos_empleados/"+o).then(function(o){o.data.exists&&e.edit(o.data.data)}).catch(function(o){e.$store.commit(d.a,{expression:" al traer el subgrupo. ",error:o})})},edit:function(o){this.ordenEdit=!0,this.cargo=o}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},2088:function(o,e,t){"use strict";var a=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[t("v-toolbar-title",[o._v(" "+o._s(o.ordenEdit?"Edicion de cargo de empleados":"Registro de cargo de empleados")+" ")])],1),o._v(" "),t("v-card-text",[t("v-form",{attrs:{"data-vv-scope":"formRegistroCargosEmpleados"}},[t("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[o._v("assignment_ind")]),o._v(" General")],1)],1),o._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:3",expression:"'required|max:3'"}],key:"codigo",attrs:{label:"Código",name:"Codigo","prepend-icon":"list","error-messages":o.errors.collect("Codigo"),disabled:o.ordenEdit,"persistent-hint":"",hint:o.buscandoCodigo?"Estamos buscando el codigo":"",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.findByCodigo(e)},blur:o.findByCodigo},model:{value:o.cargo.codigo,callback:function(e){o.$set(o.cargo,"codigo",e)},expression:"cargo.codigo"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","prepend-icon":"person","error-messages":o.errors.collect("Nombre"),required:""},model:{value:o.cargo.nombre,callback:function(e){o.$set(o.cargo,"nombre",e)},expression:"cargo.nombre"}})],1)],1)],1)],1)],1),o._v(" "),t("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[o._v("assignment_ind")]),o._v(" Cargo")],1)],1),o._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm4:""}},[t("postulador",{ref:"postulaNivelCargo",attrs:{nodata:"Busqueda por codigo o por nombre.",required:"",hint:"codigo",itemtext:"nombre",datatitle:"nombre",datasubtitle:"codigo",filter:"nombre,codigo",label:"Nivel de cargo",scope:"formRegistroCargosEmpleados",lite:"",entidad:"th_niveles_cargos",preicon:"face",value:o.cargo.nivel,clearable:""},on:{change:function(e){return o.cargo.th_niveles_cargo_id=e},objectReturn:function(e){return o.cargo.nivel=e}}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{attrs:{label:"Cargos aprobados"},model:{value:o.cargo.cargos_aprobados,callback:function(e){o.$set(o.cargo,"cargos_aprobados",e)},expression:"cargo.cargos_aprobados"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{attrs:{label:"Tope maximo de H.E. Mensual"},model:{value:o.cargo.tope_maximo,callback:function(e){o.$set(o.cargo,"tope_maximo",e)},expression:"cargo.tope_maximo"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm2:""}},[t("v-checkbox",{attrs:{label:"Horas extra",value:"true","hide-details":""},model:{value:o.cargo.horas_extra,callback:function(e){o.$set(o.cargo,"horas_extra",e)},expression:"cargo.horas_extra"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm2:""}},[t("v-checkbox",{attrs:{label:"Recargos nocturnos y dominicales",value:"true","hide-details":""},model:{value:o.cargo.recargos,callback:function(e){o.$set(o.cargo,"recargos",e)},expression:"cargo.recargos"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),o._v(" "),t("v-divider"),o._v(" "),"Confirmada"!==o.estado&&"Anulada"!==o.estado?t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[t("v-btn",{on:{click:function(e){return o.close()}}},[o._v("Cancelar")]),o._v(" "),t("v-btn",{attrs:{color:"primary",loading:o.loadingSubmit},on:{click:function(e){return e.preventDefault(),o.submit(e)}}},[o._v("Guardar")])],1)],1)],1):o._e()],1),o._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:o.dialogCodigo,callback:function(e){o.dialogCodigo=e},expression:"dialogCodigo"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[o._v("Codigo del fondo")]),o._v(" "),t("v-card-text",[o._v("El codigo del cargo de empleado ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),o._v(" "),t("v-card-actions",[t("v-spacer"),o._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.editarByCodigo}},[o._v("Cargar datos")]),o._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.cerrarByCodigo}},[o._v("Cerrar")])],1)],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},624:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(1169),r=t(2088),s=t(1),i=s(a.a,r.a,!1,null,null,null);e.default=i.exports}});
//# sourceMappingURL=283.8422f6d8b9536959ff05.js.map