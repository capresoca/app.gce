webpackJsonp([300],{1310:function(t,e,i){"use strict";function a(t){i(2512)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1311),s=i(2514),d=i(1),l=a,n=d(o.a,s.a,!1,l,"data-v-7e9c3efe",null);e.default=n.exports},1311:function(t,e,i){"use strict";var a=i(7),o=i.n(a),s=i(58),d=i(59),l=i(12),n=i(40),r=i(248);e.a={name:"Estudio",props:{item:{type:Object,default:null},type:{type:String,default:"tutela"},value:{type:Boolean,default:!1}},components:{PostuladorV2:function(){return new Promise(function(t){t()}).then(i.bind(null,61))},Loading:s.default},data:function(){return{dialogEstudio:{loading:!1,item:null,entidad:null,data:{id:null,observaciones:null,estado:null,farmacia_id:null}},loading:!0}},watch:{value:function(t){var e=this;t?(this.dialogEstudio.item=JSON.parse(o()(this.item)),this.dialogEstudio.data.estado=JSON.parse(o()(this.dialogEstudio.item.estado)),this.dialogEstudio.data.id=this.dialogEstudio.item.id):setTimeout(function(){e.dialogEstudio={show:!1,loading:!1,item:null,entidad:null,data:{id:null,observaciones:null,estado:null,farmacia_id:null}},e.$validator.reset()},800)},"dialogEstudio.data.estado":function(t){t&&this.dialogEstudio.show&&(this.dialogEstudio.entidad=null,this.dialogEstudio.data.farmacia_id=null,this.$validator.reset())}},computed:{complementos:function(){return"prescripción"===this.type?d.b.getters.complementosTablaPrescripciones:d.b.getters.complementosTablaTutelas},infoComponent:function(){return this.$store.getters.getInfoComponent("prescripción"===this.type?"prescripciones":"tutelasMipres")}},methods:{submitEstudioPrescripcion:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.dialogEstudio.loading=!0,t.axios.put(("prescripción"===t.type?"prescripciones/":"mptutelas/")+t.dialogEstudio.data.id,t.dialogEstudio.data).then(function(){t.$store.commit(l.b,{msg:"El estudio de la "+t.type+" se realizó satisfactoriamente.",color:"success"}),t.$store.commit("prescripción"===t.type?r.R:r.S,{item:{},estado:"reload",key:null}),t.$store.dispatch(n.c,{contexto:t,itemId:null})}).catch(function(e){t.dialogEstudio.loading=!1,t.$store.commit(l.a,{expression:" al realizar el estudio de la "+t.type+". ",error:e})}))})}}}},2512:function(t,e,i){var a=i(2513);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(456)("271bd830",a,!0,{})},2513:function(t,e,i){e=t.exports=i(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Estudio.vue",sourceRoot:""}])},2514:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0 ma-0",attrs:{fluid:"","grid-list-sm":""}},[i("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[i("loading",{model:{value:t.dialogEstudio.loading,callback:function(e){t.$set(t.dialogEstudio,"loading",e)},expression:"dialogEstudio.loading"}}),t._v(" "),t.dialogEstudio.item?i("v-card",[i("v-toolbar",{attrs:{dense:""}},[i("v-toolbar-title",[i("v-list-tile",[i("v-icon",{staticClass:"mr-2",staticStyle:{"margin-left":"-14px !important"},attrs:{left:""}},[t._v("ballot")]),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s("prescripción"===t.type?"Estudio de Prescripción":"Estudio de Tutela")}}),t._v(" "),i("v-list-tile-sub-title",{staticClass:"caption"},[t._v("No. "+t._s("prescripción"===t.type?t.dialogEstudio.item.NoPrescripcion:t.dialogEstudio.item.NoTutela))])],1)],1)],1),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",icon:"",disabled:t.dialogEstudio.loading},on:{click:function(e){return t.$emit("input",!1)}}},[i("v-icon",[t._v("close")])],1)],1),t._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Nuevo estado",items:t.complementos.estados,"item-text":"text","item-value":"value",name:"Nuevo estado","error-messages":t.errors.collect("Nuevo estado")},model:{value:t.dialogEstudio.data.estado,callback:function(e){t.$set(t.dialogEstudio.data,"estado",e)},expression:"dialogEstudio.data.estado"}})],1),t._v(" "),"Aprobado"===t.dialogEstudio.data.estado?i("v-flex",{attrs:{xs12:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por NIT, razon social u código de habilitación.",hint:"tercero.identificacion_completa","item-text":"nombre","data-title":"nombre","data-subtitle":"tercero.identificacion_completa",label:"Farmacia",entidad:"entidades",preicon:"location_city","route-params":"rs_tipentidade_id=2",name:"entidad",rules:"required","error-messages":t.errors.collect("entidad"),"no-btn-create":"","min-characters-search":3},on:{changeid:function(e){return t.dialogEstudio.data.farmacia_id=e}},model:{value:t.dialogEstudio.entidad,callback:function(e){t.$set(t.dialogEstudio,"entidad",e)},expression:"dialogEstudio.entidad"}})],1):t._e(),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Observaciones",name:"Observaciones","error-messages":t.errors.collect("Observaciones"),rows:"1","auto-grow":""},model:{value:t.dialogEstudio.data.observaciones,callback:function(e){t.$set(t.dialogEstudio.data,"observaciones",e)},expression:"dialogEstudio.data.observaciones"}})],1)],1)],1),t._v(" "),i("v-divider"),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{disabled:t.dialogEstudio.loading},on:{click:function(e){return t.$emit("input",!1)}}},[t._v("Cerrar")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"white--text",attrs:{loading:t.dialogEstudio.loading,disabled:t.dialogEstudio.loading,color:"blue darken-1"},on:{click:t.submitEstudioPrescripcion}},[t._v("\n          registrar\n        ")])],1)],1):t._e()],1)],1)},o=[],s={render:a,staticRenderFns:o};e.a=s}});
//# sourceMappingURL=300.f7844d5743361ed807f1.js.map