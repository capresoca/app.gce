webpackJsonp([59],{1510:function(t,e,o){var a=o(1511);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(456)("058de947",a,!0,{})},1511:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ComDiarios.vue",sourceRoot:""}])},1512:function(t,e,o){"use strict";function a(t){o(1513)}var i=o(970),n=o(1518),r=o(1),s=a,l=r(i.a,n.a,!1,s,"data-v-eec99e8a",null);e.a=l.exports},1513:function(t,e,o){var a=o(1514);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(456)("f1dbf9ea",a,!0,{})},1514:function(t,e,o){e=t.exports=o(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RepetirComprobante.vue",sourceRoot:""}])},1518:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{width:"600px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("toolbar-list",{attrs:{info:t.infoComponent,title:"Repetir Comprobante de Diario",subtitle:"Registro"}}),t._v(" "),o("v-form",{attrs:{"data-vv-scope":"formRepetirComprobante"}},[o("v-container",{attrs:{fluid:"","grid-list-xl":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[o("v-list",[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s("<b>Comprobante de diario N°: </b> "+(t.value?t.value.consecutivo:""))}}),t._v(" "),o("v-list-tile-title",{domProps:{innerHTML:t._s("<b>Tipo Comprobante: </b> "+(t.value?t.value.codigoTipo+" - "+t.value.tipo:""))}}),t._v(" "),o("v-list-tile-title",{domProps:{innerHTML:t._s("<b>Comprobante Destino: </b> "+t.comprobante.comdiariodestino)}})],1)],1)],1),t._v(" "),o("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm8:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Nuevo Tipo de Comprobante",items:t.complementosFormComDiario.tipcomdiarios,"item-value":"id","item-text":"nombre",name:"tipo de comprobante",required:"","error-messages":t.errors.collect("tipo de comprobante"),autocomplete:""},scopedSlots:t._u([{key:"item",fn:function(e){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.nombre)}})],1)]]}}]),model:{value:t.comprobante.nf_tipcomdiario_id,callback:function(e){t.$set(t.comprobante,"nf_tipcomdiario_id",e)},expression:"comprobante.nf_tipcomdiario_id"}})],1),t._v(" "),o("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm4:""}},[o("input-date",{directives:[{name:"validate",rawName:"v-validate",value:"required|fechaValida|date_format:YYYY-MM-DD",expression:"'required|fechaValida|date_format:YYYY-MM-DD'"}],key:"fecha",attrs:{label:"Fecha",placeholder:"YYYY-MM-DD",format:"YYYY-MM-DD",name:"fecha","error-messages":t.errors.collect("fecha")},model:{value:t.comprobante.fecha,callback:function(e){t.$set(t.comprobante,"fecha",e)},expression:"comprobante.fecha"}})],1)],1)],1)],1),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary",flat:"",small:"",disabled:t.errors.any()},on:{click:t.submit}},[t._v("\n        Guardar\n      ")]),t._v(" "),o("v-btn",{attrs:{color:"grey",flat:"",small:""},on:{click:function(e){return t.$emit("cancelar")}}},[t._v("\n        Cerrar\n      ")])],1)],1)],1)},i=[],n={render:a,staticRenderFns:i};e.a=n},1519:function(t,e,o){"use strict";var a=function(){var t=this,e=this,o=e.$createElement,a=e._self._c||o;return a("div",[a("repetir-comprobante",{attrs:{dialog:e.dialogRepetirComprobante},on:{cancelar:function(t){e.dialogRepetirComprobante=!1}},model:{value:e.dataRepetir,callback:function(t){e.dataRepetir=t},expression:"dataRepetir"}}),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-text",{staticClass:"subheading font-weight-light"},[e._v("¿Realmente desea cambiar el estado de este comprobante?")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("No")]),e._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){"Anulado"==e.comDiario.estado?e.descAnulado(e.comDiario):e.actualizarEstado(e.comDiario)}}},[e._v("Si")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3"},[a("v-card-text",{staticClass:"title"},[e._v("¿Por qué anula este comprobante?")])],1),e._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:e.detalle_anulacion,callback:function(t){e.detalle_anulacion=t},expression:"detalle_anulacion"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                Detalle de anulación\n              ")])])],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.actualizarEstado(e.comDiario,e.detalle_anulacion)}}},[e._v("Enviar")])],1)],1)],1),e._v(" "),a("v-card",[a("toolbar-list",{attrs:{info:e.infoComponent,btnplus:"",btnplustitle:"Crear Comprobante de Diario",title:"Comprobantes De Diario",subtitle:"Registro y gestión"}}),e._v(" "),a("data-table",{on:{resetOption:function(t){return e.resetOptions(t)},editar:function(o){return e.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:o,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})},confirmar:function(t){return e.preguntarCambiarEstado(t,"Confirmado")},desconfirmar:function(t){return e.preguntarCambiarEstado(t,"Registrado")},anular:function(t){return e.preguntarCambiarEstado(t,"Anulado")},imprimir:function(t){return e.imprimir(t)},repetirComprobante:function(t){return e.repetir(t)}},model:{value:e.dataTableComdiario,callback:function(t){e.dataTableComdiario=t},expression:"dataTableComdiario"}})],1)],1)},i=[],n={render:a,staticRenderFns:i};e.a=n},490:function(t,e,o){"use strict";function a(t){o(1510)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(969),n=o(1519),r=o(1),s=a,l=r(i.a,n.a,!1,s,"data-v-75c0aef4",null);e.default=l.exports},969:function(t,e,o){"use strict";var a=o(7),i=o.n(a),n=o(248),r=o(12),s=o(1512);e.a={name:"ComDiarios",components:{RepetirComprobante:s.a,ToolbarList:function(){return new Promise(function(t){t()}).then(o.bind(null,247))},DataTable:function(){return new Promise(function(t){t()}).then(o.bind(null,60))}},data:function(){var t=this;return{dataTableComdiario:{nameItemState:"itemComdiario",route:"comdiarios",optionsPerPage:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],makeHeaders:[{text:"Consecutivo",align:"left",sortable:!1,value:"consecutivo"},{text:"Fecha",align:"center",sortable:!1,value:"fecha",classData:"text-xs-center"},{text:"Tipo",align:"left",sortable:!1,value:"tipo"},{text:"Valor",align:"left",sortable:!1,value:"valor",classData:"text-xs-right",component:{component:{template:"\n                  <div>\n                    <span class=\"text-xs-right\">\n                      {{ value.valor | numberFormat(2,'$') }}\n                    </span>\n                  </div>\n                ",props:["value"]}}},{text:"Estado",align:"center",sortable:!1,value:"estado",classData:"text-xs-center"},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0",value:"id"}],filters:[{label:"Estado",type:"v-autocomplete",items:function(){return[{text:"Registrado",value:"Registrado"},{text:"Confirmado",value:"Confirmado"},{text:"Anulado",value:"Anulado"}]},vModel:[],multiple:!0,itemText:"text",itemValue:"value",value:"estado",clearable:!0},{label:"Tipo",type:"v-autocomplete",items:function(){return t.tipComDiarios},vModel:[],multiple:!0,itemText:"nombre",itemValue:"id",value:"nf_tipcomdiario_id",clearable:!0},{label:"Fecha",type:"v-range",items:{menuDate:!1,type:"date",range:!0,itemMin:{label:"Inicial",vModel:null,clearable:!0,value:"fecha"},itemMax:{menuDate:!1,label:"Final",vModel:null,clearable:!0,value:"fecha"}}}]},comDiarios:[],tipComDiarios:[],tableLoading:!1,transition:"slide-x-transition",direction:"left",fab:!1,search:"",show:!1,dialog:!1,dialog2:!1,dialogRepetirComprobante:!1,dataRepetir:null,detalle_anulacion:null}},created:function(){this.obtenerTipComDiarios()},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("comdiarios")}},methods:{repetir:function(t){this.dataRepetir=t,this.dialogRepetirComprobante=!0},obtenerTipComDiarios:function(){var t=this;this.axios.get("tipcomdiarios").then(function(e){t.tipComDiarios=e.data.data}).catch(function(e){t.$store.commit(r.b,{msg:e.response.data.message,color:"danger"})})},resetOptions:function(t){return t.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&t.options.push("Registrado"===t.estado?{event:"editar",icon:"edit",tooltip:"Editar"}:{event:"editar",icon:"remove_red_eye",tooltip:"Ver"}),this.infoComponent&&this.infoComponent.permisos.ver&&"Registrado"===t.estado&&t.options.push({event:"confirmar",icon:"check",tooltip:"Confirmar",color:"green darken-3"}),this.infoComponent&&this.infoComponent.permisos.ver&&"Confirmado"===t.estado&&t.options.push({event:"desconfirmar",icon:"remove_circle",tooltip:"Desconfirmar",color:"orange"}),this.infoComponent&&this.infoComponent.permisos.ver&&"Registrado"===t.estado&&t.options.push({event:"anular",icon:"report_off",tooltip:"Anular",color:"red darken-1"}),this.infoComponent&&this.infoComponent.permisos.ver&&"Confirmado"===t.estado&&t.options.push({event:"repetirComprobante",icon:"file_copy",tooltip:"Repetir Comprobante",color:"teal"}),this.infoComponent&&this.infoComponent.permisos.ver&&t.options.push({event:"imprimir",icon:"far fa-file-pdf",tooltip:"Imprimir"}),t},imprimir:function(t){var e=this,o=t.id;this.axios.get("reportecomdiarios?id="+o).then(function(t){var e=t.data;window.open(e,"_blank").focus()}).catch(function(t){e.$store.commit(r.b,{msg:"Error al Imprimir. "+t.response,color:"danger"})})},preguntarCambiarEstado:function(t,e){this.dialog=!0,this.comDiario=JSON.parse(i()(t)),this.comDiario.estado=e},descAnulado:function(t){this.dialog2=!0},actualizarEstado:function(t,e){var o=this;this.dialog=!1,this.dialog2=!1,t.detalle_anulacion=e,this.axios.put("comdiarios/"+t.id,t).then(function(e){o.$store.commit(r.b,{msg:"Se realizó el cambio de estado a "+t.estado,color:"success"}),o.$store.commit(n.p,{item:e.data.data,estado:"editar",key:null}),o.detalle_anulacion=null}).catch(function(t){o.dialog=!1,o.$store.commit(r.b,{msg:t.response.data.message,color:"danger"})})}}}},970:function(t,e,o){"use strict";var a=o(13),i=o.n(a),n=o(14),r=o.n(n),s=o(248),l=o(12),c=o(59);e.a={name:"RepetirComprobante",props:["value","dialog"],components:{InputDate:function(){return new Promise(function(t){t()}).then(o.bind(null,253))},Postulador:function(){return o.e(287).then(o.bind(null,747))},ToolbarList:function(){return new Promise(function(t){t()}).then(o.bind(null,247))}},data:function(){return{fechaActual:"2018-01-01",fechaComprobanteDestino:!1,mensaje:"asda",comprobante:null}},watch:{dialog:function(t){!1===t&&(this.$validator.reset(),this.formReset())},value:function(t){t&&(this.comprobante.nf_comdiario_origen_id=t.id)}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("comdiarios")},complementosFormComDiario:function(){return c.b.getters.complementosFormComDiario}},methods:{submit:function(){var t=this;return r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validador("formRepetirComprobante");case 2:if(!e.sent){e.next=6;break}t.axios.post("repetir-comprobante-diario",t.comprobante).then(function(e){t.$store.commit(l.b,{msg:"El comprobante de diario se creo correctamente",color:"success"}),t.$store.commit(s.p,{item:e.data,estado:"reload",key:null}),t.$emit("cancelar")}).catch(function(e){t.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+e.response.data.errors,color:"danger"})}),e.next=7;break;case 6:t.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return e.stop()}},e,t)}))()},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},formReset:function(){this.comprobante={fecha:null,comprobanteorigen:null,comdiariodestino:"",nf_comdiario_origen_id:null,nf_tipcomdiario_id:null},this.obtenerComprobanteDestino()},obtenerComprobanteDestino:function(){var t=this;this.axios.get("consecutivo-comdiario").then(function(e){t.comprobante.comdiariodestino=e.data.consecutivo}).catch(function(e){t.$store.commit(l.b,{msg:"Error al obtener el consecutivo "+e.response,color:"danger"})})}},created:function(){this.formReset()},mounted:function(){this.obtenerComprobanteDestino(),this.fechaActual=this.moment().format("YYYY-MM")+"-01"}}}});
//# sourceMappingURL=59.3c5ef60e241dd6287089.js.map