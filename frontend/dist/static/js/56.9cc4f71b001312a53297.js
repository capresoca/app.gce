webpackJsonp([56],{1560:function(n,e,t){var a=t(1561);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(456)("661e7716",a,!0,{})},1561:function(n,e,t){e=n.exports=t(455)(!0),e.push([n.i,".cal-item .btn[data-v-c36b671a]{margin:0 5px;height:28px;width:28px}.cal-item .btn i[data-v-c36b671a]{font-size:22px}.cal-item .card__title[data-v-c36b671a]{padding:16px}.cal-item .list__tile[data-v-c36b671a]{height:unset!important;padding:10px 16px}.cal-item .list__tile .list__tile__action[data-v-c36b671a]{-ms-flex-item-align:start;align-self:flex-start;min-width:unset;padding-right:16px}.cal-item .color-2[data-v-c36b671a]{background-color:#f44336}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/administrativo/pagos/RegistroCxp.vue"],names:[],mappings:"AAw6CA,gCACE,aAAc,AACd,YAAa,AACb,UAAY,CACb,AACD,kCACE,cAAgB,CACjB,AACD,wCACE,YAAkB,CACnB,AACD,uCACE,uBAAwB,AACxB,iBAAmB,CACpB,AACD,2DACE,0BAA2B,AACvB,sBAAuB,AAC3B,gBAAiB,AACjB,kBAAoB,CACrB,AACD,oCACE,wBAA0B,CAC3B",file:"RegistroCxp.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*#inputUsage .layout .flex div {*/\n  /*border: 1px dashed rgba(0,0,0,0.4) !important;*/\n/*}*/\n.cal-item .btn[data-v-c36b671a] {\n  margin: 0 5px;\n  height: 28px;\n  width: 28px;\n}\n.cal-item .btn i[data-v-c36b671a] {\n  font-size: 22px;\n}\n.cal-item .card__title[data-v-c36b671a] {\n  padding: 16px 16px\n}\n.cal-item .list__tile[data-v-c36b671a] {\n  height: unset!important;\n  padding: 10px 16px;\n}\n.cal-item .list__tile .list__tile__action[data-v-c36b671a] {\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  min-width: unset;\n  padding-right: 16px;\n}\n.cal-item .color-2[data-v-c36b671a] {\n  background-color: #F44336;\n}\n"],sourceRoot:""}])},1562:function(n,e,t){"use strict";function a(n){t(1563)}var o=t(987),r=t(1565),i=t(1),l=a,s=i(o.a,r.a,!1,l,"data-v-27660c90",null);e.a=s.exports},1563:function(n,e,t){var a=t(1564);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(456)("37132cba",a,!0,{})},1564:function(n,e,t){e=n.exports=t(455)(!0),e.push([n.i,"","",{version:3,sources:[],names:[],mappings:"",file:"DialogRegistroRp.vue",sourceRoot:""}])},1565:function(n,e,t){"use strict";var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[null===n.mensajeNoRubro&&n.rps.length?t("v-card",[t("v-toolbar",{staticClass:"grey lighten-3 pt-0 pb-0 dense elevation-0"},[t("span",{staticClass:"subheading font-weight-medium",domProps:{textContent:n._s("Asignación de Rubros")}}),n._v(" "),t("v-spacer"),n._v(" "),null===n.estadoCxp||"Registrado"===n.estadoCxp?t("v-btn",{attrs:{icon:""},on:{click:function(e){n.cardDialog=!n.cardDialog}}},[t("v-icon",{attrs:{color:"dark",size:"15px"},domProps:{textContent:n._s("fas fa-"+(n.cardDialog?"chevron-up":"chevron-down"))}})],1):n._e()],1),n._v(" "),t("v-expand-transition",[n.cardDialog?[t("v-form",{attrs:{"data-vv-scope":"formRubroObligacion"}},[t("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm2:"",md2:"",xl2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"RP "+(n.value.rp?"consecutivo":""),items:n.rps,hint:n.value.rp?"Fecha: "+n.moment(n.value.rp.fecha).format("YYYY/MM/DD"):"","persistent-hint":"","item-text":"consecutivo","item-value":"id",name:"RP","no-data-text":"No existen datos","prepend-icon":"library_books",required:"",required:"","return-object":"","error-messages":n.errors.collect("RP")},on:{change:function(e){return n.obtenerRubrosYCdp(e.id)}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s("Fecha: "+n.moment(e.item.fecha).format("YYYY/MM/DD")+" - Periodo: "+e.item.periodo)}}),n._v(" "),t("v-list-tile-sub-title",{domProps:{innerHTML:n._s("Consecutivo: "+n.str_pad(e.item.consecutivo,6))}})],1)]]}}],null,!1,1536232565),model:{value:n.value.rp,callback:function(e){n.$set(n.value,"rp",e)},expression:"value.rp"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm4:"",md4:"",xl4:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Rubro "+(n.value.rubro?"No. "+n.value.rubro.codigo:""),items:n.rubrosRp,filter:n.filterRubros,hint:n.value.rubro&&n.value.tipo_gasto?"Tipo Gasto: "+n.value.tipo_gasto.nombre:"","persistent-hint":"","item-text":"nombre","item-value":"id",name:"rubro","no-data-text":"No existen datos","prepend-icon":"subtitles",disabled:!n.value.rp,"return-object":"","error-messages":n.errors.collect("rubro"),clearable:""},on:{change:function(e){return n.obtenerRubro()}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s(e.item.nombre)}}),n._v(" "),t("v-list-tile-sub-title",{domProps:{innerHTML:n._s(e.item.codigo)}})],1)]]}}],null,!1,3181165253),model:{value:n.value.rubro,callback:function(e){n.$set(n.value,"rubro",e)},expression:"value.rubro"}})],1),n._v(" "),t("v-flex",{staticClass:"pt-0",attrs:{xs12:"",sm3:""}},[t("input-detail-flex",{attrs:{label:"Valor disponible",prependIcon:"money",text:n._f("numberFormat")(n.value.saldo_por_obligar,0,"$")}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm3:""}},[t("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|max_value:"+n.value.saldo_por_obligar,expression:"'required|max_value:' + value.saldo_por_obligar"}],attrs:{label:"Saldo",name:"saldo",precision:0,"prepend-icon":"attach_money","error-messages":n.errors.collect("saldo")},model:{value:n.value.valor,callback:function(e){n.$set(n.value,"valor",n._n(e))},expression:"value.valor"}})],1),n._v(" "),t("v-flex",{staticClass:"text-xs-right grey lighten-3 pt-0 pb-0",attrs:{xs12:""}},[t("v-btn",{staticClass:"mr-0 mt-0 mb-0",attrs:{flat:"",small:"",color:"primary",dark:""},on:{click:function(e){return e.preventDefault(),n.agregar(e)}}},[t("v-icon",{attrs:{size:"14px",color:"cyan"},domProps:{textContent:n._s("fas fa-plus")}}),n._v("\n                     \n                    "),t("span",{domProps:{textContent:n._s(n.value.index?"Actualizar":"Agregar")}})],1)],1)],1)],1)],1)]:n._e()],2),n._v(" "),n.openTable?t("v-data-table",{attrs:{headers:n.headers,items:n.dataTableDetails,"hide-actions":"","rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},scopedSlots:n._u([{key:"items",fn:function(e){return[t("td",[n._v(n._s(e.item.cdp.consecutivo))]),n._v(" "),t("td",[n._v(n._s(e.item.rp.consecutivo))]),n._v(" "),t("td",[t("span",{domProps:{innerHTML:n._s("<b>"+e.item.rubro.codigo+"</b> - "+e.item.rubro.nombre)}})]),n._v(" "),t("td",[n._v(n._s(e.item.tipo_gasto.nombre))]),n._v(" "),t("td",[n._v(n._s(e.item.rp.fecha))]),n._v(" "),t("td",{staticClass:"text-xs-right"},[n._v(n._s(n.currency(e.item.saldo_por_obligar)))]),n._v(" "),t("td",{staticClass:"text-xs-right"},[n._v(n._s(n._f("numberFormat")(e.item.valor,0,"$")))]),n._v(" "),t("td",[null===n.estadoCxp||"Registrado"===n.estadoCxp?t("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(t){n.$set(e.item,"show",t)},expression:"props.item.show"}},[t("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(t){n.$set(e.item,"show",t)},expression:"props.item.show"}},[t("v-icon",[n._v("chevron_left")]),n._v(" "),t("v-icon",[n._v("close")])],1),n._v(" "),t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(t){return n.editarDetalle(e.index,e.item)}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"}},[n._v("mode_edit")])],1),n._v(" "),t("span",[n._v("Editar")])],1)],1):t("div",[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",icon:"",small:"",fab:""},on:{click:function(t){t.preventDefault(),n.$store.commit("NAV_ADD_ITEM",{ruta:"registroObligaciones",titulo:"Visor de Obligación",parametros:{entidad:{id:e.item.pr_obligacion_id},tabOrigin:n.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[t("v-icon",{attrs:{color:"teal"},domProps:{textContent:n._s("fas fa-paperclip")}})],1),n._v(" "),t("span",{domProps:{textContent:n._s("Ir a la Obligación")}})],1)],1)],1)]}}],null,!1,3878068404)}):n._e()],1):null!==n.mensajeNoRubro?t("v-flex",{staticClass:"pa-0"},[t("v-expand-transition",[[t("v-alert",{attrs:{value:!0,color:"orange",icon:"priority_high",outline:""}},[t("span",{domProps:{innerHTML:n._s(""+n.mensajeNoRubro)}})])]],2)],1):n._e()],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},1566:function(n,e,t){"use strict";var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:n.dialog,callback:function(e){n.dialog=e},expression:"dialog"}},[t("v-card",[t("v-card-text",{staticClass:"title font-weight-light"},[n._v("¿Esta seguro que desea confirmar el estado de la cuenta?")]),n._v(" "),t("v-card-actions",[t("v-spacer"),n._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(e){return n.confirmarEstado()}}},[n._v("No")]),n._v(" "),t("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),n.confirmarEstado("yesConfirmar")}}},[n._v("Si")])],1)],1)],1),n._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:n.dialog2,callback:function(e){n.dialog2=e},expression:"dialog2"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3"},[t("span",{staticClass:"title"},[n._v("¿Qué desea hacer?")])]),n._v(" "),t("v-container",{attrs:{fluid:""}},[t("v-layout",{staticClass:"justify-center",attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs4:""}},[t("v-checkbox",{staticClass:"shrink mr-2",attrs:{color:"teal","off-icon":"done","on-icon":"done_all",default:"",value:"Confirmado"==n.cxp.estado,disabled:"Anulado"==n.cxp.estado,label:"Anulado"!=n.cxp.estado?"Confirmar":"Anulado","hide-details":""},model:{value:n.confirmar,callback:function(e){n.confirmar=e},expression:"confirmar"}})],1),n._v(" "),t("v-flex",{attrs:{xs4:""}},[null!=n.cxp.id?t("v-checkbox",{staticClass:"shrink mr-2",attrs:{color:"black","off-icon":"far fa-file-pdf","on-icon":"far fa-file-pdf","hide-details":"",label:"Imprimir"},model:{value:n.imprime,callback:function(e){n.imprime=e},expression:"imprime"}}):n._e()],1)],1)],1),n._v(" "),t("v-card-actions",[t("v-spacer"),n._v(" "),t("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return n.enviarCambio()}}},[n._v("Aceptar")])],1)],1)],1),n._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:n.dialog3,callback:function(e){n.dialog3=e},expression:"dialog3"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3"},[t("v-card-text",{staticClass:"title"},[n._v("¿Por qué anula esta cuenta?")])],1),n._v(" "),t("v-container",{attrs:{fluid:""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[t("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:n.detalle_anulacion,callback:function(e){n.detalle_anulacion=e},expression:"detalle_anulacion"}},[t("div",{attrs:{slot:"label"},slot:"label"},[n._v("\n                    Detalle de anulación\n                  ")])])],1)],1)],1),n._v(" "),t("v-card-actions",[t("v-spacer"),n._v(" "),t("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return n.esAnulado(n.cxp,n.detalle_anulacion)}}},[n._v("Enviar")])],1)],1)],1)],1),n._v(" "),t("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[t("v-toolbar-title",[n._v(" "+n._s(n.tapTitulo)+" ")]),n._v("  \n      "),n._v(" "),t("v-spacer"),n._v(" "),null!=n.cxp.id?t("h2",{staticClass:"title"},[n._v("Cuenta por Pagar")]):n._e(),n._v(" "),null!=n.cxp.id?t("div",[t("v-chip",{attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[t("span",{staticClass:"subheading"},[n._v("N°")]),n._v(" \n          "),t("span",{staticClass:"subheading",domProps:{textContent:n._s(null==n.cxp.consecutivo?"0000":n.str_pad(n.cxp.consecutivo,8))}})]),n._v(" "),n.cxp.id&&null!==n.cxp.estado?t("v-chip",{attrs:{color:n.colorEstado,"text-color":"white"}},[t("v-avatar",[t("v-icon",[n._v(n._s(n.iconoEstado))])],1),n._v("\n          "+n._s(n.cxp.estado)+"\n        ")],1):n._e()],1):n._e()],1),n._v(" "),t("registro-niif",{attrs:{value:n.dialogFormNiif,cue:n.cuentaNiff},on:{cancelar:function(e){n.dialogFormNiif=!1},crear:function(e){return n.goNiif(e)}}}),n._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("v-card",[t("v-form",{attrs:{"data-vv-scope":"formPrincipal"}},[t("v-container",{attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",xl4:""}},[t("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por nombre o número de documento.",hint:"tercero.nombre_completo","item-text":"tercero.identificacion_completa","data-title":"tercero.identificacion_completa","data-subtitle":"tercero.nombre_completo",label:null==n.cxp.pg_proveedore_id?"proveedor":"Proveedor",entidad:"pg_proveedores",preicon:"local_shipping",name:"proveedor",rules:"required",noBtnCreate:"Confirmado"===n.cxp.estado,"btn-create-truncate":"","error-messages":n.errors.collect("proveedor"),clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado,disabled:"Confirmado"===n.cxp.estado},on:{changeid:function(e){return n.cxp.pg_proveedore_id=e},create:function(e){return n.openCreateProveedor(e)}},model:{value:n.cxp.proveedor,callback:function(e){n.$set(n.cxp,"proveedor",e)},expression:"cxp.proveedor"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md5:"",xl5:""}},[t("postulador",{ref:"buscarCuenta",attrs:{nodata:"Busqueda por código o nombre.",required:"",hint:"nombre",itemtext:"codigo",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:n.cxp.nf_niif_id?"Cuenta":"cuenta",scope:"formPrincipal",entidad:"niifs",preicon:"list_alt",routeparams:"nivel:auxiliar=1",value:n.cxp.niif,clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado,btnplustruncate:"",disabled:"Confirmado"===n.cxp.estado},on:{change:function(e){return n.cxp.nf_niif_id=e},objectReturn:function(e){return n.cxp.niif=e},click:function(e){return n.openNuevaNiif(1)}}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",lg3:""}},[t("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px",disabled:"Confirmado"===n.cxp.estado},model:{value:n.menuDate,callback:function(e){n.menuDate=e},expression:"menuDate"}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha causación","prepend-icon":"event",readonly:"",disabled:"Confirmado"===n.cxp.estado,name:"fecha causación",required:"","error-messages":n.errors.collect("fecha causación")},slot:"activator",model:{value:n.computedDateFormatted,callback:function(e){n.computedDateFormatted=e},expression:"computedDateFormatted"}}),n._v(" "),t("v-date-picker",{attrs:{locale:"es","no-title":"",max:n.maxDate},on:{input:function(e){n.menuDate=!1},change:function(){var e=n.$validator.errors.items.findIndex(function(n){return"fecha causación"===n.field});n.$validator.errors.items.splice(-1!==e?e:0,-1!==e?1:0)}},model:{value:n.cxp.fecha_causacion,callback:function(e){n.$set(n.cxp,"fecha_causacion",e)},expression:"cxp.fecha_causacion"}})],1)],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",xl4:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Centro de Costo",items:n.complementos.cencostos,"item-value":"id","item-text":"nombre",name:"centro de costo",required:"",disabled:n.cxp.niif?1!==n.cxp.niif.maneja_ccosto||"Confirmado"===n.cxp.estado:null,"error-messages":n.errors.collect("centro de costo"),"return-object":"",clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado},on:{change:function(e){return n.cxp.nf_cencosto_id=e?e.id:null}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s(e.item.nombre)}})],1)]]}}]),model:{value:n.cxp.cencosto,callback:function(e){n.$set(n.cxp,"cencosto",e)},expression:"cxp.cencosto"}})],1),n._v(" "),"CXP"!==n.cxp.modulo?t("v-flex",{attrs:{xs12:"",sm12:"",md2:"",xl2:""}},[t("v-select",{attrs:{items:n.modulos,disabled:"",label:"Módulo"},model:{value:n.cxp.modulo,callback:function(e){n.$set(n.cxp,"modulo",e)},expression:"cxp.modulo"}})],1):n._e(),n._v(" "),t("v-flex",{class:{"md5 xl5":"CXP"===n.cxp.modulo},attrs:{xs12:"",sm12:"",md3:"",xl3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:20|not_in:"+n.numeroFacturaResgistrado,expression:"'required|max:20|not_in:' + numeroFacturaResgistrado"}],key:"factura",attrs:{prefix:null!==n.cxp.no_factura&&""!==n.cxp.no_factura?"N°":"",name:"factura",disabled:!n.cxp.pg_proveedore_id||"Confirmado"===n.cxp.estado,"error-messages":n.errors.collect("factura"),label:"No. Factura"},model:{value:n.cxp.no_factura,callback:function(e){n.$set(n.cxp,"no_factura",e)},expression:"cxp.no_factura"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",xl3:""}},[t("v-menu",{ref:"menuDate2",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"",disabled:"Confirmado"===n.cxp.estado,"full-width":"","max-width":"290px","min-width":"290px"},model:{value:n.menuDate2,callback:function(e){n.menuDate2=e},expression:"menuDate2"}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha factura","prepend-icon":"event",readonly:"",disabled:"Confirmado"===n.cxp.estado,name:"fecha factura",required:"","error-messages":n.errors.collect("fecha factura")},slot:"activator",model:{value:n.computedDateFormatted2,callback:function(e){n.computedDateFormatted2=e},expression:"computedDateFormatted2"}}),n._v(" "),t("v-date-picker",{attrs:{locale:"es","no-title":"",max:n.maxDate},on:{input:function(e){n.menuDate2=!1},change:function(){var e=n.$validator.errors.items.findIndex(function(n){return"fecha factura"===n.field});n.$validator.errors.items.splice(-1!==e?e:0,-1!==e?1:0)}},model:{value:n.cxp.fecha_factura,callback:function(e){n.$set(n.cxp,"fecha_factura",e)},expression:"cxp.fecha_factura"}})],1)],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",md3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"plazo",attrs:{label:"Plazo",step:0,type:"number",required:"",name:"plazo",disabled:"Confirmado"===n.cxp.estado,"error-messages":n.errors.collect("plazo"),suffix:n.plazo?1!==n.plazo?"días":"día":""},model:{value:n.plazo,callback:function(e){n.plazo=n._n(e)},expression:"plazo"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",xl3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{value:n.computedDateFormatted3,label:"Fecha Vencimiento","prepend-icon":"event",disabled:"",name:"fecha vencimiento",required:"","error-messages":n.errors.collect("fecha vencimiento")}})],1),n._v(" "),t("v-flex",{staticClass:"pt-1 pb-0",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[t("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"observaciones",attrs:{"auto-grow":"",rows:"1",color:"primary",disabled:"Confirmado"===n.cxp.estado,name:"observaciones",required:"","error-messages":n.errors.collect("observaciones")},model:{value:n.cxp.observaciones,callback:function(e){n.$set(n.cxp,"observaciones",e)},expression:"cxp.observaciones"}},[t("div",{attrs:{slot:"label"},slot:"label"},[n._v("\n                        Observaciones\n                      ")])])],1),n._v(" "),n.cxp.detalles.length>0?[t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",xl4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{prefix:0!==n.debito?"$":"",value:n._f("numberFormat")(n.valorTotal,2),name:"valor a pagar",required:"",readonly:"","error-messages":n.errors.collect("valor a pagar"),label:"Valor a pagar"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",xl4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{prefix:0!==n.debito?"$":"",value:n._f("numberFormat")(n.debito,2),name:"valor débito",required:"",readonly:"","error-messages":n.errors.collect("valor débito"),label:"Valor débito"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",xl4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{prefix:0!==n.credito?"$":"",value:n._f("numberFormat")(n.credito,2),name:"valor crédito",required:"",readonly:"","error-messages":n.errors.collect("valor crédito"),label:"Valor crédito"}})],1)]:n._e()],2)],1)],1),n._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",sm12:"",md12:"",lg12:""}},["Registrado"===n.cxp.estado||null===n.cxp.estado?t("v-btn",{staticClass:"mr-0 mt-0",attrs:{small:"",color:"primary",dark:""},on:{click:n.openCardDialog}},[n._v("Agregar Detalle")]):n._e(),n._v(" "),t("v-slide-x-reverse-transition",[t("v-card",{directives:[{name:"show",rawName:"v-show",value:n.cardDialog,expression:"cardDialog"}]},[t("v-card-title",{staticClass:"grey lighten-3"},[t("span",{staticClass:"title"},[n._v(n._s(n.tituloDetalle)+" ")])]),n._v(" "),t("v-form",{attrs:{"data-vv-scope":"formDetalle"}},[t("v-container",{attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:null===n.detalle.pg_conpago_id?"Buscar concepto":"Concepto",items:n.complementos.conpagos,"item-value":"id","item-text":"codigo_nombre",hint:n.detalle.conpago?"Naturaleza: "+n.detalle.conpago.niif.clascuenta.naturaleza:"","persistent-hint":"",name:"concepto",required:"",disabled:"Confirmado"===n.cxp.estado,"error-messages":n.errors.collect("concepto"),"return-object":"",clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado},on:{change:function(e){return n.detalle.pg_conpago_id=e?e.id:null}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s(e.item.codigo)}}),n._v(" "),t("v-list-tile-sub-title",{domProps:{innerHTML:n._s(e.item.nombre)}})],1)]]}}]),model:{value:n.detalle.conpago,callback:function(e){n.$set(n.detalle,"conpago",e)},expression:"detalle.conpago"}},[n._v(" "),[t("v-slide-x-reverse-transition",{attrs:{slot:"append-outer",mode:"out-in"},slot:"append-outer"},[t("v-icon",{attrs:{color:n.detalle.pg_conpago_id?"success":"info"},domProps:{textContent:n._s(n.detalle.pg_conpago_id?"info":"")},on:{click:function(e){n.dialogInfoConcepto=!n.dialogInfoConcepto}}})],1)]],2)],1),n._v(" "),null!=n.detalle.pg_conpago_id?t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[t("v-slide-x-transition",[t("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por código o nombre.",hint:"nombre","item-text":"codigo","data-title":"codigo","data-subtitle":"nombre",label:n.detalle.nf_niif_id?"Cuenta":"cuenta",entidad:"niifs","route-params":"nivel:auxiliar=1",preicon:"business_center",name:"cuenta de deficit","error-messages":n.errors.collect("cuenta"),disabled:"Confirmado"===n.cxp.estado,btnCreateTruncate:"","min-characters-search":2,clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado},on:{changeid:function(e){return n.detalle.nf_niif_id=e},create:function(e){return n.openNuevaNiif(2)}},model:{value:n.detalle.niif,callback:function(e){n.$set(n.detalle,"niif",e)},expression:"detalle.niif"}})],1)],1):n._e(),n._v(" "),null!=n.detalle.pg_conpago_id?t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[t("v-slide-y-transition",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[t("postulador",{ref:"postulaTercero",attrs:{nodata:"Busqueda por nombre o número de documento.",required:"",disabled:n.detalle.conpago&&n.detalle.niif?!n.detalle.conpago.niif.maneja_tercero&&!n.detalle.niif.maneja_tercero||"Registrado"!==n.cxp.estado&&null!==n.cxp.estado:null,hint:"nombre_completo",itemtext:"identificacion_completa",datatitle:"identificacion_completa",datasubtitle:"nombre_completo",filter:"identificacion_completa,nombre_completo",label:null==n.detalle.gn_tercero_id?"tercero":"Tercero",scope:"formDetalle",entidad:"terceros",preicon:"person",value:n.detalle.tercero,clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado},on:{change:function(e){return n.detalle.gn_tercero_id=e},objectReturn:function(e){return n.detalle.tercero=e}}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Centro de Costo",items:n.complementos.cencostos,"item-value":"id","item-text":"nombre",name:"centro de costo",required:"",disabled:n.detalle.niif?1!==n.detalle.niif.maneja_ccosto||"Registrado"!==n.cxp.estado&&null!==n.cxp.estado:"","error-messages":n.errors.collect("centro de costo"),"return-object":"",clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado},on:{change:function(e){return n.detalle.nf_cencosto_id=e?e.id:null}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s(e.item.nombre)}})],1)]]}}],null,!1,3069282642),model:{value:n.detalle.cencosto,callback:function(e){n.$set(n.detalle,"cencosto",e)},expression:"detalle.cencosto"}})],1)],1)],1)],1):n._e(),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",xl6:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:null===n.detalle.pg_uniapoyo_id?"Buscar unidad de apoyo":"Unidad de apoyo",items:n.complementos.uniapoyos,"item-value":"id","item-text":"codigo",name:"unidad de apoyo",hint:n.detalle.uniapoyo?"Unidad: "+n.detalle.uniapoyo.nombre:"","persistent-hint":"",required:"",disabled:"Confirmado"===n.cxp.estado,"error-messages":n.errors.collect("unidad de apoyo"),"return-object":"",clearable:"Registrado"===n.cxp.estado||null===n.cxp.estado},on:{change:function(e){return n.detalle.pg_uniapoyo_id=e?e.id:null}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s(e.item.codigo)}}),n._v(" "),t("v-list-tile-sub-title",{domProps:{innerHTML:n._s(e.item.nombre)}})],1)]]}}]),model:{value:n.detalle.uniapoyo,callback:function(e){n.$set(n.detalle,"uniapoyo",e)},expression:"detalle.uniapoyo"}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",xl3:""}},[(n.detalle.niif?"Retencion"!==n.detalle.niif.tipo:null)?t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor",attrs:{prefix:null!==n.detalle.valor&&""!==n.detalle.valor?"$":"",name:"valor",required:"",min:"0",disabled:!n.detalle.pg_conpago_id||"Confirmado"===n.cxp.estado,"error-messages":n.errors.collect("valor"),label:"Valor"},model:{value:n.detalle.valor,callback:function(e){n.$set(n.detalle,"valor",n._n(e))},expression:"detalle.valor"}}):t("v-text-field",{attrs:{label:"Valor",prefix:null!==n.detalle.valor&&""!==n.detalle.valor?"$":"",value:n._f("numberFormat")(n.detalle.valor,2),min:"0",readonly:"",disabled:!n.detalle.pg_conpago_id||"Confirmado"===n.cxp.estado}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md3:"",xl3:""}},[t("v-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-0",attrs:{disabled:"Confirmado"===n.cxp.estado,name:"naturaleza","error-messages":n.errors.collect("naturaleza")},model:{value:n.detalle.naturaleza,callback:function(e){n.$set(n.detalle,"naturaleza",e)},expression:"detalle.naturaleza"}},[t("v-radio",{attrs:{label:"Débito",value:1}}),n._v(" "),t("v-radio",{attrs:{label:"Crédito",value:0}})],1)],1),n._v(" "),(n.detalle.niif?"Retencion"===n.detalle.niif.tipo:null)?t("v-flex",{staticClass:"pl-0 pr-0",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[t("v-slide-y-transition",[t("v-card",{staticClass:"elevation-0"},[t("v-card-title",{staticClass:"grey lighten-2"},[t("span",{staticClass:"title"},[n._v("Concepto de Retención")])]),n._v(" "),t("v-container",{staticClass:"pa-3",attrs:{fluid:"","grid-list-md":"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",xl4:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:null===n.detalle.nf_conrtf_id?"Buscar concepto de retención":"Retención",items:n.complementos.conrtfs,"item-value":"id","item-text":"codigo_nombre",name:"concepto de retención",required:"",disabled:"Confirmado"===n.cxp.estado,"error-messages":n.errors.collect("concepto de retención"),"return-object":"",clearable:""},on:{change:function(e){return n.detalle.nf_conrtf_id=e?e.id:null}},scopedSlots:n._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:n._s(e.item.codigo_nombre)}})],1)]]}}],null,!1,2902909700),model:{value:n.detalle.conrtf,callback:function(e){n.$set(n.detalle,"conrtf",e)},expression:"detalle.conrtf"}})],1),n._v(" "),t("v-flex",{attrs:{xs6:"",sm6:"",md2:"",xl2:""}},[t("v-text-field",{attrs:{readonly:"",disabled:"Confirmado"===n.cxp.estado,value:n.detalle.conrtf?n.detalle.conrtf.porcentaje:null,suffix:"%",label:"Porcentaje"}})],1),n._v(" "),t("v-flex",{attrs:{xs6:"",sm6:"",md3:"",xl3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor base",attrs:{prefix:"$",label:"Valor Base",disabled:!n.detalle.conrtf||(null===n.detalle.conrtf.porcentaje||"Registrado"!==n.cxp.estado&&null!==n.cxp.estado),required:"",name:"valor base","error-messages":n.errors.collect("valor base")},model:{value:n.valorBase,callback:function(e){n.valorBase=e},expression:"valorBase"}})],1),n._v(" "),t("v-flex",{attrs:{xs6:"",sm6:"",md3:"",xl3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"valor retención",attrs:{prefix:"$",label:"Valor retención",value:n._f("numberFormat")(n.valorRetencion,2),required:"",disabled:"Confirmado"===n.cxp.estado,readonly:"",name:"valor retención","error-messages":n.errors.collect("valor retención")}})],1)],1)],1)],1)],1)],1):n._e()],1)],1),n._v(" "),t("v-card-actions",[t("v-divider"),n._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(e){return n.dialogDetalle()}}},[n._v("Cerrar")]),n._v(" "),"Registrado"===n.cxp.estado||null===n.cxp.estado?t("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){return e.preventDefault(),n.agregarCxpDetalle(n.detalle)}}},[n._v(n._s("number"!=typeof n.detalle.index?"Agregar":"Actualizar"))]):n._e()],1)],1)],1)],1)],1),n._v(" "),t("v-dialog",{attrs:{width:"600px"},model:{value:n.dialogInfoConcepto,callback:function(e){n.dialogInfoConcepto=e},expression:"dialogInfoConcepto"}},[t("v-card",{staticClass:"cal-item"},[t("v-card-title",{staticClass:"grey lighten-2"},[t("v-icon",[n._v("info")]),n._v(" "),t("h4",{staticClass:"title"},[n._v(" Información del Concepto")]),n._v(" "),t("v-spacer"),n._v(" "),t("v-icon",{on:{click:function(e){n.dialogInfoConcepto=!1}}},[n._v("close")])],1),n._v(" "),t("v-divider"),n._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",md7:""}},[t("v-text-field",{attrs:{label:"Nombre concepto",readonly:"","persistent-hint":"",hint:"código: "+(n.detalle.conpago?n.detalle.conpago.codigo:""),value:n.detalle.conpago?n.detalle.conpago.nombre:""}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",md5:""}},[t("v-text-field",{attrs:{label:"Código cuenta",readonly:"",value:n.detalle.conpago?n.detalle.conpago.niif.codigo:""}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",md12:""}},[t("v-text-field",{attrs:{label:"Nombre cuenta",readonly:"",value:n.detalle.conpago?n.detalle.conpago.niif.nombre:""}})],1),n._v(" "),t("v-flex",{attrs:{xs12:"",md6:""}},[t("v-text-field",{attrs:{label:"Naturaleza",readonly:"",value:n.detalle.conpago?n.detalle.conpago.niif.clascuenta.naturaleza:""}})],1)],1)],1)],1)],1),n._v(" "),t("v-dialog",{attrs:{"max-width":"400"},model:{value:n.dialogEliminar,callback:function(e){n.dialogEliminar=e},expression:"dialogEliminar"}},[t("v-card",[t("v-card-text",{staticClass:"title font-weight-light"},[n._v("¿Desea eliminar el detalle de la cuenta?")]),n._v(" "),t("v-card-actions",[t("v-spacer"),n._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(e){n.dialogEliminar=!1}}},[n._v("No")]),n._v(" "),t("v-btn",{attrs:{color:"primary"},on:{click:function(e){return n.eliminarDetalle(n.detalle)}}},[n._v("Si")])],1)],1)],1),n._v(" "),n.cxp.detalles.length?t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("v-expand-transition",[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3"},[t("h3",[n._v("Detalles de la Cuenta")])]),n._v(" "),t("v-divider"),n._v(" "),t("v-data-table",{attrs:{headers:n.saldoInicial?n.headerSaldoInicial:n.headers,items:n.cxp.detalles,loading:n.tableLoading,pagination:n.pagination,"hide-actions":"","rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(e){n.pagination=e}},scopedSlots:n._u([{key:"items",fn:function(e){return[n.saldoInicial?[t("td",{staticClass:"text-xs-left",domProps:{innerHTML:n._s("<b>"+(e.item.niif?e.item.niif.codigo:"")+"</b> - "+(e.item.niif?e.item.niif.nombre:""))}}),n._v(" "),t("td",{staticClass:"text-xs-left",domProps:{innerHTML:n._s("<b>"+(e.item.tercero?e.item.tercero.identificacion_completa:"")+"</b> | "+(e.item.tercero?e.item.tercero.nombre_completo:""))}}),n._v(" "),t("td",{staticClass:"text-xs-center"},[n._v(n._s(0===e.item.naturaleza?"Crédito":"Débito"))])]:[t("td",{staticClass:"text-xs-left"},[n._v(n._s(e.item.conpago.codigo+" - "+e.item.conpago.nombre))]),n._v(" "),t("td",{staticClass:"text-xs-center"},[n._v(n._s(0===e.item.naturaleza?"Crédito":"Débito"))]),n._v(" "),t("td",{staticClass:"text-xs-left",domProps:{innerHTML:n._s("<b>"+(e.item.niif?e.item.niif.codigo:"")+"</b> - "+(e.item.niif?e.item.niif.nombre:""))}}),n._v(" "),t("td",{staticClass:"text-xs-left"},[n._v(n._s(e.item.uniapoyo.nombre))]),n._v(" "),t("td",{staticClass:"text-xs-center"},[n._v(n._s(e.item.cencosto?e.item.cencosto.codigo:""))])],n._v(" "),t("td",{staticClass:"text-xs-right"},[n._v(n._s(n.currency(e.item.valor)))]),n._v(" "),n.saldoInicial?n._e():t("td",{staticClass:"text-xs-center"},[t("v-layout",{staticClass:"d-flex"},[t("div",{staticClass:"d-inline-block"},[t("v-btn",{staticClass:"mx-0",attrs:{icon:"",fab:"",small:""},on:{click:function(t){return n.editarDetalle(e.index,e.item)}}},[t("v-icon",{attrs:{color:"accent"},domProps:{textContent:n._s("Registrado"===n.cxp.estado||null===n.cxp.estado?"edit":"fas fa-eye")}})],1)],1),n._v(" "),t("div",{staticClass:"d-inline-block"},["Registrado"===n.cxp.estado||null===n.cxp.estado?t("v-btn",{staticClass:"mx-0",attrs:{icon:"",fab:"",small:""},on:{click:function(t){return n.preguntarEliminarDetalle(e.item)}}},[t("v-icon",{attrs:{color:"accent"}},[n._v("delete")])],1):n._e()],1)])],1)]}},{key:"pageText",fn:function(e){return[n._v("\n                          "+n._s(e.pageStart)+" - "+n._s(e.pageStop)+" de "+n._s(e.itemsLength)+"\n                        ")]}}],null,!1,1001759333)},[n._v(" "),t("template",{slot:"no-data"},[n.tableLoading?t("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[n._v("\n                            Lo sentimos, no tenemos registros para mostrar. "),t("v-icon",[n._v("sentiment_very_dissatisfied")])],1):t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[n._v("\n                            Estamos cargando los registros. "),t("v-icon",[n._v("sentiment_satisfied_alt")])],1)],1)],2)],1)],1)],1):n._e(),n._v(" "),"Saldo Inicial"!==n.cxp.modulo?t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("dialog-registro-rp",{attrs:{tercero:n.cxp.tercero,"data-table-details":n.cxp.rubrosDetalles,"estado-cxp":n.cxp.estado},on:{agregar:function(e){return n.add(e)},cancelar:n.formReset,total_detalles:function(e){return n.cxp.valor_obligacion_header=e},editar:function(e){n.rubroDetalleObligacion=e.detalle,n.rubroDetalleObligacion.index=e.index}},model:{value:n.rubroDetalleObligacion,callback:function(e){n.rubroDetalleObligacion=e},expression:"rubroDetalleObligacion"}})],1):n._e()],1)],1)],1)],1)],1)],1),n._v(" "),t("v-card",[t("v-divider"),n._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[t("v-btn",{on:{click:function(e){return n.refresh(null)}}},[n._v("Limpiar")])],1),n._v(" "),t("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[t("v-btn",{on:{click:function(e){return n.close()}}},[n._v("Cancelar")]),n._v(" "),"Registrado"===n.cxp.estado||null===n.cxp.estado?t("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),n.confirmarSave(e)}}},[n._v("Guardar")]):n._e()],1)],1)],1)],1)],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},502:function(n,e,t){"use strict";function a(n){t(1560)}Object.defineProperty(e,"__esModule",{value:!0});var o=t(986),r=t(1566),i=t(1),l=a,s=i(o.a,r.a,!1,l,"data-v-c36b671a",null);e.default=s.exports},986:function(n,e,t){"use strict";var a=t(13),o=t.n(a),r=t(14),i=t.n(r),l=t(7),s=t.n(l),c=t(249),d=t.n(c),u=t(40),p=t(248),v=t(12),m=t(59),f=t(1562);e.a={name:"RegistroCxp",components:{DialogRegistroRp:f.a,PostuladorV2:function(){return new Promise(function(n){n()}).then(t.bind(null,61))},RegistroNiif:function(){return t.e(0).then(t.bind(null,457))},Postulador:function(){return t.e(287).then(t.bind(null,747))}},props:["parametros"],data:function(){return{cxps:[],cxp:{},cxpEdicion:{id:null,consecutivo:null,fecha_causacion:this.moment().format("YYYY-MM-DD"),pg_proveedore_id:null,no_factura:null,fecha_factura:this.moment().format("YYYY-MM-DD"),fecha_vencimiento:null,nf_niif_id:null,gn_tercero_id:null,nf_cencosto_id:null,cxp_plazo:null,observaciones:null,modulo:null,estado:null,proveedor:null,tercero:null,niif:null,cencosto:null,valor_obligacion_header:0,detalles:[],rubrosDetalles:[]},plazo:null,cuentaNiff:null,dialogFormNiif:!1,valoresCuenta:{},dialogInfoConcepto:!1,niifNueva:null,maxDate:this.moment().format("YYYY-MM-DD"),pagination:{},modulos:["CXP","Inventarios","Saldo Inicial","Activos Fijos"],estados:["Registrado","Confirmado","Anulado"],detalle:{},rubroDetalleObligacion:{},dialogEliminar:!1,detalle_anulacion:null,registrar:!1,confirmar:!1,dialog:!1,dialog2:!1,dialog3:!1,menuDate:!1,menuDate2:!1,menuDate3:!1,numeroFacturaResgistrado:null,debito:0,credito:0,valorTotal:0,date:null,cardDialog:!1,imprime:!1,tableLoading:!1,descriptionLimit:60,auxiliar:{},valorBase:0,valorFacturado:null,valorRetencion:0,keyProveedor:null,headerSaldoInicial:[{text:"Cuenta",align:"left",sortable:!1,value:""},{text:"Tercero",align:"left",sortable:!1,value:""},{text:"Naturaleza",align:"center",sortable:!1,value:""},{text:"Valor",align:"center",sortable:!1,value:""},{text:"Sin Acción",align:"center",sortable:!1,value:"id",width:"100px"}],headers:[{text:"Concepto",align:"left",sortable:!1,value:"",width:"180px"},{text:"Naturaleza",align:"center",sortable:!1,value:""},{text:"Cuenta",align:"left",sortable:!1,value:""},{text:"Unidad de Apoyo",align:"left",sortable:!1,value:"pg_uniapoyo_id"},{text:"Centro de Costo",align:"center",sortable:!1,value:"nf_cencosto_id"},{text:"Valor",align:"center",sortable:!1,value:"valor",width:"150px"},{text:"Opciones",align:"center",sortable:!1,value:"id",width:"100px"}]}},watch:{"cxp.proveedor":function(n){n?(this.cxp.niif=n.niif,this.cxp.tercero=n?n.tercero:null,this.cxp.gn_tercero_id=this.cxp.tercero.id,this.plazo=n.plazo):(this.cxp.niif=null,this.cxp.tercero=null,this.cxp.gn_tercero_id=null,this.plazo=null)},"cxp.cencosto":function(n){null!==n&&null!==this.cxp.niif&&null!=this.cxp.proveedor&&0!==this.cxp.niif.maneja_ccosto&&0!==this.cxp.proveedor.niif.maneja_ccosto||this.$validator.reset()},"cxp.detalles":function(n){var e=this;if(this.debito=0,this.credito=0,n.forEach(function(n){0!==n.naturaleza?e.debito=e.debito+n.valor:e.credito=e.credito+n.valor}),this.valorTotal=this.debito-this.credito,!(this.valorTotal<0))return this.valorTotal;this.valorTotal=0},plazo:function(n){this.cxp.fecha_vencimiento=this.moment(this.cxp.fecha_factura).add(n,"d").format("YYYY-MM-DD"),this.cxp.cxp_plazo=n},"detalle.conpago":function(n){if(null===n)this.$validator.reset(),this.formReset();else{var e=this.detalle.niif;"number"==typeof this.detalle.index&&e.id!==n.niif.id||(this.detalle.niif=n?n.niif:null,this.detalle.nf_niif_id=n?n.niif.id:null)}},"detalle.niif":function(n){this.detalle.tercero=n&&n.maneja_tercero?this.cxp.proveedor.tercero:null,this.detalle.cencosto=n&&n.maneja_ccosto?this.detalle.cencosto:null;var e=this.detalle.naturaleza;this.detalle.naturaleza=n&&"Retención"===n.tipo?0:e},"detalle.tercero":function(n){null===n&&this.$validator.reset()},"detalle.uniapoyo":function(n){null===n&&this.$validator.reset()},"detalle.conrtf":function(n){null===n&&this.$validator.reset()},valorBase:function(n){if(n){var e=this.detalle.conrtf?this.detalle.conrtf.porcentaje:null;this.valorRetencion=n*(e/100),this.detalle.valor=this.valorRetencion,this.detalle.retencion=parseFloat(n)}},stateItem:function(n){n.key===this.keyProveedor&&(this.cxp.proveedor=n.item)},dialogFormNiif:function(n){n||(this.niifNueva=null)}},computed:{tituloDetalle:function(){return this.detalle.id?("Registrado"===this.cxp.estado||null===this.cxp.estado?"En Edición del":"Visualizando")+" Detalle con Cuenta N° "+(this.detalle.niif?this.detalle.niif.codigo:"####"):"Nuevo Detalle de Cuenta"},tapTitulo:function(){return this.cxp.id?"Registrado"===this.cxp.estado||null===this.cxp.estado?"En Edición":"Visualizando":"Nueva Cuenta por Pagar"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)},typeObject:function(){return void 0===this.object},computedDateFormatted:function(){return this.formDate(this.cxp.fecha_causacion)},computedDateFormatted2:function(){return this.formDate(this.cxp.fecha_factura)},computedDateFormatted3:function(){return this.formDate(this.cxp.fecha_vencimiento)},complementos:function(){return m.b.getters.complementosFormCxp},infoComponentProveedor:function(){return this.$store.getters.getInfoComponent("pg_proveedores")},stateItem:function(){return this.$store.state.tables.itemPgProveedor},iconoEstado:function(){return"Registrado"===this.cxp.estado?"stars":"Confirmado"===this.cxp.estado?"check_circle":"Anulado"===this.cxp.estado?"remove_circle":void 0},colorEstado:function(){return"Registrado"===this.cxp.estado?"primary":"Confirmado"===this.cxp.estado?"teal":"Anulado"===this.cxp.estado?"red":void 0},saldoInicial:function(){return"Saldo Inicial"===this.cxp.modulo}},beforeCreate:function(){var n=this;this.axios.get("pg_cxps").then(function(e){n.cxps=e.data.data,n.numeroFacturaResgistrado=n.getNumFacturaUsado()}).catch(function(e){n.$store.commit(v.b,{msg:"Hay un error al traer las cuentas por pagar. "+e.response,color:"danger"})})},beforeMount:function(){this.refresh(),this.formReset()},mounted:function(){null!==this.parametros.entidad&&this.getRegisto(this.parametros.entidad.id);var n={custom:{factura:{not_in:"El número factura ya se encuentra registrado."}}};this.$validator.localize("es",n)},methods:{add:function(n){var e=this;"number"!=typeof n.index?this.cxp.rubrosDetalles.push(n):this.cxp.rubrosDetalles.splice(this.cxp.rubrosDetalles.findIndex(function(t){return e.cxp.rubrosDetalles.indexOf(t)===n.index}),1,n)},openCreateProveedor:function(n){this.cxp.proveedor=n,null!==n&&(this.keyProveedor="key-proveedor-"+Math.random().toString(36).substring(2),this.$store.commit("NAV_ADD_ITEM",{ruta:"pg_proveedores",titulo:this.infoComponentProveedor.titulo_registro,required:!0,parametros:{entidad:null,key:this.keyProveedor,tabOrigin:this.$store.state.nav.currentItem.split("tab-")[1]}}))},openNuevaNiif:function(n){this.niifNueva=n,this.dialogFormNiif=!0},goNiif:function(n){1===this.niifNueva?this.cxp.niif=n:2===this.niifNueva&&(this.detalle.niif=n),this.dialogFormNiif=!1},formReset:function(){this.detalle={id:null,index:null,pg_cxp_id:null,pg_conpago_id:null,pg_uniapoyo_id:null,gn_tercero_id:null,nf_cencosto_id:null,nf_niif_id:null,nf_conrtf_id:null,naturaleza:null,valor:null,retencion:null,uniapoyo:null,cxp:null,conpago:null,conrtf:null,tercero:null,cencosto:null,niif:null},this.rubroDetalleObligacion={id:null,index:null,pr_detrp_id:null,pr_tipo_gasto_id:null,tipo_gasto:null,valor:0,saldo_por_obligar:0,rubro:null,rp:null,cdp:null},this.numeroFacturaResgistrado=this.getNumFacturaUsado()},valores:function(n){return n?this.number_format(parseInt(n),2,[".",".",","]):null},formDate:function(n){if(!n)return null;var e=n.split("-"),t=d()(e,3);return t[0]+"/"+t[1]+"/"+t[2]},getRegisto:function(n){var e=this,t=this.$loading.show({container:this.$refs.cargar});this.axios.get("pg_cxps/"+n).then(function(n){""!==n.data&&(n.data.data.rubrosDetalles=[],n.data.data.valor_obligacion_header=0,e.cxp=n.data.data,e.cxp.modulo=n.data.data.modulo,null!==n.data.data.obligacion&&(e.cxp.rubrosDetalles=JSON.parse(s()(n.data.data.obligacion.detalles))),e.numeroFacturaResgistrado=e.getNumFacturaUsado(),t.hide())}).catch(function(n){t.hide(),e.$store.commit(v.b,{msg:"Hay un error al traer la cuenta por pagar. "+n.response,color:"danger"})})},getNumFacturaUsado:function(){var n=this;return this.cxps.map(function(e){if(null==n.cxp.no_factura||n.cxp.no_factura!==e.no_factura)return e.no_factura})},number_format:function(n,e,t){e=e>=0?parseInt(e,0):2,t=t||[".","'",","];var a=(parseFloat(n)||0).toFixed(e);if(a.length<=4+e)return a.replace(".",t[t.length-1]);var o=a.split(/[-.]/);n=o[o.length>1?o.length-2:0];for(var r=n.substr(n.length-3,3)+(o.length>1?t[t.length-1]+o[o.length-1]:""),i=n.length-6,l=0;i>-3;)r=(i>0?n.substr(i,3):n.substr(0,3+i))+t[l]+r,l=++l%2,i-=3;return(3===o.length?"-":"")+r},openCardDialog:function(){this.cxp.pg_proveedore_id?this.cardDialog=!this.cardDialog:(this.cardDialog=!1,this.$store.commit(v.b,{msg:"Debe seleccionar un proveedor.",color:"error"}))},editarDetalle:function(n,e){var t=parseFloat(e.valor)*(e.conrtf?100/e.conrtf.porcentaje:0),a=parseFloat(t);this.valorBase=Math.floor(a),this.detalle=JSON.parse(s()(e)),this.detalle.index=n,this.cardDialog=!0},preguntarEliminarDetalle:function(n){this.dialogEliminar=!0,this.detalle=JSON.parse(s()(n))},eliminarDetalle:function(n){this.dialogEliminar=!1,this.cxp.detalles.splice(this.cxp.detalles.indexOf(n),1),this.formReset()},dialogDetalle:function(n){"abrir"===n?this.cardDialog=!0:(this.cardDialog=!1,this.valorBase=0,this.formReset())},agregarCxpDetalle:function(n){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,e.validador("formDetalle");case 3:if(!t.sent){t.next=9;break}"number"!=typeof n.index?e.cxp.detalles.push(n):e.cxp.detalles.splice(e.cxp.detalles.findIndex(function(t){return e.cxp.detalles.indexOf(t)===n.index}),1,n),e.tableLoading=!1,e.formReset(),t.next=10;break;case 9:null==e.detalle.pg_conpago_id?e.$store.commit(v.b,{msg:"No se ha seleccionado el concepto.",color:"error"}):null==e.detalle.pg_uniapoyo_id?e.$store.commit(v.b,{msg:"No se ha seleccionado la unidad de apoyo.",color:"error"}):null===e.detalle.conpago.niif.clascuenta.naturaleza&&e.$store.commit(v.b,{msg:"La cuenta no presenta naturaleza.",color:"error"});case 10:case"end":return t.stop()}},t,e)}))()},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(u.c,{contexto:this,itemId:this.parametros.tabOrigin})},refresh:function(){this.$validator.reset(),this.plazo=null,this.cxp=JSON.parse(s()(this.cxpEdicion))},imprimirCuenta:function(){var n=this;this.dialog2=!1;var e=this.cxp.id;this.axios.get("reportecxps?id="+e).then(function(n){var e=n.data;window.open(e,"_blank").focus()}).catch(function(e){n.$store.commit(v.b,{msg:"Error al Imprimir. "+e.response,color:"danger"})})},validador:function(n){return this.$validator.validateAll(n).then(function(n){return n})},confirmarSave:function(){var n=this;return i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$refs.buscarCuenta.validate();case 2:return t=e.sent,e.next=5,n.validador("formPrincipal");case 5:if(e.t2=e.sent,!e.t2){e.next=8;break}e.t2=t;case 8:if(e.t1=e.t2,!e.t1){e.next=11;break}e.t1=n.cxp.detalles.length>2;case 11:if(e.t0=e.t1,!e.t0){e.next=14;break}e.t0=n.credito<=n.debito;case 14:if(!e.t0){e.next=18;break}n.dialog2=!0,e.next=19;break;case 18:n.cxp.detalles.length?n.credito>n.debito?n.$store.commit(v.b,{msg:"El valor crédito no puede ser superior al del débito.",color:"error"}):n.dialog2=!0:n.$store.commit(v.b,{msg:"Se deben agregar al menos dos detalles.",color:"error"});case 19:case"end":return e.stop()}},e,n)}))()},confirmarEstado:function(n){"yesConfirmar"===n?(this.confirmar&&this.imprime?(this.cxp.estado="Confirmado",this.imprimirCuenta()):this.cxp.estado="Confirmado",this.dialog=!1,this.dialog2=!1,this.save(),this.$store.commit(v.b,{msg:"El estado de la cuenta ha sido Confirmado",color:"success"})):(this.imprime&&this.imprimirCuenta(),this.confirmar=!1,this.dialog=!1,this.dialog2=!1,this.cxp.estado="Registrado",this.save(),this.$store.commit(v.b,{msg:"El estado de la cuenta ha sido Registrado",color:"success"}))},esAnulado:function(n,e){this.dialog3=!1,this.dialog2=!1,n.detalle_anulacion=e,this.save()},enviarCambio:function(){this.confirmar?this.dialog=!0:this.confirmar&&this.imprime?this.dialog=!0:this.imprime?(this.cxp.estado="Registrado",this.imprimirCuenta(),this.save()):"Anulado"===this.cxp.estado?this.dialog3=!0:"Anulado"===this.cxp.estado&&this.imprime?this.dialog3=!0:(this.cxp.estado="Registrado",this.save(),this.$store.commit(v.b,{msg:"El estado de la cuenta  ha sido Registrado",color:"success"}))},cerrarDialogs:function(){this.dialog=!1,this.dialog2=!1,this.dialog3=!1,this.imprime=!1,this.confirmar=!1},save:function(){var n=this,e=this.cxp.id?"editar":"crear";this.axios.post("pg_cxps",this.cxp).then(function(t){n.cxp.id?n.$store.commit(v.b,{msg:"La cuenta se actualizó correctamente",color:"success"}):n.$store.commit(v.b,{msg:"La cuenta se creó correctamente",color:"success"}),n.$store.commit(p.D,{item:t.data.cxp,estado:e,key:n.parametros.key}),n.$store.dispatch(u.c,{contexto:n,itemId:n.parametros.tabOrigin}),n.cerrarDialogs()}).catch(function(e){n.$store.commit(v.b,{msg:e.response.data.errors,color:"danger"}),n.cxp.estado="Registrado",n.cerrarDialogs()})}}}},987:function(n,e,t){"use strict";var a=t(13),o=t.n(a),r=t(14),i=t.n(r),l=t(12),s=t(254);e.a={name:"DialogRegistroRp",components:{InputNumber:s.default,ToolbarList:function(){return new Promise(function(n){n()}).then(t.bind(null,247))},InputDetailFlex:function(){return new Promise(function(n){n()}).then(t.bind(null,250))}},props:{value:{type:Object,default:null},tercero:{type:Object,default:null},estadoCxp:{type:String,default:null},dataTableDetails:{type:Array,default:function(){return[]}}},data:function(){return{mensajeNoRubro:null,rps:[],cardDialog:!1,openTable:!1,rubrosRp:[],headers:[{text:"No. CDP",align:"left",sortable:!1,value:"noCdp"},{text:"No. RP",align:"left",sortable:!1,value:"noRp"},{text:"Rubro",align:"left",sortable:!1,value:"rubro"},{text:"Tipo gasto",align:"left",sortable:!1,value:"tipoGasto"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Saldo por obligar",align:"left",sortable:!1,value:"saldoPorObligar"},{text:"Valor",align:"left",sortable:!1,value:"valor"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},watch:{tercero:function(n){this.rpsTercero(n)},dataTableDetails:function(n){if(this.openTable=!!n.length,n.length){var e=0;n.forEach(function(n){e+=n.valor}),this.$emit("total_detalles",e)}}},methods:{validador:function(n){return this.$validator.validateAll(n).then(function(n){return n})},agregar:function(){var n=this;return i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,e.next=3,n.validador("formRubroObligacion");case 3:if(!e.sent){e.next=6;break}n.$emit("agregar",t),n.$emit("cancelar");case 6:case"end":return e.stop()}},e,n)}))()},filterRubros:function(n,e){var t=function(n){return null!=n?n:""},a=t(n.nombre+" "+n.codigo),o=t(e);return a.toString().toLowerCase().indexOf(o.toString().toLowerCase())>-1},rpsTercero:function(n){var e=this;n?this.axios.get("rps/tercero/"+n.id).then(function(n){!1===n.data.exists?(e.mensajeNoRubro=n.data.msg,e.rps=[]):(e.mensajeNoRubro=null,e.rps=n.data.rps)}):(this.mensajeNoRubro=null,this.rps=[])},editarDetalle:function(n,e){this.obtenerRubrosYCdp(e.rp.id),this.$emit("editar",{index:n,detalle:e}),this.cardDialog=!0},obtenerRubrosYCdp:function(n){this.obtenerRubrosRP(n),this.obtenerCdpDelRp(n)},obtenerRubrosRP:function(n){var e=this;this.axios.get("obligaciones/rubros/"+n).then(function(n){""!==n.data&&(e.rubrosRp=n.data.rubros)}).catch(function(n){e.$store.commit(l.b,{msg:"Hay un error al traer los rubros. "+n,color:"danger"})})},obtenerCdpDelRp:function(n){var e=this;this.axios.get("obligaciones/rp/cdp/"+n).then(function(n){""!==n.data&&(e.value.cdp=n.data.cdp)}).catch(function(n){e.$store.commit(l.b,{msg:"Hay un error al traer el cdp. "+n,color:"danger"})})},obtenerRubro:function(){var n=this;this.axios.get("obligacion_rubro?rpId="+this.value.rp.id+"&rubroId="+this.value.rubro.id).then(function(e){""!==e.data&&(n.value.pr_detrp_id=e.data.data.id,n.value.pr_tipo_gasto_id=e.data.data.tipo_gasto.id,n.value.saldo_por_obligar=e.data.data.valor_disponible,n.value.tipo_gasto=e.data.data.tipo_gasto)}).catch(function(e){n.$store.commit(l.b,{msg:"Hay un error al traer el rubro. "+e,color:"danger"})})}}}}});
//# sourceMappingURL=56.9cc4f71b001312a53297.js.map