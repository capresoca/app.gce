webpackJsonp([374],{1288:function(t,a,o){"use strict";var s=o(1281);a.a={name:"Glosas",props:{value:{type:Object,default:null},glosas:{type:Array,default:[]},registrar:{type:Boolean,default:!0},auditando:{type:Boolean,default:!1},capitado:{type:Boolean,default:!1},facturaid:{type:[String,Number],default:null}},components:{DetalleItemsFacturados:s.a,Confirmar:function(){return o.e(289).then(o.bind(null,749))},RegistroGlosa:function(){return o.e(303).then(o.bind(null,1283))}},data:function(){return{window:0,headersGlosas:[{text:"",align:"center",sortable:!1},{text:"Glosa",align:"left",sortable:!1},{text:"Valor",align:"center",sortable:!1},{text:"Observaciones",align:"center",sortable:!1}],dialogA:{loading:!1,visible:!1,content:null,props:null},visible:!1}},computed:{totalGlosado:function(){var t=0;return this.value&&this.value.glosas&&this.value.glosas.filter(function(t){return!t.of_facservicio}).forEach(function(a){t+=a.valor_glosa}),t}},methods:{registraGlosa:function(){this.value.avalado=0,this.window=0},open:function(){this.visible=!0,this.window=0},close:function(){var t=this;this.visible=!1,setTimeout(function(){t.window=0},300)},cancelaConfirmacion:function(){var t=this;this.dialogA.visible=!1,this.dialogA.loading=!1,setTimeout(function(){t.dialogA.content="",t.dialogA.props=null},300)},aceptaConfirmacion:function(){this.dialogA.loading=!0,this.borrarGlosa(this.dialogA.props)},confirmaBorrado:function(t){this.dialogA.content="<strong>¿Está seguro de borrar la glosa "+(t.index+1)+" de código "+t.item.glosa.glosa+" por "+this.currency(t.item.valor_glosa)+"?</strong>",this.dialogA.props=t,this.dialogA.visible=!0},borrarGlosa:function(t){var a=this;this.axios.delete("facservicios/glosas/"+t.item.id).then(function(){a.value.glosas.splice(t.index,1),!a.value.glosas.length&&(a.value.avalado=null),a.$store.commit("SNACK_SHOW",{msg:"La glosa fue borrada correctamente.",color:"success"}),a.cancelaConfirmacion()}).catch(function(t){a.$store.commit("SNACK_ERROR_LIST",{expression:"al borrar la glosa",error:t})})}}}},2436:function(t,a,o){"use strict";function s(t){o(2437)}Object.defineProperty(a,"__esModule",{value:!0});var i=o(1288),e=o(2439),l=o(1),n=s,r=l(i.a,e.a,!1,n,"data-v-3d7bd0c2",null);a.default=r.exports},2437:function(t,a,o){var s=o(2438);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);o(456)("311846d0",s,!0,{})},2438:function(t,a,o){a=t.exports=o(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Glosas.vue",sourceRoot:""}])},2439:function(t,a,o){"use strict";var s=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("v-dialog",{attrs:{persistent:"","max-width":"900"},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[t.value?o("v-card",[o("v-toolbar",{staticClass:"elevation-1 white",attrs:{dense:""}},[o("v-avatar",{attrs:{size:"36",color:"primary"}},[o("v-icon",{attrs:{dark:""}},[t._v("security")])],1),t._v(" "),o("v-list-tile",[o("v-list-tile-content",[o("v-list-tile-title",{staticClass:"subheading"},[t._v("Glosas")])],1)],1),t._v(" "),o("v-spacer"),t._v(" "),o("v-tooltip",{attrs:{left:""}},[o("v-btn",{attrs:{slot:"activator",icon:""},on:{click:t.close},slot:"activator"},[o("v-icon",[t._v("\n              close\n            ")])],1),t._v(" "),o("span",[t._v("Cerrar")])],1)],1),t._v(" "),o("v-container",{staticClass:"pa-2",attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("detalle-items-facturados",{attrs:{items:[t.value]}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-window",{staticClass:"elevation-1",model:{value:t.window,callback:function(a){t.window=a},expression:"window"}},[o("v-window-item",[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 py-0"},[o("span",{staticClass:"font-weight-bold"},[t._v(" Glosas registradas ")]),t._v(" "),o("v-spacer"),t._v(" "),t.auditando?o("v-tooltip",{attrs:{left:""}},[o("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(a){t.window=1}},slot:"activator"},[o("v-icon",{attrs:{color:"primary"}},[t._v("\n                          add\n                        ")])],1),t._v(" "),o("span",[t._v("agregar glosa")])],1):t._e()],1),t._v(" "),o("v-divider"),t._v(" "),o("v-data-table",{attrs:{headers:t.headersGlosas,items:t.value.glosas,"no-data-text":"No hay glosas registradas","hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(a){return[o("td",{staticClass:"px-2 text-xs-center",staticStyle:{height:"0px !important"}},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",small:"",icon:"",disabled:!t.auditando},on:{click:function(o){t.auditando&&t.confirmaBorrado(a)}},slot:"activator"},[o("v-icon",{staticClass:"text--darken-2",attrs:{color:"red"}},[t._v("delete_forever")])],1),t._v(" "),o("span",[t._v("Borrar glosa")])],1)],1),t._v(" "),o("td",{staticClass:"px-2",staticStyle:{height:"0px !important"}},[o("span",{staticClass:"ma-0 body-1"},[t._v(t._s(a.item.glosa.glosa)+": "+t._s(a.item.glosa.descripcion))]),o("br"),t._v(" "),o("span",{staticClass:"ma-0 caption font-weight-bold"},[t._v("Tipo: "+t._s(a.item.glosa.tipo))])]),t._v(" "),o("td",{staticClass:"px-2 text-xs-right",staticStyle:{height:"0px !important"}},[t._v("\n                        "+t._s("Porcentaje"!==a.item.tipo?t.currency(a.item.valor_glosa):"("+a.item.valor_glosa/t.value.valor_total*100+"%) "+t.currency(a.item.valor_glosa))+"\n                        "),a.item.of_facservicio?t._e():o("v-icon",{attrs:{color:"success"}},[t._v("add")])],1),t._v(" "),o("td",{staticClass:"px-2 text-xs-justify",staticStyle:{height:"0px !important"}},[t._v("\n                        "+t._s(a.item.observacion)+"\n                      ")])]}}],null,!1,2011710606)},[t._v(" "),o("template",{slot:"footer"},[o("td",{staticClass:"font-weight-bold text-xs-right",attrs:{colspan:"3"}},[t._v("\n                        Total Glosado\n                      ")]),t._v(" "),o("td",{staticClass:"font-weight-bold text-xs-right"},[t._v("\n                        "+t._s(t.currency(t.totalGlosado))+"\n                      ")])])],2)],1)],1),t._v(" "),o("v-window-item",[o("registro-glosa",{attrs:{facturaid:t.facturaid,capitado:t.capitado,window:t.window,servicios:[t.value],glosas:t.glosas},on:{cancelar:function(a){t.window=0},success:t.registraGlosa}})],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),o("confirmar",{attrs:{loading:t.dialogA.loading,value:t.dialogA.visible,content:t.dialogA.content,"requiere-motivo":!1},on:{cancelar:t.cancelaConfirmacion,aceptar:t.aceptaConfirmacion}})],1)},i=[],e={render:s,staticRenderFns:i};a.a=e}});
//# sourceMappingURL=374.605a137b8698220bbf8a.js.map