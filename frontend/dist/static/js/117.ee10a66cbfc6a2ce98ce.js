webpackJsonp([117],{1122:function(t,a,e){"use strict";var i=e(8),o=e.n(i),n=e(6),s=e(12),r=e(58);a.a={name:"Cups",components:{ToolbarList:function(){return new Promise(function(t){t()}).then(e.bind(null,247))},InputFile:function(){return e.e(288).then(e.bind(null,748))},Loading:r.default},data:function(){return{dialog:!1,archivo:"",loadingSubmit:!1,cups:[],search:"",tableLoading:!1,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Categoría",align:"left",sortable:!1,value:"categoria"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion"},{text:"Género",align:"left",sortable:!1,value:"genero"},{text:"Ámbito",align:"left",sortable:!1,value:"ambito"},{text:"Estancia",align:"left",sortable:!1,value:"estancia"},{text:"Cobertura",align:"left",sortable:!1,value:"cobertura"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},created:function(){this.reloadPage()},watch:{itemCups:function(t){"crear"===t.estado?this.cups.splice(0,0,t.item):"editar"===t.estado&&this.cups.splice(this.cups.findIndex(function(a){return a.id===t.item.id}),1,t.item)},"pagination.per_page":function(t){this.pagination.current_page=1,this.reloadPage()}},computed:o()({infoComponent:function(){return this.$store.getters.getInfoComponent("cups")}},Object(n.c)({itemCups:function(t){return t.tables.itemCups}}),{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}}),methods:{reloadPage:function(){var t=this;this.tableLoading=!0,this.axios.get("cups?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25").then(function(a){a.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(a.data.meta.per_page)})?parseInt(a.data.meta.per_page):-1,t.pagination=a.data.meta,t.cups=a.data.data,t.tableLoading=!1}).catch(function(a){return t.tableLoading=!1,t.$store.commit(s.b,{msg:"Error al traer los registros. "+a,color:"danger"}),!1})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),cargar:function(){this.dialog=!0},subir:function(){var t=this;this.dialog=!1,this.loadingSubmit=!0;var a=new FormData;a.append("archivo",this.archivo),this.axios.post("cargamasivacups",a).then(function(a){t.loadingSubmit=!1,t.close(),t.$store.commit("SNACK_SHOW",{msg:"Carga masiva exitosa.",color:"success"})}).catch(function(a){t.$store.commit("SNACK_SHOW",{msg:"error al cargar archivo",color:"error"}),t.loadingSubmit=!1})},descargar:function(){alert("Descargando."),this.fileDownload("cups_descarga")},close:function(){this.archivo=null,this.dialog=!1}}}},1977:function(t,a,e){var i=e(1978);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(456)("9413c40c",i,!0,{})},1978:function(t,a,e){a=t.exports=e(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Cups.vue",sourceRoot:""}])},1979:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-dialog",{attrs:{width:"500px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-form",{attrs:{"data-vv-scope":"formPago"}},[e("v-card",[e("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[e("span",{staticClass:"title"},[t._v("Subir archivo CUPS")])]),t._v(" "),e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("input-file",{ref:"archivo",attrs:{label:"Archivo",required:"required",accept:".txt",hint:"Extenciones aceptadas: txt","prepend-icon":"description"},model:{value:t.archivo,callback:function(a){t.archivo=a},expression:"archivo"}})],1)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"grey lighten-4"},[e("v-spacer"),t._v(" "),e("v-btn",{on:{click:function(a){t.dialog=!1}}},[t._v("Cancelar")]),t._v(" "),e("v-btn",{attrs:{color:"primary",disabled:t.errors.any(),loading:t.loadingSubmit},on:{click:function(a){return t.subir()}}},[t._v("Subir")])],1)],1)],1)],1),t._v(" "),e("v-card",[e("toolbar-list",{attrs:{info:t.infoComponent,title:"Codigos únicos de procedimientos",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Código"}}),t._v(" "),e("loading",{model:{value:t.tableLoading,callback:function(a){t.tableLoading=a},expression:"tableLoading"}}),t._v(" "),e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:"",sm1:"",md2:""}},[e("v-btn",t._g({attrs:{small:"",color:"primary"},on:{click:t.cargar}},t.on),[e("v-icon",{attrs:{left:""}},[t._v("far fa-file-alt")]),t._v("\n              CARGA MASIVA CUPS\n          ")],1)],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm1:"",md2:""}},[e("v-btn",t._g({attrs:{small:"",color:"accent"},on:{click:t.descargar}},t.on),[e("v-icon",{attrs:{left:""}},[t._v("far fa-file-alt")]),t._v("\n              DESCARGAR CUPS\n          ")],1)],1),t._v(" "),e("v-flex",{staticClass:"text-xs-right",attrs:{xs1:"",sm2:"",md2:""}},[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:t.reloadPage},slot:"activator"},[e("v-icon",[t._v("cached")])],1),t._v(" "),e("span",[t._v("Actualizar registros")])],1)],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm2:"",md2:""}},[e("v-select",{attrs:{label:"Registros por página",items:t.items_page,"item-text":"text","item-value":"value"},model:{value:t.pagination.per_page,callback:function(a){t.$set(t.pagination,"per_page",a)},expression:"pagination.per_page"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[e("v-text-field",{attrs:{"append-icon":"search",label:"Buscar"},on:{input:t.buscar},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cups,loading:t.tableLoading,pagination:t.pagination,"total-items":t.cups.length,search:t.search,"hide-actions":""},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",[t._v(t._s(a.item.codigo))]),t._v(" "),e("td",[t._v(t._s(null!==a.item.cupscategoria?a.item.cupscategoria.nombre:"Nulo"))]),t._v(" "),e("td",[t._v(t._s(a.item.descripcion))]),t._v(" "),e("td",[t._v(t._s(a.item.genero))]),t._v(" "),e("td",[t._v(t._s(a.item.ambito))]),t._v(" "),e("td",[t._v(t._s(a.item.estancia))]),t._v(" "),e("td",[t._v(t._s(a.item.cobertura))]),t._v(" "),e("td",[e("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:a.item.show,callback:function(e){t.$set(a.item,"show",e)},expression:"props.item.show"}},[e("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:a.item.show,callback:function(e){t.$set(a.item,"show",e)},expression:"props.item.show"}},[e("v-icon",[t._v("chevron_left")]),t._v(" "),e("v-icon",[t._v("close")])],1),t._v(" "),e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(e){t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:a.item,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[e("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1),t._v(" "),e("span",[t._v("Editar")])],1)],1)],1)]}}])},[t._v(" "),e("template",{slot:"no-data"},[t.tableLoading?e("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n            Estamos cargando los registros. "),e("v-icon",[t._v("sentiment_satisfied_alt")])],1):e("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            Lo sentimos, no tenemos registros para mostrar. "),e("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1),t._v(" "),e("template",{slot:"footer"},[e("td",{staticClass:"text-xs-center",attrs:{colspan:"100%"}},[e("v-pagination",{attrs:{"total-visible":7,length:t.pagination.last_page},on:{input:t.reloadPage},model:{value:t.pagination.current_page,callback:function(a){t.$set(t.pagination,"current_page",a)},expression:"pagination.current_page"}})],1)])],2)],1)],1)],1)},o=[],n={render:i,staticRenderFns:o};a.a=n},588:function(t,a,e){"use strict";function i(t){e(1977)}Object.defineProperty(a,"__esModule",{value:!0});var o=e(1122),n=e(1979),s=e(1),r=i,l=s(o.a,n.a,!1,r,"data-v-296bc2f2",null);a.default=l.exports}});
//# sourceMappingURL=117.ee10a66cbfc6a2ce98ce.js.map