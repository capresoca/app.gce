webpackJsonp([129],{1038:function(t,a,e){"use strict";var o=e(13),n=e.n(o),r=e(14),i=e.n(r),s=e(58),c=e(12),l=e(248);a.a={name:"CargaRecaudo",components:{Loading:s.default,FileInputArchive:function(){return e.e(362).then(e.bind(null,835))},ToolbarList:function(){return new Promise(function(t){t()}).then(e.bind(null,247))},DataTable:function(){return new Promise(function(t){t()}).then(e.bind(null,60))},InputFileV2:function(){return e.e(292).then(e.bind(null,764))},InputDate:function(){return new Promise(function(t){t()}).then(e.bind(null,253))},PostuladorV2:function(){return new Promise(function(t){t()}).then(e.bind(null,61))}},data:function(){return{recaudo:null,cardDialog:!1,archivoLoading:!1,dataTableRecaudosCargados:{nameItemState:"itemRecaudo",route:"recaudos_cargados",simplePaginate:!0,optionsPerPage:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],makeHeaders:[{text:"NOMBRE ARCHIVO",align:"center",sortable:!1,value:"nombre_archivos_zip",classData:"text-xs-center",component:{component:{template:"<div><b>{{value.nombre_archivos_zip}}</b></div>",props:["value"]}}},{text:"ARCHIVOS TXT",align:"center",sortable:!1,value:"",classData:"text-xs-center",component:{component:{template:'<div>\n                      <v-tooltip top class="mr-2">\n                        <v-badge overlap color="blue" slot="activator" class="cursor-pointer">\n                        <span slot="badge" class="caption">{{value.numero_archivos_txt}}</span>\n                          <v-avatar color="accent" size="30">\n                            <v-icon class="white--text subheading" v-text="\'far fa-file-alt\'"></v-icon>\n                          </v-avatar>\n                        </v-badge>\n                        <span>Cantidad Cargada</span>\n                      </v-tooltip>\n                  </div>',props:["value"]}}},{text:"FECHA DE CARGA",align:"center",sortable:!1,value:"created_at",classData:"text-xs-center",component:{component:{template:"<div v-text=\"moment(value.created_at).format('YYYY/MM/DD')\"></div>",props:["value"]}}},{text:"USUARIO",align:"left",sortable:!1,classData:"text-xs-left",value:"usuario.name"}]}}},created:function(){this.formData()},watch:{cardDialog:function(t){t&&this.formData()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("cargaRecaudos")}},methods:{resetOptions:function(t){return t.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&t.options.push({event:"detalle",icon:"fas fa-list-alt",tooltip:"Listado de Pacientes",color:"teal",size:"20px"}),t},formData:function(){this.recaudo={archivo:[]}},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},save:function(){var t=this;return i()(n.a.mark(function a(){var e;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.validador("formCarga");case 2:if(a.t0=a.sent,!a.t0){a.next=5;break}a.t0=t.recaudo.archivo.length;case 5:if(!a.t0){a.next=12;break}t.archivoLoading=!0,e=new FormData,e.append("archivo",t.recaudo.archivo[0]),t.axios.post("as_cargador_recaudos",e).then(function(a){console.log("reponse",a),t.$store.commit(c.b,{msg:"Los archivos se han cargado correctamente. ",color:"success"}),t.$store.commit(l._12,{item:a.data.data,estado:"reload",key:null}),t.cardDialog=!1,t.archivoLoading=!1}).catch(function(a){console.log("e",a.response),t.archivoLoading=!1,t.$store.commit(c.a,{expression:" "+a.response.data.error,error:a})}),a.next=13;break;case 12:t.$store.commit(c.b,{msg:"No se ha cargado ningún archivo en el componente.",color:"danger"});case 13:case"end":return a.stop()}},a,t)}))()}}}},1713:function(t,a,e){var o=e(1714);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(456)("34c007b8",o,!0,{})},1714:function(t,a,e){a=t.exports=e(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CargaRecaudo.vue",sourceRoot:""}])},1715:function(t,a,e){"use strict";var o=function(){var t=this,a=this,e=a.$createElement,o=a._self._c||e;return o("div",[o("v-card",[o("toolbar-list",{staticClass:"pb-2",attrs:{info:a.infoComponent,btnplus:"",btnplustitle:"Cargar archivos",btnicon:"fas fa-upload",btnplustruncate:"",title:"Recaudos Cargados",subtitle:"Carga de archivos"},on:{click:function(t){a.cardDialog=!a.cardDialog}}}),a._v(" "),o("v-expand-transition",[a.cardDialog?[o("v-card",{staticClass:"elevation-0"},[o("loading",{model:{value:a.archivoLoading,callback:function(t){a.archivoLoading=t},expression:"archivoLoading"}}),a._v(" "),o("v-form",{attrs:{"data-vv-scope":"formCarga"}},[o("v-container",{attrs:{fluid:"","grid-list-xl":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:""}},[o("file-input-archive",{attrs:{title:"Archivos Recaudos","mime-types":"application/zip,application/x-zip-compressed"},model:{value:a.recaudo.archivo,callback:function(t){a.$set(a.recaudo,"archivo",t)},expression:"recaudo.archivo"}})],1)],1)],1)],1),a._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),a._v(" "),o("v-btn",{attrs:{color:"grey",flat:"",small:""},domProps:{textContent:a._s("Cancelar")},on:{click:function(t){a.cardDialog=!1}}}),a._v(" "),o("v-btn",{attrs:{color:"accent",dark:"",small:"",flat:""},on:{click:a.save}},[o("v-icon",{attrs:{size:"15px"},domProps:{textContent:a._s("fas fa-paper-plane")}}),a._v(" \n                "),o("span",{domProps:{textContent:a._s(" Cargar")}})],1)],1)],1)]:a._e()],2),a._v(" "),o("data-table",{attrs:{filters:!1},on:{resetOption:function(t){return a.resetOptions(t)},detalle:function(e){return a.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,required:!0,parametros:{entidad:e,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},model:{value:a.dataTableRecaudosCargados,callback:function(t){a.dataTableRecaudosCargados=t},expression:"dataTableRecaudosCargados"}})],1)],1)},n=[],r={render:o,staticRenderFns:n};a.a=r},533:function(t,a,e){"use strict";function o(t){e(1713)}Object.defineProperty(a,"__esModule",{value:!0});var n=e(1038),r=e(1715),i=e(1),s=o,c=i(n.a,r.a,!1,s,"data-v-799fc143",null);a.default=c.exports}});
//# sourceMappingURL=129.867d826d9884b18b5092.js.map