webpackJsonp([333],{848:function(a,e,t){"use strict";var r=t(12);e.a={name:"RegistroDecautramites",props:["ownerid","value","rootPath"],inject:{$validator:"$validator"},data:function(){return{decauttramites:[]}},components:{},watch:{ownerid:function(a){var e=this;a&&this.axios.get("decautramites/crear?key="+this.property+"&form_id="+a).then(function(a){a.data.forEach(function(a){a.messageError="",a.loading=!1}),e.decauttramites=a.data,e.$emit("input",e.decauttramites)}).catch(function(a){e.$store.commit(r.a,{expression:" al pedir las declaraciones y autorizaciones para éste proceso. ",error:a})})}},computed:{property:function(){switch(this.rootPath){case"formtrasmovs":return"as_formtrasmov_id";case"formafiliaciones":return"as_formafiliacion_id"}}},methods:{submitDecauttramite:function(a){var e=this;this.axios.post("decautramites",a).then(function(a){a.data.declara=parseInt(a.data.declara),a.data.messageError="",a.data.loading=!1,e.decauttramites.splice(e.decauttramites.findIndex(function(e){return e.id===a.data.id}),1,a.data)}).catch(function(a){e.$store.commit(r.a,{expression:" al enviar el archivo. ",error:a})})},onFilePicked:function(a,e){var t=this,r=this.decauttramites.find(function(a){return a.id===e}),i=new FormData;if(i.append("id",r.id),i.append("as_formtrasmov_id","as_formtrasmov_id"===this.property?r[this.property]:""),i.append("as_formafiliacion_id","as_formafiliacion_id"===this.property?r[this.property]:""),i.append("as_declaracione_id",r.as_declaracione_id),i.append("declara",r.declara),r.messageError="",isNaN(a)||0!==a&&(1!==a||"No"!==r.declaracion.anexo))if(isNaN(a)&&"Si"===r.declaracion.anexo){var n=a.target.files;if(n.length)if(void 0!==n[0])if("application/pdf"===n[0].type)if(n[0].name.length<=50){r.loading=!0;var o=new FileReader;o.readAsDataURL(n[0]),o.addEventListener("load",function(){i.append("anexo",n[0]),i.append("nombre_archivo",n[0].name),t.submitDecauttramite(i)})}else r.messageError="El nombre del archivo que desea cargar es muy largo. Longitud permitida => 50 caracteres.";else r.messageError="El anexo no está en formato PDF.";else r.messageError="El anexo no es un archivo válido.";else r.messageError="El anexo es requerido."}else isNaN(a)||"Si"!==r.declaracion.anexo||(r.messageError="El anexo es requerido.");else this.submitDecauttramite(i)}}}},890:function(a,e,t){"use strict";function r(a){t(891)}Object.defineProperty(e,"__esModule",{value:!0});var i=t(848),n=t(893),o=t(1),s=r,c=o(i.a,n.a,!1,s,"data-v-2caca214",null);e.default=c.exports},891:function(a,e,t){var r=t(892);"string"==typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);t(456)("15d99ef0",r,!0,{})},892:function(a,e,t){e=a.exports=t(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroDecautramites.vue",sourceRoot:""}])},893:function(a,e,t){"use strict";var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-card",{staticClass:"ma-0 pa-0",attrs:{color:"grey lighten-1"}},[a._l(a.decauttramites,function(e){return[t("v-card",[t("v-card-text",{staticClass:"pl-1 pb-0"},[t("v-layout",{attrs:{"align-center":""}},[t("v-checkbox",{staticClass:"shrink mt-0",attrs:{label:e.declaracion.nombre,disabled:e.loading,"true-value":1,"false-value":0,"hide-details":""},on:{change:function(t){return a.onFilePicked(t,e.id)}},model:{value:e.declara,callback:function(t){a.$set(e,"declara",t)},expression:"item.declara"}})],1)],1),a._v(" "),t("v-slide-y-transition",[e.declara&&"Si"===e.declaracion.anexo?t("v-card-actions",[t("input",{ref:"anexo"+e.id,refInFor:!0,attrs:{type:"file",hidden:"",accept:"application/pdf"},on:{change:function(t){return a.onFilePicked(t,e.id)}}}),a._v(" "),t("v-btn",{staticClass:"white--text",attrs:{small:"",color:e.anexo?"primary":"blue-grey",loading:e.loading,disabled:e.loading},nativeOn:{click:function(t){a.$refs["anexo"+e.id][0].click()}}},[t("v-icon",{attrs:{dark:""}},[a._v("attach_file")]),a._v("\n            Anexo\n          ")],1),a._v(" "),e.anexo?t("a",{staticClass:"ml-2",attrs:{href:e.anexo.url_signed,target:"_blank"},domProps:{innerHTML:a._s(e.anexo.nombre)}}):a._e(),a._v(" "),t("small",{staticClass:"red--text ml-2",domProps:{innerHTML:a._s(e.messageError)}})],1):a._e()],1)],1),a._v(" "),t("v-divider")]})],2)},i=[],n={render:r,staticRenderFns:i};e.a=n}});
//# sourceMappingURL=333.11e5537191140af8f01e.js.map