webpackJsonp([222],{1296:function(e,t,a){"use strict";var n=a(13),o=a.n(n),s=a(14),i=a.n(s),r=a(58),c=a(12),l=a(248);t.a={name:"VCenso",components:{Loading:r.default,ToolbarList:function(){return new Promise(function(e){e()}).then(a.bind(null,247))},DataTable:function(){return new Promise(function(e){e()}).then(a.bind(null,60))},InputFileV2:function(){return a.e(292).then(a.bind(null,764))},InputDate:function(){return new Promise(function(e){e()}).then(a.bind(null,253))},PostuladorV2:function(){return new Promise(function(e){e()}).then(a.bind(null,61))}},data:function(){return{censo:null,cardDialog:!1,archivoLoading:!1,dataTableCensos:{nameItemState:"itemCensos",route:"censos",simplePaginate:!0,optionsPerPage:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],makeHeaders:[{text:"FECHA",align:"left",sortable:!1,value:"fecha"},{text:"NOMBRE IPS",align:"left",sortable:!0,value:"ips.nombre"},{text:"NOMBRE ARCHIVO",align:"left",sortable:!1,value:"archivo.nombre"},{text:"PACIENTES NUEVOS",align:"center",sortable:!1,value:"",classData:"text-xs-center",component:{component:{template:'<div>\n                      <v-tooltip top class="mr-2">\n                        <v-badge overlap color="blue" slot="activator" class="cursor-pointer">\n                        <span slot="badge" class="caption">{{value.cantidad_pacientes}}</span>\n                          <v-avatar color="indigo" size="30">\n                            <v-icon class="white--text subheading" v-text="\'fas fa-bed\'"></v-icon>\n                          </v-avatar>\n                        </v-badge>\n                        <span>Pacientes</span>\n                      </v-tooltip>\n                  </div>',props:["value"]}}},{text:"USUARIO",align:"left",sortable:!1,value:"usuario.name"},{text:"OPCIONES",align:"center",sortable:!1,actions:!0,singlesActions:!0,classData:"text-xs-center"}]}}},created:function(){this.formData()},watch:{cardDialog:function(e){e&&this.formData()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("censos")}},methods:{resetOptions:function(e){return e.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&e.options.push({event:"detalle",icon:"fas fa-list-alt",tooltip:"Listado de Pacientes",color:"teal",size:"20px"}),e},formData:function(){this.censo={archivo:null,fecha:null,ips_id:null,ips:null}},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},save:function(){var e=this;return i()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formCargaCenso");case 2:if(!t.sent){t.next=9;break}e.archivoLoading=!0,a=new FormData,a.append("ips_id",e.censo.ips_id),a.append("archivo",e.censo.archivo),a.append("fecha",e.censo.fecha),e.axios.post("censos",a).then(function(t){console.log("reponse",t),e.$store.commit(c.b,{msg:"Los archivos se han cargado correctamente. ",color:"success"}),e.$store.commit(l.n,{item:t.data.data,estado:"reload",key:null}),e.cardDialog=!1,e.archivoLoading=!1}).catch(function(t){console.log("e",t.response),e.archivoLoading=!1,e.$store.commit(c.a,{expression:" Al cargar el archivo. ",error:t})});case 9:case"end":return t.stop()}},t,e)}))()}}}},2463:function(e,t,a){var n=a(2464);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(456)("6517903a",n,!0,{})},2464:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"VCenso.vue",sourceRoot:""}])},2465:function(e,t,a){"use strict";var n=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("v-card",[n("toolbar-list",{staticClass:"pb-2",attrs:{info:t.infoComponent,btnplus:"",btnplustitle:"Cargar archivo",btnicon:"fas fa-upload",btnplustruncate:"",title:"Censos",subtitle:"Registro y gestión"},on:{click:function(e){t.cardDialog=!t.cardDialog}}}),t._v(" "),n("v-expand-transition",[t.cardDialog?[n("v-card",{staticClass:"elevation-0"},[n("loading",{model:{value:t.archivoLoading,callback:function(e){t.archivoLoading=e},expression:"archivoLoading"}}),t._v(" "),n("toolbar-list",{attrs:{title:"Registro de Censo"}}),t._v(" "),n("v-form",{attrs:{"data-vv-scope":"formCargaCenso"}},[n("v-container",{attrs:{fluid:"","grid-list-xl":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por NIT, razon social u código de habilitación.",hint:"cod_habilitacion","item-text":"nombre","data-title":"nombre","data-subtitle":"cod_habilitacion",label:"IPS",entidad:"entidades",preicon:"location_city","route-params":"rs_tipentidade_id=1",name:"IPS","no-btn-create":"",rules:"required","error-messages":t.errors.collect("IPS"),"min-characters-search":3},on:{changeid:function(e){return t.censo.ips_id=e}},model:{value:t.censo.ips,callback:function(e){t.$set(t.censo,"ips",e)},expression:"censo.ips"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[n("input-file-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Archivo Censo",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",hint:"Extenciones aceptadas: xls","prepend-icon":"fas fa-paperclip",name:"archivo censo","error-messages":t.errors.collect("archivo censo")},model:{value:t.censo.archivo,callback:function(e){t.$set(t.censo,"archivo",e)},expression:"censo.archivo"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[n("input-date",{directives:[{name:"validate",rawName:"v-validate",value:"required|fechaValida|date_format:YYYY-MM-DD",expression:"'required|fechaValida|date_format:YYYY-MM-DD'"}],key:"fecha",attrs:{label:"Fecha",format:"YYYY-MM-DD",name:"fecha","error-messages":t.errors.collect("fecha")},model:{value:t.censo.fecha,callback:function(e){t.$set(t.censo,"fecha",e)},expression:"censo.fecha"}})],1)],1)],1)],1),t._v(" "),n("v-card-actions",{staticClass:"grey lighten-4"},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"grey",flat:"",small:""},on:{click:function(e){t.cardDialog=!1}}},[t._v("\n              Cancelar\n            ")]),t._v(" "),n("v-btn",{attrs:{color:"accent",dark:"",small:"",flat:""},on:{click:t.save}},[n("v-icon",{attrs:{size:"15px"},domProps:{textContent:t._s("fas fa-paper-plane")}}),t._v(" \n              "),n("span",{domProps:{textContent:t._s(" Cargar")}})],1)],1)],1)]:t._e()],2),t._v(" "),n("data-table",{attrs:{filters:!1},on:{resetOption:function(e){return t.resetOptions(e)},detalle:function(a){return t.$store.commit("NAV_ADD_ITEM",{ruta:e.infoComponent.ruta_registro,titulo:e.infoComponent.titulo_registro,required:!0,parametros:{entidad:a,tabOrigin:e.$store.state.nav.currentItem.split("tab-")[1]}})}},model:{value:t.dataTableCensos,callback:function(e){t.dataTableCensos=e},expression:"dataTableCensos"}})],1)],1)},o=[],s={render:n,staticRenderFns:o};t.a=s},698:function(e,t,a){"use strict";function n(e){a(2463)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1296),s=a(2465),i=a(1),r=n,c=i(o.a,s.a,!1,r,"data-v-2de8f9c6",null);t.default=c.exports}});
//# sourceMappingURL=222.ee6fb27dcb089a4b5f0f.js.map