webpackJsonp([187],{1529:function(t,e,a){var o=a(1530);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(456)("6bf83bda",o,!0,{})},1530:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ContabilidadInterfazContable.vue",sourceRoot:""}])},1531:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"720px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"formDialog"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[t._v("Cargar archivo")])]),t._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("input-file-v2",{directives:[{name:"validate",rawName:"v-validate",value:"fileExtension:xls, xlsx|required",expression:"'fileExtension:xls, xlsx|required'"}],attrs:{label:"Archivo",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",hint:"Extenciones aceptadas: xls, xlsx","prepend-icon":"fas fa-paperclip",name:"historia clínica","error-messages":t.errors.collect("historia clínica")},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[t.errores.length?a("h2",[t._v("Se encontraron errores en el archivo:")]):t._e(),t._v(" "),t._l(t.errores,function(e){return a("p",[t._v(t._s(e))])})],2)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),t._v(" "),a("v-btn",{on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.tableLoading},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),a("v-card",[a("toolbar-list",{attrs:{info:t.infoComponent,title:"Interfaz Contable",subtitle:"Registro y gestión",btnicon:"fas fa-upload",btnplus:"",btnplustitle:"Cargar archivo",btnplustruncate:""},on:{click:t.openDialog}}),t._v(" "),a("loading",{model:{value:t.tableLoading,callback:function(e){t.tableLoading=e},expression:"tableLoading"}}),t._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:"blue-grey",fab:"",small:"",href:t.axios.defaults.baseURL+"/../files/FORMATO_INTERFAZ_CONTABLE.xlsx"},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[t._v("archive")])],1),t._v(" "),a("span",[t._v("Descargar planilla")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:"primary",fab:"",small:"",href:t.axios.defaults.baseURL+"/../files/Interface_Contable_GCE_Software.pdf",target:"_blank"},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[t._v("assignment")])],1),t._v(" "),a("span",[t._v("Descargar documento interfaz contable")])],1)],1),t._v(" "),a("v-flex",{staticClass:"text-xs-right",attrs:{xs1:"",sm3:"",md2:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:t.reloadPage},slot:"activator"},[a("v-icon",[t._v("cached")])],1),t._v(" "),a("span",[t._v("Actualizar registros")])],1)],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[a("v-select",{attrs:{label:"Registros por página",items:t.items_page,"item-text":"text","item-value":"value"},model:{value:t.pagination.per_page,callback:function(e){t.$set(t.pagination,"per_page",e)},expression:"pagination.per_page"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar"},on:{input:t.buscar},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.registros,loading:t.tableLoading,pagination:t.pagination,"total-items":t.registros.length,search:t.search,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.nfcomdiario.consecutivo))]),t._v(" "),a("td",[t._v(t._s(e.item.nfcomdiario.fecha))]),t._v(" "),a("td",[t._v(t._s(e.item.nfcomdiario.detalle))]),t._v(" "),a("td",[t._v(t._s(e.item.nfcomdiario.estado))]),t._v(" "),a("td",[a("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-icon",[t._v("chevron_left")]),t._v(" "),a("v-icon",[t._v("close")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return t.eliminarRegistro(e.item.nfcomdiario.id)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Eliminar")])],1)],1)],1)]}}])},[t._v(" "),a("template",{slot:"no-data"},[t.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n            Estamos cargando los registros. "),a("v-icon",[t._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1),t._v(" "),a("template",{slot:"footer"},[a("td",{staticClass:"text-xs-center",attrs:{colspan:"100%"}},[a("v-pagination",{attrs:{"total-visible":7,length:t.pagination.last_page},on:{input:t.reloadPage},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)])],2)],1)],1)],1)},i=[],n={render:o,staticRenderFns:i};e.a=n},494:function(t,e,a){"use strict";function o(t){a(1529)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(976),n=a(1531),r=a(1),s=o,l=r(i.a,n.a,!1,s,"data-v-5cd29598",null);e.default=l.exports},976:function(t,e,a){"use strict";var o=a(13),i=a.n(o),n=a(14),r=a.n(n),s=a(12),l=a(58);e.a={name:"ContabilidadInterfazContable",components:{ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))},InputFileV2:function(){return a.e(292).then(a.bind(null,764))},Loading:l.default},data:function(){return{registros:[],errores:[],payload:null,file:null,search:"",dialog:!1,tableLoading:!1,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Consecutivo",align:"left",sortable:!1},{text:"Fecha",align:"left",sortable:!1},{text:"Detalle",align:"left",sortable:!1},{text:"Estado",align:"left",sortable:!1},{text:"Opciones",align:"center",sortable:!1}]}},created:function(){this.formReset(),this.reloadPage()},watch:{"pagination.per_page":function(){this.pagination.current_page=1,this.reloadPage()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("contabilidadInterfazContable")},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{reloadPage:function(){var t=this;this.tableLoading=!0,this.axios.get("interfaz-contable/comdiario-lotes?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25").then(function(e){e.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(e.data.meta.per_page)})?parseInt(e.data.meta.per_page):-1,t.pagination=e.data.meta,t.registros=e.data.data,t.tableLoading=!1}).catch(function(e){return t.tableLoading=!1,console.log("Hay un error. "+e),!1})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),formReset:function(){this.file=null},openDialog:function(){this.dialog=!0,this.formReset()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset(),this.errores=[]},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},eliminarRegistro:function(t){var e=this;this.tableLoading=!0,this.axios.delete("interfaz-contable/comdiario-lote/"+t).then(function(t){e.$store.commit(s.b,{msg:"El item se eliminó correctamente",color:"success"}),e.reloadPage()}).catch(function(t){e.tableLoading=!1,e.$store.commit(s.b,{msg:"Hay un error al eliminar el registro. "+t.response,color:"danger"})})},addFormData:function(){var t=new FormData;t.append("excelComprobante",void 0===this.file?"":this.file),this.payload=t},save:function(){var t=this;return r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.errores=[],e.next=3,t.validador("formDialog");case 3:if(!e.sent){e.next=9;break}t.tableLoading=!0,t.addFormData(),t.axios.post("interfaz-contable/importar-comdiario",t.payload).then(function(e){t.$store.commit(s.b,{msg:"El item se creó correctamente",color:"success"}),t.reloadPage(),t.close()}).catch(function(e){t.tableLoading=!1,t.$store.commit(s.b,{msg:"Hay un error al guardar el registro. Verifique que el archivo tenga un formato correcto.",color:"danger"}),t.errores=e.response.data}),e.next=10;break;case 9:t.$store.commit(s.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 10:case"end":return e.stop()}},e,t)}))()}}}}});
//# sourceMappingURL=187.caaf59fe8cb2dc376246.js.map