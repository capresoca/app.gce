webpackJsonp([116],{1128:function(e,a,t){"use strict";var i=t(13),o=t.n(i),s=t(14),r=t.n(s),n=t(12),c=t(40),l=t(248);a.a={name:"RegistroCups",components:{PostuladorV2:function(){return new Promise(function(e){e()}).then(t.bind(null,61))}},props:["parametros"],data:function(){return{cups:[],cup:{},complementos_cups:{generos:["Masculino","Femenino","Sin restricción"],ambitos:["Ambulatorio","Hospitalario","Urgencias","Domiciliario","Sin restricción"],estancias:["El procedimiento debe tener asociado un numero de dias de estanca mayor a cero","Sin restricción"],coberturas:["Hace parte del Plan de Beneficios","No hace parte del Plan de Beneficios","EXCLUSION","RIESGOS LABORALES","SALUD PUBLICA"],duplicados:["Procedimento que se realiza una vez en el año","Procedimento que se realiza una vez en el día","Sin restricción"],vidas:["Procedimento que  se realiza una vez en la vida","Sin restricción"],frecuenciaUso:["Diario","Mensual","Anual","Vida"],nivelAutorizacion:["Asesor","Coordinador","Medico auditor","Gerencia"]},headers:[{text:"Inicio",align:"left",sortable:!1,value:"inicio"},{text:"Fin",align:"left",sortable:!1,value:"fin"},{text:"Opciones",align:"left",sortable:!1,value:"id"}],rangosDiagnosticos:[],cups_grupos:[],pos:["Si","No"],codigosUsados:"",loadingSubmit:!1,dialogRango:!1,dialogConfirm:!1,tableLoading:!1,rangoInicio:"",rangoFin:"",rangoEditado:null,cargoAEliminar:null}},beforeMount:function(){this.formReset()},mounted:function(){null!==this.parametros.entidad&&this.getRegisto(this.parametros.entidad.id)},beforeCreate:function(){var e=this;this.axios.get("cups_grupos").then(function(a){e.cups_grupos=a.data}).catch(function(e){return console.log("Hay un error. "+e),!1}),this.axios.get("cups").then(function(a){e.cups=a.data.data,e.codigosUsados=e.getCodigosUsados()}).catch(function(e){return console.log("Hay un error. "+e),!1})},computed:{tapTitulo:function(){return this.cup.id?"Edición de : "+this.cup.codigo:"Nuevo Item"}},methods:{getRegisto:function(e){var a=this,t=this.$loading.show({container:this.$refs.formCup.$el});this.axios.get("cups/"+e).then(function(e){""!==e.data&&(a.cup=e.data.data,a.getRangosDiagnosticos()),t.hide()}).catch(function(e){t.hide(),a.$store.commit(n.b,{msg:"Hay un error al traer la CUP. "+e,color:"danger"})})},getRangosDiagnosticos:function(){if(this.cup.cie10_relacionados){var e=this.cup.cie10_relacionados.split(",");this.rangosDiagnosticos=e.map(function(e){return e.split("-")})}},editarRango:function(e){this.rangoEditado=e,this.rangoInicio=this.rangosDiagnosticos[e][0],this.rangoFin=this.rangosDiagnosticos[e][1],this.dialogRango=!0},agregarRango:function(){this.rangoEditado||0===this.rangoEditado?(this.rangosDiagnosticos.splice(this.rangoEditado,1,[this.rangoInicio,this.rangoFin]),this.rangoEditado=null,this.closeDialog()):(this.rangosDiagnosticos.push([this.rangoInicio,this.rangoFin]),this.closeDialog())},cargarRangoAEliminar:function(e){this.dialogConfirm=!0,this.cargoAEliminar=e},eliminarRango:function(){this.rangosDiagnosticos.splice(this.cargoAEliminar,1),this.dialogConfirm=!1},convertirArrayARangos:function(){var e=this.rangosDiagnosticos.map(function(e){return e.join("-")});this.cup.cie10_relacionados=e.join()},getCodigosUsados:function(){var e=this;return this.cups.map(function(a){if(null==e.cups.codigo||e.cups.codigo!==a.codigo)return a.codigo})},formReset:function(){this.cup={id:"",rs_cupscategoria_id:null,cm_mansoat_id:null,cm_maniss_id:null,codigo:null,descripcion:null,genero:null,ambito:null,estancia:null,cobertura:null,duplicado:null,vida:null,frecuencia_uso:null,nivel_autorizacion:null,pos:"No",sw_requiere_permiso_especial:0,cie10_relacionados:null,soat:null,maniss:null},this.$validator.reset()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},closeDialog:function(){this.rangoInicio="",this.rangoFin="",this.dialogRango=!1},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(c.c,{contexto:this,itemId:this.parametros.tabOrigin})},submit:function(){var e=this;return r()(o.a.mark(function a(){var t,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.validador("formCups");case 2:if(!a.sent){a.next=10;break}e.convertirArrayARangos(),e.loadingSubmit=!0,t=e.cup.id?"editar":"crear",i=e.cup.id?e.axios.put("cups/"+e.cup.id,e.cup):e.axios.post("cups",e.cup),i.then(function(a){e.cup.id?(e.$store.commit(n.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.$store.commit(l.B,{item:a.data.data,estado:t,key:e.parametros.key}),e.$store.dispatch(c.c,{contexto:e,itemId:e.parametros.tabOrigin})):(e.$store.commit(n.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.$store.commit(l.B,{item:a.data.data,estado:t,key:e.parametros.key}),e.$store.dispatch(c.c,{contexto:e,itemId:e.parametros.tabOrigin}))}).catch(function(a){e.loadingSubmit=!1,e.$store.commit(n.b,{msg:"Hay un error al guardar el registro. "+a.response,color:"danger"})}),a.next=11;break;case 10:e.$store.commit(n.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 11:case"end":return a.stop()}},a,e)}))()}}}},1995:function(e,a,t){var i=t(1996);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(456)("7a001e3a",i,!0,{})},1996:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroCups.vue",sourceRoot:""}])},1997:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("v-dialog",{attrs:{width:"720px"},model:{value:e.dialogRango,callback:function(a){e.dialogRango=a},expression:"dialogRango"}},[t("v-form",{attrs:{"data-vv-scope":"formRelacionados"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[t("span",{staticClass:"title"},[e._v("Rango")])]),e._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm6:""}},[t("v-text-field",{key:"inicio",attrs:{label:"Inicio",name:"inicio"},model:{value:e.rangoInicio,callback:function(a){e.rangoInicio=a},expression:"rangoInicio"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("v-text-field",{key:"fin",attrs:{label:"Fin",name:"fin"},model:{value:e.rangoFin,callback:function(a){e.rangoFin=a},expression:"rangoFin"}})],1)],1)],1),e._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-spacer"),e._v(" "),t("v-btn",{on:{click:e.closeDialog}},[e._v("Cancelar")]),e._v(" "),t("v-btn",{attrs:{color:"primary",disabled:e.errors.any()},on:{click:e.agregarRango}},[e._v("Agregar")])],1)],1)],1)],1),e._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogConfirm,callback:function(a){e.dialogConfirm=a},expression:"dialogConfirm"}},[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-3"},[e._v("Alerta")]),e._v(" "),t("v-card-text",[e._v("¿Está seguro que desea eliminar este registro?")]),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(a){e.dialogConfirm=!1}}},[e._v("Cancelar")]),e._v(" "),t("v-btn",{attrs:{color:"primary",flat:""},nativeOn:{click:function(a){return e.eliminarRango(a)}}},[e._v("Aceptar")])],1)],1)],1),e._v(" "),t("v-card",{ref:"formCup"},[t("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[t("v-toolbar-title",[e._v(" "+e._s(e.tapTitulo)+" ")])],1),e._v(" "),t("v-container",{staticStyle:{"max-width":"inherit"},attrs:{"grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[t("v-form",{attrs:{"data-vv-scope":"formCups"}},[t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[e._v("assignment_ind")]),e._v(" General")],1)],1),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|not_in:"+e.codigosUsados,expression:"'required|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":e.errors.collect("codigo"),disabled:!!e.cup.id},model:{value:e.cup.codigo,callback:function(a){e.$set(e.cup,"codigo",a)},expression:"cup.codigo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"descripcion",attrs:{label:"Descripción",name:"descripcion",required:"","error-messages":e.errors.collect("descripcion")},model:{value:e.cup.descripcion,callback:function(a){e.$set(e.cup,"descripcion",a)},expression:"cup.descripcion"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Categoría",items:e.cups_grupos,"item-value":"id","item-text":"nombre",name:"categoria","persistent-hint":"",required:"","error-messages":e.errors.collect("categoria"),"return-object":"",clearable:""},on:{change:function(a){return e.cup.rs_cupscategoria_id=a?a.id:null}},scopedSlots:e._u([{key:"item",fn:function(a){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:e._s(a.item.codigo)}}),e._v(" "),t("v-list-tile-sub-title",{domProps:{innerHTML:e._s(a.item.nombre)}})],1)]]}}]),model:{value:e.cup.rs_cupscategoria_id,callback:function(a){e.$set(e.cup,"rs_cupscategoria_id",a)},expression:"cup.rs_cupscategoria_id"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.generos,name:"genero",label:"Género","error-messages":e.errors.collect("genero"),required:""},model:{value:e.cup.genero,callback:function(a){e.$set(e.cup,"genero",a)},expression:"cup.genero"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.ambitos,name:"ambito",label:"Ámbito","error-messages":e.errors.collect("ambito"),required:""},model:{value:e.cup.ambito,callback:function(a){e.$set(e.cup,"ambito",a)},expression:"cup.ambito"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.estancias,name:"estancia",label:"Estancia","error-messages":e.errors.collect("estancia"),required:""},model:{value:e.cup.estancia,callback:function(a){e.$set(e.cup,"estancia",a)},expression:"cup.estancia"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.frecuenciaUso,name:"frecuencia de uso",label:"Frecuencia de uso","error-messages":e.errors.collect("frecuencia de uso"),required:""},model:{value:e.cup.frecuencia_uso,callback:function(a){e.$set(e.cup,"frecuencia_uso",a)},expression:"cup.frecuencia_uso"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.nivelAutorizacion,name:"nivel de autorizacion",label:"Nivel de autorización","error-messages":e.errors.collect("nivel de autorizacion"),required:""},model:{value:e.cup.nivel_autorizacion,callback:function(a){e.$set(e.cup,"nivel_autorizacion",a)},expression:"cup.nivel_autorizacion"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"no-data":"Busqueda por código o nombre.",hint:"codigo","item-text":"nombre","data-title":"nombre","data-subtitle":"codigo",label:"SOAT",entidad:"cm_mansoats",preicon:"subtitles",name:"soat","no-btn-create":"",rules:"required","error-messages":e.errors.collect("soat"),clearable:"","min-characters-search":2},on:{changeid:function(a){return e.cup.cm_mansoat_id=a}},model:{value:e.cup.soat,callback:function(a){e.$set(e.cup,"soat",a)},expression:"cup.soat"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:""}},[t("postulador-v2",{attrs:{"no-data":"Busqueda por código, nombre o referencia",hint:"codigo","item-text":"nombre","data-title":"nombre","data-subtitle":"codigo",label:"ISS",entidad:"cm_manisss",preicon:"list_alt",name:"iss","no-btn-create":""},on:{changeid:function(a){return e.cup.cm_maniss_id=a}},model:{value:e.cup.maniss,callback:function(a){e.$set(e.cup,"maniss",a)},expression:"cup.maniss"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm2:""}},[t("v-subheader",{staticClass:"pa-0 ma-0"},[e._v("POS")]),e._v(" "),t("v-switch",{staticClass:"ma-0 pa-0",attrs:{color:"accent","true-value":"Si","false-value":"No"},model:{value:e.cup.pos,callback:function(a){e.$set(e.cup,"pos",a)},expression:"cup.pos"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm2:""}},[t("v-subheader",{staticClass:"pa-0 ma-0"},[e._v("Requiere Permiso")]),e._v(" "),t("v-switch",{staticClass:"ma-0 pa-0",attrs:{color:"accent","true-value":1,"false-value":0},model:{value:e.cup.sw_requiere_permiso_especial,callback:function(a){e.$set(e.cup,"sw_requiere_permiso_especial",a)},expression:"cup.sw_requiere_permiso_especial"}})],1)],1)],1)],1)],1),e._v(" "),t("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[e._v("settings")]),e._v(" Configuración validador")],1)],1),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.coberturas,name:"cobertura",label:"Cobertura","error-messages":e.errors.collect("cobertura"),required:""},model:{value:e.cup.cobertura,callback:function(a){e.$set(e.cup,"cobertura",a)},expression:"cup.cobertura"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.duplicados,name:"duplicado",label:"Duplicado","error-messages":e.errors.collect("duplicado"),required:""},model:{value:e.cup.duplicado,callback:function(a){e.$set(e.cup,"duplicado",a)},expression:"cup.duplicado"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.complementos_cups.vidas,name:"vida",label:"Vida","error-messages":e.errors.collect("vida"),required:""},model:{value:e.cup.vida,callback:function(a){e.$set(e.cup,"vida",a)},expression:"cup.vida"}})],1)],1)],1)],1)],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[[t("v-card",[t("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[t("v-toolbar-title",{staticClass:"subheading"},[t("v-icon",[e._v("import_contacts")]),e._v(" Diagnósticos Relacionados")],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(a){a.preventDefault(),e.dialogRango=!0}}},[t("v-icon",[e._v("add")]),e._v(" Agregar item")],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-divider"),e._v(" "),t("v-data-table",{attrs:{headers:e.headers,items:e.rangosDiagnosticos,loading:e.tableLoading,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(a){return[t("td",[e._v(e._s(a.item[0]))]),e._v(" "),t("td",[e._v(e._s(a.item[1]))]),e._v(" "),t("td",[t("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:a.item.show,callback:function(t){e.$set(a.item,"show",t)},expression:"props.item.show"}},[t("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:a.item.show,callback:function(t){e.$set(a.item,"show",t)},expression:"props.item.show"}},[t("v-icon",[e._v("chevron_left")]),e._v(" "),t("v-icon",[e._v("close")])],1),e._v(" "),t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(t){return e.editarRango(a.index)}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),t("span",[e._v("Editar")])],1),e._v(" "),t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(t){return e.cargarRangoAEliminar(a.index)}},slot:"activator"},[t("v-icon",{attrs:{color:"accent"}},[e._v("delete")])],1),e._v(" "),t("span",[e._v("Eliminar")])],1)],1)],1)]}},{key:"pageText",fn:function(a){return[e._v("\n                            "+e._s(a.pageStart)+" - "+e._s(a.pageStop)+" de "+e._s(a.itemsLength)+"\n                          ")]}}])},[e._v(" "),e.cup.id?t("template",{slot:"no-data"},[e.tableLoading?t("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n                              Lo sentimos, no tenemos registros para mostrar. "),t("v-icon",[e._v("sentiment_very_dissatisfied")])],1):t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n                              Estamos cargando los registros. "),t("v-icon",[e._v("sentiment_satisfied_alt")])],1)],1):t("template",{slot:"no-data"},[t("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n                              No has agregado ningún diagnóstico relacionado.\n                            ")])],1)],2)],1)]],2)],1)],1)],1)],1)],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[t("v-btn",{attrs:{loading:e.loadingSubmit},on:{click:e.formReset}},[e._v("Limpiar")])],1),e._v(" "),t("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[t("v-btn",{on:{click:function(a){return e.close()}}},[e._v("Cancelar")]),e._v(" "),t("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit,disabled:e.errors.any()},on:{click:function(a){return a.preventDefault(),e.submit(a)}}},[e._v("Guardar")])],1)],1)],1)],1)],1)},o=[],s={render:i,staticRenderFns:o};a.a=s},594:function(e,a,t){"use strict";function i(e){t(1995)}Object.defineProperty(a,"__esModule",{value:!0});var o=t(1128),s=t(1997),r=t(1),n=i,c=r(o.a,s.a,!1,n,"data-v-beb56b3e",null);a.default=c.exports}});
//# sourceMappingURL=116.586643aabfc91f4b9c40.js.map