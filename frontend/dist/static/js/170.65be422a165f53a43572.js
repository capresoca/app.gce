webpackJsonp([170],{1206:function(e,t,a){"use strict";var o=a(23),r=a.n(o),s=a(249),i=a.n(s),n=a(255),l=a.n(n),d=a(7),c=a.n(d),u=a(13),p=a.n(u),v=a(14),m=a.n(v),f=a(12),b=a(58),g=a(40),_=a(248),h=a(59),x=a(251),y=a(254);t.a={name:"registroCDP",props:["parametros"],components:{Loading:b.default,InputDetailFlex:function(){return new Promise(function(e){e()}).then(a.bind(null,250))},InputNumber:y.default},data:function(){return{cdp:null,presupuesto:null,presupuestos:[],rubro:{},rubros:[],rubrosCreados:"",presupuestoRubro:{},detalle:{},dependencia:null,localLoading:!1,seEstaCreando:!1,tableLoading:!1,loadingSubmit:!1,dialog:!1,dialogAnular:!1,menuDate:!1,readOnly:!1,estado:null,headers:[{text:"Rubro",align:"left",sortable:!1,value:"rubro"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Tipo gasto",align:"left",sortable:!1,value:"tipoGasto"},{text:"Valor",align:"left",sortable:!1,value:"valor"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset(),this.resetDialog(),this.validadorPostulador(),this.loadLocalStorage()},mounted:function(){null!==this.parametros.entidad?this.getRegistro(this.parametros.entidad.id):this.obtenerPresupuestos(),this.resetDialog();var e={custom:{rubro:{not_in:"Este rubro ya fue registrado."}}};this.$validator.localize("es",e)},computed:{complementos:function(){return h.b.getters.complementosPresupuesto},iconoEstado:function(){return"Registrada"===this.estado?"stars":"Confirmada"===this.estado?"check_circle":"Anulada"===this.estado?"remove_circle":void 0},colorEstado:function(){return"Registrada"===this.estado?"primary":"Confirmada"===this.estado?"teal":"Anulada"===this.estado?"red":void 0},computedDateFormatted:function(){return this.formDate(this.cdp.fecha)}},watch:{"detalle.pr_rubro_id":function(e){e&&(this.detalle.rubro=this.rubros.find(function(t){return t.id===e}),this.obtenerPresupuestoRubro())},"cdp.fecha":function(){this.sumarDiasVigencia(this.cdp.vigente)}},methods:{getRegistro:function(e){var t=this,a=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("pr_cdps/"+e).then(function(e){""!==e.data&&(t.cdp=e.data.data,t.estado=t.cdp.estado,t.dependencia=t.cdp.dependencia,"Registrada"===e.data.data.estado&&t.obtenerPresupuesto(t.cdp.presupuesto_inicial_gasto.periodo),"Confirmada"!==t.cdp.estado&&"Anulada"!==t.cdp.estado||(t.readOnly=!0,t.cdp.periodo=e.data.data.periodo,t.presupuesto=e.data.data.presupuesto_inicial_gasto)),a.hide()}).catch(function(e){a.hide(),t.$store.commit(f.b,{msg:"Hay un error al traer el registro. "+e,color:"danger"})})},obtenerPresupuesto:function(e){var t=this,a=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("cdps/"+e).then(function(e){""!==e.data&&(t.presupuesto=e.data.strgasto,t.rubros=e.data.rubros,t.cdp.pr_strgasto_id=t.presupuesto.id,t.cdp.periodo=t.presupuesto.periodo,t.cdp.pr_entidadresolucion_id=t.presupuesto.entidad_resolucion.id),a.hide()}).catch(function(e){a.hide(),t.$store.commit(f.b,{msg:"Hay un error al traer el registro. "+e,color:"danger"})})},obtenerPresupuestos:function(){var e=this;this.seEstaCreando=!0;var t=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("cdp_periodos_presupuestos ").then(function(a){""!==a.data&&(e.presupuestos=a.data,e.obtenerPresupuesto(e.presupuestos[0])),t.hide()}).catch(function(a){t.hide(),e.$store.commit(f.a,{expression:" al obtener presupuesto. ",error:a})})},obtenerPresupuestoRubro:function(){var e=this,t=this.$loading.show({container:this.$refs.dialogModificacion.$el});this.axios.get("cdp_presupuesto_rubro?strgastoId="+this.presupuesto.id+"&rubroId="+this.detalle.rubro.id).then(function(a){""!==a.data&&(e.presupuestoRubro=a.data.data,e.detalle.tipo_gasto=e.presupuestoRubro.tipo_gasto,e.detalle.valor_disponible=e.presupuestoRubro.valor_disponible),t.hide()}).catch(function(a){t.hide(),e.$store.commit(f.b,{msg:"Hay un error al traer el registro. "+a,color:"danger"})})},getRubrosUsados:function(){var e=this;return this.cdp.detalles.map(function(t){if(null==e.detalle.rubro.id||e.detalle.rubro.id!==t.rubro.id)return t.rubro.id})},agregarDetalle:function(e){var t=this;return m()(p.a.mark(function a(){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.validador("formCdpDialog");case 2:if(!a.sent){a.next=10;break}t.agregarValoresAlDetalle(),"number"!=typeof e.index?t.cdp.detalles.push(e):t.cdp.detalles.splice(t.cdp.detalles.findIndex(function(a){return t.cdp.detalles.indexOf(a)===e.index}),1,e),t.calcularCdp(),t.dialog=!1,t.resetDialog(),a.next=11;break;case 10:t.$store.commit(f.b,{msg:"Hay uno o más campos vacios.",color:"danger"});case 11:case"end":return a.stop()}},a,t)}))()},saveLocalStorage:function(){this.cdp.fecha&&localStorage.setItem("fechaCdp",c()(this.cdp.fecha))},loadLocalStorage:function(){localStorage.getItem("fechaCdp")&&(this.cdp.fecha=JSON.parse(localStorage.getItem("fechaCdp")))},editarDetalle:function(e,t){this.detalle=JSON.parse(c()(t)),this.detalle.index=e,this.dialog=!0,this.rubrosCreados=this.getRubrosUsados()},eliminarDetalle:function(e){this.cdp.detalles.splice(e,1),this.calcularCdp(),this.dialog=!1},calcularCdp:function(){var e=0,t=!0,a=!1,o=void 0;try{for(var r,s=l()(this.cdp.detalles);!(t=(r=s.next()).done);t=!0){e+=r.value.valor}}catch(e){a=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw o}}this.cdp.valor_cdp=e},formReset:function(){this.cdp={id:"",periodo:null,fecha:null,fecha_vence:null,vigente:null,documento:null,detalle_modificacion:null,estado:"Registrada",concepto_anulacion:null,fecha_anulacion:null,valor_cdp:0,detalles:[]},this.rubrosCreados=this.getRubrosUsados(),this.presupuesto={entidad_resolucion:{periodo:""},detalles:[]},this.presupuestoRubro={tipo_gasto:null,valor_inicial:null}},resetDialog:function(){this.dialog=!1,this.detalle={pr_tipo_gasto_id:null,tipo_gasto:{nombre:null},valor:0,valor_ejecutado:null,valor_disponible:null,rubro:{id:"",codigo:""}},this.$validator.reset(),this.rubrosCreados=this.getRubrosUsados()},agregarValoresAlDetalle:function(){this.detalle.pr_detstrgasto_id=this.presupuestoRubro.id,this.detalle.pr_rubro_id=this.detalle.rubro.id,this.detalle.pr_tipo_gasto_id=this.presupuestoRubro.tipo_gasto.id},sumarDiasVigencia:function(e){this.cdp.fecha_vence=this.moment(this.cdp.fecha).add(e,"days").format("YYYY/MM/DD")},openDialog:function(){this.dialog=!0,this.rubrosCreados=this.getRubrosUsados()},formDate:function(e){if(!e)return null;var t=e.split("-"),a=i()(t,3);return a[0]+"/"+a[1]+"/"+a[2]},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},validadorPostulador:function(){var e=this;x.a.extend("rubroValido",{validate:function(t,a){return new r.a(function(a){var o={};if(null!==t&&void 0!==t&&""!==t)return o=e.rubrosCreados.includes(t.id)?{valido:!1,mensaje:"Rubro ya usado"}:{valido:!0,mensaje:null},a({valid:o.valido,data:{message:o.mensaje}})})},getMessage:function(e,t,a){return a.message}})},filterRubros:function(e,t){var a=function(e){return null!=e?e:""},o=a(e.nombre+" "+e.codigo+e.codigo.split(".").join("")),r=a(t);return o.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},confirmar:function(){this.cdp.estado="Confirmada",this.submit()},anular:function(){this.dialogAnular=!1,this.cdp.estado="Anulada",this.submit()},submit:function(){var e=this;return m()(p.a.mark(function t(){var a,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formCdp");case 2:if(!t.sent){t.next=9;break}e.localLoading=!0,a=e.seEstaCreando?"crear":"editar",o=e.seEstaCreando?e.axios.post("pr_cdps",e.cdp):e.axios.put("pr_cdps/"+e.cdp.id,e.cdp),o.then(function(t){e.seEstaCreando?(e.$store.commit(f.b,{msg:"Item creado satisfactoriamente",color:"success"}),e.$store.commit(_.m,{item:t.data.data,estado:a,key:e.parametros.key}),e.$store.dispatch(g.c,{contexto:e,itemId:e.parametros.tabOrigin})):(e.$store.commit(f.b,{msg:"Item actualizado satisfactoriamente",color:"success"}),e.$store.commit(_.m,{item:t.data.data,estado:a,key:e.parametros.key}),e.$store.dispatch(g.c,{contexto:e,itemId:e.parametros.tabOrigin}))}).catch(function(t){e.localLoading=!1,e.$store.commit(f.a,{expression:" al guardar el registro. ",error:t})}),t.next=10;break;case 9:e.$store.commit(f.b,{msg:"Hay uno o más campos vacios.",color:"danger"});case 10:case"end":return t.stop()}},t,e)}))()}}}},2158:function(e,t,a){var o=a(2159);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(456)("9371c95a",o,!0,{})},2159:function(e,t,a){t=e.exports=a(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroCDP.vue",sourceRoot:""}])},2160:function(e,t,a){"use strict";var o=function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formCdpDialog"},on:{submit:function(e){return e.preventDefault(),t.agregarDetalle(t.detalle)}}},[o("v-card",{ref:"dialogModificacion"},[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[t._v("Agregar rubro")])]),t._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required|rubroValido",expression:"'required|rubroValido'"}],attrs:{items:t.rubros,filter:t.filterRubros,"item-text":"nombre","item-value":"id",name:"rubro",label:"Rubro",hint:t.detalle.rubro?t.detalle.rubro.codigo:"","persistent-hint":"","no-data-text":"No hay rubros disponibles","error-messages":t.errors.collect("rubro"),required:"","prepend-icon":"subtitles","return-object":""},on:{change:function(){return t.obtenerPresupuestoRubro()}},scopedSlots:t._u([{key:"item",fn:function(e){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.nombre)}}),t._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.codigo)}})],1)]]}}]),model:{value:t.detalle.rubro,callback:function(e){t.$set(t.detalle,"rubro",e)},expression:"detalle.rubro"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"tipo de gasto",attrs:{readonly:"",label:"Tipo de gasto","prepend-icon":"compare_arrows",name:"tipo de gasto",required:""},model:{value:t.detalle.tipo_gasto.nombre,callback:function(e){t.$set(t.detalle.tipo_gasto,"nombre",e)},expression:"detalle.tipo_gasto.nombre"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("input-detail-flex",{attrs:{label:"Valor disponible",prependIcon:"money",text:t._f("numberFormat")(t.detalle.valor_disponible,0,"$")}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("input-number",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:1|max_value:"+t.detalle.valor_disponible,expression:"'required|min_value:1|max_value:' + detalle.valor_disponible"}],attrs:{label:"Valor a ejecutar",name:"valor a ejecutar",precision:0,"prepend-icon":"attach_money","error-messages":t.errors.collect("valor a ejecutar")},model:{value:t.detalle.valor,callback:function(e){t.$set(t.detalle,"valor",t._n(e))},expression:"detalle.valor"}})],1)],1)],1),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),t._v(" "),o("v-btn",{on:{click:t.resetDialog}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.dialogAnular,callback:function(e){t.dialogAnular=e},expression:"dialogAnular"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3"},[o("v-card-text",{staticClass:"title"},[t._v("¿Por qué anula el CDP?")])],1),t._v(" "),o("v-container",{attrs:{fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:t.cdp.concepto_anulacionint,callback:function(e){t.$set(t.cdp,"concepto_anulacionint",e)},expression:"cdp.concepto_anulacionint"}},[o("div",{attrs:{slot:"label"},slot:"label"},[t._v("\n                Detalle de anulación\n              ")])])],1)],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.dialogAnular=!1}}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.anular}},[t._v("Enviar")])],1)],1)],1),t._v(" "),o("v-card",{ref:"formPresupuesto"},[o("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[o("v-toolbar-title",[t._v(" Registro CDP ")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-chip",{attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[o("span",{staticClass:"subheading"},[t._v("N°")]),t._v(" \n        "),o("span",{staticClass:"subheading",domProps:{textContent:t._s(null==t.cdp.consecutivo?"00":t.cdp.consecutivo)}})]),t._v(" "),t.seEstaCreando?t._e():o("v-chip",{attrs:{color:t.colorEstado,"text-color":"white"}},[o("v-avatar",[o("v-icon",[t._v(t._s(t.iconoEstado))])],1),t._v("\n        "+t._s(t.estado)+"\n      ")],1)],1),t._v(" "),o("v-container",{staticStyle:{"max-width":"inherit"},attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{attrs:{"data-vv-scope":"formCdp"}},[o("v-container",{attrs:{fluid:"","grid-list-md":""}},["Anulada"===t.cdp.estado?o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-alert",{attrs:{value:!0,type:"error"}},[o("strong",[t._v("Concepto anulación:")]),t._v(" "+t._s(t.cdp.concepto_anulacionint)+"\n                  ")])],1)],1):t._e(),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[o("v-icon",[t._v("assignment_ind")]),t._v(" Presupuesto")],1)],1),t._v(" "),o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:""}},[null!==t.parametros.entidad?o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"periodo",attrs:{"prepend-icon":"calendar_today",label:"Periodo",readonly:""},model:{value:t.presupuesto.entidad_resolucion.periodo,callback:function(e){t.$set(t.presupuesto.entidad_resolucion,"periodo",e)},expression:"presupuesto.entidad_resolucion.periodo"}})],1):o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.presupuestos,name:"periodo",label:"Periodo","no-data-text":"No hay resoluciones disponibles","error-messages":t.errors.collect("periodo"),required:"","prepend-icon":"calendar_today"},on:{change:function(e){return t.obtenerPresupuesto(e)}},model:{value:t.presupuesto.entidad_resolucion.periodo,callback:function(e){t.$set(t.presupuesto.entidad_resolucion,"periodo",e)},expression:"presupuesto.entidad_resolucion.periodo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"unidad ejecturoa",attrs:{"prepend-icon":"account_balance",label:"Unidad ejecutora",readonly:""},model:{value:t.presupuesto.entidad_resolucion.codigo,callback:function(e){t.$set(t.presupuesto.entidad_resolucion,"codigo",e)},expression:"presupuesto.entidad_resolucion.codigo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"nombre",attrs:{"prepend-icon":"account_balance",label:"Nombre",readonly:""},model:{value:t.presupuesto.entidad_resolucion.nombre,callback:function(e){t.$set(t.presupuesto.entidad_resolucion,"nombre",e)},expression:"presupuesto.entidad_resolucion.nombre"}})],1)],1)],1)],1)],1),t._v(" "),o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[o("v-icon",[t._v("assignment_ind")]),t._v(" General")],1)],1),t._v(" "),o("v-card-text",[o("v-layout",["Confirmada"!==t.estado&&"Anulada"!==t.estado?o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",readonly:"",name:"fecha activo","error-messages":t.errors.collect("fecha activo")},slot:"activator",model:{value:t.computedDateFormatted,callback:function(e){t.computedDateFormatted=e},expression:"computedDateFormatted"}}),t._v(" "),o("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(e){t.menuDate=!1},change:function(){var a=t.$validator.errors.items.findIndex(function(e){return"fecha activo"===e.field});t.$validator.errors.items.splice(-1!==a?a:0,-1!==a?1:0),e.saveLocalStorage()}},model:{value:t.cdp.fecha,callback:function(e){t.$set(t.cdp,"fecha",e)},expression:"cdp.fecha"}})],1)],1):o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"fecha",attrs:{"prepend-icon":"event",label:"Fecha",name:"fecha",readonly:"","error-messages":t.errors.collect("fecha")},model:{value:t.computedDateFormatted,callback:function(e){t.computedDateFormatted=e},expression:"computedDateFormatted"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],key:"vigente",attrs:{"prepend-icon":"assignment",label:"Vigencia (Días)",name:"vigencia",required:"",readonly:t.readOnly,"error-messages":t.errors.collect("vigencia")},on:{keyup:function(e){return t.sumarDiasVigencia(t.cdp.vigente)}},model:{value:t.cdp.vigente,callback:function(e){t.$set(t.cdp,"vigente",e)},expression:"cdp.vigente"}})],1),t._v(" "),t.cdp.vigente?o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"fecha vence",attrs:{"prepend-icon":"event",label:"Fecha vence",name:"fecha vence",required:"",readonly:"","error-messages":t.errors.collect("fecha vence")},model:{value:t.cdp.fecha_vence,callback:function(e){t.$set(t.cdp,"fecha_vence",e)},expression:"cdp.fecha_vence"}})],1):t._e()],1),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.complementos.dependencias,"item-text":"codigo","item-value":"id",name:"dependencias",label:"Dependencia","no-data-text":"No hay dependenciass disponibles","error-messages":t.errors.collect("dependencias"),required:"","prepend-icon":"subtitles","return-object":"",readonly:t.readOnly},on:{change:function(e){return t.cdp.pr_dependencia_id=e?e.id:null}},scopedSlots:t._u([{key:"item",fn:function(e){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.nombre)}}),t._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.codigo_nombre)}})],1)]]}}]),model:{value:t.dependencia,callback:function(e){t.dependencia=e},expression:"dependencia"}})],1),t._v(" "),t.dependencia?o("v-flex",{attrs:{xs12:"",sm8:""}},[o("v-text-field",{key:"nombre",attrs:{label:"Nombre",name:"nombre",readonly:""},model:{value:t.dependencia.nombre,callback:function(e){t.$set(t.dependencia,"nombre",e)},expression:"dependencia.nombre"}})],1):t._e()],1),t._v(" "),o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"objeto",attrs:{"prepend-icon":"reorder",label:"Objeto",name:"objeto",required:"",readonly:t.readOnly,"error-messages":t.errors.collect("objeto")},model:{value:t.cdp.objecto,callback:function(e){t.$set(t.cdp,"objecto",e)},expression:"cdp.objecto"}})],1)],1)],1)],1)],1),t._v(" "),t.presupuesto.id?o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[[o("loading",{model:{value:t.localLoading,callback:function(e){t.localLoading=e},expression:"localLoading"}}),t._v(" "),o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[t._v("Rubros")]),t._v(" "),o("v-spacer"),t._v(" "),t.readOnly?t._e():o("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){return e.preventDefault(),t.openDialog(e)}}},[o("v-icon",[t._v("add")]),t._v(" Agregar rubro")],1)],1),t._v(" "),o("v-data-table",{attrs:{headers:t.headers,items:t.cdp.detalles,loading:t.tableLoading,"hide-actions":"","rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",[t._v(t._s(e.item.rubro.codigo))]),t._v(" "),o("td",[t._v(t._s(e.item.rubro.nombre))]),t._v(" "),o("td",[t._v(t._s(e.item.tipo_gasto.nombre))]),t._v(" "),o("td",[t._v(t._s(t._f("numberFormat")(e.item.valor,0,"$")))]),t._v(" "),o("td",[t.readOnly?t._e():o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[o("v-icon",[t._v("chevron_left")]),t._v(" "),o("v-icon",[t._v("close")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return t.editarDetalle(e.index,e.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1),t._v(" "),o("span",[t._v("Editar")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return t.eliminarDetalle(e.index,e.item.id)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[t._v("delete")])],1),t._v(" "),o("span",[t._v("Eliminar")])],1)],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("\n                          "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" de "+t._s(e.itemsLength)+"\n                        ")]}},{key:"footer",fn:function(){return[o("td",{attrs:{colspan:t.headers.length}},[o("v-spacer"),t._v(" "),o("strong",[t._v("Valor CDP: "+t._s(t._f("numberFormat")(t.cdp.valor_cdp,0,"$")))])],1)]},proxy:!0}],null,!1,3843792617)},[t._v(" "),o("template",{slot:"no-data"},[t.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n                            Estamos cargando los registros. "),o("v-icon",[t._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n                            Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)]],2):t._e()],1)],1)],1)],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),"Confirmada"!==t.estado&&"Anulada"!==t.estado?o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[t.cdp.id?o("v-btn",{attrs:{dark:"",color:"danger",loading:t.loadingSubmit},on:{click:function(e){t.dialogAnular=!0}}},[t._v("Anular")]):t._e()],1),t._v(" "),o("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},["Confirmada"!==t.estado&&"Anulada"!==t.estado?o("v-btn",{attrs:{color:"primary",loading:t.loadingSubmit},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Guardar")]):t._e(),t._v(" "),o("v-btn",{attrs:{slot:"activator",color:"success"},on:{click:t.confirmar},slot:"activator"},[t.seEstaCreando?o("span",[t._v("Guardar y Confirmar")]):o("span",[t._v("Confirmar")])])],1)],1)],1):t._e()],1)],1)},r=[],s={render:o,staticRenderFns:r};t.a=s},660:function(e,t,a){"use strict";function o(e){a(2158)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1206),s=a(2160),i=a(1),n=o,l=i(r.a,s.a,!1,n,"data-v-1df7ab7a",null);t.default=l.exports}});
//# sourceMappingURL=170.65be422a165f53a43572.js.map