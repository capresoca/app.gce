webpackJsonp([125],{1350:function(a,e,t){"use strict";var o=t(13),r=t.n(o),n=t(14),i=t.n(n),s=t(7),l=t.n(s);e.a={name:"Relogbancario",components:{InputFile:function(){return t.e(288).then(t.bind(null,748))},FiltroLogBancarios:function(){return t.e(334).then(t.bind(null,2643))}},data:function(){return{showForm:!0,rutaBaseUno:null,item:null,resultado:[],dialogCargue:!1,dialogLoader:!1,message:"",bolItem:!1,dataTableLog:{nameItemState:"tableReflogbancario",route:"reccompensaciones/log_bancarindexs",makeHeaders:[{text:"Fecha de Pago",align:"left",sortable:!1,value:"fecha_pago",component:{template:"<span>{{value.fecha_pago ? moment(value.fecha_pago).format('YYYY/MM/DD') : ''}}</span>",props:["value"]}},{text:"Tipo Archivo",align:"left",sortable:!1,value:"tipo_archivo",component:{template:"<span>{{value.tipo_archivo ? 'Recaudo ' + (value.tipo_archivo === 1 ? 'Aportante' : 'SGP') : ''}}</span>",props:["value"]}},{text:"Cantidad de Recaudos",align:"left",sortable:!1,classData:"text-xs-center",value:"cantidad_archivos"},{text:"Fecha Descarga",align:"left",sortable:!1,value:"fecha_descarga"},{text:"Fecha Cargue",align:"left",sortable:!1,value:"fecha_cargue"},{text:"Resultado",align:"left",sortable:!1,value:"estado",component:{template:"<span>{{value.estado ? 'Cargue ' + (value.estado === 1 ? 'Exitoso' : 'Inconsistencias') : ''}}</span>",props:["value"]}},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0",value:"id"}]}}},created:function(){this.rutaBaseUno=this.clone(this.dataTableLog.route),this.formReset()},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("recLogBancario")}},methods:{resetOptions:function(a){return a.options=[],a},filterOrSet:function(a){switch(a.opcion){case"uno":var e=this.clone(this.rutaBaseUno);if(null!==a.fecha_inicio||null!==a.fecha_fin||null!==a.banco||null!==a.tipo_archivo){var t={fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,banco:a.banco,tipo_archivo:a.tipo_archivo};null!==e&&0===e.indexOf("param")&&(e=this.rutaBaseUno);var o=l()(t);e=e+(e.indexOf("?")>-1?"&":"?")+"collection="+o}this.dataTableLog.route=e;break;case"dos":this.dataTableLog.route=this.rutaBaseUno,this.$refs.logbancarios.optionEvent("ocho");break;case"tres":this.dialogCargue=!this.dialogCargue,this.dataTableLog.route=this.rutaBaseUno}},formReset:function(){this.item={archivo:null},this.resultado=[{name:"Cantidad Archivos Procesados",value:0,color:"black--text"},{name:"Cantidad Archivos Cargados Èxitosamente",value:0,color:"green--text"},{name:"Cantidad Archivos Con Inconsistencias",value:0,color:"red--text"}]},close:function(){this.formReset(),this.dialogCargue=!1,this.dialogLoader=!1,this.message="",this.bolItem=!1},validador:function(a){return this.$validator.validateAll(a).then(function(a){return a})},validar:function(){var a=this;return i()(r.a.mark(function e(){var t,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$refs.archivoAdjunto.validate();case 2:return t=e.sent,e.next=5,a.validador("formLog");case 5:if(e.t1=e.sent,!e.t1){e.next=8;break}e.t1=t;case 8:if(e.t0=e.t1,!e.t0){e.next=11;break}e.t0=null!==a.item.archivo;case 11:if(!e.t0){e.next=19;break}a.dialogLoader=!0,a.message="Validando archivo...",o=new FormData,o.append("archivo",void 0===a.item.archivo?"":a.item.archivo),a.axios.post("reccompensaciones/logs_bancarios",o).then(function(e){var t=a.clone(e.data.data);a.resultado[0].value=t.archivosProcesados,a.resultado[1].value=t.cargadosConExito,a.resultado[2].value=t.cargadosConInconsistencia,a.bolItem=!a.bolItem,a.dialogLoader=!1,a.message="",a.$store.commit("SNACK_SHOW",{msg:"Validación y Cargue correctamente realizado.",color:"success"})}).catch(function(e){a.dialogLoader=!1,a.message="",a.$store.commit("SNACK_ERROR_LIST",{expression:" Error en el cargue del archivo. ",error:e})}),e.next=20;break;case 19:a.$store.commit("SNACK_SHOW",{msg:"Se debe cargar un archivo para iniciar el proceso.",color:"danger"});case 20:case"end":return e.stop()}},e,a)}))()}}}},2641:function(a,e,t){var o=t(2642);"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);t(456)("48d3c296",o,!0,{})},2642:function(a,e,t){e=a.exports=t(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Relogbancario.vue",sourceRoot:""}])},2647:function(a,e,t){"use strict";var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-card",[t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:a.dialogCargue,callback:function(e){a.dialogCargue=e},expression:"dialogCargue"}},[t("v-card",[t("toolbar-list",{attrs:{title:"Cargue Log "+(a.bolItem?"Financiero":"Bancario")}}),a._v(" "),a.bolItem?t("v-slide-y-transition",[t("v-container",[t("v-layout",[t("v-flex",{attrs:{xs12:"",sm12:""}},a._l(a.resultado,function(e,o){return t("v-list-tile",{key:o,attrs:{avatar:""}},[t("v-list-tile-content",[t("v-list-tile-title",{class:e.color,domProps:{innerHTML:a._s(""+e.name)}})],1),a._v(" "),t("v-list-tile-avatar",[t("v-btn",{attrs:{fab:"",flat:""},domProps:{innerHTML:a._s("<b>"+e.value+"</b>")}})],1)],1)}),1)],1)],1)],1):t("v-form",{attrs:{"data-vv-scope":"formLog"}},[t("v-container",{attrs:{"grid-list-sm":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:""}},[t("input-file",{ref:"archivoAdjunto",staticClass:"mb-3",attrs:{label:"Adjuntar Archivo","file-name":a.item.archivo?a.item.archivo.nombre:null,accept:"application/x-zip-compressed",hint:"Extenciones aceptadas: zip","prepend-icon":"attach_file"},model:{value:a.item.archivo,callback:function(e){a.$set(a.item,"archivo",e)},expression:"item.archivo"}})],1)],1)],1)],1),a._v(" "),t("v-card-actions",{staticClass:"grey lighten-3"},[t("v-spacer"),a._v(" "),t("v-btn",{attrs:{flat:""},domProps:{textContent:a._s(a.bolItem?"Cerrar":"Cancelar")},on:{click:a.close}}),a._v(" "),a.bolItem?a._e():t("v-btn",{attrs:{color:"blue darken-1",flat:""},domProps:{textContent:a._s("Cargar")},on:{click:function(e){return e.preventDefault(),a.validar()}}})],1)],1)],1),a._v(" "),t("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:a.dialogLoader,callback:function(e){a.dialogLoader=e},expression:"dialogLoader"}},[t("v-card",{attrs:{color:"primary",dark:""}},[t("v-card-text",[t("span",{domProps:{textContent:a._s(a.message)}}),a._v(" "),t("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a._v(" "),t("toolbar-list",{attrs:{info:a.infoComponent,title:"Log Bancarios",subtitle:"Carga de archivos"}}),a._v(" "),t("v-slide-y-transition",[t("filtro-log-bancarios",{directives:[{name:"show",rawName:"v-show",value:a.showForm,expression:"showForm"}],ref:"logbancarios",on:{filterOrSet:function(e){return a.filterOrSet(e)},cancel:function(e){a.showForm=!1}},model:{value:a.showForm,callback:function(e){a.showForm=e},expression:"showForm"}})],1),a._v(" "),t("data-table-v2",{ref:"tableReflogbancario",attrs:{"con-registro":!1,"con-columnas":!1,"con-buscador":!1},on:{resetOption:function(e){return a.resetOptions(e)}},model:{value:a.dataTableLog,callback:function(e){a.dataTableLog=e},expression:"dataTableLog"}})],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},726:function(a,e,t){"use strict";function o(a){t(2641)}Object.defineProperty(e,"__esModule",{value:!0});var r=t(1350),n=t(2647),i=t(1),s=o,l=i(r.a,n.a,!1,s,"data-v-e2213fc8",null);e.default=l.exports}});
//# sourceMappingURL=125.a4a7c275b3dec0d672c5.js.map