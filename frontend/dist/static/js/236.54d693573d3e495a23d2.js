webpackJsonp([236],{1190:function(e,a,i){"use strict";var o=i(12),t=i(40),r=i(248),c=i(0),s=i.n(c);a.a={name:"RegistroPeriodos4505",props:["parametros"],data:function(){return{fab:!1,pickerFechaInicioValidacion:!1,pickerFechaFinValidacion:!1,periodo:{id:"",year:"",periodo:"",fecha_inicio_validacion:"",fecha_fin_validacion:""},years:[],periodos:[]}},methods:{submit:function(){var e=this;s()(this.parametros.fecha_fin_validacion,"YYYY-MM-DD").isSameOrAfter(s()(this.parametros.fecha_inicio_validacion,"YYYY-MM-DD")),this.periodo.id?this.axios.put("periodos4505/"+this.periodo.id,this.periodo).then(function(a){"validador"===a.data.state?e.$store.commit(o.b,{msg:"Existen datos que son obligatorios, verifique el formulario",color:"danger"}):"exist"===a.data.state?(e.$store.commit(o.b,{msg:a.data.message,color:"danger"}),e.periodo=a.data.data):"save"===a.data.state?(e.$store.commit(o.b,{msg:"El periodo de validacion se actualizo correctamente",color:"success"}),e.formReset(),e.$store.dispatch(t.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(r._2,{item:a.data.data,estado:"editar",key:e.parametros.key})):e.$store.commit(o.b,{msg:"Error al guardar sin retorno de mensaje "+a.data.message,color:"danger"})}).catch(function(a){e.$store.commit(o.b,{msg:"Hay un error al guardar el registro. "+a.response.data.message,color:"danger"})}):this.axios.post("periodos4505",this.periodo).then(function(a){"validador"===a.data.state?e.$store.commit(o.b,{msg:"Existen datos que son obligatorios, verifique el formulario",color:"danger"}):"exist"===a.data.state?e.$store.commit(o.b,{msg:a.data.message,color:"danger"}):"save"===a.data.state?(e.$store.commit(o.b,{msg:"El periodo de validacion se creó correctamente",color:"success"}),e.formReset(),e.$store.dispatch(t.c,{contexto:e,itemId:e.parametros.tabOrigin}),e.$store.commit(r._2,{item:a.data.data,estado:"crear",key:e.parametros.key})):e.$store.commit(o.b,{msg:"Error al guardar sin retorno de mensaje "+a.data.message,color:"danger"})}).catch(function(a){e.$store.commit(o.b,{msg:"Hay un error al guardar el registro. "+a.response.data.message,color:"danger"})})},getRegistro:function(e){var a=this;this.axios.get("periodos4505/"+e).then(function(e){e.data.exists?a.periodo=e.data.data:a.$store.commit("SNACK_SHOW",{msg:"El identificador del periodo no existe en la base de datos ",color:"error"})}).catch(function(e){a.$store.commit("SNACK_SHOW",{msg:"Status: "+e.response.status+" | "+e.response.data.message,color:"error"})})},formReset:function(){this.pickerFechaInicioValidacion=!1,this.pickerFechaFinValidacion=!1,this.periodo={id:"",year:"",periodo:"",fecha_inicio_validacion:"",fecha_fin_validacion:""}},complementos:function(){var e=this;this.axios.get("complementos-unificador-archivos-4505").then(function(a){e.periodos=a.data.periodos}).catch(function(a){e.$store.commit("SNACK_SHOW",{msg:"Status: "+a.response.status+" | "+a.response.data.message,color:"error"})})},loadYears:function(){for(var e=s()().subtract("3","y").year();e<s()().add("3","y").year();e++)this.years.push(s()(e+"-01-01","Y").add(1,"y").year())}},mounted:function(){this.complementos(),this.loadYears(),null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id)}}},2115:function(e,a,i){"use strict";var o=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"container"},[i("v-container",[i("v-card",{attrs:{flat:"",icon:""}},[i("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      Registro Periodo validador 4505\n    ")]),e._v(" "),i("v-card-text",[i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg3:""}},[i("v-select",{attrs:{disabled:""!=e.periodo.id,items:e.years,placeholder:"Seleccione un año",label:"Año"},model:{value:e.periodo.year,callback:function(a){e.$set(e.periodo,"year",a)},expression:"periodo.year"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg3:""}},[i("v-select",{attrs:{disabled:""!=e.periodo.id,items:e.periodos,placeholder:"Seleccione un periodo",label:"Periodo"},model:{value:e.periodo.periodo,callback:function(a){e.$set(e.periodo,"periodo",a)},expression:"periodo.periodo"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg3:""}},[i("v-dialog",{ref:"pickerFechaInicioValidacion",attrs:{"return-value":e.periodo.fecha_inicio_validacion,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(a){return e.$set(e.periodo,"fecha_inicio_validacion",a)},"update:return-value":function(a){return e.$set(e.periodo,"fecha_inicio_validacion",a)}},model:{value:e.pickerFechaInicioValidacion,callback:function(a){e.pickerFechaInicioValidacion=a},expression:"pickerFechaInicioValidacion"}},[i("v-text-field",{attrs:{slot:"activator",label:"Fecha Inicial validador","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.periodo.fecha_inicio_validacion,callback:function(a){e.$set(e.periodo,"fecha_inicio_validacion",a)},expression:"periodo.fecha_inicio_validacion"}}),e._v(" "),i("v-date-picker",{attrs:{scrollable:""},model:{value:e.periodo.fecha_inicio_validacion,callback:function(a){e.$set(e.periodo,"fecha_inicio_validacion",a)},expression:"periodo.fecha_inicio_validacion"}},[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.pickerFechaInicioValidacion=!1}}},[e._v("Cancelar")]),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){return e.$refs.pickerFechaInicioValidacion.save(e.periodo.fecha_inicio_validacion)}}},[e._v("OK")])],1)],1)],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg3:""}},[i("v-dialog",{ref:"pickerFechaFinValidacion",attrs:{"return-value":e.periodo.fecha_fin_validacion,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(a){return e.$set(e.periodo,"fecha_fin_validacion",a)},"update:return-value":function(a){return e.$set(e.periodo,"fecha_fin_validacion",a)}},model:{value:e.pickerFechaFinValidacion,callback:function(a){e.pickerFechaFinValidacion=a},expression:"pickerFechaFinValidacion"}},[i("v-text-field",{attrs:{slot:"activator",label:"Fecha final de validador","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.periodo.fecha_fin_validacion,callback:function(a){e.$set(e.periodo,"fecha_fin_validacion",a)},expression:"periodo.fecha_fin_validacion"}}),e._v(" "),i("v-date-picker",{attrs:{scrollable:""},model:{value:e.periodo.fecha_fin_validacion,callback:function(a){e.$set(e.periodo,"fecha_fin_validacion",a)},expression:"periodo.fecha_fin_validacion"}},[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.pickerFechaFinValidacion=!1}}},[e._v("Cancelar")]),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){return e.$refs.pickerFechaFinValidacion.save(e.periodo.fecha_fin_validacion)}}},[e._v("OK")])],1)],1)],1)],1),e._v(" "),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}}),e._v(" "),i("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[i("v-btn",{attrs:{color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)],1)],1)],1)],1)},t=[],r={render:o,staticRenderFns:t};a.a=r},645:function(e,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=i(1190),t=i(2115),r=i(1),c=r(o.a,t.a,!1,null,null,null);a.default=c.exports}});
//# sourceMappingURL=236.54d693573d3e495a23d2.js.map