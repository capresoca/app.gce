webpackJsonp([168],{1202:function(e,t,o){"use strict";var a=o(23),i=o.n(a),r=o(249),s=o.n(r),n=o(7),l=o.n(n),c=o(13),d=o.n(c),u=o(14),v=o.n(u),m=o(12),p=o(58),f=o(40),_=o(248),g=o(251);t.a={name:"RegistroModificacion",props:["parametros"],components:{Loading:p.default},data:function(){return{modificacion:null,dialog2:!1,dialogThree:!1,presupuesto:null,detalle_anulacion:null,presupuestos:[],rubro:{},rubros:[],rubrosFiltrados:[],rubrosCreados:"",presupuestoRubro:{},detalle:{},localLoading:!1,seEstaCreando:!1,tableLoading:!1,loadingSubmit:!1,dialog:!1,menuDate:!1,readOnly:!1,headers:[{text:"Rubro",align:"left",sortable:!1,value:"rubro"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Valor inicial",align:"center",sortable:!1,value:"valorInicial"},{text:"Naturaleza",align:"center",sortable:!1,value:"naturaleza"},{text:"Valor movimiento",align:"center",sortable:!1,value:"valormovimiento"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset(),this.resetDialog(),this.validadorPostulador()},mounted:function(){null!==this.parametros.entidad?this.getRegisto(this.parametros.entidad.id):(this.dialog2=!0,this.seEstaCreando=!0),this.resetDialog();var e={custom:{rubro:{not_in:"Este rubro ya fue registrado."}}};this.$validator.localize("es",e)},computed:{iconoEstado:function(){return"Registrada"===this.modificacion.estado?"stars":"Confirmada"===this.modificacion.estado?"check_circle":"Anulada"===this.modificacion.estado?"remove_circle":void 0},colorEstado:function(){return"Registrada"===this.modificacion.estado?"primary":"Confirmada"===this.modificacion.estado?"teal":"Anulada"===this.modificacion.estado?"red":void 0},computedDateFormatted:function(){return this.formDate(this.modificacion.fecha)}},watch:{"modificacion.tipo":function(e){e&&(this.dialog2=!1,this.obtenerPresupuestos(),this.seEstaCreando=!1)},"detalle.pr_rubro_id":function(e){e&&(this.detalle.rubro=this.rubros.find(function(t){return t.id===e}),this.obtenerPresupuestoRubro())}},methods:{getRegisto:function(e){var t=this,o=this.$loading.show({container:this.$refs.formPresupuesto.$el});this.axios.get("pr_mod_presupuestales/"+e).then(function(e){t.modificacion=e.data.data,"Registrada"===e.data.data.estado&&t.obtenerPresupuesto(e.data.data.periodo),"Registrada"!==e.data.data.estado&&(t.readOnly=!0,t.modificacion.periodo=e.data.data.periodo,t.presupuesto="Gasto"===t.modificacion.tipo?e.data.data.presupuesto_inicial_gasto:e.data.data.presupuesto_inicial_ingreso,t.modificacion.gs_strgasto_id="Gasto"===e.data.data.tipo?e.data.data.presupuesto_inicial_gasto.id:null,t.modificacion.detalles=e.data.data.detalles),o.hide()}).catch(function(e){o.hide(),t.$store.commit(m.b,{msg:"Hay un error al traer el registro. "+e,color:"danger"})})},obtenerPresupuesto:function(e){var t=this,o=this.$loading.show({container:this.$refs.formPresupuesto.$el}),a=this.modificacion.tipo;this.axios.get("periodo_presupuestos?periodo="+e+"&tipo="+a).then(function(e){t.presupuesto=e.data.presupuesto,t.rubros=e.data.rubros,t.modificacion.gs_strgasto_id="Gasto"===a?e.data.presupuesto.id:null,console.log("ss",t.modificacion.gs_strgasto_id),t.modificacion.pr_stringreso_id="Ingreso"===a?e.data.presupuesto.id:null,t.modificacion.periodo=t.presupuesto.periodo,o.hide()}).catch(function(e){o.hide(),t.$store.commit(m.b,{msg:"Hay un error al traer el registro. "+e,color:"danger"})})},obtenerPresupuestos:function(){var e=this;if(!this.modificacion.id){var t="Ingreso"===this.modificacion.tipo?"peridos_presupuesto_ingresos":"peridos_presupuesto_gastos";this.axios.get(t).then(function(t){!0===t.data.exists?e.presupuestos=t.data.data:e.$store.commit(m.b,{msg:t.data.data,color:"danger"})}).catch(function(t){e.$store.commit(m.a,{expression:" al obtener presupuesto. ",error:t})})}},obtenerPresupuestoRubro:function(){var e=this,t=this.$loading.show({container:this.$refs.dialogModificacion.$el}),o=this.presupuesto.id;this.axios.get("presupuesto_rubro?presupuestoId="+o+"&rubroId="+this.detalle.rubro.id+"&tipo="+this.modificacion.tipo).then(function(o){""!==o.data&&(e.presupuestoRubro=o.data.data,e.detalle.valor_inicial=e.presupuestoRubro.valor_inicial,e.detalle.tipo_gasto=e.presupuestoRubro.tipo_gasto,e.detalle.tipo_ingreso=e.presupuestoRubro.tipo_ingreso),t.hide()}).catch(function(o){t.hide(),e.$store.commit(m.b,{msg:"Hay un error al traer el registro. "+o,color:"danger"})})},getRubrosUsados:function(){var e=this;return this.modificacion.detalles.map(function(t){if(null==e.detalle.rubro.id||e.detalle.rubro.id!==t.rubro.id)return t.rubro.id})},abrirModal:function(){this.dialog=!0,this.rubrosCreados=this.getRubrosUsados()},anular:function(e){this.modificacion.estado=1===e?"Anulada":"Registrada",this.dialogThree=1===e},actualizarEstado:function(e){this.modificacion.concepto_anulacion=e,this.submit()},agregarDetalle:function(e){var t=this;return v()(d.a.mark(function o(){return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.validador("formDialogGastos");case 2:if(!o.sent){o.next=9;break}t.agregarValoresAlDetalle(),"number"!=typeof e.index?t.modificacion.detalles.push(e):t.modificacion.detalles.splice(t.modificacion.detalles.findIndex(function(o){return t.modificacion.detalles.indexOf(o)===e.index}),1,e),t.dialog=!1,t.resetDialog(),o.next=10;break;case 9:t.$store.commit(m.b,{msg:"Hay uno o más campos vacios.",color:"danger"});case 10:case"end":return o.stop()}},o,t)}))()},editarDetalle:function(e,t){this.detalle=JSON.parse(l()(t)),this.detalle.index=e,this.dialog=!0,this.rubrosCreados=this.getRubrosUsados()},eliminarDetalle:function(e){this.modificacion.detalles.splice(e,1),this.dialog=!1},formReset:function(){this.modificacion={id:null,consecutivo_presupuestal:null,periodo:null,fecha:null,documento:null,detalle_modificacion:null,tipo:null,estado:"Registrada",gs_strgasto_id:null,pr_stringreso_id:null,concepto_anulacion:null,fecha_anulacion:null,detalles:[]},this.rubrosCreados=this.getRubrosUsados(),this.presupuesto={entidad_resolucion:{periodo:""},detalles:[]},this.presupuestoRubro={tipo_ingreso:{nombre:null},tipo_gasto:{nombre:null},valor_inicial:null}},resetDialog:function(){this.dialog=!1,this.detalle={tipo_ingreso:{nombre:""},tipo_gasto:{nombre:""},valor_inicial:null,naturaleza:null,valor_movimiento:null,rubro:{id:""}},this.$validator.reset(),this.rubrosCreados=this.getRubrosUsados()},agregarValoresAlDetalle:function(){this.detalle.valor_inicial=this.presupuestoRubro.valor_inicial,this.detalle.pr_detstrgasto_id="Gasto"===this.modificacion.tipo?this.presupuestoRubro.id:null,this.detalle.pr_detstringreso_id="Ingreso"===this.modificacion.tipo?this.presupuestoRubro.id:null,this.detalle.pr_rubro_id=this.detalle.rubro.id,this.detalle.pr_tipo_gasto_id="Gasto"===this.modificacion.tipo?this.presupuestoRubro.tipo_gasto.id:null,this.detalle.pr_tipo_ingreso_id="Ingreso"===this.modificacion.tipo?this.presupuestoRubro.tipo_ingreso.id:null},formDate:function(e){if(!e)return null;var t=e.split("-"),o=s()(t,3);return o[0]+"/"+o[1]+"/"+o[2]},filterRubros:function(e,t){var o=function(e){return null!=e?e:""},a=o(e.nombre+" "+e.codigo),i=o(t);return a.toString().toLowerCase().indexOf(i.toString().toLowerCase())>-1},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},validadorPostulador:function(){var e=this;g.a.extend("rubroValido",{validate:function(t,o){return new i.a(function(o){var a={};if(null!==t&&void 0!==t&&""!==t)return a=e.rubrosCreados.includes(t.id)?{valido:!1,mensaje:"Rubro ya usado"}:{valido:!0,mensaje:null},o({valid:a.valido,data:{message:a.mensaje}})})},getMessage:function(e,t,o){return o.message}})},confirmar:function(){this.modificacion.estado="Confirmada",this.submit()},submit:function(){var e=this;return v()(d.a.mark(function t(){var o,a,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialogThree=!1,o=e.$loading.show({container:e.$refs.cargar}),t.next=4,e.validador("formGastos");case 4:if(!t.sent){t.next=11;break}e.localLoading=!0,a=e.modificacion.id?"editar":"crear",i=e.modificacion.id?e.axios.put("pr_mod_presupuestales/"+e.modificacion.id,e.modificacion):e.axios.post("pr_mod_presupuestales",e.modificacion),i.then(function(t){o.hide(),e.$store.commit(m.b,{msg:"Item "+(e.modificacion.id?"actualizado":"creado")+" satisfactoriamente",color:"success"}),e.$store.commit(_.T,{item:t.data.data,estado:a,key:e.parametros.key}),e.$store.dispatch(f.c,{contexto:e,itemId:e.parametros.tabOrigin})}).catch(function(t){o.hide(),e.localLoading=!1,e.$store.commit(m.a,{expression:" al guardar el registro. ",error:t})}),t.next=13;break;case 11:o.hide(),e.$store.commit(m.b,{msg:"Hay uno o más campos vacios.",color:"danger"});case 13:case"end":return t.stop()}},t,e)}))()}}}},2146:function(e,t,o){var a=o(2147);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(456)("3bcc1aca",a,!0,{})},2147:function(e,t,o){t=e.exports=o(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroModificacion.vue",sourceRoot:""}])},2148:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formDialogGastos"}},[o("v-card",{ref:"dialogModificacion"},[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[e._v("Nueva modificación")])]),e._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required|rubroValido",expression:"'required|rubroValido'"}],attrs:{items:e.rubros,filter:e.filterRubros,"item-text":"nombre","item-value":"id",name:"rubro",label:"Rubro",hint:e.detalle.rubro?e.detalle.rubro.codigo:"","persistent-hint":"","no-data-text":"No hay rubros disponibles","error-messages":e.errors.collect("rubro"),required:"","prepend-icon":"subtitles","return-object":""},on:{change:function(){return e.obtenerPresupuestoRubro()}},scopedSlots:e._u([{key:"item",fn:function(t){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.nombre)}}),e._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.codigo)}})],1)]]}}]),model:{value:e.detalle.rubro,callback:function(t){e.$set(e.detalle,"rubro",t)},expression:"detalle.rubro"}})],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"tipo de "+e.modificacion.tipo,attrs:{readonly:"",label:"Tipo de "+(e.modificacion.tipo,e.modificacion.tipo),"prepend-icon":"compare_arrows",name:"tipo de "+e.modificacion.tipo,required:""},model:{value:"Gasto"===e.modificacion.tipo?e.detalle.tipo_gasto.nombre:e.detalle.tipo_ingreso.nombre,callback:function(t){e.$set("Gasto"===e.modificacion.tipo?e.detalle.tipo_gasto.nombre:e.detalle.tipo_ingreso,"nombre",t)},expression:"modificacion.tipo === 'Gasto' ? detalle.tipo_gasto.nombre : detalle.tipo_ingreso.nombre"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{key:"valor inicial",attrs:{readonly:"",label:"Valor inicial","prepend-icon":"money",name:"valor inicial"},model:{value:e.detalle.valor_inicial,callback:function(t){e.$set(e.detalle,"valor_inicial",t)},expression:"detalle.valor_inicial"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-radio-group",{attrs:{row:""},model:{value:e.detalle.naturaleza,callback:function(t){e.$set(e.detalle,"naturaleza",t)},expression:"detalle.naturaleza"}},[o("v-radio",{attrs:{label:"Crédito",value:"Crédito"}}),e._v(" "),o("v-radio",{attrs:{label:"Débito",value:"Débito"}})],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],key:"valor movimiento",attrs:{"prepend-icon":"attach_money",label:"Valor movimiento",name:"valor movimiento",required:"","error-messages":e.errors.collect("valor movimiento")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.agregarDetalle(e.detalle)}},model:{value:e.detalle.valor_movimiento,callback:function(t){e.$set(e.detalle,"valor_movimiento",e._n(t))},expression:"detalle.valor_movimiento"}})],1)],1)],1),e._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.resetDialog}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.agregarDetalle(e.detalle)}}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}},[o("v-card",[o("v-card-title",{staticClass:"headline grey lighten-3"},[e._v("¿Qué tipo de estructura presupuestal modificará?")]),e._v(" "),o("v-container",[o("v-radio-group",{attrs:{row:""},model:{value:e.modificacion.tipo,callback:function(t){e.$set(e.modificacion,"tipo",t)},expression:"modificacion.tipo"}},[o("v-radio",{attrs:{label:"Ingresos",value:"Ingreso"}}),e._v(" "),o("v-radio",{attrs:{label:"Gastos",value:"Gasto"}})],1)],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialogThree,callback:function(t){e.dialogThree=t},expression:"dialogThree"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3"},[o("v-card-text",{staticClass:"title"},[e._v("¿Por qué anula la modificación?")])],1),e._v(" "),o("v-container",{attrs:{fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:e.detalle_anulacion,callback:function(t){e.detalle_anulacion=t},expression:"detalle_anulacion"}},[o("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                  Detalle de anulación\n                ")])])],1)],1)],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){return e.anular(2)}}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.actualizarEstado(e.detalle_anulacion)}}},[e._v("Enviar")])],1)],1)],1),e._v(" "),o("v-card",{ref:"formPresupuesto"},[o("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[o("v-toolbar-title",{domProps:{textContent:e._s("Modificación Presupuesto Inicial de "+(null===e.modificacion.tipo?"N/A":"Ingreso"!==e.modificacion.tipo?"Gastos":"Ingresos"))}}),e._v(" "),o("v-spacer"),e._v(" "),e.modificacion.id?o("v-chip",{attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[o("span",{staticClass:"subheading"},[e._v("N°")]),e._v(" \n          "),o("span",{staticClass:"subheading",domProps:{textContent:e._s(null==e.modificacion.consecutivo_presupuestal?"00":e.modificacion.consecutivo_presupuestal)}})]):e._e(),e._v(" "),e.modificacion.id?o("v-chip",{attrs:{color:e.colorEstado,"text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v(e._s(e.iconoEstado))])],1),e._v("\n          "+e._s(e.modificacion.estado)+"\n        ")],1):e._e()],1),e._v(" "),o("v-container",{staticStyle:{"max-width":"inherit"},attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{attrs:{"data-vv-scope":"formGastos"}},[o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[o("v-icon",[e._v("assignment_ind")]),e._v(" Presupuesto")],1)],1),e._v(" "),o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:""}},[null!==e.parametros.entidad?o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"periodo",attrs:{"prepend-icon":"calendar_today",label:"Periodo",readonly:""},model:{value:e.presupuesto.entidad_resolucion.periodo,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"periodo",t)},expression:"presupuesto.entidad_resolucion.periodo"}})],1):o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.presupuestos,name:"periodo",label:"Periodo","no-data-text":"No hay resoluciones disponibles","error-messages":e.errors.collect("periodo"),required:"","prepend-icon":"calendar_today"},on:{change:function(t){return e.obtenerPresupuesto(t)}},model:{value:e.presupuesto.entidad_resolucion.periodo,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"periodo",t)},expression:"presupuesto.entidad_resolucion.periodo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"unidad ejecturoa",attrs:{"prepend-icon":"account_balance",label:"Unidad ejecutora",readonly:""},model:{value:e.presupuesto.entidad_resolucion.codigo,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"codigo",t)},expression:"presupuesto.entidad_resolucion.codigo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm4:""}},[o("v-text-field",{key:"nombre",attrs:{"prepend-icon":"account_balance",label:"Nombre",readonly:""},model:{value:e.presupuesto.entidad_resolucion.nombre,callback:function(t){e.$set(e.presupuesto.entidad_resolucion,"nombre",t)},expression:"presupuesto.entidad_resolucion.nombre"}})],1)],1)],1)],1)],1),e._v(" "),o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[o("v-icon",[e._v("assignment_ind")]),e._v(" General")],1)],1),e._v(" "),o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:""}},[e.modificacion.id?o("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[o("v-text-field",{key:"fecha",attrs:{"prepend-icon":"event",label:"Fecha",name:"fecha",readonly:"","error-messages":e.errors.collect("fecha")},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}})],1):o("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[o("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",readonly:"",name:"fecha activo","error-messages":e.errors.collect("fecha activo")},slot:"activator",model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}}),e._v(" "),o("v-date-picker",{attrs:{locale:"es","no-title":"",readonly:e.readOnly},on:{input:function(t){e.menuDate=!1},change:function(){var t=e.$validator.errors.items.findIndex(function(e){return"fecha activo"===e.field});e.$validator.errors.items.splice(-1!==t?t:0,-1!==t?1:0)}},model:{value:e.modificacion.fecha,callback:function(t){e.$set(e.modificacion,"fecha",t)},expression:"modificacion.fecha"}})],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"documento",attrs:{"prepend-icon":"assignment",label:"Documento",name:"documento",required:"",readonly:e.readOnly||"Anulada"===e.modificacion.estado,"error-messages":e.errors.collect("documento")},model:{value:e.modificacion.documento,callback:function(t){e.$set(e.modificacion,"documento",t)},expression:"modificacion.documento"}})],1)],1),e._v(" "),o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"observaciones",attrs:{"auto-grow":"",rows:"1","prepend-icon":"reorder",label:"Observaciones",name:"observaciones",required:"",readonly:e.readOnly||"Anulada"===e.modificacion.estado,"error-messages":e.errors.collect("observaciones")},model:{value:e.modificacion.detalle_modificacion,callback:function(t){e.$set(e.modificacion,"detalle_modificacion",t)},expression:"modificacion.detalle_modificacion"}})],1)],1)],1)],1)],1),e._v(" "),e.presupuesto.id?o("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[[o("v-card",[o("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[o("v-toolbar-title",{staticClass:"subheading"},[e._v("Modificaciones")]),e._v(" "),o("v-spacer"),e._v(" "),e.readOnly||"Anulada"===e.modificacion.estado?e._e():o("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){return t.preventDefault(),e.abrirModal(t)}}},[o("v-icon",[e._v("add")]),e._v(" Agregar modificación")],1)],1),e._v(" "),o("v-data-table",{attrs:{headers:e.headers,items:e.modificacion.detalles,loading:e.tableLoading,"hide-actions":"","rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.rubro.codigo))]),e._v(" "),o("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.rubro.nombre))]),e._v(" "),o("td",{staticClass:"text-xs-right"},[e._v(e._s(e._f("numberFormat")(t.item.valor_inicial,0,"$")))]),e._v(" "),o("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.naturaleza))]),e._v(" "),o("td",{staticClass:"text-xs-right"},[e._v(e._s(e._f("numberFormat")(t.item.valor_movimiento,0,"$")))]),e._v(" "),o("td",{staticClass:"text-xs-center"},[e.readOnly||"Anulada"===e.modificacion.estado?e._e():o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-icon",[e._v("chevron_left")]),e._v(" "),o("v-icon",[e._v("close")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.editarDetalle(t.index,t.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),o("span",[e._v("Editar")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.eliminarDetalle(t.index,t.item.id)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("delete")])],1),e._v(" "),o("span",[e._v("Eliminar")])],1)],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("\n                            "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n                          ")]}}],null,!1,1408021210)},[e._v(" "),o("template",{slot:"no-data"},[e.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n                              Estamos cargando los registros. "),o("v-icon",[e._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n                              Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)]],2):e._e(),e._v(" "),"Anulada"===e.modificacion.estado&&null!==e.modificacion.concepto_anulacion?o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{staticClass:"text-sm-justify",attrs:{"auto-grow":"",rows:"1","prepend-icon":"reorder",label:"Concepto de Anulación",readonly:"Anulada"===e.modificacion.estado,"error-messages":e.errors.collect("observaciones")},model:{value:e.modificacion.concepto_anulacion,callback:function(t){e.$set(e.modificacion,"concepto_anulacion",t)},expression:"modificacion.concepto_anulacion"}})],1)],1):e._e()],1)],1)],1)],1)],1)],1),e._v(" "),o("v-divider"),e._v(" "),"Registrada"===e.modificacion.estado?o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-center text-sm-left",attrs:{xs12:"",sm6:""}},[e.modificacion.id?o("v-btn",{attrs:{dark:"",color:"danger",loading:e.loadingSubmit},domProps:{textContent:e._s("Anular")},on:{click:function(t){return e.anular(1)}}}):e._e()],1),e._v(" "),o("v-flex",{staticClass:"text-xs-center text-xs-right pt-1",attrs:{xs12:"",sm6:""}},["Confirmada"!==e.modificacion.estado?o("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Guardar")]):e._e(),e._v(" "),o("v-btn",{attrs:{slot:"activator",color:"success"},on:{click:e.confirmar},slot:"activator"},[e.seEstaCreando?o("span",[e._v("Guardar y Confirmar")]):o("span",[e._v("Confirmar")])])],1)],1)],1):e._e()],1)],1)},i=[],r={render:a,staticRenderFns:i};t.a=r},656:function(e,t,o){"use strict";function a(e){o(2146)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(1202),r=o(2148),s=o(1),n=a,l=s(i.a,r.a,!1,n,"data-v-00b8111a",null);t.default=l.exports}});
//# sourceMappingURL=168.eb911a22a848f3f5a7dd.js.map