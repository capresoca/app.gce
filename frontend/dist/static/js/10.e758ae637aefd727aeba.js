webpackJsonp([10],{1494:function(t,o,e){var s=e(1495);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(456)("6f09e098",s,!0,{})},1495:function(t,o,e){o=t.exports=e(455)(!0),o.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CentrosCosto.vue",sourceRoot:""}])},1496:function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(o){t.dialog=o},expression:"dialog"}},[e("form",{ref:"form"},[e("v-card",[e("v-card-title",{staticClass:"grey lighten-3"},[e("span",{staticClass:"headline"},[t._v(t._s(t.modalTitulo))])]),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5|not_in:"+t.codigosUsados,expression:"'required|max:5|not_in:' + codigosUsados"}],key:"codigo",attrs:{name:"codigo",label:"Código",required:"","error-messages":t.errors.collect("codigo")},model:{value:t.cenCosto.codigo,callback:function(o){t.$set(t.cenCosto,"codigo",o)},expression:"cenCosto.codigo"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":t.errors.collect("nombre")},model:{value:t.cenCosto.nombre,callback:function(o){t.$set(t.cenCosto,"nombre",o)},expression:"cenCosto.nombre"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.tiposCentro,name:"tipo de centro de costo",label:"Tipo","error-messages":t.errors.collect("tipo de centro de costo"),required:"","single-line":""},model:{value:t.cenCosto.tipo,callback:function(o){t.$set(t.cenCosto,"tipo",o)},expression:"cenCosto.tipo"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e("v-switch",{attrs:{color:"success",label:t.cenCosto.estado,"true-value":"Activo","false-value":"Inactivo"},model:{value:t.cenCosto.estado,callback:function(o){t.$set(t.cenCosto,"estado",o)},expression:"cenCosto.estado"}})],1)],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{flat:""},on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(o){return o.preventDefault(),t.save()}}},[t._v("Guardar")])],1)],1)],1)]),t._v(" "),e("v-card",[e("v-toolbar",{staticClass:"elevation-0 toolbar--dense"},[e("v-toolbar-title",[t._v("Centros de Costos ")]),t._v(" "),e("v-spacer"),t._v(" "),t.infoComponent&&t.infoComponent.permisos.agregar?e("v-btn",{attrs:{fab:"",small:"",color:"accent"},nativeOn:{click:function(o){t.dialog=!0}}},[e("v-icon",[t._v("add")])],1):t._e()],1),t._v(" "),e("v-card-title",[e("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:t.search,callback:function(o){t.search=o},expression:"search"}})],1),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.centrosCosto,loading:t.tableLoading,pagination:t.pagination,"hide-actions":"",search:t.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(o){t.pagination=o}},scopedSlots:t._u([{key:"items",fn:function(o){return[e("td",[t._v(t._s(o.item.codigo))]),t._v(" "),e("td",[t._v(t._s(o.item.nombre))]),t._v(" "),e("td",[t._v(t._s(o.item.tipo))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t.infoComponent&&t.infoComponent.permisos.agregar?e("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(e){return t.edit(o.item)}}},[e("v-icon",{attrs:{color:"accent"}},[t._v("edit")])],1):t._e()],1)]}},{key:"pageText",fn:function(o){return[t._v("\n        "+t._s(o.pageStart)+" - "+t._s(o.pageStop)+" de "+t._s(o.itemsLength)+"\n      ")]}}])},[t._v(" "),e("template",{slot:"no-data"},[t.tableLoading?e("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n          Lo sentimos, no tenemos registros para mostrar. "),e("v-icon",[t._v("sentiment_very_dissatisfied")])],1):e("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n          Estamos cargando los registros. "),e("v-icon",[t._v("sentiment_satisfied_alt")])],1)],1),t._v(" "),t._v(" "),e("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('\n        No se encontraron resultados de "'+t._s(t.search)+'"\n      ')])],2),t._v(" "),e("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[e("v-pagination",{attrs:{length:t.pages},model:{value:t.pagination.page,callback:function(o){t.$set(t.pagination,"page",o)},expression:"pagination.page"}})],1)],1)],1)},a=[],n={render:s,staticRenderFns:a};o.a=n},462:function(t,o,e){"use strict";function s(t){e(1494)}Object.defineProperty(o,"__esModule",{value:!0});var a=e(964),n=e(1496),i=e(1),r=s,c=i(a.a,n.a,!1,r,"data-v-b583c050",null);o.default=c.exports},964:function(t,o,e){"use strict";var s=e(7),a=e.n(s),n=e(12);o.a={name:"CentrosCosto",data:function(){return{centrosCosto:[],dialog:!1,cenCosto:{},cenCostoEdicion:"",tableLoading:!1,pagination:{},search:"",codigosUsados:"",tiposCentro:["Administrativo","Misional"],headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Tipo",align:"left",sortable:!1,value:"tipo"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},mounted:function(){var t={custom:{codigo:{not_in:"Este código ya fue usado."}}};this.$validator.localize("es",t)},beforeMount:function(){this.formReset()},beforeCreate:function(){var t=this;this.tableLoading=!0,this.axios.get("cencostos").then(function(o){t.centrosCosto=o.data.data,t.pagination.totalItems=t.centrosCosto.length,t.tableLoading=!1,t.codigosUsados=t.getCodigosUsados()}).catch(function(t){return console.log("Hay un error. "+t),!1})},watch:{dialog:function(t){!1===t&&this.close()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("centrosCosto")},modalTitulo:function(){return this.cenCosto.id?"Edición del Centro de Costo: "+this.cenCosto.nombre:"Nuevo Centro de Costo"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.cenCosto={id:"",codigo:"",nombre:"",tipo:"",estado:"Activo"},this.codigosUsados=this.getCodigosUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},edit:function(t){this.dialog=!0,this.cenCostoEdicion=t,this.cenCosto=JSON.parse(a()(t)),this.codigosUsados=this.getCodigosUsados()},getCodigosUsados:function(){var t=this;return this.centrosCosto.map(function(o){if(null==t.cenCosto.codigo||t.cenCosto.codigo!==o.codigo)return o.codigo})},save:function(){var t=this;this.$validator.validateAll().then(function(o){if(o){(t.cenCosto.id?t.axios.put("cencostos/"+t.cenCosto.id,t.cenCosto):t.axios.post("cencostos",t.cenCosto)).then(function(o){t.cenCosto.id?(t.$store.commit(n.b,{msg:"El centro de costo se actualizó correctamente",color:"success"}),t.centrosCosto.splice(t.centrosCosto.findIndex(function(t){return t.id===o.data.data.id}),1,o.data.data)):(t.$store.commit(n.b,{msg:"El centro de costo se creó correctamente",color:"success"}),t.centrosCosto.splice(0,0,o.data.data)),t.close()}).catch(function(o){t.$store.commit(n.b,{msg:"Hay un error al guardar el registro. "+o.response,color:"danger"})})}})}}}}});
//# sourceMappingURL=10.e758ae637aefd727aeba.js.map