webpackJsonp([325],{1224:function(e,t,i){"use strict";var o=i(7),r=i.n(o),a=i(58),n=i(12);t.a={name:"RegistroEntidadProcedimientos",props:["value"],components:{PostuladorV2:function(){return new Promise(function(e){e()}).then(i.bind(null,61))},Loading:a.default,dataTable:function(){return new Promise(function(e){e()}).then(i.bind(null,60))}},data:function(){return{showFormRegistro:!1,loading:!1,procedimiento:null,makeProcedimiento:{cup:null,id:null,rs_cups_id:null,rs_entidad_id:null,tarifa:null},selections:[],dataTable:{nameItemState:null,route:null,makeHeaders:[{text:"C贸digo",align:"left",sortable:!0,value:"cup.codigo"},{text:"Cobertura",align:"left",sortable:!1,value:"cup.cobertura"},{text:"Descripci贸n",align:"left",sortable:!1,value:"cup.descripcion"},{text:"Tarifa",align:"right",sortable:!1,value:"tarifa",component:{component:{template:"<span className=\"white--text caption\">{{'$'}}{{value.tarifa | numberFormat(2)}}</span>",props:["value"]}}},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]}}},watch:{showFormRegistro:function(e){!e&&this.refreshProcedimiento()}},created:function(){this.refreshProcedimiento()},mounted:function(){this.dataTable.route="entidades/"+this.value.id+"/cups"},methods:{procedimientoEditar:function(e){var t=this;this.refreshProcedimiento(),this.procedimiento=JSON.parse(r()(e)),this.$vuetify.goTo("#flag-top",{selector:"#flag-top",duration:300,offset:-120,easing:"easeInOutQuad"}),this.showFormRegistro=!0,setTimeout(function(){t.$refs.postuladorProcedimiento.focus()},400)},procedimientoBorrar:function(e){var t=this;this.loading=!0,this.showFormRegistro=!1,this.axios.post("entidades/remove-cup/"+e.id).then(function(e){t.$refs.tablaProcedimientos.reloadPage(),t.loading=!1}).catch(function(e){t.loading=!1,t.$store.commit(n.a,{expression:" al borrar el procedimiento. ",error:e})})},resetOptions:function(e){return e.options=[],e.options.push({event:"editar",icon:"edit",tooltip:"Editar"}),e.options.push({event:"borrar",icon:"delete",tooltip:"Borrar"}),e},submitProcedimiento:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.loading=!0,e.procedimiento.rs_entidad_id=e.value.id,e.axios.post("entidades/add-cups",e.procedimiento).then(function(t){e.$refs.tablaProcedimientos.reloadPage(),e.refreshProcedimiento(),e.$refs.postuladorProcedimiento.focus(),e.loading=!1}).catch(function(t){e.loading=!1,e.$store.commit(n.a,{expression:" al registrar el procedimiento. ",error:t})}))})},refreshProcedimiento:function(){this.procedimiento=JSON.parse(r()(this.makeProcedimiento)),this.$validator.reset()}}}},2216:function(e,t,i){"use strict";function o(e){i(2217)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1224),a=i(2219),n=i(1),s=o,l=n(r.a,a.a,!1,s,"data-v-6622116a",null);t.default=l.exports},2217:function(e,t,i){var o=i(2218);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(456)("ca2fa0c8",o,!0,{})},2218:function(e,t,i){t=e.exports=i(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroEntidadProcedimientos.vue",sourceRoot:""}])},2219:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"",wrap:"",id:"flag-top"}},[i("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-card",[i("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[i("v-toolbar-title",{domProps:{innerHTML:e._s("Registro de procedimientos")}}),e._v(" "),i("small",{staticClass:"mt-2 ml-1"},[e._v(" Vinculaci贸n a la entidad")]),e._v(" "),i("v-spacer"),e._v(" "),e.showFormRegistro?e._e():i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",fab:"",right:"",small:"",color:"accent"},on:{click:function(t){e.showFormRegistro=!0}},slot:"activator"},[i("v-icon",[e._v("add")])],1),e._v(" "),i("span",[e._v("Agregar procedimiento")])],1)],1),e._v(" "),i("v-scroll-y-transition",[e.showFormRegistro?i("div",[i("v-card-text",[i("v-form",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{md10:"",sm8:"",xs12:""}},[i("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"postuladorProcedimiento",attrs:{"no-data":"Busqueda por c贸digo o nombre.","item-text":"descripcion",label:"procedimiento",entidad:"cups","no-btn-create":"","no-btn-edit":"",name:"procedimiento",rules:"required","error-messages":e.errors.collect("procedimiento"),"min-characters-search":4,"slot-data":{template:'\n                    <v-list-tile>\n                    <v-list-tile-action>\n                      <v-chip\n                      color="indigo lighten-2"\n                      label\n                      small\n                      >\n                      {{ value.codigo }}\n                      </v-chip>\n                      </v-list-tile-action>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.descripcion}}</v-list-tile-title>\n                        <v-list-tile-sub-title class=caption>{{ value.cobertura }}</v-list-tile-sub-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                    ',props:["value"]}},on:{changeid:function(t){return e.procedimiento.rs_cups_id=t}},model:{value:e.procedimiento.cup,callback:function(t){e.$set(e.procedimiento,"cup",t)},expression:"procedimiento.cup"}})],1),e._v(" "),i("v-flex",{attrs:{md2:"",sm4:"",xs12:""}},[i("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],attrs:{label:"Tarifa",name:"Tarifa",min:"0",type:"number","error-messages":e.errors.collect("Tarifa")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitProcedimiento(t)}},model:{value:e.procedimiento.tarifa,callback:function(t){e.$set(e.procedimiento,"tarifa",e._n(t))},expression:"procedimiento.tarifa"}})],1)],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showFormRegistro=!1}}},[e._v("Cancelar")]),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.submitProcedimiento(t)}}},[e._v("Registrar")])],1)],1):e._e()])],1)],1),e._v(" "),i("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[e.dataTable.route?i("data-table",{ref:"tablaProcedimientos",on:{resetOption:function(t){return e.resetOptions(t)},editar:function(t){return e.procedimientoEditar(t)},borrar:function(t){return e.procedimientoBorrar(t)}},model:{value:e.dataTable,callback:function(t){e.dataTable=t},expression:"dataTable"}}):e._e()],1)],1)},r=[],a={render:o,staticRenderFns:r};t.a=a}});
//# sourceMappingURL=325.3dcbe23c30d36a764ec8.js.map