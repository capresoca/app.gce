webpackJsonp([172],{1567:function(t,a,e){var i=e(1568);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(456)("5b5f2f22",i,!0,{})},1568:function(t,a,e){a=t.exports=e(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SalIniciales.vue",sourceRoot:""}])},1569:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-text",{staticClass:"subheading font-weight-light"},[t._v("¿Realmente desea cambiar el estado de esta cuenta?")]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{flat:""},nativeOn:{click:function(a){t.dialog=!1}}},[t._v("No")]),t._v(" "),e("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(a){"Anulado"==t.salInicial.estado?t.descAnulado(t.salInicial):t.actualizarEstado(t.salInicial)}}},[t._v("Si")])],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.dialog2,callback:function(a){t.dialog2=a},expression:"dialog2"}},[e("v-card",[e("v-card-title",{staticClass:"grey lighten-3"},[e("v-card-text",{staticClass:"title"},[t._v("¿Por qué anula esta cuenta?")])],1),t._v(" "),e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:t.detalle_anulacion,callback:function(a){t.detalle_anulacion=a},expression:"detalle_anulacion"}},[e("div",{attrs:{slot:"label"},slot:"label"},[t._v("\n                Detalle de anulación\n              ")])])],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(a){return t.actualizarEstado(t.salInicial,t.detalle_anulacion)}}},[t._v("Enviar")])],1)],1)],1),t._v(" "),e("v-card",[e("v-container",{attrs:{fluid:"","grid-list-xl":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-toolbar",{staticClass:"grey lighten-3 elevation-1 toolbar--dense"},[e("v-toolbar-title",[t._v("Saldos Iniciales ")]),t._v(" "),e("v-spacer"),t._v(" "),t.infoComponent&&t.infoComponent.permisos.agregar?e("v-btn",{attrs:{fab:"",right:"",small:"",color:"accent"},on:{click:function(a){t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:null,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}}},[e("v-icon",[t._v("add")])],1):t._e()],1),t._v(" "),e("v-card-title",{staticClass:"elevation-1"},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-spacer"),t._v(" "),e("v-flex",{attrs:{xs12:"",sm3:"",md3:""}},[e("v-select",{attrs:{label:"Registros por página",items:t.items_page,"item-text":"text","item-value":"value"},model:{value:t.pagination.per_page,callback:function(a){t.$set(t.pagination,"per_page",a)},expression:"pagination.per_page"}})],1),t._v(" "),t.salIniciales.length<0?e("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[e("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","hide-details":"","single-line":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1):t._e()],1)],1),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.salIniciales,loading:t.tableLoading,pagination:t.pagination,"total-items":t.salIniciales.length,"hide-actions":"",search:t.search},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[e("tr",{staticClass:"white",class:{"grey lighten-4":a.item.estado?"Anulado"==a.item.estado:""}},[e("td",{domProps:{textContent:t._s(t.str_pad(a.item.consecutivo,6))}}),t._v(" "),e("td",{domProps:{textContent:t._s(a.item.fecha)}}),t._v(" "),e("td",{domProps:{textContent:t._s(a.item.tipo)}}),t._v(" "),e("td",{domProps:{textContent:t._s(a.item.proveedor.tercero.nombre_completo)}}),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("numberFormat")(a.item.valor,2,"$")))]),t._v(" "),e("td",{domProps:{textContent:t._s(a.item.estado)}}),t._v(" "),e("td",{staticClass:"right"},[e("v-speed-dial",{attrs:{direction:t.direction,transition:t.transition,"open-on-hover":""},model:{value:a.item.show,callback:function(e){t.$set(a.item,"show",e)},expression:"props.item.show"}},["Anulado"!==a.item.estado?e("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",small:"",fab:""},slot:"activator",model:{value:a.item.show,callback:function(e){t.$set(a.item,"show",e)},expression:"props.item.show"}},[e("v-icon",[t._v("chevron_left")]),t._v(" "),e("v-icon",[t._v("close")])],1):t._e(),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Registrado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:"",color:"white"},on:{click:function(e){return t.preguntarCambiarEstado(a.item,"Anulado")}},slot:"activator"},[e("v-icon",{attrs:{color:"grey"}},[t._v("report_off")])],1):t._e(),t._v(" "),e("span",[t._v("Anular")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Registrado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:""},on:{click:function(e){t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:a.item,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[e("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1):t._e(),t._v(" "),e("span",[t._v("Editar")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Registrado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:"",color:"white"},on:{click:function(e){return t.preguntarCambiarEstado(a.item,"Confirmado")}},slot:"activator"},[e("v-icon",{attrs:{color:"teal"}},[t._v("check")])],1):t._e(),t._v(" "),e("span",[t._v("Confirmar")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Confirmado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:"",color:"white"},on:{click:function(e){t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:a.item,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[e("v-icon",{attrs:{color:"teal"}},[t._v("remove_red_eye")])],1):t._e(),t._v(" "),e("span",[t._v("Ver Registro")])],1)],1)],1)])]}}])},[t._v(" "),e("template",{slot:"no-data"},[t.tableLoading?e("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n                Estamos cargando los registros. "),e("v-icon",[t._v("sentiment_satisfied_alt")])],1):e("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n                Lo sentimos, no tenemos registros para mostrar. "),e("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1),t._v(" "),e("template",{slot:"footer"},[e("td",{attrs:{colspan:"100%"}},[e("div",{staticClass:"text-xs-center"},[e("v-pagination",{attrs:{length:t.pagination.last_page},on:{input:t.reloadPage},model:{value:t.pagination.current_page,callback:function(a){t.$set(t.pagination,"current_page",a)},expression:"pagination.current_page"}})],1)])])],2)],1)],1)],1)],1)],1)},o=[],n={render:i,staticRenderFns:o};a.a=n},503:function(t,a,e){"use strict";function i(t){e(1567)}Object.defineProperty(a,"__esModule",{value:!0});var o=e(988),n=e(1569),s=e(1),l=i,r=s(o.a,n.a,!1,l,"data-v-7f71466a",null);a.default=r.exports},988:function(t,a,e){"use strict";var i=e(7),o=e.n(i),n=e(8),s=e.n(n),l=e(6),r=e(12);a.a={name:"SalIniciales",data:function(){return{salIniciales:[],tableLoading:!1,transition:"slide-x-transition",direction:"left",fab:!1,search:"",show:!1,dialog:!1,dialog2:!1,detalle_anulacion:null,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Consecutivo",align:"left",sortable:!1,value:"consecutivo"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Tipo",align:"left",sortable:!1,value:"tipo"},{text:"Proveedor",align:"left",sortable:!1,value:"pg_proveedore_id"},{text:"Valor",align:"center",sortable:!1,value:"valor"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"right",sortable:!1,value:"id"}]}},created:function(){this.reloadPage()},watch:{"pagination.per_page":function(t){this.pagination.current_page=1,this.reloadPage()},itemSalinicial:function(t){t.salInicial.show=!1,"crear"===t.estado?this.salIniciales.splice(0,0,t.salInicial):"editar"===t.estado&&this.salIniciales.splice(this.salIniciales.findIndex(function(a){return a.id===t.salInicial.id}),1,t.salInicial)}},computed:s()({infoComponent:function(){return this.$store.getters.getInfoComponent("salIniciales")}},Object(l.c)({itemSalinicial:function(t){return t.tables.itemSalinicial}}),{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}}),methods:{preguntarCambiarEstado:function(t,a){this.dialog=!0,console.log(t),this.salInicial=JSON.parse(o()(t)),this.salInicial.estado=a},descAnulado:function(t){this.dialog2=!0},actualizarEstado:function(t,a){var e=this;this.dialog=!1,this.dialog2=!1,delete t.show,t.detalle_anulacion=a,this.axios.put("pg_saliniciales/"+t.id,t).then(function(a){console.log("Estado Actualizado"),e.$store.commit(r.b,{msg:"Se realizó el cambio de estado a "+t.estado,color:"success"}),e.salIniciales.splice(e.salIniciales.findIndex(function(t){return t.id===e.salInicial.id}),1,e.salInicial),console.log(a)}).catch(function(t){e.dialog=!1,e.$store.commit(r.b,{msg:"Existe un error al actualizar el estado. "+t.response,color:"danger"})})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),reloadPage:function(){var t=this;this.tableLoading=!0,this.axios.get("pg_saliniciales?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page).then(function(a){a.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(a.data.meta.per_page)})?parseInt(a.data.meta.per_page):-1,t.pagination=a.data.meta,t.salIniciales=a.data.data,t.tableLoading=!1}).catch(function(a){t.tableLoading=!1,t.$store.commit(r.b,{msg:"Hay un error al hacer la busqueda de registros. "+a.message,color:"danger"})})}}}}});
//# sourceMappingURL=172.edb58c5b773949ed4749.js.map