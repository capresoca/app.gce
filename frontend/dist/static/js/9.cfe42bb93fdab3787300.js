webpackJsonp([9],{1497:function(o,t,i){var e=i(1498);"string"==typeof e&&(e=[[o.i,e,""]]),e.locals&&(o.exports=e.locals);i(456)("235762c2",e,!0,{})},1498:function(o,t,i){t=o.exports=i(455)(!0),t.push([o.i,"","",{version:3,sources:[],names:[],mappings:"",file:"TiposComdiario.vue",sourceRoot:""}])},1499:function(o,t,i){"use strict";var e=function(){var o=this,t=o.$createElement,i=o._self._c||t;return i("div",[i("v-dialog",{attrs:{"max-width":"500px"},model:{value:o.dialog,callback:function(t){o.dialog=t},expression:"dialog"}},[i("form",{ref:"form"},[i("v-card",[i("v-card-title",{staticClass:"grey lighten-3"},[i("span",{staticClass:"headline"},[o._v(o._s(o.modalTitulo))])]),o._v(" "),i("v-divider"),o._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5|not_in:"+o.codigosUsados,expression:"'required|max:5|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":o.errors.collect("codigo")},model:{value:o.tipoComdiario.codigo,callback:function(t){o.$set(o.tipoComdiario,"codigo",t)},expression:"tipoComdiario.codigo"}})],1),o._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"nombre",attrs:{label:"Nombre ",name:"nombre",required:"","error-messages":o.errors.collect("nombre")},model:{value:o.tipoComdiario.nombre,callback:function(t){o.$set(o.tipoComdiario,"nombre",t)},expression:"tipoComdiario.nombre"}})],1),o._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-switch",{attrs:{color:"success",label:o.tipoComdiario.estado,"true-value":"Activo","false-value":"Inactivo"},model:{value:o.tipoComdiario.estado,callback:function(t){o.$set(o.tipoComdiario,"estado",t)},expression:"tipoComdiario.estado"}})],1)],1)],1)],1),o._v(" "),i("v-divider"),o._v(" "),i("v-card-actions",[i("v-spacer"),o._v(" "),i("v-btn",{attrs:{flat:""},on:{click:o.close}},[o._v("Cancelar")]),o._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){return t.preventDefault(),o.save()}}},[o._v("Guardar")])],1)],1)],1)]),o._v(" "),i("v-card",[i("v-toolbar",{staticClass:"elevation-0 toolbar--dense"},[i("v-toolbar-title",[o._v("Tipos de Comprobantes de Diario ")]),o._v(" "),i("v-spacer"),o._v(" "),o.infoComponent&&o.infoComponent.permisos.agregar?i("v-btn",{attrs:{fab:"",small:"",color:"accent"},nativeOn:{click:function(t){o.dialog=!0}}},[i("v-icon",[o._v("add")])],1):o._e()],1),o._v(" "),i("v-card-title",[i("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:o.search,callback:function(t){o.search=t},expression:"search"}})],1),o._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:o.headers,items:o.tiposComdiario,loading:o.tableLoading,pagination:o.pagination,"hide-actions":"",search:o.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[5,10,25,{text:"Todos",value:-1}]},on:{"update:pagination":function(t){o.pagination=t}},scopedSlots:o._u([{key:"items",fn:function(t){return[i("td",[o._v(o._s(t.item.codigo))]),o._v(" "),i("td",[o._v(o._s(t.item.nombre))]),o._v(" "),i("td",[o._v(o._s(t.item.estado))]),o._v(" "),i("td",{staticClass:"text-xs-center"},[o.infoComponent&&o.infoComponent.permisos.agregar?i("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(i){return o.edit(t.item)}}},[i("v-icon",{attrs:{color:"accent"}},[o._v("edit")])],1):o._e()],1)]}},{key:"pageText",fn:function(t){return[o._v("\n        "+o._s(t.pageStart)+" - "+o._s(t.pageStop)+" de "+o._s(t.itemsLength)+"\n      ")]}}])},[o._v(" "),i("template",{slot:"no-data"},[o.tableLoading?i("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[o._v("\n          Estamos cargando los registros. "),i("v-icon",[o._v("sentiment_satisfied_alt")])],1):i("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[o._v("\n          Lo sentimos, no tenemos registros para mostrar. "),i("v-icon",[o._v("sentiment_very_dissatisfied")])],1)],1),o._v(" "),o._v(" "),i("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[o._v('\n        No se encontraron resultados de "'+o._s(o.search)+'"\n      ')])],2),o._v(" "),i("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[i("v-pagination",{attrs:{length:o.pages},model:{value:o.pagination.page,callback:function(t){o.$set(o.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)},a=[],s={render:e,staticRenderFns:a};t.a=s},463:function(o,t,i){"use strict";function e(o){i(1497)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(965),s=i(1499),r=i(1),n=e,d=r(a.a,s.a,!1,n,"data-v-fe22f278",null);t.default=d.exports},965:function(o,t,i){"use strict";var e=i(7),a=i.n(e),s=i(12);t.a={name:"TiposComdiario",data:function(){return{tiposComdiario:[],dialog:!1,tipoComdiario:{},tipoComdiarioEdicion:"",pagination:{},tableLoading:!0,search:"",codigosUsados:"",headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},mounted:function(){var o={custom:{codigo:{not_in:"Este código ya fue usado"}}};this.$validator.localize("es",o)},beforeMount:function(){this.formReset()},beforeCreate:function(){var o=this;this.axios.get("tipcomdiarios").then(function(t){o.tiposComdiario=t.data.data,o.pagination.totalItems=o.tiposComdiario.length,o.tableLoading=!1,o.codigosUsados=o.getCodigosUsados()}).catch(function(o){return console.log("Hay un error. "+o),!1})},watch:{dialog:function(o){!1===o&&this.close()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("tiposComdiario")},modalTitulo:function(){return this.tipoComdiario.id?"Edición del Tipo Comprobante de Diario: "+this.tipoComdiario.nombre:"Nuevo Tipo de Comprobante de Diario"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.tipoComdiario={id:"",codigo:"",nombre:"",estado:"Activo"},this.codigosUsados=this.getCodigosUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},edit:function(o){this.dialog=!0,this.tipoComdiarioEdicion=o,this.tipoComdiario=JSON.parse(a()(o)),this.codigosUsados=this.getCodigosUsados()},getCodigosUsados:function(){var o=this;return this.tiposComdiario.map(function(t){if(null==o.tipoComdiario.codigo||o.tipoComdiario.codigo!==t.codigo)return t.codigo})},save:function(){var o=this;this.$validator.validateAll().then(function(t){if(t){(o.tipoComdiario.id?o.axios.put("tipcomdiarios/"+o.tipoComdiario.id,o.tipoComdiario):o.axios.post("tipcomdiarios",o.tipoComdiario)).then(function(t){console.log(t),o.tipoComdiario.id?(o.$store.commit(s.b,{msg:"Tipo de comprobante de diario actualizado correctamente",color:"success"}),o.tiposComdiario.splice(o.tiposComdiario.findIndex(function(o){return o.id===t.data.data.id}),1,t.data.data)):(o.$store.commit(s.b,{msg:"Tipo de comprobante de diario creado correctamente",color:"success"}),o.tiposComdiario.splice(0,0,t.data.data)),o.close()}).catch(function(t){o.$store.commit(s.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})})}})}}}}});
//# sourceMappingURL=9.cfe42bb93fdab3787300.js.map