webpackJsonp([54,289],{1053:function(e,t,i){"use strict";var a=i(59),l=i(12),n=i(749),o=i(60);t.a={name:"Afiliaciones",components:{DataTable:o.default,Confirmar:n.default,ToolbarList:function(){return new Promise(function(e){e()}).then(i.bind(null,247))}},data:function(){var e=this;return{filterMunicipios:function(e,t){var i=function(e){return null!=e?e:""},a=i(e.nombre+" "+e.nombre_departamento),l=i(t);return a.toString().toLowerCase().indexOf(l.toString().toLowerCase())>-1},rutaBase:"",dialogA:{visible:!1,content:null,registroID:null},affiliatumsDataTable:{nameItemState:"tableItemAfilliatum",route:null,advanceFilters:!0,optionsPerPage:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],makeHeaders:[{text:"Afiliado",align:"left",sortable:!0,value:"mini_afiliado",component:{template:'<mini-card-detail :data="value.mini_afiliado"/>',props:["value"]}},{text:"Beneficiarios",align:"left",sortable:!1,value:"beneficiarios",component:{template:"\n                  <div>\n                    <template v-for=\"(beneficiario, index) in value.listado_beneficiarios\">\n                      <a style=\"width: 100% !important;\" @click=\"$store.commit('NAV_ADD_ITEM', { ruta: 'detalleGeneralAfiliado', titulo: 'Detalle afiliado', parametros: {entidad: beneficiario, tabOrigin: $store.state.nav.currentItem.split('tab-')[1]}})\" class=\"caption\" :key=\"'a_' + index\">{{beneficiario.emoticon}}{{beneficiario.identificacion_completa}} - {{beneficiario.nombre_completo}}</a><br/>\n                    </template>\n                  </div>\n                ",props:["value"]}},{text:"Estado",align:"center",sortable:!1,value:"estado",classData:"text-xs-center"},{text:"Radicación",align:"left",sortable:!0,value:"fecha_radicacion",classData:""},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0"}]},filters:[{label:"Estado",type:"v-autocomplete",items:function(){return e.complementos.estadosFormafiliaciones},vModel:[],multiple:!0,itemText:"text",itemValue:"value",value:"estado",clearable:!0},{label:"Fecha radicación",type:"v-range",items:{menuDate:!1,type:"date",range:!0,itemMin:{label:"Fecha Inicial",vModel:null,clearable:!0,value:"fecha_radicacion"},itemMax:{menuDate:!1,label:"Fecha Final",vModel:null,clearable:!0,value:"fecha_radicacion"}}},{label:"Puntaje sisben",type:"v-range",items:{type:"number",range:!0,itemMin:{label:"Mínimo",vModel:null,clearable:!0,value:"puntaje_sisben"},itemMax:{label:"Maximo",vModel:null,clearable:!0,value:"puntaje_sisben"}}}],dataTable:{nameItemState:"itemAfitramite",route:"formafiliaciones",optionsPerPage:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],makeHeaders:[{text:"Afiliado",align:"left",sortable:!0,value:"mini_afiliado",component:{component:{template:'<mini-card-detail :data="value.mini_afiliado"/>',props:["value"]}}},{text:"Beneficiarios",align:"left",sortable:!1,value:"beneficiarios",component:{component:{template:"\n                    <div>\n                      <template v-for=\"(beneficiario, index) in value.listado_beneficiarios\">\n                        <a style=\"width: 100% !important;\" @click=\"$store.commit('NAV_ADD_ITEM', { ruta: 'detalleGeneralAfiliado', titulo: 'Detalle afiliado', parametros: {entidad: beneficiario, tabOrigin: $store.state.nav.currentItem.split('tab-')[1]}})\" class=\"caption\" :key=\"'a_' + index\">{{beneficiario.emoticon}}{{beneficiario.identificacion_completa}} - {{beneficiario.nombre_completo}}</a><br/>\n                      </template>\n                    </div>\n                  ",props:["value"]}}},{text:"Municipio Afiliado",align:"left",sortable:!1,value:"ficha_sisben",component:{template:'\n              <v-list>\n                <v-list-tile-content>\n                  <v-list-tile-title v-html="value.ubicacion"/>\n                </v-list-tile-content>\n               </v-list>',props:["value"]}},{text:"Estado",align:"center",sortable:!1,value:"estado",classData:"text-xs-center"},{text:"Radicación",align:"left",sortable:!0,value:"fecha_radicacion",classData:""},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"justify-center layout px-0"}],filters:[{label:"Estado",type:"v-autocomplete",items:function(){return e.complementos.estadosFormafiliaciones},vModel:[],multiple:!0,itemText:"text",itemValue:"value",value:"estado",clearable:!0},{label:"Fecha radicación",type:"v-range",items:{menuDate:!1,type:"date",range:!0,itemMin:{label:"Inicial",vModel:null,clearable:!0,value:"fecha_radicacion"},itemMax:{menuDate:!1,label:"Final",vModel:null,clearable:!0,value:"fecha_radicacion"}}},{label:"Puntaje sisben",type:"v-range",items:{type:"number",range:!0,itemMin:{label:"Mínimo",vModel:null,clearable:!0,value:"puntaje_sisben"},itemMax:{label:"Maximo",vModel:null,clearable:!0,value:"puntaje_sisben"}}}]},filtroRuta:{tipo_id:null,identificacion:null,nombre1:null,nombre2:null,apellido1:null,apellido2:null,gn_municipio_id:null,ficha:null}}},created:function(){this.affiliatumsDataTable.advanceFilters=!0,this.affiliatumsDataTable.route="formafiliaciones",this.rutaBase=this.clone(this.affiliatumsDataTable.route)},computed:{complementosID:function(){var e=this.clone(a.b.getters.complementosFormAfiliados);return e.tipdocidentidades&&(e.tipdocidentidades=e.tipdocidentidades.filter(function(e){return 12!==e.id})),e},complementos:function(){return a.b.getters.complementosTablaAfiliaciones},infoComponent:function(){return this.$store.getters.getInfoComponent("tramitesAfiliacion")}},methods:{aplicaFiltros:function(){var e=this.rutaBase;this.filtroRuta.tipo_id&&(e=e+(e.indexOf("?")>-1?"&":"?")+"tipo_id="+this.filtroRuta.tipo_id),this.filtroRuta.identificacion&&(e=e+(e.indexOf("?")>-1?"&":"?")+"identificacion="+this.filtroRuta.identificacion),this.filters[2].items.itemMin.vModel&&(e=e+(e.indexOf("?")>-1?"&":"?")+"rangMin="+this.filters[2].items.itemMin.vModel),this.filters[2].items.itemMax.vModel&&(e=e+(e.indexOf("?")>-1?"&":"?")+"rangMax="+this.filters[2].items.itemMax.vModel),this.filters[1].items.itemMin.vModel&&(e=e+(e.indexOf("?")>-1?"&":"?")+"fechaMin="+this.filters[1].items.itemMin.vModel),this.filters[1].items.itemMax.vModel&&(e=e+(e.indexOf("?")>-1?"&":"?")+"fechaMax="+this.filters[1].items.itemMax.vModel),this.filters[0].vModel.length&&(e=e+(e.indexOf("?")>-1?"&":"?")+"estados="+this.filters[0].vModel),this.filtroRuta.nombre1&&(e=e+(e.indexOf("?")>-1?"&":"?")+"nombre1="+this.filtroRuta.nombre1),this.filtroRuta.nombre2&&(e=e+(e.indexOf("?")>-1?"&":"?")+"nombre2="+this.filtroRuta.nombre2),this.filtroRuta.apellido1&&(e=e+(e.indexOf("?")>-1?"&":"?")+"apellido1="+this.filtroRuta.apellido1),this.filtroRuta.apellido2&&(e=e+(e.indexOf("?")>-1?"&":"?")+"apellido2="+this.filtroRuta.apellido2),this.filtroRuta.gn_municipio_id&&(e=e+(e.indexOf("?")>-1?"&":"?")+"gn_municipio_id="+this.filtroRuta.gn_municipio_id),this.filtroRuta.ficha&&(e=e+(e.indexOf("?")>-1?"&":"?")+"ficha="+this.filtroRuta.ficha),this.affiliatumsDataTable.route=e},resetOptions:function(e){return e.options=[],this.infoComponent&&this.infoComponent.permisos.imprimir&&e.options.push({event:"imprimir",icon:"far fa-file-pdf",tooltip:"Imprimir"}),this.infoComponent&&this.infoComponent.permisos.agregar&&"Registrado"===e.estado&&0===e.recien_nacido&&e.options.push({event:"editar",icon:"edit",tooltip:"Editar"}),this.infoComponent&&this.infoComponent.permisos.anular&&("Registrado"===e.estado||"Radicado"===e.estado)&&e.options.push({event:"anular",icon:"delete",tooltip:"Anular"}),e},imprimir:function(e){var t=this;this.axios.get("ruta-pdf-formafiliacion?id="+e.id).then(function(e){""!==e.data&&window.open(e.data,"_blank")}).catch(function(e){t.$store.commit(l.a,{expression:" al generar el documento. ",error:e})})},registroAnular:function(e){console.log(e),this.dialogA.content="¿Está seguro de anular la afiliación de <strong>"+e.mini_afiliado.nombre_completo+"</strong>?",this.dialogA.registroID=e.id,this.dialogA.visible=!0},cancelaAnulacion:function(){this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registroID=null},confirmaAnulacion:function(e){var t=this;this.axios.post("formafiliaciones/anular",{estado:"Anulado",detalle_anulacion:e,id:this.dialogA.registroID}).then(function(e){t.created(),t.aplicaFiltros(),t.$store.commit(l.b,{msg:"El trámite de afiliación se anuló satisfactoriamente.",color:"success"}),t.cancelaAnulacion()}).catch(function(e){t.$store.commit(l.a,{expression:" al intentar anular el trámite de afiliación. ",error:e})})}}}},1758:function(e,t,i){var a=i(1759);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(456)("22132692",a,!0,{})},1759:function(e,t,i){t=e.exports=i(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Afiliaciones.vue",sourceRoot:""}])},1760:function(e,t,i){"use strict";var a=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("v-card",[a("toolbar-list",{attrs:{info:t.infoComponent,title:"Afiliaciones",subtitle:"Ingresos por primera vez al SGSSS",btnplus:"",btnplustitle:"Crear trámite"}}),t._v(" "),a("confirmar",{attrs:{value:t.dialogA.visible,content:t.dialogA.content},on:{cancelar:t.cancelaAnulacion,aceptar:function(e){return t.confirmaAnulacion(e)}}}),t._v(" "),a("data-table-v2",{ref:"tableItemAfilliatum",attrs:{"con-buscador":!1,"con-registro":!1,"con-columnas":!1},on:{resetOption:function(e){return t.resetOptions(e)},imprimir:function(e){return t.imprimir(e)},editar:function(i){return t.$store.commit("NAV_ADD_ITEM",{ruta:e.infoComponent.ruta_registro,titulo:e.infoComponent.titulo_registro,parametros:{entidad:i,tabOrigin:e.$store.state.nav.currentItem.split("tab-")[1]}})},anular:function(e){return t.registroAnular(e)},"apply-filters":t.aplicaFiltros},model:{value:t.affiliatumsDataTable,callback:function(e){t.affiliatumsDataTable=e},expression:"affiliatumsDataTable"}},[a("template",{slot:"filters"},[a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-select",{attrs:{label:"Tipo documento","item-text":"abreviatura","item-value":"id",items:t.complementosID.tipdocidentidades,chips:"","deletable-chips":"","small-chips":"",clearable:""},model:{value:t.filtroRuta.tipo_id,callback:function(e){t.$set(t.filtroRuta,"tipo_id",e)},expression:"filtroRuta.tipo_id"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Identificación",clearable:""},model:{value:t.filtroRuta.identificacion,callback:function(e){t.$set(t.filtroRuta,"identificacion",e)},expression:"filtroRuta.identificacion"}})],1),t._v(" "),"v-range"===t.filters[2].type&&"number"===t.filters[2].items.type?a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-layout",{attrs:{"align-center":""}},[a("v-text-field",{attrs:{type:"number",label:t.filters[2].items.itemMin.label,clearable:""},model:{value:t.filters[2].items.itemMin.vModel,callback:function(e){t.$set(t.filters[2].items.itemMin,"vModel",t._n(e))},expression:"filters[2].items.itemMin.vModel"}}),t._v(" "),a("v-text-field",{attrs:{type:"number",label:t.filters[2].items.itemMax.label,clearable:""},model:{value:t.filters[2].items.itemMax.vModel,callback:function(e){t.$set(t.filters[2].items.itemMax,"vModel",t._n(e))},expression:"filters[2].items.itemMax.vModel"}})],1)],1):t._e(),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"filtroRuta.nombre1",expression:"'filtroRuta.nombre1'"}],attrs:{label:"Primer Nombre",clearable:""},model:{value:t.filtroRuta.nombre1,callback:function(e){t.$set(t.filtroRuta,"nombre1",e)},expression:"filtroRuta.nombre1"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"filtroRuta.nombre2",expression:"'filtroRuta.nombre2'"}],attrs:{label:"Segundo Nombre",clearable:""},model:{value:t.filtroRuta.nombre2,callback:function(e){t.$set(t.filtroRuta,"nombre2",e)},expression:"filtroRuta.nombre2"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"filtroRuta.apellido1",expression:"'filtroRuta.apellido1'"}],attrs:{label:"Primer Apellido",clearable:""},model:{value:t.filtroRuta.apellido1,callback:function(e){t.$set(t.filtroRuta,"apellido1",e)},expression:"filtroRuta.apellido1"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-text-field",{directives:[{name:"upper",rawName:"v-upper",value:"filtroRuta.apellido2",expression:"'filtroRuta.apellido2'"}],attrs:{label:"Segundo Apellido",clearable:""},model:{value:t.filtroRuta.apellido2,callback:function(e){t.$set(t.filtroRuta,"apellido2",e)},expression:"filtroRuta.apellido2"}})],1),t._v(" "),"v-select"===t.filters[0].type||"v-autocomplete"===t.filters[0].type?a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-layout",{attrs:{"align-center":""}},[a(t.filters[0].type,{key:"filter0",tag:"component",attrs:{label:t.filters[0].label,multiple:t.filters[0].multiple,"item-text":t.filters[0].itemText,"item-value":t.filters[0].itemValue,items:t.filters[0].items(),clearable:t.filters[0].clearable},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;e.index;return[a("v-chip",{attrs:{small:""}},[a("span",[t._v(t._s(i[t.filters[0].itemText]))])])]}}],null,!1,4236200057),model:{value:t.filters[0].vModel,callback:function(e){t.$set(t.filters[0],"vModel",e)},expression:"filters[0].vModel"}})],1)],1):t._e(),t._v(" "),"v-range"===t.filters[1].type&&"date"===t.filters[1].items.type?a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("v-menu",{key:"fechaMenu1",ref:t.filters[1].items.itemMin.label+1,staticClass:"mt-0",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.filters[1].items.itemMin.vModel,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.filters[1].items.itemMin,"vModel",e)},"update:return-value":function(e){return t.$set(t.filters[1].items.itemMin,"vModel",e)}},model:{value:t.filters[1].items.itemMin.menuDate,callback:function(e){t.$set(t.filters[1].items.itemMin,"menuDate",e)},expression:"filters[1].items.itemMin.menuDate"}},[a("v-text-field",{key:"fechaText1",attrs:{slot:"activator",label:t.filters[1].items.itemMin.label,clearable:"",readonly:""},slot:"activator",model:{value:t.filters[1].items.itemMin.vModel,callback:function(e){t.$set(t.filters[1].items.itemMin,"vModel",e)},expression:"filters[1].items.itemMin.vModel"}}),t._v(" "),a("v-date-picker",{key:"fechaPicker1",attrs:{locale:"es-co"},on:{input:function(e){t.$refs[t.filters[1].items.itemMin.label+1][0].save(t.filters[1].items.itemMin.vModel)}},model:{value:t.filters[1].items.itemMin.vModel,callback:function(e){t.$set(t.filters[1].items.itemMin,"vModel",e)},expression:"filters[1].items.itemMin.vModel"}})],1)],1),t._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-menu",{key:"fechaMenuMax1",ref:t.filters[1].items.itemMax.label+1,staticClass:"mt-0",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.filters[1].items.itemMax.vModel,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.filters[1].items.itemMax,"vModel",e)},"update:return-value":function(e){return t.$set(t.filters[1].items.itemMax,"vModel",e)}},model:{value:t.filters[1].items.itemMax.menuDate,callback:function(e){t.$set(t.filters[1].items.itemMax,"menuDate",e)},expression:"filters[1].items.itemMax.menuDate"}},[a("v-text-field",{key:"fechaTextMax1",attrs:{slot:"activator",label:t.filters[1].items.itemMax.label,clearable:"",readonly:""},slot:"activator",model:{value:t.filters[1].items.itemMax.vModel,callback:function(e){t.$set(t.filters[1].items.itemMax,"vModel",e)},expression:"filters[1].items.itemMax.vModel"}}),t._v(" "),a("v-date-picker",{key:"fechaPickerMax1",attrs:{locale:"es-co"},on:{input:function(e){t.$refs[t.filters[1].items.itemMax.label+1][0].save(t.filters[1].items.itemMax.vModel)}},model:{value:t.filters[1].items.itemMax.vModel,callback:function(e){t.$set(t.filters[1].items.itemMax,"vModel",e)},expression:"filters[1].items.itemMax.vModel"}})],1)],1)],1)],1):t._e(),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[a("v-autocomplete",{attrs:{label:"Municipio Afiliado",items:t.complementosID.municipios,"item-value":"id","item-text":"nombre",filter:t.filterMunicipios,clearable:""},scopedSlots:t._u([{key:"item",fn:function(e){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.nombre)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.nombre_departamento)}})],1)]]}}]),model:{value:t.filtroRuta.gn_municipio_id,callback:function(e){t.$set(t.filtroRuta,"gn_municipio_id",e)},expression:"filtroRuta.gn_municipio_id"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Ficha sisbén",clearable:""},model:{value:t.filtroRuta.ficha,callback:function(e){t.$set(t.filtroRuta,"ficha",e)},expression:"filtroRuta.ficha"}})],1)],1)],2)],1)},l=[],n={render:a,staticRenderFns:l};t.a=n},548:function(e,t,i){"use strict";function a(e){i(1758)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(1053),n=i(1760),o=i(1),r=a,s=o(l.a,n.a,!1,r,null,null);t.default=s.exports},749:function(e,t,i){"use strict";function a(e){i(765)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(751),n=i(767),o=i(1),r=a,s=o(l.a,n.a,!1,r,"data-v-163e0f86",null);t.default=s.exports},751:function(e,t,i){"use strict";var a=i(13),l=i.n(a),n=i(14),o=i.n(n),r=i(58);t.a={name:"Confirmar",props:{value:{type:Boolean,default:!1},content:{type:String},requiereMotivo:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},components:{Loading:r.default},data:function(){return{motivo:null}},watch:{value:function(e){e||(this.motivo=null,this.$validator.reset())}},methods:{submit:function(){var e=this;return o()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(!t.sent){t.next=4;break}e.$emit("aceptar",e.motivo);case 4:case"end":return t.stop()}},t,e)}))()}}}},765:function(e,t,i){var a=i(766);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(456)("f5fd1682",a,!0,{})},766:function(e,t,i){t=e.exports=i(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Confirmar.vue",sourceRoot:""}])},767:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{key:"dialogConfirm",attrs:{persistent:"","max-width":"400"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[i("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),i("v-card",[i("v-card-text",{staticClass:"title font-weight-light text-xs-center",domProps:{innerHTML:e._s(e.content)}}),e._v(" "),e.requiereMotivo?i("v-container",{attrs:{fluid:"","grid-list-xs":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"motivo",label:"Motivo",hint:"Motivo por el cual se anula el registro.","persistent-hint":"",required:"","error-messages":e.errors.collect("motivo")},model:{value:e.motivo,callback:function(t){e.motivo=t},expression:"motivo"}})],1)],1)],1):e._e(),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){return t.stopPropagation(),e.$emit("cancelar")}}},[e._v("Cancelar")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.submit(t)}}},[e._v("Aceptar")])],1)],1)],1)],1)},l=[],n={render:a,staticRenderFns:l};t.a=n}});
//# sourceMappingURL=54.3f36cc1a12495880ee63.js.map