webpackJsonp([373],{1285:function(t,a,s){"use strict";var e=s(7),i=s.n(e);a.a={name:"RegistroGlosaFactura",props:["value","glosas"],components:{Loading:function(){return new Promise(function(t){t()}).then(s.bind(null,58))}},data:function(){return{visible:!1,loading:!1,filterGlosas:function(t,a){var s=function(t){return null!=t?t:""},e=s(t.tipo+" "+t.glosa+" "+t.descripcion),i=s(a);return e.toString().toLowerCase().indexOf(i.toString().toLowerCase())>-1},glosa:null,makeGlosa:{id:null,cm_factura_id:null,cm_facservicio_id:null,cm_manglosa_id:null,manglosa:null,observacion:null,tipo:"Valor total",valor_glosa:null}}},watch:{"glosa.manglosa":function(t){t&&(this.glosa.cm_manglosa_id=t.id)}},created:function(){this.nuevaGlosa()},methods:{nuevaGlosa:function(){this.glosa=JSON.parse(i()(this.makeGlosa)),this.glosa.cm_factura_id=this.value.id,this.$validator.reset()},registraGlosa:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.loading=!0,t.glosa.valor_glosa=t.value.valor_neto,t.axios.post("cm_facturas/"+t.glosa.cm_factura_id+"/glosa",t.glosa).then(function(a){t.$emit("refreshFactura"),t.$store.commit("SNACK_SHOW",{msg:"La glosa de factura fue registrada correctamente.",color:"success"}),t.loading=!1,t.close()}).catch(function(a){t.loading=!1,t.$store.commit("SNACK_ERROR_LIST",{expression:"al registrar la glosa de factura",error:a})}))})},open:function(){this.nuevaGlosa(),this.visible=!0},close:function(){this.visible=!1}}}},2424:function(t,a,s){"use strict";function e(t){s(2425)}Object.defineProperty(a,"__esModule",{value:!0});var i=s(1285),o=s(2427),l=s(1),n=e,r=l(i.a,o.a,!1,n,"data-v-3f96c70d",null);a.default=r.exports},2425:function(t,a,s){var e=s(2426);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(456)("f7e56d6e",e,!0,{})},2426:function(t,a,s){a=t.exports=s(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroGlosaFactura.vue",sourceRoot:""}])},2427:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("v-dialog",{attrs:{persistent:"","max-width":"900"},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[s("v-card",[s("loading",{model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}}),t._v(" "),s("v-card-title",{staticClass:"grey lighten-3 py-2"},[s("span",{staticClass:"font-weight-bold"},[t._v(" Nueva glosa de factura ")])]),t._v(" "),s("v-divider"),t._v(" "),s("v-container",{staticClass:"pa-2",attrs:{fluid:"","grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Seleccionar glosa",items:t.glosas,"item-value":"id","item-text":"descripcion",filter:t.filterGlosas,name:"glosa","error-messages":t.errors.collect("glosa"),"return-object":""},scopedSlots:t._u([{key:"selection",fn:function(a){return[s("div",{staticStyle:{width:"100% !important"}},[s("v-list-tile",{staticClass:"content-v-list-tile-p0"},[s("v-list-tile-content",{staticClass:"truncate-content"},[s("span",{staticClass:"ma-0 body-2"},[t._v(t._s(a.item.glosa)+": "+t._s(a.item.descripcion))]),t._v(" "),s("span",{staticClass:"ma-0 body-2"},[t._v("Tipo: "+t._s(a.item.tipo))])])],1),t._v(" "),s("v-divider")],1)]}},{key:"item",fn:function(a){return[s("div",{staticStyle:{width:"100% !important"}},[s("v-list-tile",{staticClass:"content-v-list-tile-p0"},[s("v-list-tile-content",{staticClass:"truncate-content"},[s("span",{staticClass:"ma-0 body-1"},[t._v(t._s(a.item.glosa)+": "+t._s(a.item.descripcion))]),t._v(" "),s("span",{staticClass:"ma-0 body-1"},[t._v("Tipo: "+t._s(a.item.tipo))])])],1)],1)]}}]),model:{value:t.glosa.manglosa,callback:function(a){t.$set(t.glosa,"manglosa",a)},expression:"glosa.manglosa"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-textarea",{attrs:{rows:"1","auto-grow":"",label:"Observaciones"},model:{value:t.glosa.observacion,callback:function(a){t.$set(t.glosa,"observacion",a)},expression:"glosa.observacion"}})],1)],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{flat:""},on:{click:function(a){a.stopPropagation(),t.visible=!1}}},[t._v("Cancelar")]),t._v(" "),s("v-btn",{attrs:{flat:"",color:"success"},on:{click:function(a){return a.stopPropagation(),t.registraGlosa(a)}}},[t._v("Registrar")])],1)],1)],1)},i=[],o={render:e,staticRenderFns:i};a.a=o}});
//# sourceMappingURL=373.340d61352030a2a094b8.js.map