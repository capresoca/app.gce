webpackJsonp([339],{1015:function(e,a,t){"use strict";var i=t(8),r=t.n(i),s=t(59);a.a={name:"CargaRespuesta",components:{InputFileV2:function(){return t.e(292).then(t.bind(null,764))}},data:function(){return{vigencia:"",validaArchivo:!0,listaCombo:[],minDate:"1900-01-01",maxDate:(new Date).toISOString().substr(0,10),dialog:!1,loading:!1,tipos:["MS.VAL","MS.NEG","MC.VAL","MC.NEG","NC.VAL","NC.NEG","NS.VAL","NS.NEG","R1.VAL","R2","S3","S4","R4","R5","R6","S1.VAL","S2","S5","S6","AUTOMATICOS-R1","AUTOMATICOS-R2","AUTOMATICOS-S1","AUTOMATICOS-S2"],listaComboSiNo:["Si","No"],respuesta:null,makeRespuesta:{tipo:null,fecha:null,descripcion:null,vigencia:null,archivo:null,finaliza:null,file:null},errores:[]}},watch:{dialog:function(e){var a=this;e||setTimeout(function(){a.resetModel()},400)}},created:function(){this.resetModel()},computed:{complementos:function(){return s.b.getters.complementosPeriodosEnvios}},methods:{setSeleccionTipo:function(){if(null!==this.respuesta.tipo&&""!==this.respuesta.tipo){var e=this.respuesta.tipo.split(".");console.log(e[0]),this.listaCombo="NS"===e[0]||"NC"===e[0]?this.complementos.periodosNovedadesCerrados:this.complementos.periodosTrasladosCerrados}null!==this.respuesta.archivo&&""!==this.respuesta.archivo&&(this.validaArchivo=!0,"No"===this.respuesta.archivo&&(this.validaArchivo=!1),console.log(this.validaArchivo))},submit:function(){var e=this;this.$validator.validateAll().then(function(a){if(a){console.log(e.respuesta.vigencia),e.errores=[],e.loading=!0;var t=new FormData;t.append("tipo",e.respuesta.tipo),t.append("descripcion",e.respuesta.descripcion),t.append("archivo",e.respuesta.archivo),t.append("finaliza",e.respuesta.finaliza),t.append("fecha",e.respuesta.fecha),t.append("vigencia",e.respuesta.vigencia),t.append("file",e.respuesta.file),e.axios.post("bduafiles/respuesta",t).then(function(a){console.log(a.data),e.errores=a.data,e.errores.find(function(e){return"error"===e.tipo})?e.$store.commit("SNACK_SHOW",{msg:"La carga de las respuestas contienen errores. ",color:"orange"}):(e.$store.commit("SNACK_SHOW",{msg:"La carga de las respuestas se registró sin errores. ",color:"success"}),e.$store.commit("reloadTable","tableRespuestasBDUA")),e.loading=!1}).catch(function(a){e.loading=!1,e.$store.commit("SNACK_ERROR_LIST",{expression:" al cargar el archivo de respuestas. ",error:a})})}})},resetModel:function(){this.respuesta=r()({},this.makeRespuesta),this.$validator.reset()}}}},1634:function(e,a,t){"use strict";function i(e){t(1635)}Object.defineProperty(a,"__esModule",{value:!0});var r=t(1015),s=t(1637),o=t(1),n=i,l=o(r.a,s.a,!1,n,"data-v-b187a626",null);a.default=l.exports},1635:function(e,a,t){var i=t(1636);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(456)("2e629667",i,!0,{})},1636:function(e,a,t){a=e.exports=t(455)(!0),a.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CargaRespuesta.vue",sourceRoot:""}])},1637:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-dialog",{attrs:{persistent:"","max-width":"920"},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[t("v-btn",e._g({attrs:{color:"info"}},i),[t("v-icon",{attrs:{left:""}},[e._v("fas fa-file-upload")]),e._v("\n      Cargar Respuesta\n    ")],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[e._v(" "),t("v-card",[t("loading",{model:{value:e.loading,callback:function(a){e.loading=a},expression:"loading"}}),e._v(" "),t("v-card-title",{staticClass:"title py-1"},[t("v-avatar",{staticClass:"mr-2",attrs:{size:"38",color:"primary"}},[t("v-icon",{staticClass:"white--text"},[e._v("fas fa-file-upload")])],1),e._v("\n      Cargar Respuesta\n      "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:"",icon:""},on:{click:function(a){a.stopPropagation(),e.dialog=!1}}},[t("v-icon",[e._v("close")])],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-container",{staticClass:"pb-0",attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[t("input-date",{directives:[{name:"validate",rawName:"v-validate",value:(!0===e.validaArchivo?"required":"")+"|fechaValida|date_format:YYYY-MM-DD|date_between:"+e.minDate+","+e.maxDate+",true",expression:"(validaArchivo === true ? 'required' : '')+'|fechaValida|date_format:YYYY-MM-DD' + '|date_between:' + minDate + ',' + maxDate + ',true'"}],attrs:{label:"Fecha (Año-Mes-Día)",format:"YYYY-MM-DD",name:"Fecha",min:e.minDate,max:e.maxDate,"error-messages":e.errors.collect("Fecha")},model:{value:e.respuesta.fecha,callback:function(a){e.$set(e.respuesta,"fecha",a)},expression:"respuesta.fecha"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:!0===e.validaArchivo?"required":"",expression:"validaArchivo === true ? 'required' : ''"}],attrs:{label:"Descripción",name:"Descripción",required:"","error-messages":e.errors.collect("Descripción")},model:{value:e.respuesta.descripcion,callback:function(a){e.$set(e.respuesta,"descripcion",a)},expression:"respuesta.descripcion"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tipo Archivo",items:e.tipos,name:"tipo","error-messages":e.errors.collect("tipo")},on:{change:function(a){return e.setSeleccionTipo()}},model:{value:e.respuesta.tipo,callback:function(a){e.$set(e.respuesta,"tipo",a)},expression:"respuesta.tipo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Archivo",items:e.listaComboSiNo,name:"Archivo","error-messages":e.errors.collect("Archivo")},on:{change:function(a){return e.setSeleccionTipo()}},model:{value:e.respuesta.archivo,callback:function(a){e.$set(e.respuesta,"archivo",a)},expression:"respuesta.archivo"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Finaliza",items:e.listaComboSiNo,name:"Finaliza","error-messages":e.errors.collect("Finaliza")},model:{value:e.respuesta.finaliza,callback:function(a){e.$set(e.respuesta,"finaliza",a)},expression:"respuesta.finaliza"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Periodos",items:e.listaCombo,"item-value":"consecutivo_vigencia","item-text":"descripcion",name:"vigencia",required:"","error-messages":e.errors.collect("vigencia")},model:{value:e.respuesta.vigencia,callback:function(a){e.$set(e.respuesta,"vigencia",a)},expression:"respuesta.vigencia"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("input-file-v2",{directives:[{name:"validate",rawName:"v-validate",value:!0===e.validaArchivo?"required":"",expression:"validaArchivo === true ? 'required' : ''"}],attrs:{label:"Archivo",accept:"text/plain",hint:"Extenciones aceptadas: txt","prepend-icon":"description",name:"archivo","error-messages":e.errors.collect("archivo")},model:{value:e.respuesta.file,callback:function(a){e.$set(e.respuesta,"file",a)},expression:"respuesta.file"}})],1)],1)],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"success darken-1"},on:{click:e.submit}},[e._v("Cargar archivo")])],1),e._v(" "),t("v-slide-y-transition",{attrs:{group:""}},[e.errores&&e.errores.length?[t("v-divider",{key:"dividererrorbdua"}),e._v(" "),t("v-card-text",{key:"cardtexterrorbdua"},[e._l(e.errores,function(a,i){return[t("v-subheader",{staticClass:"title"},[t("v-icon",{key:"iconoerror"+i,attrs:{left:"",color:"error"===a.tipo?"error":"info"}},[e._v(e._s("error"===a.tipo?"fas fa-exclamation-triangle":"fas fa-info-circle"))]),e._v("\n              "+e._s(a.titulo)+"\n            ")],1),e._v(" "),a.afiliados&&a.afiliados.length?t("v-data-table",{key:"tableerror"+i,staticClass:"elevation-1",attrs:{items:a.afiliados,"hide-actions":"","hide-headers":""},scopedSlots:e._u([{key:"items",fn:function(a){return[t("tr",[t("td",{staticClass:"py-0",staticStyle:{height:"24px !important"}},[a.item.id?t("a",{on:{click:function(t){e.$store.commit("NAV_ADD_ITEM",{ruta:"detalleGeneralAfiliado",titulo:"Detalle afiliado",parametros:{entidad:{id:a.item.id},tabOrigin:e.$store.state.nav.currentItem.split("tab-")[1]}})}}},[e._v(e._s([a.item.tipo_identificacion+""+a.item.identificacion,a.item.nombre_completo].filter(function(e){return e}).join(" ")))]):t("span",[e._v(e._s([a.item.tipo_identificacion+""+a.item.identificacion,a.item.nombre_completo].filter(function(e){return e}).join(" ")))])])])]}}],null,!0)}):e._e()]})],2)]:e._e()],2)],1)],1)},r=[],s={render:i,staticRenderFns:r};a.a=s}});
//# sourceMappingURL=339.43bc9f36707f556e7c97.js.map