webpackJsonp([11],{1153:function(t,e,a){"use strict";var o=a(13),i=a.n(o),n=a(14),r=a.n(n),s=a(7),l=a.n(s),d=a(58),c=a(12);e.a={name:"Almacen",components:{ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))},Loading:d.default},data:function(){return{umis:[],umi:{},dialog:!1,loading:!1,tableLoading:!1,loadingSubmit:!1,headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Opciones",align:"left",sortable:!1,actions:!0}]}},mounted:function(){this.getData(),this.formReset()},computed:{modalTitulo:function(){return this.umi.id?"Edición":"Nuevo umi"},infoComponent:function(){return this.$store.getters.getInfoComponent("unidadmedidainventarios")}},methods:{getData:function(){var t=this;this.loading=!0,this.tableLoading=!0,this.axios.get("in_unidades_medida").then(function(e){""!==e.data&&(t.umis=e.data.data,t.loading=!1,t.tableLoading=!1)}).catch(function(e){t.loading=!1,t.tableLoading=!1,t.$store.commit(c.b,{msg:"Error al traer los datos."+e,color:"danger"}),console.log("error",e)})},formReset:function(){this.umi={id:"",codigo:null,nombre:null}},edit:function(t){this.dialog=!0,this.umi=JSON.parse(l()(t))},close:function(){this.dialog=!1,this.loadingSubmit=!1,this.formReset()},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},save:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validador("form");case 2:if(!e.sent){e.next=8;break}t.loadingSubmit=!0,a=t.umi.id?t.axios.put("in_unidades_medida/"+t.umi.id,t.umi):t.axios.post("in_unidades_medida",t.umi),a.then(function(e){t.umi.id?(t.$store.commit(c.b,{msg:"La contestación se actualizó correctamente",color:"success"}),t.umis.splice(t.umis.findIndex(function(t){return t.id===e.data.data.id}),1,e.data.data)):(t.$store.commit(c.b,{msg:"La contestación se creó correctamente",color:"success"}),t.umis.splice(0,0,e.data.data)),t.close()}).catch(function(e){t.$store.commit(c.a,{msg:"Hay un error al guardar el registro. "+e,color:"danger"}),t.close()}),e.next=9;break;case 8:t.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 9:case"end":return e.stop()}},e,t)}))()}}}},2067:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"720px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"form"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[t._v(t._s(t.modalTitulo))])]),t._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"codigo",attrs:{label:"Codigo",name:"Codigo","error-messages":t.errors.collect("codigo"),required:""},model:{value:t.umi.codigo,callback:function(e){t.$set(t.umi,"codigo",e)},expression:"umi.codigo"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","error-messages":t.errors.collect("nombre"),required:""},model:{value:t.umi.nombre,callback:function(e){t.$set(t.umi,"nombre",e)},expression:"umi.nombre"}})],1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),t._v(" "),a("v-btn",{on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.loadingSubmit,disabled:t.errors.any()},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),a("v-card",[a("toolbar-list",{attrs:{info:t.infoComponent,title:"Unidades de Medida de Inventarios",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear UMI",btnplustruncate:""},on:{click:function(e){t.dialog=!0}}}),t._v(" "),a("loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.umis,loading:t.tableLoading,"rows-per-page-text":"Registros por página"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.codigo))]),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[a("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-icon",[t._v("chevron_left")]),t._v(" "),a("v-icon",[t._v("close")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return t.edit(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1),t._v(" "),a("span",[t._v("Editar")])],1)],1)],1)]}}])},[t._v(" "),a("template",{slot:"no-data"},[t.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n          Estamos cargando los registros. "),a("v-icon",[t._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n          Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)},i=[],n={render:o,staticRenderFns:i};e.a=n},474:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(1153),i=a(2067),n=a(1),r=n(o.a,i.a,!1,null,null,null);e.default=r.exports}});
//# sourceMappingURL=11.45948b16f3c61ef37517.js.map