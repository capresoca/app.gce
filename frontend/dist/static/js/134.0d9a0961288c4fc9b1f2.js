webpackJsonp([134],{1036:function(e,t,s){"use strict";var a=s(13),i=s.n(a),o=s(14),n=s.n(o),r=s(7),l=s.n(r),d=s(12),c=s(58);t.a={name:"Eps",components:{ToolbarList:function(){return new Promise(function(e){e()}).then(s.bind(null,247))},Loading:c.default},data:function(){return{listaEps:[],eps:{},tiposEstadoEps:["Activa","Inactiva"],tiposRegimenEps:["Subsidiado","Contributivo","Especial","PVS"],search:"",dialog:!1,tableLoading:!1,pagination:{},codigosUsados:"",nombresUsados:"",nitsUsados:"",headers:[{text:"NIT",align:"left",sortable:!1,value:"nit"},{text:"Código Habilitación",align:"left",sortable:!1,value:"codigo"},{text:"Nombre",align:"left",sortable:!1,value:"nombre"},{text:"Régimen",align:"left",sortable:!1,value:"regimen"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"center",sortable:!1,value:"id"}]}},beforeMount:function(){this.formReset()},mounted:function(){var e={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",e)},beforeCreate:function(){var e=this;this.tableLoading=!0,this.axios.get("as_epss").then(function(t){e.listaEps=t.data.data,e.pagination.totalItems=e.listaEps.length,e.tableLoading=!1,e.codigosUsados=e.getCodigosUsados(),e.nombresUsados=e.getNombresUsados(),e.nitsUsados=e.getNitsUsados()}).catch(function(e){return console.log("Hay un error. "+e),!1})},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("eps")},modalTitulo:function(){return this.eps.id?"Edición de la EPS: "+this.eps.nombre:"Nueva EPS"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{formReset:function(){this.eps={id:"",nit:null,cod_habilitacion:null,nombre:null,regimen:null,estado:null},this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados(),this.nitsUsados=this.getNitsUsados()},edit:function(e){this.dialog=!0,this.eps=JSON.parse(l()(e)),this.codigosUsados=this.getCodigosUsados(),this.nombresUsados=this.getNombresUsados(),this.nitsUsados=this.getNitsUsados()},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},getCodigosUsados:function(){var e=this;return this.listaEps.map(function(t){if(null==e.eps.codigo||e.eps.codigo!==t.codigo)return t.codigo})},getNombresUsados:function(){var e=this;return this.listaEps.map(function(t){if(null==e.eps.nombre||e.eps.nombre!==t.nombre)return t.nombre})},getNitsUsados:function(){var e=this;return this.listaEps.map(function(t){if(null==e.eps.nit||e.eps.nit!==t.nit)return t.nit})},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},save:function(){var e=this;return n()(i.a.mark(function t(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formEps");case 2:if(!t.sent){t.next=7;break}s=e.eps.id?e.axios.put("as_epss/"+e.eps.id,e.eps):e.axios.post("as_epss",e.eps),s.then(function(t){e.eps.id?(e.$store.commit(d.b,{msg:"La EPS se actualizó correctamente",color:"success"}),e.listaEps.splice(e.listaEps.findIndex(function(e){return e.id===t.data.data.id}),1,t.data.data)):(e.$store.commit(d.b,{msg:"La EPS se creó correctamente",color:"success"}),e.listaEps.splice(0,0,t.data.data)),e.dialog=!1,e.close()}).catch(function(t){e.$store.commit(d.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}),t.next=8;break;case 7:e.$store.commit(d.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return t.stop()}},t,e)}))()}}}},1709:function(e,t,s){var a=s(1710);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(456)("4cfa5cc4",a,!0,{})},1710:function(e,t,s){t=e.exports=s(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Eps.vue",sourceRoot:""}])},1711:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-dialog",{attrs:{width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-form",{attrs:{"data-vv-scope":"formEps"}},[s("v-card",[s("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[s("span",{staticClass:"title"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),s("v-container",{attrs:{fluid:"","grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|not_in:"+e.nitsUsados,expression:"'required|not_in:' + nitsUsados"}],key:"nit",attrs:{label:"NIT",name:"nit",required:"","error-messages":e.errors.collect("nit")},model:{value:e.eps.nit,callback:function(t){e.$set(e.eps,"nit",t)},expression:"eps.nit"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|not_in:"+e.codigosUsados,expression:"'required|not_in:' + codigosUsados"}],key:"codigo",attrs:{label:"Código",name:"codigo",required:"","error-messages":e.errors.collect("codigo")},model:{value:e.eps.cod_habilitacion,callback:function(t){e.$set(e.eps,"cod_habilitacion",t)},expression:"eps.cod_habilitacion"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150|not_in:"+e.nombresUsados,expression:"'required|max:150|not_in:'  + nombresUsados"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":e.errors.collect("nombre")},model:{value:e.eps.nombre,callback:function(t){e.$set(e.eps,"nombre",t)},expression:"eps.nombre"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposRegimenEps,name:"regimen",label:"Régimen","error-messages":e.errors.collect("régimen eps"),required:""},model:{value:e.eps.regimen,callback:function(t){e.$set(e.eps,"regimen",t)},expression:"eps.regimen"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.tiposEstadoEps,name:"estado",label:"Estado","error-messages":e.errors.collect("estado de eps"),required:""},model:{value:e.eps.estado,callback:function(t){e.$set(e.eps,"estado",t)},expression:"eps.estado"}})],1)],1)],1),e._v(" "),s("v-card-actions",{staticClass:"grey lighten-4"},[s("v-spacer"),e._v(" "),s("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),s("v-btn",{attrs:{color:"primary",disabled:e.errors.any()},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),s("v-card",[s("toolbar-list",{attrs:{info:e.infoComponent,title:"EPS",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Item",btnplustruncate:""},on:{click:function(t){e.dialog=!0}}}),e._v(" "),s("loading",{model:{value:e.tableLoading,callback:function(t){e.tableLoading=t},expression:"tableLoading"}}),e._v(" "),s("v-card-title",[s("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",flat:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.listaEps,loading:e.tableLoading,pagination:e.pagination,"hide-actions":"",search:e.search,"rows-per-page-text":"Registros por página","rows-per-page-items":[10,25,50,{text:"Todos",value:-1}]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.nit))]),e._v(" "),s("td",[e._v(e._s(t.item.cod_habilitacion))]),e._v(" "),s("td",[e._v(e._s(t.item.nombre))]),e._v(" "),s("td",[e._v(e._s(t.item.regimen))]),e._v(" "),s("td",[e._v(e._s(t.item.estado))]),e._v(" "),s("td",{staticClass:"text-xs-center"},[s("v-tooltip",{attrs:{top:""}},[s("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(s){return e.edit(t.item)}},slot:"activator"},[s("v-icon",{attrs:{color:"accent"}},[e._v("edit")])],1),e._v(" "),s("span",[e._v("Editar")])],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("\n        "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n      ")]}}])},[e._v(" "),s("template",{slot:"no-data"},[e.tableLoading?s("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n          Lo sentimos, no tenemos registros para mostrar. "),s("v-icon",[e._v("sentiment_very_dissatisfied")])],1):s("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n          Estamos cargando los registros. "),s("v-icon",[e._v("sentiment_satisfied_alt")])],1)],1),e._v(" "),e._v(" "),s("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        No se encontraron resultados de "'+e._s(e.search)+'"\n      ')])],2),e._v(" "),s("v-card-actions",{staticClass:"text-xs-center pt-2 d-block"},[s("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)},i=[],o={render:a,staticRenderFns:i};t.a=o},531:function(e,t,s){"use strict";function a(e){s(1709)}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1036),o=s(1711),n=s(1),r=a,l=n(i.a,o.a,!1,r,"data-v-108e6dd8",null);t.default=l.exports}});
//# sourceMappingURL=134.0d9a0961288c4fc9b1f2.js.map