webpackJsonp([2],{1146:function(t,e,a){"use strict";var i=a(13),n=a.n(i),o=a(14),s=a.n(o),r=a(7),l=a.n(r),c=a(249),u=a.n(c),d=a(58),m=a(12);e.a={name:"ImpugnacionesDetalle",components:{ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))},Loading:d.default,InputFile:function(){return a.e(288).then(a.bind(null,748))}},props:{tutelaId:{type:Number,default:0}},data:function(){return{impugnaciones:[],impugnacion:{},fallos:[],payload:null,numeroTutela:null,menuDate:!1,dialog:!1,loading:!1,tableLoading:!1,loadingSubmit:!1,headers:[{text:"No. tutela",align:"left",sortable:!1,value:"noTutela"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},created:function(){this.getData(),this.formReset()},computed:{modalTitulo:function(){return this.impugnacion.id?"Edición":"Nueva impugnacion"},infoComponent:function(){return this.$store.getters.getInfoComponent("impugnacionesDetalle")},computedDateFormatted:function(){return this.formDate(this.impugnacion.fecha)}},methods:{getData:function(){var t=this;this.loading=!0,this.tableLoading=!0,this.axios.get("oj_tutelas/"+this.tutelaId).then(function(e){""!==e.data&&(t.impugnaciones=e.data.data.impugnaciones,t.numeroTutela=e.data.data.no_tutela,t.loading=!1,t.tableLoading=!1)}).catch(function(e){t.loading=!1,t.tableLoading=!1,t.$store.commit(m.b,{msg:"Error al traer los datos básicos de la impugnacion. "+e.response,color:"danger"})}),this.axios.get("oj_tutimpugnaciones/complementos/"+this.tutelaId).then(function(e){t.fallos=e.data.fallos})},formReset:function(){this.impugnacion.archivo&&this.$refs.archivoAdjunto.reset(),this.impugnacion={id:"",archivo:null,oj_tutela_id:this.tutelaId,oj_tutfallo_id:null,fecha:null,desc_impugnacion:null}},formDate:function(t){if(!t)return null;var e=t.split("-"),a=u()(e,3);return a[0]+"/"+a[1]+"/"+a[2]},edit:function(t){this.dialog=!0,this.impugnacion=JSON.parse(l()(t))},close:function(){this.dialog=!1,this.loadingSubmit=!1,this.formReset(),this.$validator.reset()},validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},addFormData:function(){var t=new FormData;t.append("id",this.impugnacion.id),t.append("oj_tutela_id",this.impugnacion.oj_tutela_id),t.append("oj_tutfallo_id",this.impugnacion.oj_tutfallo_id),t.append("fecha",this.impugnacion.fecha),t.append("desc_impugnacion",this.impugnacion.desc_impugnacion),t.append("archivo",void 0===this.impugnacion.archivo?"":this.impugnacion.archivo),this.payload=t},save:function(){var t=this;return s()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.archivoAdjunto.validate("formImpugnaciones");case 2:return a=e.sent,e.next=5,t.validador("formImpugnaciones");case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}e.t0=a;case 8:if(!e.t0){e.next=15;break}t.loadingSubmit=!0,t.addFormData(),i=t.impugnacion.id?t.axios.post("oj_tutimpugnaciones/"+t.impugnacion.id,t.payload):t.axios.post("oj_tutimpugnaciones",t.payload),i.then(function(e){if(t.impugnacion.id)t.$store.commit(m.b,{msg:"La impugnacion se actualizó correctamente",color:"success"}),t.impugnaciones.splice(t.impugnaciones.findIndex(function(t){return t.id===e.data.data.id}),1,e.data.data);else{t.$store.commit(m.b,{msg:"La impugnacion se creó correctamente",color:"success"});var a=e.data.data;a.oj_tutfallo_id=parseInt(a.oj_tutfallo_id),t.impugnaciones.splice(0,0,a)}t.close()}).catch(function(e){t.$store.commit(m.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"}),t.close()}),e.next=16;break;case 15:t.$store.commit(m.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 16:case"end":return e.stop()}},e,t)}))()}}}},2052:function(t,e,a){var i=a(2053);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(456)("2e3824c6",i,!0,{})},2053:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ImpugnacionesDetalle.vue",sourceRoot:""}])},2054:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"720px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-form",{attrs:{"data-vv-scope":"formImpugnaciones"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[a("span",{staticClass:"title"},[t._v(t._s(t.modalTitulo))])]),t._v(" "),a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],key:"no. tutela",attrs:{label:"No. Tutela","prepend-icon":"description",disabled:"",name:"no. tutela","error-messages":t.errors.collect("no. tutela")},model:{value:t.numeroTutela,callback:function(e){t.numeroTutela=e},expression:"numeroTutela"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.fallos,name:"fallo",label:"Fallo","item-value":"id","item-text":"no_fallo","error-messages":t.errors.collect("fallo"),required:""},model:{value:t.impugnacion.oj_tutfallo_id,callback:function(e){t.$set(t.impugnacion,"oj_tutfallo_id",e)},expression:"impugnacion.oj_tutfallo_id"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha","prepend-icon":"event",readonly:"",name:"fecha","error-messages":t.errors.collect("fecha")},slot:"activator",model:{value:t.computedDateFormatted,callback:function(e){t.computedDateFormatted=e},expression:"computedDateFormatted"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"es","no-title":""},on:{input:function(e){t.menuDate=!1},change:function(){var e=t.$validator.errors.items.findIndex(function(t){return"fecha"===t.field});t.$validator.errors.items.splice(-1!==e?e:0,-1!==e?1:0)}},model:{value:t.impugnacion.fecha,callback:function(e){t.$set(t.impugnacion,"fecha",e)},expression:"impugnacion.fecha"}})],1)],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-layout",{attrs:{"align-center":"","fill-height":""}},[a("v-flex",{attrs:{"d-flex":"",xs10:"",sm8:""}},[a("input-file",{ref:"archivoAdjunto",staticClass:"mb-3",attrs:{label:"Adjuntar archivo","file-name":t.impugnacion.archivo?t.impugnacion.archivo.nombre:null,accept:"application/pdf",hint:"Extenciones aceptadas: pdf","prepend-icon":"attach_file"},model:{value:t.impugnacion.archivo,callback:function(e){t.$set(t.impugnacion,"archivo",e)},expression:"impugnacion.archivo"}})],1),t._v(" "),a("v-flex",{attrs:{"d-flex":"",xs2:"",sm4:""}},[a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",color:"success",small:"",href:t.impugnacion.archivo?t.impugnacion.archivo.url_signed:"",target:"_blank"},slot:"activator"},[a("v-icon",[t._v("remove_red_eye")])],1),t._v(" "),a("span",[t._v("Ver archivo")])],1)],1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"descripcion",attrs:{label:"Descripción","prepend-icon":"format_align_left",name:"descripcion","error-messages":t.errors.collect("descripcion")},model:{value:t.impugnacion.desc_impugnacion,callback:function(e){t.$set(t.impugnacion,"desc_impugnacion",e)},expression:"impugnacion.desc_impugnacion"}})],1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"grey lighten-4"},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{loading:t.loadingSubmit},on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.loadingSubmit,disabled:t.errors.any()},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),a("v-card",[a("toolbar-list",{attrs:{info:t.infoComponent,title:"Impugnaciones",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Impugnación",btnplustruncate:""},on:{click:function(e){t.dialog=!0}}}),t._v(" "),a("v-container",{attrs:{fluid:""}},[a("loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.impugnaciones,loading:t.tableLoading,"rows-per-page-text":"Registros por página"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(t.numeroTutela))]),t._v(" "),a("td",[t._v(t._s(e.item.fecha))]),t._v(" "),a("td",[t._v(t._s(e.item.desc_impugnacion))]),t._v(" "),a("td",[a("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-icon",[t._v("chevron_left")]),t._v(" "),a("v-icon",[t._v("close")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){return t.edit(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1),t._v(" "),a("span",[t._v("Editar")])],1)],1)],1)]}}])},[t._v(" "),a("template",{slot:"no-data"},[t.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n            Estamos cargando los registros. "),a("v-icon",[t._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1)],2)],1)],1)],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},468:function(t,e,a){"use strict";function i(t){a(2052)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1146),o=a(2054),s=a(1),r=i,l=s(n.a,o.a,!1,r,"data-v-a8d54ff8",null);e.default=l.exports}});
//# sourceMappingURL=2.96fbfe0f989691950b90.js.map