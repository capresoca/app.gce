webpackJsonp([275],{1173:function(o,t,e){"use strict";var i=e(13),r=e.n(i),a=e(14),s=e.n(a),n=e(59),d=e(40),c=e(248),l=e(12);t.a={name:"RegistroMotivoRetiro",props:["parametros"],data:function(){return{buscandoCodigo:!1,dialogCodigo:!1,ordenEdit:!1,loadingSubmit:!1,motivo:{}}},computed:{complementosFormSubgruposEmpleados:function(){return n.b.getters.complementosFormComDiario}},methods:{findByCodigo:function(){var o=this;this.motivo.codigo&&(this.buscandoCodigo=!0,this.axios.get("th_retiros/codigo/"+this.motivo.codigo).then(function(t){t.data.exists&&(o.$store.commit(l.b,{msg:"El codigo del motivo de retiro existe",color:"success"}),o.formReset(),o.motivo=t.data.data,o.dialogCodigo=!0),o.buscandoCodigo=!1}).catch(function(t){o.buscandoCodigo=!1,o.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}))},validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},submit:function(){var o=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.validador("formRegistroGradoProfesionalismo");case 2:if(!t.sent){t.next=7;break}o.loadingSubmit=!0,o.motivo.id?o.axios.put("th_retiros/"+o.motivo.id,o.motivo).then(function(t){o.$store.commit(l.b,{msg:"El motivo de retiro se actualizo correctamente",color:"success"}),o.formReset(),o.$store.dispatch(d.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(c.U,{item:t.data.data,estado:"editar",key:o.parametros.key})}).catch(function(t){o.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}):o.axios.post("th_retiros",o.motivo).then(function(t){o.$store.commit(l.b,{msg:"El motivo de retiro se creó correctamente",color:"success"}),o.formReset(),o.$store.dispatch(d.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(c.U,{item:t.data.data,estado:"crear",key:o.parametros.key})}).catch(function(t){console.log(t),o.$store.commit(l.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}),t.next=8;break;case 7:o.$store.commit(l.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 8:case"end":return t.stop()}},t,o)}))()},seleccionCenCosto:function(o){null!==o&&(this.motivo.cencosto=o,this.motivo.nf_cencosto_id=o.id)},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.ordenEdit=!1,this.dialogCodigo=!1},formReset:function(){this.motivo={},this.buscandoCodigo=!1,this.dialogCodigo=!1,this.ordenEdit=!1},close:function(){this.formReset(),this.$validator.reset(),this.$store.dispatch(d.c,{contexto:this,itemId:this.parametros.tabOrigin})},getRegistro:function(o){var t=this;this.axios.get("th_retiros/"+o).then(function(o){o.data.exists&&t.edit(o.data.data)}).catch(function(o){t.$store.commit(l.a,{expression:" al traer el motivo de retiro",error:o})})},edit:function(o){this.ordenEdit=!0,this.motivo=o}},mounted:function(){null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},2092:function(o,t,e){"use strict";var i=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("v-card",[e("v-toolbar",{staticClass:"grey lighten-3 elevation-0 toolbar--dense"},[e("v-toolbar-title",[o._v(" "+o._s(o.ordenEdit?"Edicion de motivo de retiro":"Registro de motivo de retiro")+" ")])],1),o._v(" "),e("v-card-text",[e("v-form",{attrs:{"data-vv-scope":"formRegistroGradoProfesionalismo"}},[e("v-container",{attrs:{fluid:"","grid-list-xl":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"pb-4",attrs:{xs12:""}},[e("v-card",[e("v-toolbar",{staticClass:"grey lighten-4 elevation-0",attrs:{dense:""}},[e("v-toolbar-title",{staticClass:"subheading"},[e("v-icon",[o._v("assignment_ind")]),o._v(" General")],1)],1),o._v(" "),e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:"",sm4:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:5",expression:"'required|max:5'"}],key:"codigo",attrs:{label:"Código",name:"Codigo","prepend-icon":"list","error-messages":o.errors.collect("Codigo"),disabled:o.ordenEdit,"persistent-hint":"",hint:o.buscandoCodigo?"Estamos buscando el codigo":"",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.findByCodigo(t)},blur:o.findByCodigo},model:{value:o.motivo.codigo,callback:function(t){o.$set(o.motivo,"codigo",t)},expression:"motivo.codigo"}})],1),o._v(" "),e("v-flex",{attrs:{xs12:"",sm8:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","prepend-icon":"person","error-messages":o.errors.collect("Nombre"),required:""},model:{value:o.motivo.nombre,callback:function(t){o.$set(o.motivo,"nombre",t)},expression:"motivo.nombre"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),o._v(" "),e("v-divider"),o._v(" "),"Confirmada"!==o.estado&&"Anulada"!==o.estado?e("v-card-actions",{staticClass:"grey lighten-4"},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[e("v-btn",{on:{click:function(t){return o.close()}}},[o._v("Cancelar")]),o._v(" "),e("v-btn",{attrs:{color:"primary",loading:o.loadingSubmit},on:{click:function(t){return t.preventDefault(),o.submit(t)}}},[o._v("Guardar")])],1)],1)],1):o._e()],1),o._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:o.dialogCodigo,callback:function(t){o.dialogCodigo=t},expression:"dialogCodigo"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[o._v("Codigo del motivo de retiro")]),o._v(" "),e("v-card-text",[o._v("El codigo del motivo de retiro ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),o._v(" "),e("v-card-actions",[e("v-spacer"),o._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.editarByCodigo}},[o._v("Cargar datos")]),o._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.cerrarByCodigo}},[o._v("Cerrar")])],1)],1)],1)],1)},r=[],a={render:i,staticRenderFns:r};t.a=a},628:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e(1173),r=e(2092),a=e(1),s=a(i.a,r.a,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=275.c9b55a336748acc79839.js.map