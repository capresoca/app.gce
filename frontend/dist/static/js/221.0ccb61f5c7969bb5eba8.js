webpackJsonp([221],{1251:function(t,e,a){"use strict";var i=a(8),n=a.n(i),o=a(6),r=a(12),s=a(58);e.a={name:"Concurrencias",components:{ToolbarList:function(){return new Promise(function(t){t()}).then(a.bind(null,247))},Loading:s.default},data:function(){return{concurrencias:[],funcionarios:[],funcionario:"",search:"",tableLoading:!1,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Consecutivo",align:"left",sortable:!1,value:"consecutivo"},{text:"Afiliado",align:"left",sortable:!1,value:"afiliado"},{text:"Estancia",align:"left",sortable:!1,value:"estancia"},{text:"Consecutivo IPS",align:"left",sortable:!1,value:"consecutivo ips"},{text:"Entidad",align:"left",sortable:!1,value:"entidad"},{text:"Fecha",align:"left",sortable:!1,value:"fecha"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"left",sortable:!1,value:"id"}]}},created:function(){this.reloadPage(),this.getAuditores()},watch:{itemConcurrencias:function(t){"crear"===t.estado?this.concurrencias.splice(0,0,t.item):"editar"===t.estado&&this.concurrencias.splice(this.concurrencias.findIndex(function(e){return e.id===t.item.id}),1,t.item)},"pagination.per_page":function(){this.pagination.current_page=1,this.reloadPage()}},computed:n()({infoComponent:function(){return this.$store.getters.getInfoComponent("concurrencias")}},Object(o.c)({itemConcurrencias:function(t){return t.tables.itemConcurrencias}}),{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}}),methods:{reloadPage:function(){var t=this;this.tableLoading=!0,this.axios.get("cuentasmedicas/concurrencia?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25").then(function(e){e.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(e.data.meta.per_page)})?parseInt(e.data.meta.per_page):-1,t.pagination=e.data.meta,t.concurrencias=e.data.data,t.tableLoading=!1}).catch(function(e){return t.tableLoading=!1,t.$store.commit(r.a,{expression:" al hacer la busqueda de registros. ",error:e}),!1})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),getAuditores:function(){var t=this;this.axios.get("ac_auditores").then(function(e){t.funcionarios=e.data.data,t.funcionarios.unshift({usuario:{id:null,name:"Todos"},identificacion_completa:"Listar todas las concurrencias"})}).catch(function(e){return t.$store.commit(r.a,{expression:" al traer auditores. ",error:e}),!1})},filtrarConcurrencias:function(){this.funcionario?this.concurrenciasPorAuditor():this.reloadPage()},concurrenciasPorAuditor:function(){var t=this;this.tableLoading=!0,this.axios.get("cuentasmedicas/concurrencia?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25&auditores:gs_usuario_id="+this.funcionario).then(function(e){e.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(e.data.meta.per_page)})?parseInt(e.data.meta.per_page):-1,t.pagination=e.data.meta,t.concurrencias=e.data.data,t.tableLoading=!1}).catch(function(e){return t.tableLoading=!1,t.$store.commit(r.a,{expression:" al hacer la busqueda de registros. ",error:e}),!1})}}}},2310:function(t,e,a){var i=a(2311);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(456)("03a4a124",i,!0,{})},2311:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"@media (min-width:960px){.gridMd[data-v-69677526]{-ms-flex-preferred-size:50%;flex-basis:50%;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;max-width:30%;margin-right:20%}}","",{version:3,sources:["/home/capresoca/projects/Capresoca-Frontend/src/components/administrativo/auditoriaCuentas/concurrencias/Concurrencias.vue"],names:[],mappings:"AACA,yBACA,yBACI,4BAA6B,AACzB,eAAgB,AACpB,mBAAoB,AAChB,oBAAqB,AACjB,YAAa,AACrB,cAAe,AACf,gBAAkB,CACrB,CACA",file:"Concurrencias.vue",sourcesContent:["\n@media (min-width: 960px) {\n.gridMd[data-v-69677526] {\n    -ms-flex-preferred-size: 50%;\n        flex-basis: 50%;\n    -webkit-box-flex: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    max-width: 30%;\n    margin-right: 20%;\n}\n}\n"],sourceRoot:""}])},2312:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("toolbar-list",{attrs:{info:t.infoComponent,title:"Concurrencias",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear Item"}}),t._v(" "),a("loading",{model:{value:t.tableLoading,callback:function(e){t.tableLoading=e},expression:"tableLoading"}}),t._v(" "),a("v-container",{staticClass:"pa-1",attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"gridMd",attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{attrs:{items:t.funcionarios,"item-text":"usuario.name","item-value":"usuario.id",name:"funcionario",label:"Funcionario","persistent-hint":"","no-data-text":"No existen datos","prepend-icon":"person"},on:{change:function(){return t.filtrarConcurrencias()}},scopedSlots:t._u([{key:"item",fn:function(e){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.usuario.name)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.identificacion_completa)}})],1)]]}}]),model:{value:t.funcionario,callback:function(e){t.funcionario=e},expression:"funcionario"}})],1),t._v(" "),a("v-flex",{staticClass:"text-xs-right",attrs:{xs5:"",sm4:"",md2:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:t.reloadPage},slot:"activator"},[a("v-icon",[t._v("cached")])],1),t._v(" "),a("span",[t._v("Actualizar registros")])],1)],1),t._v(" "),a("v-flex",{attrs:{xs7:"",sm2:"",md1:""}},[a("v-select",{attrs:{label:"Por página",items:t.items_page,"item-text":"text","item-value":"value"},model:{value:t.pagination.per_page,callback:function(e){t.$set(t.pagination,"per_page",e)},expression:"pagination.per_page"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar"},on:{input:t.buscar},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.concurrencias,loading:t.tableLoading,pagination:t.pagination,"total-items":t.concurrencias.length,search:t.search,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.consecutivo))]),t._v(" "),a("td",[a("mini-card-detail",{attrs:{data:e.item.afiliado.mini_afiliado}})],1),t._v(" "),a("td",[a("v-chip",{attrs:{color:"red","text-color":"white"}},[t._v(t._s(e.item.tiempo_estancia)+" días")])],1),t._v(" "),a("td",[t._v(t._s(e.item.consecutivo_ips))]),t._v(" "),a("td",[t._v(t._s(e.item.entidad.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.fecha))]),t._v(" "),a("td",[t._v(t._s(e.item.estado))]),t._v(" "),a("td",[a("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:e.item.show,callback:function(a){t.$set(e.item,"show",a)},expression:"props.item.show"}},[a("v-icon",[t._v("chevron_left")]),t._v(" "),a("v-icon",[t._v("close")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(a){t.$store.commit("NAV_ADD_ITEM",{ruta:"detalleConcurrencia",titulo:"Detalle concurrencia",parametros:{entidad:e.item,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[a("v-icon",{attrs:{color:"accent"}},[t._v("remove_red_eye")])],1),t._v(" "),a("span",[t._v("Ver")])],1)],1)],1)]}}])},[t._v(" "),a("template",{slot:"no-data"},[t.tableLoading?a("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n            Estamos cargando los registros. "),a("v-icon",[t._v("sentiment_satisfied_alt")])],1):a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n            Lo sentimos, no tenemos registros para mostrar. "),a("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1),t._v(" "),a("template",{slot:"footer"},[a("td",{staticClass:"text-xs-center",attrs:{colspan:"100%"}},[a("v-pagination",{attrs:{"total-visible":7,length:t.pagination.last_page},on:{input:t.filtrarConcurrencias},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)])],2)],1)],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},686:function(t,e,a){"use strict";function i(t){a(2310)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1251),o=a(2312),r=a(1),s=i,c=r(n.a,o.a,!1,s,"data-v-69677526",null);e.default=c.exports}});
//# sourceMappingURL=221.0ccb61f5c7969bb5eba8.js.map