webpackJsonp([196],{1111:function(t,o,n){"use strict";var e=n(13),a=n.n(e),i=n(14),r=n.n(i),l=n(7),s=n.n(l),c=n(12);o.a={name:"Contratos",components:{DataTable:function(){return new Promise(function(t){t()}).then(n.bind(null,60))},ToolbarList:function(){return new Promise(function(t){t()}).then(n.bind(null,247))},Confirmar:function(){return n.e(289).then(n.bind(null,749))}},data:function(){return{dialogA:{loading:!1,visible:!1,content:null,registro:null},dataTable:{nameItemState:"itemContrato",route:"minutas",makeHeaders:[{text:"Número",align:"center",sortable:!0,value:"numero_contrato",classData:"text-xs-center"},{text:"Fecha Contrato",align:"left",sortable:!1,classData:"text-xs-left",component:{component:{template:"<span>{{value.fecha_contrato ? moment(value.fecha_contrato).format('YYYY-MM-DD') : ''}}</span>",props:["value"]}}},{text:"Entidad",align:"left",sortable:!0,value:"entidad"},{text:"Objeto",align:"left",sortable:!1,value:"objeto"},{text:"Fecha Inicio",align:"left",sortable:!1,classData:"text-xs-left",width:"120px",component:{component:{template:"<span>{{value.fecha_acta_inicio ? moment(value.fecha_acta_inicio).format('YYYY-MM-DD') : ''}}</span>",props:["value"]}}},{text:"Fecha Fin",align:"right",sortable:!0,classData:"text-xs-right",value:"fecha_finalizacion",width:"120px",component:{component:{template:'\n                  <div>\n                    <v-tooltip top v-if="value.modificaciones_plazo">\n                      <v-badge\n                      slot="activator"\n                      color="purple"\n                      >\n                        <span slot="badge">{{value.modificaciones_plazo}}</span>\n                      </v-badge>\n                      <span>Modificaciones en plazo</span>\n                    </v-tooltip>\n                    <p v-if="value.modificaciones_plazo">{{value.fecha_finalizacion ? moment(value.fecha_finalizacion).format(\'YYYY-MM-DD\') : \'\'}}</p>\n                    <span v-else>{{value.fecha_finalizacion ? moment(value.fecha_finalizacion).format(\'YYYY-MM-DD\') : \'\'}}</span>\n                  </div>\n                ',props:["value"]}}},{text:"Valor Total",align:"right",sortable:!0,classData:"text-xs-right",value:"valor",component:{component:{template:'\n                  <div>\n                    <v-tooltip top v-if="value.modificaciones_valor">\n                      <v-badge\n                      slot="activator"\n                      color="purple"\n                      >\n                        <span slot="badge">{{value.modificaciones_valor}}</span>\n                      </v-badge>\n                      <span>Modificaciones en valor</span>\n                    </v-tooltip>\n                    <p v-if="value.modificaciones_valor">{{\'$\'}}{{value.valor | numberFormat(2)}}</p>\n                    <span v-else>{{\'$\'}}{{value.valor | numberFormat(2)}}</span>\n                  </div>\n                ',props:["value"]}}},{text:"Estado",align:"center",sortable:!0,value:"estado",classData:"text-xs-center"},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"text-xs-center"}]}}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("contratos")}},methods:{eliminar:function(t){this.dialogA.registro=JSON.parse(s()(t)),this.dialogA.content="<strong>El contrato "+this.dialogA.registro.numero_contrato+" con la entidad "+this.dialogA.registro.entidad+" será eliminado.</strong><br/> ¿Está seguro de eliminar el contrato?",this.dialogA.visible=!0},cancelaConfirmacion:function(){this.dialogA.loading=!1,this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registro=null},aceptaConfirmacion:function(){var t=this;return r()(a.a.mark(function o(){return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t.dialogA.loading=!0,t.axios.delete("minutas/"+t.dialogA.registro.id).then(function(){t.$store.commit(c.b,{msg:"El contrato se ha eliminado correctamente.",color:"success"}),t.$store.commit("CONTRATO_RELOAD_ITEM",{item:t.dialogA.registro,estado:"reload",key:null}),t.cancelaConfirmacion()}).catch(function(o){t.dialogA.loading=!1,t.$store.commit(c.a,{expression:" al realizar la eliminación del contrato. ",error:o})});case 2:case"end":return o.stop()}},o,t)}))()},resetOptions:function(t){return t.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&t.options.push({event:"editar",icon:"build",tooltip:"Gestionar",color:"primary"}),this.infoComponent&&this.infoComponent.permisos.anular&&"Registrado"===t.estado&&t.options.push({event:"eliminar",icon:"delete_forever",tooltip:"Eliminar",color:"error"}),this.infoComponent&&this.infoComponent.permisos.confirmar&&"Confirmado"===t.estado&&t.options.push({event:"revisar",icon:"receipt",tooltip:"Revisar minuta",color:"orange"}),t}}}},1939:function(t,o,n){var e=n(1940);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n(456)("fdef277e",e,!0,{})},1940:function(t,o,n){o=t.exports=n(455)(!0),o.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Contratos.vue",sourceRoot:""}])},1941:function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("v-card",[n("toolbar-list",{attrs:{info:t.infoComponent,title:"Contratos",subtitle:"Gestión"}}),t._v(" "),n("data-table",{ref:"tablaPContratos",on:{resetOption:function(o){return t.resetOptions(o)},eliminar:function(o){return t.eliminar(o)},revisar:function(o){return t.$store.commit("NAV_ADD_ITEM",{ruta:"minutaContrato",titulo:"Minuta contrato: "+o.numero_contrato,parametros:{entidad:o,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})},editar:function(o){return t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:o,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},model:{value:t.dataTable,callback:function(o){t.dataTable=o},expression:"dataTable"}}),t._v(" "),n("confirmar",{attrs:{loading:t.dialogA.loading,value:t.dialogA.visible,content:t.dialogA.content,"requiere-motivo":!1},on:{cancelar:t.cancelaConfirmacion,aceptar:t.aceptaConfirmacion}})],1)},a=[],i={render:e,staticRenderFns:a};o.a=i},583:function(t,o,n){"use strict";function e(t){n(1939)}Object.defineProperty(o,"__esModule",{value:!0});var a=n(1111),i=n(1941),r=n(1),l=e,s=r(a.a,i.a,!1,l,"data-v-1f44f8fb",null);o.default=s.exports}});
//# sourceMappingURL=196.a9587dd5cc9a116c39bc.js.map