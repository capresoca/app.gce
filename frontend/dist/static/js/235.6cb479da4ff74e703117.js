webpackJsonp([235],{1193:function(e,t,r){"use strict";t.a={name:"Unificador4505",data:function(){return{fab:!1,dialogdescarga:!1,dialogHelp:!1,pickerFechaInicio:!1,pickerFechaFin:!1,parametros:{year:"",periodo:""},years:[],periodos:[]}},methods:{submit:function(){var e=this;return""===this.parametros.year?(this.$store.commit("SNACK_SHOW",{msg:"Seleccione un año",color:"error"}),!1):""===this.parametros.periodo?(this.$store.commit("SNACK_SHOW",{msg:"Seleccione un periodo",color:"error"}),!1):(this.dialogdescarga=!0,void this.axios({url:"unificador-archivos-4505",method:"POST",data:this.parametros,responseType:"blob"}).then(function(t){e.dialogdescarga=!1;var r=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=r,a.setAttribute("download","archivounificado.TXT"),document.body.appendChild(a),a.click()}).catch(function(t){e.dialogdescarga=!1;var r=new Blob([t.response.data],{type:"text/plain"}),a=new FileReader;a.addEventListener("loadend",function(t){var r=JSON.parse(t.srcElement.result);console.log("warning"===r.state),"warning"===r.state?e.$store.commit("SNACK_SHOW",{msg:r.message,color:"info"}):"validador"===r.state?e.$store.commit("SNACK_SHOW",{msg:r.message,color:"info"}):"exception"===r.state?e.$store.commit("SNACK_SHOW",{msg:r.message+" | Error: "+r.message.errors,color:"error"}):e.$store.commit("SNACK_SHOW",{msg:"Error en el servidor: "+t.srcElement.result,color:"error"})}),a.readAsText(r)}))},complementos:function(){var e=this;this.axios.get("complementos-unificador-archivos-4505").then(function(t){e.years=t.data.years,e.periodos=t.data.periodos}).catch(function(t){e.$store.commit("SNACK_SHOW",{msg:"Status: "+t.response.status+" | "+t.response.data.message,color:"error"})})}},mounted:function(){this.complementos()}}},2120:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("v-container",[r("v-card",{attrs:{flat:"",icon:""}},[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      Unificador de archivos 4505\n    ")]),e._v(" "),r("v-card-text",[r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[r("v-select",{attrs:{items:e.years,"item-text":"year","item-value":"year",placeholder:"Seleccione un año",label:"Año"},model:{value:e.parametros.year,callback:function(t){e.$set(e.parametros,"year",t)},expression:"parametros.year"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[r("v-select",{attrs:{items:e.periodos,placeholder:"Seleccione un periodo",label:"periodo"},model:{value:e.parametros.periodo,callback:function(t){e.$set(e.parametros,"periodo",t)},expression:"parametros.periodo"}})],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}}),e._v(" "),r("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.submit}},[e._v("UNIFICAR")])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogdescarga,callback:function(t){e.dialogdescarga=t},expression:"dialogdescarga"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v("\n        Por favor espere, estamos descargando el archivo 4505\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},o=[],s={render:a,staticRenderFns:o};t.a=s},648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1193),o=r(2120),s=r(1),i=s(a.a,o.a,!1,null,null,null);t.default=i.exports}});
//# sourceMappingURL=235.6cb479da4ff74e703117.js.map