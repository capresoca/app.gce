webpackJsonp([249],{1182:function(o,e,t){"use strict";var i=t(13),r=t.n(i),s=t(14),a=t.n(s),n=t(40),d=t(248),c=t(12);e.a={name:"RegistroTipoIngreso",props:["parametros"],data:function(){return{buscandoCodigo:!1,dialogCodigo:!1,ordenEdit:!1,complementosTipoIngreso:{definicion:[]},tipoingreso:{}}},methods:{findByCodigo:function(){var o=this;this.tipoingreso.codigo&&(this.buscandoCodigo=!0,this.axios.get("pr_tipo_ingresos/codigo/"+this.tipoingreso.codigo).then(function(e){e.data.exists&&(o.$store.commit(c.b,{msg:"El codigo del tipo de ingreso existe",color:"success"}),o.formReset(),o.tipoingreso=e.data.data,o.dialogCodigo=!0),o.buscandoCodigo=!1}).catch(function(e){console.log(e),o.buscandoCodigo=!1,o.$store.commit(c.b,{msg:"Hay un error al consultar el codigo. "+e.response,color:"danger"})}))},validador:function(o){return this.$validator.validateAll(o).then(function(o){return o})},submit:function(){var o=this;return a()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validador("formRegistroTipoIngreso");case 2:if(!e.sent){e.next=6;break}o.tipoingreso.id?o.axios.put("pr_tipo_ingresos/"+o.tipoingreso.id,o.tipoingreso).then(function(e){o.$store.commit(c.b,{msg:"El registro del tipo de ingreso se actualizo correctamente",color:"success"}),o.formReset(),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(d._24,{item:e.data.data,estado:"editar",key:o.parametros.key})}).catch(function(e){console.log(e),o.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}):o.axios.post("pr_tipo_ingresos",o.tipoingreso).then(function(e){o.$store.commit(c.b,{msg:"El registro del tipo de ingreso se cre√≥ correctamente",color:"success"}),o.formReset(),o.$store.dispatch(n.c,{contexto:o,itemId:o.parametros.tabOrigin}),o.$store.commit(d._24,{item:e.data.data,estado:"crear",key:o.parametros.key})}).catch(function(e){console.log(e),o.$store.commit(c.b,{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=7;break;case 6:o.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return e.stop()}},e,o)}))()},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.ordenEdit=!1,this.dialogCodigo=!1},formReset:function(){this.tipoingreso={tercero:{identificacion:"",nombre_completo:"",municipio:{nombre:"",nombre_departamento:""}}},this.buscandoCodigo=!1,this.dialogCodigo=!1,this.ordenEdit=!1},getRegistro:function(o){var e=this;this.axios.get("pr_tipo_ingresos/"+o).then(function(o){o.data.exists&&e.edit(o.data.data)}).catch(function(o){e.$store.commit(c.a,{expression:" al traer el subgrupo. ",error:o})})},edit:function(o){this.ordenEdit=!0,this.tipoingreso=o}},mounted:function(){var o=this;this.axios.get("pr_tipo_ingresos/complementos").then(function(e){o.complementosTipoIngreso=e.data.data}).catch(function(e){o.$store.commit(c.a,{expression:" Al intentar consultar codigo. ",error:e})}),null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.$validator.localize("es")}}},2105:function(o,e,t){"use strict";var i=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[o._v("\n    "+o._s(o.ordenEdit?"Edicion de tipo de ingreso":"Registro de tipo de ingreso")+"\n    ")]),o._v(" "),t("v-card-text",[t("v-form",{attrs:{"data-vv-scope":"formRegistroTipoIngreso"}},[t("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:16",expression:"'required|max:16'"}],key:"codigo",attrs:{label:"Codigo",name:"Codigo","error-messages":o.errors.first("Codigo"),disabled:o.ordenEdit,"persistent-hint":"",hint:o.buscandoCodigo?"Estamos buscando el codigo":""},on:{keyup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.findByCodigo(e)},blur:o.findByCodigo},model:{value:o.tipoingreso.codigo,callback:function(e){o.$set(o.tipoingreso,"codigo",e)},expression:"tipoingreso.codigo"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md8:"",lg8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"Nombre","error-messages":o.errors.first("Nombre"),required:""},model:{value:o.tipoingreso.nombre,callback:function(e){o.$set(o.tipoingreso,"nombre",e)},expression:"tipoingreso.nombre"}})],1),o._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[t("v-select",{attrs:{items:o.complementosTipoIngreso.definicion,label:"Definicion"},model:{value:o.tipoingreso.definicion,callback:function(e){o.$set(o.tipoingreso,"definicion",e)},expression:"tipoingreso.definicion"}})],1)],1),o._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg12:""}},[t("v-btn",{attrs:{color:"success"},on:{click:o.submit}},[o._v("\n              Guardar\n              ")])],1)],1)],1)],1)],1)],1),o._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:o.dialogCodigo,callback:function(e){o.dialogCodigo=e},expression:"dialogCodigo"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[o._v("Codigo del tipo de ingreso")]),o._v(" "),t("v-card-text",[o._v("El codigo del tipo de ingreso ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),o._v(" "),t("v-card-actions",[t("v-spacer"),o._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.editarByCodigo}},[o._v("Cargar datos")]),o._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:o.cerrarByCodigo}},[o._v("Cerrar")])],1)],1)],1)],1)},r=[],s={render:i,staticRenderFns:r};e.a=s},637:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t(1182),r=t(2105),s=t(1),a=s(i.a,r.a,!1,null,null,null);e.default=a.exports}});
//# sourceMappingURL=249.c46171feb39061a23681.js.map