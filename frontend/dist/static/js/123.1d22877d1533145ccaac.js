webpackJsonp([123],{1065:function(a,e,t){"use strict";var s=t(13),o=t.n(s),i=t(14),r=t.n(i),l=t(7),n=t.n(l),d=t(249),c=t.n(d);e.a={name:"SolTraslados",components:{ToolbarList:function(){return new Promise(function(a){a()}).then(t.bind(null,247))}},data:function(){return{dataTableS2:{nameItemState:"tableSolicitudesTrasladosS2",route:"soltraslados?tipo=S2",makeHeaders:[{text:"Afiliado",align:"left",sortable:!1,value:"mini_afiliado",component:{template:'<mini-card-detail :data="value.mini_afiliado"></mini-card-detail>',props:["value"]}},{text:"EPS",align:"left",sortable:!1,value:"eps"},{text:"Dias EPS",align:"left",sortable:!0,value:"dias_eps",component:{template:"<v-chip :color=\"value.dias_eps > 365 ? 'green' : 'red'\" text-color=\"white\">{{ value.dias_eps}}</v-chip>",props:["value"]}},{text:"Fecha de solicitud",align:"left",sortable:!1,value:"fecha_solicitada"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Respuesta",align:"left",sortable:!1,value:"respuesta"},{text:"Opciones",align:"center",sortable:!1,actions:!0,singlesActions:!0,classData:"text-xs-center"}]},dataTableR2:{nameItemState:"tableSolicitudesTrasladosR2",route:"soltraslados?tipo=R2",makeHeaders:[{text:"Afiliado",align:"left",sortable:!1,value:"mini_afiliado",component:{template:'<mini-card-detail :data="value.mini_afiliado"></mini-card-detail>',props:["value"]}},{text:"EPS",align:"left",sortable:!1,value:"eps"},{text:"Dias EPS",align:"left",sortable:!0,value:"dias_eps",component:{template:"<v-chip :color=\"value.dias_eps > 365 ? 'green' : 'red'\" text-color=\"white\">{{ value.dias_eps}}</v-chip>",props:["value"]}},{text:"Fecha de solicitud",align:"left",sortable:!1,value:"fecha_solicitada"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Respuesta",align:"left",sortable:!1,value:"respuesta"},{text:"Opciones",align:"center",sortable:!1,actions:!0,singlesActions:!0,classData:"text-xs-center"}]},solTraslados:[],solTraslado:{},tiposRespuesta:["Aprobado","Negado"],tiposCausalRespuesta:[],listaCausalesAprobacion:[],listaCausalesNegacion:[],menuDate:!1,minDate:this.moment().format("YYYY-MM-DD"),dialog:!1,dialogConfirm:!1,loadingArchivo:!1,errorArchivo:"",checkboxRadicado:""}},mounted:function(){var a={custom:{codigo:{not_in:"Este código ya fue registrado."},nombre:{not_in:"Este nombre ya fue registrado."}}};this.$validator.localize("es",a)},beforeCreate:function(){var a=this;this.axios.get("cautraslados").then(function(e){a.tiposCausalRespuesta=e.data.data,a.filtrarCausalesDeAprobacion(),a.filtrarCausalesDeNegacion()}).catch(function(a){return console.log("Hay un error. "+a),!1})},watch:{"solTraslado.respuesta":function(a){"Aprobado"===a?this.tiposCausalRespuesta=this.listaCausalesAprobacion:(this.tiposCausalRespuesta=this.listaCausalesNegacion,this.solTraslado.fecha_factible=null)},"solTraslado.estado":function(a){this.checkboxRadicado="Radicado"===a},checkboxRadicado:function(a){this.solTraslado.estado=a?"Radicado":"Registrado"}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("tramitesSolTraslado")},modalTitulo:function(){return"Solicitud de traslado de "+this.solTraslado.nombre_afiliado},computedDateFormatted:function(){return this.formDate(this.solTraslado.fecha_factible)}},methods:{resetOptions:function(a){return a.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&a.options.push({event:"editar",icon:"feedback",tooltip:this.textoTooltip(a),disabled:this.estadoBoton(a)}),a},filtrarCausalesDeAprobacion:function(){this.listaCausalesAprobacion=this.tiposCausalRespuesta.filter(function(a){return"Aceptación"===a.tipo})},filtrarCausalesDeNegacion:function(){this.listaCausalesNegacion=this.tiposCausalRespuesta.filter(function(a){return"Negación"===a.tipo})},estadoBoton:function(a){return"Radicado"===a.estado},textoTooltip:function(a){return"Radicado"===a.estado?"Ya se encuentra radicado":"Responder"},formDate:function(a){if(!a)return null;var e=a.split("-"),t=c()(e,3);return t[0]+"/"+t[1]+"/"+t[2]},close:function(){this.dialog=!1,this.$validator.reset()},validador:function(a){return this.$validator.validateAll(a).then(function(a){return a})},edit:function(a){this.dialog=!0,this.solTraslado=JSON.parse(n()(a))},save:function(){var a=this;return r()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validador("formSolTraslado");case 2:if(!e.sent){e.next=6;break}a.axios.put("soltraslados/"+a.solTraslado.id,a.solTraslado).then(function(e){a.solTraslado.id?(a.$store.commit("SNACK_SHOW",{msg:"La solicitud se actualizó correctamente",color:"success"}),a.solTraslados.splice(a.solTraslados.findIndex(function(a){return a.id===e.data.data.id}),1,e.data.data)):(a.$store.commit("SNACK_SHOW",{msg:"La solicitud se creó correctamente",color:"success"}),a.solTraslados.splice(0,0,e.data.data)),a.dialog=!1,a.dialogConfirm=!1,a.close()}).catch(function(e){a.$store.commit("SNACK_SHOW",{msg:"Hay un error al guardar el registro. "+e.response,color:"danger"})}),e.next=7;break;case 6:a.$store.commit("SNACK_SHOW",{msg:"Los campos no pueden estar vacios.",color:"danger"});case 7:case"end":return e.stop()}},e,a)}))()}}}},1790:function(a,e,t){var s=t(1791);"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);t(456)("f1820c1c",s,!0,{})},1791:function(a,e,t){e=a.exports=t(455)(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SolTraslados.vue",sourceRoot:""}])},1792:function(a,e,t){"use strict";var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-card",[t("v-dialog",{attrs:{width:"720px"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[t("v-form",{attrs:{"data-vv-scope":"formSolTraslado"}},[t("v-card",[t("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[t("span",{staticClass:"title"},[a._v(a._s(a.modalTitulo))]),a._v(" "),t("v-tooltip",{attrs:{top:""}},[t("v-chip",{attrs:{slot:"activator",color:a.solTraslado.dias_eps>365?"green":"red","text-color":"white"},slot:"activator"},[a._v(a._s(a.solTraslado.dias_eps)+" días")]),a._v(" "),t("span",[a._v(a._s(a.solTraslado.dias_eps>365?"Cumple":"No cumple"))])],1)],1),a._v(" "),t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"indentificacion",attrs:{label:"Identificación",name:"indentificacion",required:"","error-messages":a.errors.collect("indentificacion"),disabled:!0},model:{value:a.solTraslado.identificacion,callback:function(e){a.$set(a.solTraslado,"identificacion",e)},expression:"solTraslado.identificacion"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"nombre",attrs:{label:"Nombre",name:"nombre",required:"","error-messages":a.errors.collect("nombre"),disabled:!0},model:{value:a.solTraslado.nombre_afiliado,callback:function(e){a.$set(a.solTraslado,"nombre_afiliado",e)},expression:"solTraslado.nombre_afiliado"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"eps",attrs:{label:"EPS",name:"eps",required:"","error-messages":a.errors.collect("eps"),disabled:!0},model:{value:a.solTraslado.eps,callback:function(e){a.$set(a.solTraslado,"eps",e)},expression:"solTraslado.eps"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"fechaSolicitud",attrs:{label:"Fecha de solicitud",name:"fechaSolicitud",required:"","error-messages":a.errors.collect("fechaSolicitud"),disabled:!0},model:{value:a.solTraslado.fecha_solicitada,callback:function(e){a.$set(a.solTraslado,"fecha_solicitada",e)},expression:"solTraslado.fecha_solicitada"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:a.tiposRespuesta,name:"tipo de respuesta",label:"Respuesta","error-messages":a.errors.collect("tipo de respuesta"),required:"","single-line":""},model:{value:a.solTraslado.respuesta,callback:function(e){a.$set(a.solTraslado,"respuesta",e)},expression:"solTraslado.respuesta"}})],1),a._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Motivo",items:a.tiposCausalRespuesta,"item-value":"id","item-text":"causa",name:"causal respuesta",required:"","error-messages":a.errors.collect("causal respuesta"),clearable:""},scopedSlots:a._u([{key:"item",fn:function(e){return[[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:a._s(e.item.codigo+" - "+e.item.causa)}})],1)]]}}]),model:{value:a.solTraslado.as_cautraslado_id,callback:function(e){a.$set(a.solTraslado,"as_cautraslado_id",e)},expression:"solTraslado.as_cautraslado_id"}})],1),a._v(" "),t("v-slide-x-transition",["Aprobado"===a.solTraslado.respuesta||16===a.solTraslado.as_cautraslado_id?t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:a.menuDate,callback:function(e){a.menuDate=e},expression:"menuDate"}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY/MM/DD",expression:"'required|date_format:YYYY/MM/DD'"}],attrs:{slot:"activator",label:"Fecha Factible","prepend-icon":"event",readonly:"",name:"fecha","error-messages":a.errors.collect("fecha")},slot:"activator",model:{value:a.computedDateFormatted,callback:function(e){a.computedDateFormatted=e},expression:"computedDateFormatted"}}),a._v(" "),t("v-date-picker",{attrs:{locale:"es","no-title":"",min:a.minDate},on:{input:function(e){a.menuDate=!1},change:function(){var e=a.$validator.errors.items.findIndex(function(a){return"fecha"===a.field});a.$validator.errors.items.splice(-1!==e?e:0,-1!==e?1:0)}},model:{value:a.solTraslado.fecha_factible,callback:function(e){a.$set(a.solTraslado,"fecha_factible",e)},expression:"solTraslado.fecha_factible"}})],1)],1):a._e()],1)],1)],1),a._v(" "),t("v-card-actions",{staticClass:"grey lighten-4"},[t("v-spacer"),a._v(" "),t("v-btn",{on:{click:a.close}},[a._v("Cancelar")]),a._v(" "),t("v-btn",{attrs:{color:"primary",disabled:a.errors.any()},nativeOn:{click:function(e){a.dialogConfirm=!0}}},[a._v("Guardar")])],1)],1)],1)],1),a._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:a.dialogConfirm,callback:function(e){a.dialogConfirm=e},expression:"dialogConfirm"}},[t("v-card",[t("v-card-title",{staticClass:"headline grey lighten-3"},[a._v("Alerta")]),a._v(" "),t("v-card-text",[a._v("¿Está seguro que desea realizar esta acción?")]),a._v(" "),t("v-divider"),a._v(" "),t("v-card-text",[t("v-checkbox",{attrs:{label:"Radicado"},model:{value:a.checkboxRadicado,callback:function(e){a.checkboxRadicado=e},expression:"checkboxRadicado"}})],1),a._v(" "),t("v-divider"),a._v(" "),t("v-card-actions",[t("v-spacer"),a._v(" "),t("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(e){a.dialogConfirm=!1}}},[a._v("Cancelar")]),a._v(" "),t("v-btn",{attrs:{color:"primary",flat:""},nativeOn:{click:function(e){return a.save(e)}}},[a._v("Aceptar")])],1)],1)],1),a._v(" "),t("toolbar-list",{attrs:{info:a.infoComponent,title:"Solicitud de Traslados",subtitle:"Registro y gestión"}}),a._v(" "),t("v-tabs",{attrs:{grow:"","fixed-tabs":"",color:"cyan",dark:""}},[t("v-tabs-slider",{attrs:{color:"accent"}}),a._v(" "),t("v-tab",{attrs:{href:"#tab-1"}},[t("v-icon",{attrs:{left:""}},[a._v("fas fa-clipboard-list")]),a._v("\n      Subsidiados\n    ")],1),a._v(" "),t("v-tab",{attrs:{href:"#tab-2"}},[t("v-icon",{attrs:{left:""}},[a._v("fas fa-clipboard-list")]),a._v("\n      Contributivos\n    ")],1),a._v(" "),t("v-tab-item",{attrs:{value:"tab-1"}},[t("v-card",{attrs:{flat:""}},[t("data-table-v2",{ref:"tableSolicitudesTrasladosS2",on:{resetOption:function(e){return a.resetOptions(e)},editar:function(e){return a.edit(e)}},model:{value:a.dataTableS2,callback:function(e){a.dataTableS2=e},expression:"dataTableS2"}})],1)],1),a._v(" "),t("v-tab-item",{attrs:{value:"tab-2"}},[t("v-card",{attrs:{flat:""}},[t("data-table-v2",{ref:"tableSolicitudesTrasladosR2",on:{resetOption:function(e){return a.resetOptions(e)},editar:function(e){return a.edit(e)}},model:{value:a.dataTableR2,callback:function(e){a.dataTableR2=e},expression:"dataTableR2"}})],1)],1)],1)],1)},o=[],i={render:s,staticRenderFns:o};e.a=i},553:function(a,e,t){"use strict";function s(a){t(1790)}Object.defineProperty(e,"__esModule",{value:!0});var o=t(1065),i=t(1792),r=t(1),l=s,n=r(o.a,i.a,!1,l,"data-v-5d9d416e",null);e.default=n.exports}});
//# sourceMappingURL=123.1d22877d1533145ccaac.js.map