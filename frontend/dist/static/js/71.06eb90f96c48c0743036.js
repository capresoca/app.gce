webpackJsonp([71],{1322:function(e,t,o){"use strict";var a=o(13),n=o.n(a),i=o(14),s=o.n(i),r=o(252),l=o.n(r),c=o(7),d=o.n(c),u=o(12),v=o(59),f=o(58),g=o(743);t.a={name:"fondos",components:{Loading:f.default,Confirmar:g.a,ToolbarList:function(){return new Promise(function(e){e()}).then(o.bind(null,247))}},data:function(){return{dialogA:{visible:!1,content:null,registroID:null},fondosC:[],fondos:{},segmento:"1",clasesFondos:[],search:"",dialog:!1,tableLoading:!1,localLoading:!1,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion"},{text:"NIT",align:"left",sortable:!1,value:"nit"},{text:"Teléfono",align:"left",sortable:!1,value:"telefono"},{text:"Fondo",align:"left",sortable:!1,value:"fondo"},{text:"Opciones",align:"left",sortable:!1,value:"clase_fondo"}]}},beforeMount:function(){this.formReset()},mounted:function(){this.listaClaseFondo()},created:function(){this.reloadPage()},watch:{"pagination.per_page":function(){this.pagination.current_page=1,this.reloadPage()}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("fondo")},modalTitulo:function(){return this.fondos.fondo?"Editar fondo: "+this.fondos.fondo:"Nuevo fondo"},complementos:function(){return JSON.parse(d()(v.b.getters.complementosClasesFondos))},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{reloadPage:function(){var e=this;this.tableLoading=!0,this.localLoading=!0,this.axios.get("fondo?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25&segm="+this.segmento).then(function(t){t.data.meta.per_page=e.items_page.find(function(e){return e.value===parseInt(t.data.meta.per_page)})?parseInt(t.data.meta.per_page):-1,e.pagination=t.data.meta,e.fondosC=t.data.data,e.tableLoading=!1,e.localLoading=!1}).catch(function(t){return e.tableLoading=!1,e.localLoading=!1,!1})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),formReset:function(){this.fondos={fondo:null,codigo:null,descripcion:null,digito_verificacion:null,direccion:null,nit:null,telefono:null}},eliminar:function(e){this.dialogA.content="¿Está seguro de eliminar?",this.dialogA.registroID=e,this.dialogA.visible=!0},cancelaAnulacion:function(){this.dialogA.visible=!1,this.dialogA.content=null,this.dialogA.registroID=null},confirmaAnulacion:function(e){var t=this;this.localLoading=!0,this.axios.delete("fondo/eliminar/"+this.dialogA.registroID).then(function(e){t.$store.commit(u.b,{msg:"El fondo se eliminó correctamente",color:"success"}),t.reloadPage(),t.cancelaAnulacion(),t.localLoading=!1,t.$refs.confirmo.pararCarga()}).catch(function(e){t.localLoading=!1,t.$store.commit(u.b,{msg:"Hay un error al eliminar el registro. "+e.response,color:"danger"})})},editar:function(e){this.dialog=!0,this.fondos=l()({},e)},close:function(){this.dialog=!1,this.formReset(),this.$validator.reset()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},save:function(){var e=this;return s()(n.a.mark(function t(){var o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validador("formPago");case 2:if(!t.sent){t.next=9;break}e.dialog=!1,e.localLoading=!0,o=e.fondos.fondo?e.axios.put("fondo/actualizar/"+e.fondos.fondo,e.fondos):e.axios.post("fondo/crear",e.fondos),o.then(function(t){e.localLoading=!1,e.fondos.fondo?e.$store.commit(u.b,{msg:"El fondo se actualizó correctamente",color:"success"}):(e.$store.commit(u.b,{msg:"Registro exitoso",color:"success"}),e.reloadPage()),e.dialog=!1}).catch(function(t){e.localLoading=!1,e.$store.commit(u.b,{msg:"Hay un error al guardar el registro. "+t.response,color:"danger"})}),t.next=10;break;case 9:e.$store.commit(u.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 10:e.formReset();case 11:case"end":return t.stop()}},t,e)}))()},listaClaseFondo:function(){var e=this;this.axios.get("clasefondo").then(function(t){e.clasesFondos=t.data.data}).catch(function(e){return!1})}},filters:{fondo:function(e,t){for(var o=0;o<t.length;o++){var a=t[o];if(e===a.clase_fondo)return a.descripcion}}}}},2548:function(e,t,o){var a=o(2549);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(456)("2b4b2798",a,!0,{})},2549:function(e,t,o){t=e.exports=o(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"FondosC.vue",sourceRoot:""}])},2550:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-dialog",{attrs:{width:"1000px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-form",{attrs:{"data-vv-scope":"formPago"}},[o("v-card",[o("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[o("span",{staticClass:"title"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Fondo",items:e.complementos.clasefondo,"item-value":"clase_fondo","item-text":"descripcion",name:"fondo",required:"","error-messages":e.errors.collect("fondo")},scopedSlots:e._u([{key:"item",fn:function(t){return[[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.descripcion)}}),e._v(" "),o("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.clase_fondo)}})],1)]]}}]),model:{value:e.fondos.clase_fondo,callback:function(t){e.$set(e.fondos,"clase_fondo",t)},expression:"fondos.clase_fondo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:"",lg6:""}},[o("v-text-field",{key:"codigo",attrs:{label:"Código",name:"codigo"},model:{value:e.fondos.codigo,callback:function(t){e.$set(e.fondos,"codigo",t)},expression:"fondos.codigo"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:"",lg6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:200|",expression:"'required|max:200|'"}],key:"descripcion",attrs:{label:"Descripción",name:"descripcion",required:"","error-messages":e.errors.collect("descripcion")},model:{value:e.fondos.descripcion,callback:function(t){e.$set(e.fondos,"descripcion",t)},expression:"fondos.descripcion"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:"",lg6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:20|",expression:"'required|max:20|'"}],key:"nit",attrs:{label:"NIT ",name:"nit",required:"","error-messages":e.errors.collect("nit")},model:{value:e.fondos.nit,callback:function(t){e.$set(e.fondos,"nit",t)},expression:"fondos.nit"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:"",lg6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"|max:1|",expression:"'|max:1|'"}],key:"digito_verificacion",attrs:{label:"Dígito verificación ",name:"digito verificacion"},model:{value:e.fondos.digito_verificacion,callback:function(t){e.$set(e.fondos,"digito_verificacion",t)},expression:"fondos.digito_verificacion"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:"",lg6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:200|",expression:"'required|max:200|'"}],key:"direccion",attrs:{label:"Dirección ",name:"direccion"},model:{value:e.fondos.direccion,callback:function(t){e.$set(e.fondos,"direccion",t)},expression:"fondos.direccion"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:"",lg6:""}},[o("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50|",expression:"'required|max:50|'"}],key:"telefono",attrs:{label:"Teléfono ",name:"telefono"},model:{value:e.fondos.telefono,callback:function(t){e.$set(e.fondos,"telefono",t)},expression:"fondos.telefono"}})],1)],1)],1),e._v(" "),o("v-card-actions",{staticClass:"grey lighten-4"},[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.close}},[e._v("Cancelar")]),e._v(" "),o("v-btn",{attrs:{color:"primary",disabled:e.errors.any()},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),o("v-card",[o("toolbar-list",{attrs:{info:e.infoComponent,title:"Fondo",subtitle:"Registro y gestión",btnplus:"",btnplustitle:"Crear registro",btnplustruncate:""},on:{click:function(t){e.dialog=!0}}}),e._v(" "),o("v-container",{attrs:{fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-right",attrs:{xs1:"",sm3:"",md6:""}},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:e.reloadPage},slot:"activator"},[o("v-icon",[e._v("cached")])],1),e._v(" "),o("span",[e._v("Actualizar registros")])],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[o("v-select",{attrs:{label:"Registros por página",items:e.items_page,"item-text":"text","item-value":"value"},model:{value:e.pagination.per_page,callback:function(t){e.$set(e.pagination,"per_page",t)},expression:"pagination.per_page"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-text-field",{attrs:{"append-icon":"search",label:"Buscar"},on:{input:e.buscar},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),o("loading",{model:{value:e.localLoading,callback:function(t){e.localLoading=t},expression:"localLoading"}}),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.fondosC,loading:e.tableLoading,pagination:e.pagination,"total-items":e.fondosC.length,search:e.search,"hide-actions":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",[e._v(e._s(t.item.codigo))]),e._v(" "),o("td",[e._v(e._s(t.item.descripcion))]),e._v(" "),o("td",[e._v(e._s(t.item.nit))]),e._v(" "),o("td",[e._v(e._s(t.item.telefono))]),e._v(" "),o("td",[e._v(e._s(t.item.descripciontcf))]),e._v(" "),o("td",[o("v-speed-dial",{attrs:{direction:"left","open-on-hover":"",transition:"slide-x-transition"},model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",fab:"",small:""},slot:"activator",model:{value:t.item.show,callback:function(o){e.$set(t.item,"show",o)},expression:"props.item.show"}},[o("v-icon",[e._v("chevron_left")]),e._v(" "),o("v-icon",[e._v("close")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.eliminar(t.item.fondo)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("delete")])],1),e._v(" "),o("span",[e._v("Eliminar")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",fab:"",dark:"",small:"",color:"white"},on:{click:function(o){return e.editar(t.item)}},slot:"activator"},[o("v-icon",{attrs:{color:"accent"}},[e._v("mode_edit")])],1),e._v(" "),o("span",[e._v("Editar")])],1)],1)],1)]}}])},[e._v(" "),o("template",{slot:"no-data"},[e.tableLoading?o("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[e._v("\n            Estamos cargando los registros. "),o("v-icon",[e._v("sentiment_satisfied_alt")])],1):o("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("\n            Lo sentimos, no tenemos registros para mostrar. "),o("v-icon",[e._v("sentiment_very_dissatisfied")])],1)],1),e._v(" "),o("template",{slot:"footer"},[o("td",{staticClass:"text-xs-center",attrs:{colspan:"100%"}},[o("v-pagination",{attrs:{"total-visible":7,length:e.pagination.last_page},on:{input:e.reloadPage},model:{value:e.pagination.current_page,callback:function(t){e.$set(e.pagination,"current_page",t)},expression:"pagination.current_page"}})],1)])],2)],1)],1),e._v(" "),o("confirmar",{ref:"confirmo",attrs:{value:e.dialogA.visible,content:e.dialogA.content},on:{cancelar:e.cancelaAnulacion,aceptar:function(t){return e.confirmaAnulacion(t)}}})],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},711:function(e,t,o){"use strict";function a(e){o(2548)}Object.defineProperty(t,"__esModule",{value:!0});var n=o(1322),i=o(2550),s=o(1),r=a,l=s(n.a,i.a,!1,r,"data-v-5a728c66",null);t.default=l.exports},742:function(e,t,o){"use strict";var a=o(13),n=o.n(a),i=o(14),s=o.n(i),r=o(58);t.a={name:"Confirmar",props:{value:{type:Boolean,default:!1},content:{type:String},requiereMotivo:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},components:{Loading:r.default},data:function(){return{loadingSubmit:!1,motivo:null}},watch:{value:function(e){e||(this.motivo=null,this.$validator.reset())}},methods:{submit:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(!t.sent){t.next=5;break}e.loadingSubmit=!0,e.$emit("aceptar",e.motivo);case 5:case"end":return t.stop()}},t,e)}))()},pararCarga:function(){this.loadingSubmit=!1}}}},743:function(e,t,o){"use strict";function a(e){o(744)}var n=o(742),i=o(746),s=o(1),r=a,l=s(n.a,i.a,!1,r,"data-v-3773d9ac",null);t.a=l.exports},744:function(e,t,o){var a=o(745);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(456)("0e7a280b",a,!0,{})},745:function(e,t,o){t=e.exports=o(455)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Confirmar2.vue",sourceRoot:""}])},746:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{key:"dialogConfirm",attrs:{persistent:"","max-width":"400"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[o("loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e._v(" "),o("v-card",[o("v-card-text",{staticClass:"title font-weight-light text-xs-center",domProps:{innerHTML:e._s(e.content)}}),e._v(" "),o("v-divider"),e._v(" "),o("v-card-actions",[o("v-btn",{attrs:{flat:""},on:{click:function(t){return t.stopPropagation(),e.$emit("cancelar")}}},[e._v("Cancelar")]),e._v(" "),o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"primary",loading:e.loadingSubmit},on:{click:function(t){return t.stopPropagation(),e.submit(t)}}},[e._v("Aceptar")])],1)],1)],1)],1)},n=[],i={render:a,staticRenderFns:n};t.a=i}});
//# sourceMappingURL=71.06eb90f96c48c0743036.js.map