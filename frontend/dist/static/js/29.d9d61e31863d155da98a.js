webpackJsonp([29],{1216:function(i,a,e){"use strict";var s=e(7),t=e.n(s),o=e(59),n=e(2191),r=e(2195);a.a={name:"RegistroAsignacionMasiva",props:["parametros"],components:{SelectServicios:n.a,MuestraErroresArchivo:r.a,PostuladorV2:function(){return new Promise(function(i){i()}).then(e.bind(null,61))},InputFileV2:function(){return e.e(292).then(e.bind(null,764))}},data:function(){return{loading:!1,asignacion:null,serviciosPrimarios:[],validaArchivo:{valido:!1,titulo:null,errores:[]},makeAsignacion:{as_regimene_id:null,gn_municipio_id:null,tipo_proceso:null,afiliadosSeleccionados:[],ipssAsignadas:[],serviciosPendientes:[],archivo:null,manual:!0,rs_entidad_id:null,rs_servicio:null,rs_servhabilitado_anterior:null},afiliados:[],filterMunicipios:function(i,a){var e=function(i){return null!=i?i:""},s=e(i.nombre+" "+i.nombre_departamento),t=e(a);return s.toString().toLowerCase().indexOf(t.toString().toLowerCase())>-1},filterServicios:function(i,a){var e=function(i){return null!=i?i:""},s=e(i.codigo+" "+i.nombre),t=e(a);return s.toString().toLowerCase().indexOf(t.toString().toLowerCase())>-1},filterIPSs:function(i,a){var e=function(i){return null!=i?i:""},s=e(i.cod_habilitacion+" "+i.nombre),t=e(a);return s.toString().toLowerCase().indexOf(t.toString().toLowerCase())>-1},headersAfiliados:[{text:"Afiliado",align:"left",sortable:!1},{text:"Fecha afiliación",align:"left",sortable:!1}]}},computed:{ipss:function(){var i=this;if(this.asignacion&&this.asignacion.gn_municipio_id&&this.serviciosPrimarios){var a=[];return this.serviciosPrimarios.forEach(function(i){a=a.concat(i.habilitados)}),this.lodash.uniqBy(a,"rs_entidad_id").filter(function(a){return a.entidad.gn_municipiosede_id===i.asignacion.gn_municipio_id}).map(function(i){return i.entidad})}return[]},serviciosIps:function(){var i=this;if(this.asignacion&&this.asignacion.gn_municipio_id&&this.asignacion.rs_entidad_id&&this.serviciosPrimarios){var a=[];this.serviciosPrimarios.forEach(function(i){a=a.concat(i.habilitados)});var e=a.filter(function(a){return a.rs_entidad_id===i.asignacion.rs_entidad_id}).map(function(i){return i.rs_servicio_id});return this.serviciosPrimarios.filter(function(i){return i.id===e.find(function(a){return a===i.id})})}return[]},infoComponent:function(){return this.$store.getters.getInfoComponent("asignacionmasiva")},complementos:function(){return o.b.getters.complementosAsignacionMasiva}},watch:{"asignacion.gn_municipio_id":function(){this.afiliados=[],this.asignacion.rs_entidad_id=null,this.asignacion.rs_servicio=null},"asignacion.as_regimene_id":function(){this.afiliados=[]},"asignacion.serviciosPendientes":function(){this.afiliados=[]},"asignacion.rs_entidad_id":function(){this.afiliados=[],this.asignacion.rs_servicio=null},"asignacion.rs_servicio":function(i){var a=this;this.afiliados=[],i&&(this.asignacion.serviciosPendientes=[i.id],this.asignacion.rs_servhabilitado_anterior=i.habilitados.length?i.habilitados.find(function(i){return i.rs_entidad_id===a.asignacion.rs_entidad_id}).id:null)},"asignacion.archivo":function(i){i&&this.validarArchivo()},"asignacion.manual":function(){this.asignacion.archivo=null,this.validaArchivo.valido=!1,this.validaArchivo.titulo=null,this.validaArchivo.errores=[]}},created:function(){this.getServiciosPrimarios(),this.parametros.entidad&&this.parametros.entidad.id?this.getData(this.parametros.entidad.id):this.resetData()},methods:{validarArchivo:function(){var i=this;this.loading=!0;var a=new FormData;a.append("csv_afiliados",this.asignacion.archivo),this.axios.post("redservicios/valida_csv",a).then(function(){i.loading=!1,i.validaArchivo.valido=!0,i.validaArchivo.titulo=null,i.validaArchivo.errores=[]}).catch(function(a){i.validaArchivo.valido=!1,a.response.data&&a.response.data[0]&&a.response.data[0].afiliados?(i.validaArchivo.titulo=a.response.data[0].titulo,i.validaArchivo.errores=a.response.data[0].afiliados,setTimeout(function(){i.loading=!1,i.$refs.muestraErrores.open()},400)):(i.$store.commit("SNACK_ERROR_LIST",{expression:" al validar el archivo de afiliados. ",error:a}),i.loading=!1)})},registroSave:function(){this.$store.commit("reloadTable","tableAsignacionMasiva"),this.$store.dispatch("NAV_RESPONSE_CONTENT_ITEM",{contexto:this,itemId:this.parametros.tabOrigin})},filterAfiliados:function(){var i=this;this.$validator.validateAll().then(function(a){if(a)if(i.asignacion.manual){i.loading=!0;var e="Asignar servicios"===i.asignacion.tipo_proceso?"redservicios/afiliadoservicios/inhabilitados?gn_municipio_id="+i.asignacion.gn_municipio_id+"&as_regimene_id="+i.asignacion.as_regimene_id+"&rs_servicio_id="+i.asignacion.serviciosPendientes:"redservicios/afiliadoservicios/cambioservicios?gn_municipio_id="+i.asignacion.gn_municipio_id+"&as_regimene_id="+i.asignacion.as_regimene_id+"&rs_servicio_id="+i.asignacion.rs_servicio.id+"&rs_entidad_id="+i.asignacion.rs_entidad_id;i.axios.get(e).then(function(a){i.afiliados=a.data.data,i.loading=!1}).catch(function(a){i.loading=!1,i.$store.commit("SNACK_ERROR_LIST",{expression:" al traer afiliados con servicios pendientes. ",error:a})})}else i.validaArchivo.valido?i.$refs.selectServicioAfiliadosMasivos.open():i.$store.commit("SNACK_SHOW",{msg:"Hay errores en el archivo de afiliados.",color:"orange"})})},getData:function(i){var a=this;this.loading=!0,this.axios.get("redservicios/asignamasivos/"+i).then(function(i){console.log("response",i)}).catch(function(i){a.loading=!1,a.$store.commit("SNACK_ERROR_LIST",{expression:" al traer los datos del proceso de asignación masiva. ",error:i})})},getServiciosPrimarios:function(){var i=this;this.axios.get("servicios/primarios").then(function(a){i.serviciosPrimarios=a.data.data}).catch(function(a){i.$store.commit("SNACK_ERROR_LIST",{expression:" al traer los servicios primarios. ",error:a})})},resetData:function(){this.asignacion=JSON.parse(t()(this.makeAsignacion))}}}},1217:function(i,a,e){"use strict";var s=e(7),t=e.n(s);a.a={name:"SelectServicios",props:{asignacion:{type:Object,default:null},serviciosPrimarios:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},components:{Confirmar:function(){return e.e(289).then(e.bind(null,749))}},data:function(){return{dialog:!1,loading:!1,headers:[{text:"Servicio",align:"left",sortable:!1},{text:"IPS",align:"left",sortable:!1}],dialogA:{loading:!1,visible:!1,content:null},filterIPSs:function(i,a){var e=function(i){return null!=i?i:""},s=e(i.entidad.cod_habilitacion+" "+i.entidad.nombre),t=e(a);return s.toString().toLowerCase().indexOf(t.toString().toLowerCase())>-1}}},computed:{},watch:{},methods:{confirmarAsignacion:function(){this.asignacion.ipssAsignadas.filter(Boolean).length?(this.dialogA.content="El proceso de asignación masiva será registrado permanentemente <br/><strong>¿Está seguro de continuar con el registro.?</strong>",this.dialogA.visible=!0):this.$store.commit("SNACK_SHOW",{msg:"Hay que asignar al menos un servicio.",color:"orange"})},cancelaAnulacion:function(){this.dialogA.visible=!1,this.dialogA.loading=!1,this.dialogA.content=null},open:function(){this.dialog=!0},asignar:function(){var i=this;this.$validator.validateAll().then(function(a){if(a)if(i.loading=!0,i.dialogA.loading=!0,i.asignacion.manual){var e="Asignar servicios"===i.asignacion.tipo_proceso?i.axios.post("redservicios/afiliadoservicios",{tipo_proceso:i.asignacion.tipo_proceso,afiliados:i.asignacion.afiliadosSeleccionados.map(function(i){return{as_afiliado_id:i.id}}),servicios_habilitados:JSON.parse(t()(i.asignacion.ipssAsignadas.filter(Boolean))).map(function(i){return{rs_servhabilitado_id:i}})}):i.axios.post("redservicios/afiliadoservicios",{rs_servhabilitado_anterior:i.asignacion.rs_servhabilitado_anterior,tipo_proceso:i.asignacion.tipo_proceso,afiliados:i.asignacion.afiliadosSeleccionados.map(function(i){return{as_afiliado_id:i.id}}),servicios_habilitados:JSON.parse(t()(i.asignacion.ipssAsignadas.filter(Boolean))).map(function(i){return{rs_servhabilitado_id:i}})});e.then(function(){i.loading=!1,i.dialogA.loading=!1,i.dialog=!1,i.$store.commit("SNACK_SHOW",{msg:"El proceso de asignación masiva se registró correctamente.",color:"success"}),i.$emit("save")}).catch(function(a){i.loading=!1,i.dialogA.loading=!1,i.$store.commit("SNACK_ERROR_LIST",{expression:"al realizar el proceso de asignación masiva ",error:a})})}else{var s=new FormData;s.append("csv_afiliados",i.asignacion.archivo),s.append("servicios_habilitados",JSON.parse(t()(i.asignacion.ipssAsignadas.filter(Boolean)))),i.axios.post("redservicios/asigna_from_csv",s).then(function(){i.loading=!1,i.dialogA.loading=!1,i.dialog=!1,i.$store.commit("SNACK_SHOW",{msg:"El proceso de asignación masiva se registró correctamente.",color:"success"}),i.$emit("save")}).catch(function(a){i.loading=!1,i.dialogA.loading=!1,i.$store.commit("SNACK_ERROR_LIST",{expression:"al realizar el proceso de asignación masiva ",error:a})})}})}}}},1218:function(i,a,e){"use strict";a.a={name:"MuestraErroresArchivo",props:{data:{type:Object,default:null}},data:function(){return{dialog:!1}},methods:{open:function(){this.dialog=!0}}}},2189:function(i,a,e){var s=e(2190);"string"==typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);e(456)("790f837a",s,!0,{})},2190:function(i,a,e){a=i.exports=e(455)(!0),a.push([i.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroAsignacionMasiva.vue",sourceRoot:""}])},2191:function(i,a,e){"use strict";function s(i){e(2192)}var t=e(1217),o=e(2194),n=e(1),r=s,c=n(t.a,o.a,!1,r,"data-v-b1efba46",null);a.a=c.exports},2192:function(i,a,e){var s=e(2193);"string"==typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);e(456)("43ebdf26",s,!0,{})},2193:function(i,a,e){a=i.exports=e(455)(!0),a.push([i.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SelectServicios.vue",sourceRoot:""}])},2194:function(i,a,e){"use strict";var s=function(){var i=this,a=i.$createElement,e=i._self._c||a;return e("v-dialog",{attrs:{persistent:"","max-width":"900px"},scopedSlots:i._u([i.asignacion.manual?{key:"activator",fn:function(a){var s=a.on;return[e("v-tooltip",{attrs:{top:"",disabled:!!i.asignacion.afiliadosSeleccionados.length||!i.asignacion.manual}},[e("v-btn",i._g({staticClass:"ma-0",class:i.disabled?"":"text--darken-2",attrs:{slot:"activator",flat:"",color:i.disabled?"grey":"primary"},slot:"activator"},i.disabled?null:s),[i._v("\n        Asignar servicios\n      ")]),i._v(" "),e("span",[i._v("Seleccionar afiliados para iniciar el proceso")])],1)]}}:null],null,!0),model:{value:i.dialog,callback:function(a){i.dialog=a},expression:"dialog"}},[i._v(" "),e("v-card",[e("loading",{model:{value:i.loading,callback:function(a){i.loading=a},expression:"loading"}}),i._v(" "),e("v-toolbar",{staticClass:"elevation-1 white",attrs:{dense:""}},[e("v-avatar",{staticClass:"white--text",attrs:{size:"36",color:"primary"}},[e("v-icon",[i._v("widgets")])],1),i._v(" "),e("v-list-tile",[e("v-list-tile-content",[e("v-list-tile-title",{staticClass:"subheading"},[i._v("Asignación de servicios")]),i._v(" "),i.asignacion.manual?e("v-list-tile-sub-title",{staticClass:"caption"},[i._v(i._s(i.asignacion.afiliadosSeleccionados.length)+" afiliados seleccionados")]):e("v-list-tile-sub-title",{staticClass:"caption"},[i._v("afiliados cargados por archivo")])],1)],1),i._v(" "),e("v-spacer"),i._v(" "),e("v-tooltip",{attrs:{left:""}},[e("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(a){i.dialog=!1}},slot:"activator"},[e("v-icon",[i._v("\n            close\n          ")])],1),i._v(" "),e("span",[i._v("Cerrar")])],1)],1),i._v(" "),e("v-divider"),i._v(" "),e("v-card-text",[e("v-data-table",{staticClass:"elevation-1",attrs:{items:i.serviciosPrimarios.filter(function(a){return a.id===i.asignacion.serviciosPendientes.find(function(i){return i===a.id})}),"hide-actions":"",headers:i.headers},scopedSlots:i._u([{key:"items",fn:function(a){return[e("td",[i._v(i._s(a.item.codigo)+" - "+i._s(a.item.nombre))]),i._v(" "),e("td",[a.item.habilitados.length?e("v-autocomplete",{attrs:{placeholder:"Seleccionar IPS",items:"Trasladar servicios"===i.asignacion.tipo_proceso?a.item.habilitados.filter(function(a){return a.rs_entidad_id!==i.asignacion.rs_entidad_id}):a.item.habilitados,"item-value":"id","item-text":"nombre",filter:i.filterIPSs,clearable:""},scopedSlots:i._u([{key:"selection",fn:function(a){return[[e("v-list-tile-content",{staticStyle:{width:"100% !important"}},[e("v-list-tile-title",{domProps:{innerHTML:i._s(a.item.entidad.nombre)}}),i._v(" "),e("v-list-tile-sub-title",{staticClass:"caption"},[e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-phone-alt")]),i._v(" "+i._s(a.item.entidad.telefono_sede)+" "),e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-map-signs")]),i._v(" "+i._s(a.item.entidad.direccion_sede))],1)],1)]]}},{key:"item",fn:function(a){return[[e("v-list-tile-content",[e("v-list-tile-title",{domProps:{innerHTML:i._s(a.item.entidad.nombre)}}),i._v(" "),e("v-list-tile-sub-title",{staticClass:"caption"},[e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-phone-alt")]),i._v(" "+i._s(a.item.entidad.telefono_sede)+" "),e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-map-signs")]),i._v(" "+i._s(a.item.entidad.direccion_sede))],1)],1)]]}}],null,!0),model:{value:i.asignacion.ipssAsignadas[a.index],callback:function(e){i.$set(i.asignacion.ipssAsignadas,a.index,e)},expression:"asignacion.ipssAsignadas[props.index]"}}):e("span",[i._v("\n            No disponible\n          ")])],1)]}}])})],1),i._v(" "),e("v-divider"),i._v(" "),e("v-card-actions",[e("v-btn",{attrs:{flat:""},on:{click:function(a){i.dialog=!1}}},[i._v("Cancelar")]),i._v(" "),e("v-spacer"),i._v(" "),i.asignacion.afiliadosSeleccionados.length&&i.asignacion.manual||!i.asignacion.manual?e("v-btn",{attrs:{color:"primary",flat:""},on:{click:i.confirmarAsignacion}},[i._v("Registrar")]):e("v-chip",{attrs:{label:"",color:"orange","text-color":"white"}},[i.asignacion.afiliadosSeleccionados.length&&i.asignacion.manual?e("span",[i._v("No se han seleccionado afiliados")]):i._e(),i._v(" "),i.asignacion.ipssAsignadas.length&&!i.asignacion.manual?e("span",[i._v("No se han seleccionado prestadores")]):i._e()])],1),i._v(" "),e("confirmar",{attrs:{value:i.dialogA.visible,loading:i.dialogA.loading,content:i.dialogA.content,"requiere-motivo":!1},on:{cancelar:i.cancelaAnulacion,aceptar:i.asignar}})],1)],1)},t=[],o={render:s,staticRenderFns:t};a.a=o},2195:function(i,a,e){"use strict";function s(i){e(2196)}var t=e(1218),o=e(2198),n=e(1),r=s,c=n(t.a,o.a,!1,r,"data-v-2cf74dc8",null);a.a=c.exports},2196:function(i,a,e){var s=e(2197);"string"==typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);e(456)("e9ee1bc8",s,!0,{})},2197:function(i,a,e){a=i.exports=e(455)(!0),a.push([i.i,"","",{version:3,sources:[],names:[],mappings:"",file:"MuestraErroresArchivo.vue",sourceRoot:""}])},2198:function(i,a,e){"use strict";var s=function(){var i=this,a=i.$createElement,e=i._self._c||a;return e("v-dialog",{attrs:{persistent:"","max-width":"520"},scopedSlots:i._u([{key:"activator",fn:function(a){var s=a.on;return[e("v-tooltip",{staticClass:"mt-3",attrs:{top:""}},[e("v-btn",i._g({attrs:{slot:"activator",flat:"",icon:"",color:"error",dark:""},slot:"activator"},s),[e("v-icon",[i._v("warning")])],1),i._v(" "),e("span",[i._v("Errores de archivo")])],1)]}}]),model:{value:i.dialog,callback:function(a){i.dialog=a},expression:"dialog"}},[i._v(" "),e("v-card",[e("v-toolbar",{attrs:{dense:""}},[e("v-avatar",{attrs:{color:"error",size:"36"}},[e("v-icon",{staticClass:"white--text"},[i._v("warning")])],1),i._v(" "),e("span",{staticClass:"ml-2 subheading"},[i._v(i._s(i.data&&i.data.titulo))]),i._v(" "),e("v-spacer"),i._v(" "),e("v-btn",{attrs:{flat:"",icon:""},on:{click:function(a){i.dialog=!1}}},[e("v-icon",[i._v("close")])],1)],1),i._v(" "),i.data?e("v-card-text",[e("v-data-table",{staticClass:"elevation-1",attrs:{items:i.data.errores,"hide-actions":"","hide-headers":""},scopedSlots:i._u([{key:"items",fn:function(a){return[e("td",[i._v(i._s(a.item.tipo_identificacion))]),i._v(" "),e("td",[i._v(i._s(a.item.identificacion))])]}}],null,!1,859308100)})],1):i._e(),i._v(" "),e("v-divider"),i._v(" "),e("v-card-actions",[e("v-spacer"),i._v(" "),e("v-btn",{attrs:{flat:""},on:{click:function(a){i.dialog=!1}}},[i._v("Cerrar")])],1)],1)],1)},t=[],o={render:s,staticRenderFns:t};a.a=o},2199:function(i,a,e){"use strict";var s=function(){var i=this,a=i.$createElement,e=i._self._c||a;return e("v-card",[e("v-toolbar",{attrs:{dense:""}},[e("v-avatar",{attrs:{size:"40",color:"primary"}},[e("v-icon",{staticClass:"white--text"},[i._v(i._s(i.infoComponent?i.infoComponent.icono:""))])],1),i._v(" "),e("v-toolbar-title",[i._v("Proceso de asignación masiva")]),i._v(" "),e("v-spacer"),i._v(" "),i.parametros&&i.parametros.entidad?[e("v-spacer"),i._v("tiposProceso\n      "),e("v-chip",{staticClass:"text-xs-right",attrs:{label:"",color:"white","text-color":"red",dark:"",absolute:"",right:"",top:""}},[e("span",{staticClass:"subheading"},[i._v("N°")]),i._v(" \n        "),e("span",{staticClass:"subheading"},[i._v(i._s(i.parametros.entidad.id))])])]:i._e()],2),i._v(" "),e("v-container",{attrs:{fluid:"","grid-list-sm":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("loading",{model:{value:i.loading,callback:function(a){i.loading=a},expression:"loading"}}),i._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tipo de proceso",items:i.complementos.tiposProceso,name:"tipo de proceso","error-messages":i.errors.collect("tipo de proceso")},model:{value:i.asignacion.tipo_proceso,callback:function(a){i.$set(i.asignacion,"tipo_proceso",a)},expression:"asignacion.tipo_proceso"}})],1),i._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Regimen",items:i.complementos.regimenes,name:"regimen","item-value":"id","item-text":"nombre","error-messages":i.errors.collect("regimen")},model:{value:i.asignacion.as_regimene_id,callback:function(a){i.$set(i.asignacion,"as_regimene_id",a)},expression:"asignacion.as_regimene_id"}})],1),i._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[e("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Municipio",items:i.complementos.municipios,"item-value":"id","item-text":"nombre",name:"municipio",required:"","error-messages":i.errors.collect("municipio"),filter:i.filterMunicipios},scopedSlots:i._u([{key:"selection",fn:function(a){return[e("span",[i._v(i._s(a.item.nombre)+", "+i._s(a.item.nombre_departamento))])]}},{key:"item",fn:function(a){return[[e("v-list-tile-content",[e("v-list-tile-title",{domProps:{innerHTML:i._s(a.item.nombre)}}),i._v(" "),e("v-list-tile-sub-title",{domProps:{innerHTML:i._s(a.item.nombre_departamento)}})],1)]]}}]),model:{value:i.asignacion.gn_municipio_id,callback:function(a){i.$set(i.asignacion,"gn_municipio_id",a)},expression:"asignacion.gn_municipio_id"}})],1),i._v(" "),"Asignar servicios"===i.asignacion.tipo_proceso?[e("v-flex",{attrs:{xs12:""}},[e("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"serviciosinasignar",attrs:{label:"Servicios sin asignar",items:i.serviciosPrimarios,"item-value":"id","item-text":"nombre",name:"servicios sin asignar","error-messages":i.errors.collect("servicios sin asignar"),filter:i.filterServicios,multiple:"",chips:"","deletable-chips":"","small-chips":"","no-data-text":"No hay servicios para seleccionar","hide-selected":""},model:{value:i.asignacion.serviciosPendientes,callback:function(a){i.$set(i.asignacion,"serviciosPendientes",a)},expression:"asignacion.serviciosPendientes"}})],1),i._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-layout",{attrs:{"align-center":""}},[e("v-switch",{staticClass:"shrink mr-2",attrs:{label:"Asignación manual","hide-details":""},model:{value:i.asignacion.manual,callback:function(a){i.$set(i.asignacion,"manual",a)},expression:"asignacion.manual"}}),i._v(" "),i.asignacion.manual?i._e():[e("input-file-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{width:"100% !important"},attrs:{label:"Archivo de afiliados",accept:"text/plain",hint:"Extenciones aceptadas: txt","prepend-icon":"description",name:"archivo de afiliados","error-messages":i.errors.collect("archivo de afiliados")},model:{value:i.asignacion.archivo,callback:function(a){i.$set(i.asignacion,"archivo",a)},expression:"asignacion.archivo"}}),i._v(" "),i.asignacion.archivo?[i.validaArchivo.valido?e("v-tooltip",{staticClass:"mt-3",attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"success",dark:""},slot:"activator"},[e("v-icon",[i._v("done_all")])],1),i._v(" "),e("span",[i._v("Sin errores")])],1):i._e(),i._v(" "),!i.validaArchivo.valido&&i.validaArchivo.errores.length?e("muestra-errores-archivo",{ref:"muestraErrores",attrs:{data:i.validaArchivo}}):i._e()]:i._e()]],2)],1)]:i._e(),i._v(" "),"Trasladar servicios"===i.asignacion.tipo_proceso?[i.asignacion.gn_municipio_id?e("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[e("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"ipsorigen",attrs:{label:"IPS Origen",items:i.ipss,"item-value":"id","item-text":"nombre",name:"IPS origen","error-messages":i.errors.collect("IPS origen"),filter:i.filterIPSs,"no-data-text":"No hay IPSs para seleccionar"},scopedSlots:i._u([{key:"selection",fn:function(a){return[[e("v-list-tile-content",[e("v-list-tile-title",[i._v(i._s(a.item.nombre))]),i._v(" "),e("v-list-tile-sub-title",{staticClass:"caption"},[e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-phone-alt")]),i._v(" "+i._s(a.item.telefono_sede)+" "),e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-map-signs")]),i._v(" "+i._s(a.item.direccion_sede))],1)],1)]]}},{key:"item",fn:function(a){return[[e("v-list-tile-content",[e("v-list-tile-title",[i._v(i._s(a.item.nombre))]),i._v(" "),e("v-list-tile-sub-title",{staticClass:"caption"},[e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-phone-alt")]),i._v(" "+i._s(a.item.telefono_sede)+" "),e("v-icon",{attrs:{size:"small"}},[i._v("fas fa-map-signs")]),i._v(" "+i._s(a.item.direccion_sede))],1)],1)]]}}],null,!1,3449086396),model:{value:i.asignacion.rs_entidad_id,callback:function(a){i.$set(i.asignacion,"rs_entidad_id",a)},expression:"asignacion.rs_entidad_id"}})],1):i._e(),i._v(" "),i.asignacion.gn_municipio_id&&i.asignacion.rs_entidad_id?e("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[e("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Servicio",items:i.serviciosIps,"item-value":"id","item-text":"nombre","return-object":"",name:"servicio","error-messages":i.errors.collect("servicio"),filter:i.filterServicios,"no-data-text":"No hay servicios para seleccionar"},model:{value:i.asignacion.rs_servicio,callback:function(a){i.$set(i.asignacion,"rs_servicio",a)},expression:"asignacion.rs_servicio"}})],1):i._e()]:i._e()],2)],1),i._v(" "),e("v-card-actions",[e("v-spacer"),i._v(" "),i.asignacion.manual?e("v-btn",{attrs:{color:"primary",disabled:!!i.afiliados.length,loading:i.loading},on:{click:i.filterAfiliados}},[i._v("filtrar")]):e("v-btn",{attrs:{color:"primary",loading:i.loading},on:{click:i.filterAfiliados}},[i._v("Asignar servicios")]),i._v(" "),i.asignacion.manual?i._e():e("select-servicios",{ref:"selectServicioAfiliadosMasivos",attrs:{asignacion:i.asignacion,"servicios-primarios":i.serviciosPrimarios},on:{save:i.registroSave}})],1),i._v(" "),e("v-slide-y-transition",{attrs:{group:""}},[i.afiliados.length&&i.asignacion.manual?[e("v-divider",{key:"dividerafiliados"}),i._v(" "),e("v-card-text",{key:"cardafiliados"},[e("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[e("v-list-tile",{staticClass:"content-v-list-tile-p0"},[e("v-list-tile-avatar",{attrs:{color:"primary"}},[e("v-icon",{staticClass:"white--text"},[i._v("fas fa-users")])],1),i._v(" "),e("v-list-tile-content",[e("v-list-tile-title",{staticClass:"font-weight-bold title"},[i._v("Afiliados con servicios primarios pendientes por asignar")]),i._v(" "),e("v-list-tile-sub-title",{staticClass:"caption red--text"},[i._v(i._s(i.afiliados.length)+" Afiliados")])],1)],1),i._v(" "),e("v-spacer"),i._v(" "),e("select-servicios",{attrs:{asignacion:i.asignacion,"servicios-primarios":i.serviciosPrimarios,disabled:!i.asignacion.afiliadosSeleccionados.length},on:{save:i.registroSave}})],1),i._v(" "),e("v-data-table",{attrs:{"select-all":"accent",headers:i.headersAfiliados,items:i.afiliados,"rows-per-page-text":"Registros por página","rows-per-page-items":[50,100,500,1e3,2e3,{text:"Todos",value:-1}]},scopedSlots:i._u([{key:"items",fn:function(a){return[e("tr",{attrs:{active:a.selected}},[e("td",{staticClass:"text-xs-left"},[e("v-checkbox",{attrs:{"input-value":a.selected,primary:"","hide-details":""},on:{change:function(i){a.selected=!a.selected}}})],1),i._v(" "),e("td",{staticClass:"text-xs-left"},[e("mini-card-detail",{attrs:{data:a.item.mini_afiliado}})],1),i._v(" "),e("td",[i._v("\n                "+i._s(a.item.fecha_afiliacion?i.moment(a.item.fecha_afiliacion).format("YYYY-MM-DD"):"")+"\n              ")])])]}},{key:"pageText",fn:function(a){return[i._v("\n            "+i._s(a.pageStart)+" - "+i._s(a.pageStop)+" de "+i._s(a.itemsLength)+"\n          ")]}}],null,!1,2657413302),model:{value:i.asignacion.afiliadosSeleccionados,callback:function(a){i.$set(i.asignacion,"afiliadosSeleccionados",a)},expression:"asignacion.afiliadosSeleccionados"}},[i._v("\n          disable-initial-sort\n          >\n          ")])],1)]:i._e()],2)],1)},t=[],o={render:s,staticRenderFns:t};a.a=o},669:function(i,a,e){"use strict";function s(i){e(2189)}Object.defineProperty(a,"__esModule",{value:!0});var t=e(1216),o=e(2199),n=e(1),r=s,c=n(t.a,o.a,!1,r,"data-v-58cdb7f0",null);a.default=c.exports}});
//# sourceMappingURL=29.d9d61e31863d155da98a.js.map