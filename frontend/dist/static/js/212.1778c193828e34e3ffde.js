webpackJsonp([212],{1039:function(t,a,e){"use strict";var o=e(7),i=e.n(o),n=e(8),r=e.n(n),s=e(12),c=e(6);a.a={name:"CuentasPorCobrar",components:{},data:function(){return{cxcs:[],tableLoading:!1,transition:"slide-x-transition",direction:"left",fab:!1,search:"",show:!1,dialog:!1,dialog2:!1,detalle_anulacion:null,items_page:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],pagination:{per_page:15,current_page:1},headers:[{text:"Consecutivo",align:"left",sortable:!1,value:"consecutivo"},{text:"Cliente",align:"left",sortable:!1,value:"cliente.nombre"},{text:"Identificación",align:"left",sortable:!1,value:"cliente.tercero.identificacion_completa"},{text:"Número de factura",align:"left",sortable:!1,value:"numero_factura"},{text:"Fecha de factura",align:"left",sortable:!1,value:"fecha_factura"},{text:"Fecha de vencimiento",align:"left",sortable:!1,value:"fecha_vencimiento"},{text:"Estado",align:"left",sortable:!1,value:"estado"},{text:"Opciones",align:"center",actions:!0,sortable:!1,classData:"justify-center layout px-0"}]}},created:function(){this.reloadPage()},watch:{"pagination.per_page":function(t){this.pagination.current_page=1,this.reloadPage()},itemCxc:function(t){console.log("MIEN",t),t.cr_cuentaxcobrar.show=!1,"crear"===t.estado?this.cxcs.splice(0,0,t.cr_cuentaxcobrar):"editar"===t.estado&&this.cxcs.splice(this.cxcs.findIndex(function(a){return a.id===t.cr_cuentaxcobrar.id}),1,t.cr_cuentaxcobrar)}},computed:r()({infoComponent:function(){return this.$store.getters.getInfoComponent("cxcs")}},Object(c.c)({itemCxc:function(t){return t.tables.itemCxc}})),methods:{imprimir:function(t){var a=this;console.log("Abriendo DOM");var e=t.id;this.axios.get("reportecxps?id="+e).then(function(t){var a=t.data;window.open(a,"_blank").focus()}).catch(function(t){a.$store.commit(s.b,{msg:"Error al Imprimir. "+t.response,color:"danger"})})},preguntarCambiarEstado:function(t,a){this.dialog=!0,console.log(a),console.log(t),this.cr_cuentaxcobrar=JSON.parse(i()(t)),this.cr_cuentaxcobrar.estado=a},descAnulado:function(t){this.dialog2=!0},actualizarEstado:function(t,a){var e=this;this.dialog=!1,this.dialog2=!1,delete t.show,t.detalle_anulacion=a,this.axios.put("cr_cuentasxcobrars/"+t.id,t).then(function(a){console.log("Estado Actualizado"),e.$store.commit(s.b,{msg:"Se realizó el cambio de estado a "+t.estado,color:"success"}),e.cxcs.splice(e.cxcs.findIndex(function(t){return t.id===e.cr_cuentaxcobrar.id}),1,e.cr_cuentaxcobrar),console.log(a)}).catch(function(t){e.dialog=!1,e.$store.commit(s.b,{msg:"Existe un error al actualizar el estado. "+t.response,color:"danger"})})},buscar:window.lodash.debounce(function(){this.pagination.current_page=1,this.reloadPage()},500),reloadPage:function(){var t=this;this.tableLoading=!0,this.axios.get("cr_cuentasxcobrars?per_page="+this.pagination.per_page+"&page="+this.pagination.current_page+"&search=%25"+this.search+"%25").then(function(a){a.data.meta.per_page=t.items_page.find(function(t){return t.value===parseInt(a.data.meta.per_page)})?parseInt(a.data.meta.per_page):-1,t.pagination=a.data.meta,t.cxcs=a.data.data,t.tableLoading=!1}).catch(function(a){t.tableLoading=!1,t.$store.commit(s.b,{msg:"Hay un error al hacer la busqueda de registros. "+a.message,color:"danger"})})}}}},1716:function(t,a,e){var o=e(1717);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(456)("197fadba",o,!0,{})},1717:function(t,a,e){a=t.exports=e(455)(!0),a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CuentasPorCobrar.vue",sourceRoot:""}])},1718:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-text",{staticClass:"subheading font-weight-light"},[t._v("¿Realmente desea cambiar el estado de esta cuenta?")]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{flat:""},nativeOn:{click:function(a){t.dialog=!1}}},[t._v("No")]),t._v(" "),e("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(a){"Anulado"===t.cr_cuentaxcobrar.estado?t.descAnulado(t.cr_cuentaxcobrar):t.actualizarEstado(t.cr_cuentaxcobrar)}}},[t._v("Si")])],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.dialog2,callback:function(a){t.dialog2=a},expression:"dialog2"}},[e("v-card",[e("v-card-title",{staticClass:"grey lighten-3"},[e("v-card-text",{staticClass:"title"},[t._v("¿Por qué anula esta cuenta?")])],1),t._v(" "),e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-textarea",{attrs:{outline:"",color:"primary",name:"Detalle de anulación"},model:{value:t.detalle_anulacion,callback:function(a){t.detalle_anulacion=a},expression:"detalle_anulacion"}},[e("div",{attrs:{slot:"label"},slot:"label"},[t._v("Detalle de anulación")])])],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(a){return t.actualizarEstado(t.cr_cuentaxcobrar,t.detalle_anulacion)}}},[t._v("Enviar")])],1)],1)],1),t._v(" "),e("v-card",[e("v-container",{attrs:{fluid:"","grid-list-xs":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-toolbar",{staticClass:"grey lighten-3 elevation-1 toolbar--dense"},[e("v-toolbar-title",[t._v("Cuentas Por Cobrar ")]),t._v(" "),e("v-spacer"),t._v(" "),t.infoComponent&&t.infoComponent.permisos.agregar?e("v-btn",{attrs:{fab:"",right:"",small:"",color:"accent"},on:{click:function(a){t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:null,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}}},[e("v-icon",[t._v("add")])],1):t._e()],1),t._v(" "),e("v-card-title",{staticClass:"elevation-1"},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-spacer"),t._v(" "),e("v-flex",{staticClass:"text-xs-right",attrs:{xs1:"",sm3:"",md2:""}},[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"accent"},on:{click:t.reloadPage},slot:"activator"},[e("v-icon",[t._v("cached")])],1),t._v(" "),e("span",[t._v("Actualizar registros")])],1)],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm3:"",md3:""}},[e("v-select",{attrs:{label:"Registros por página",items:t.items_page,"item-text":"text","item-value":"value"},model:{value:t.pagination.per_page,callback:function(a){t.$set(t.pagination,"per_page",a)},expression:"pagination.per_page"}})],1),t._v(" "),t.cxcs.length>0?e("v-flex",{attrs:{xs12:"",sm3:"",md2:""}},[e("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","hide-details":"","single-line":""},on:{input:t.buscar},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1):t._e()],1)],1),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cxcs,loading:t.tableLoading,pagination:t.pagination,"total-items":t.cxcs.length,"hide-actions":"",search:t.search},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[e("tr",{staticClass:"white",class:{"grey lighten-4":a.item.estado?"Anulado"===a.item.estado:""}},[e("td",[t._v(t._s(a.item.consecutivo))]),t._v(" "),e("td",[t._v(t._s(a.item.nombre))]),t._v(" "),e("td",[t._v(t._s(a.item.identificacion_completa))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s(a.item.numero_factura))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.fecha_factura))]),t._v(" "),e("td",{staticClass:"text-xl-center"},[t._v(t._s(a.item.fecha_vencimiento))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[t._v(t._s(a.item.estado))]),t._v(" "),e("td",{staticClass:"text-xs-right"},[e("v-speed-dial",{attrs:{direction:t.direction,transition:t.transition,"open-on-hover":""},model:{value:a.item.show,callback:function(e){t.$set(a.item,"show",e)},expression:"props.item.show"}},[e("v-btn",{attrs:{slot:"activator",color:"blue darken-2",dark:"",small:"",fab:""},slot:"activator",model:{value:a.item.show,callback:function(e){t.$set(a.item,"show",e)},expression:"props.item.show"}},[e("v-icon",[t._v("chevron_left")]),t._v(" "),e("v-icon",[t._v("close")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},[e("v-btn",{attrs:{slot:"activator",small:"",fab:"",color:"white"},on:{click:function(e){return e.preventDefault(),t.imprimir(a.item)}},slot:"activator"},[e("v-icon",{attrs:{color:"black"}},[t._v("far fa-file-pdf")])],1),t._v(" "),e("span",[t._v("Imprimir")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Registrado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:"",color:"white"},on:{click:function(e){return t.preguntarCambiarEstado(a.item,"Anulado")}},slot:"activator"},[e("v-icon",{attrs:{color:"grey"}},[t._v("report_off")])],1):t._e(),t._v(" "),e("span",[t._v("Anular")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Registrado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:""},on:{click:function(e){t.$store.commit("NAV_ADD_ITEM",{ruta:t.infoComponent.ruta_registro,titulo:t.infoComponent.titulo_registro,parametros:{entidad:a.item,tabOrigin:t.$store.state.nav.currentItem.split("tab-")[1]}})}},slot:"activator"},[e("v-icon",{attrs:{color:"accent"}},[t._v("mode_edit")])],1):t._e(),t._v(" "),e("span",[t._v("Editar")])],1),t._v(" "),e("v-tooltip",{attrs:{bottom:""}},["Registrado"===a.item.estado?e("v-btn",{attrs:{slot:"activator",small:"",fab:"",color:"white"},on:{click:function(e){return t.preguntarCambiarEstado(a.item,"Confirmado")}},slot:"activator"},[e("v-icon",{attrs:{color:"teal"}},[t._v("check")])],1):t._e(),t._v(" "),e("span",[t._v("Confirmar")])],1)],1)],1)])]}}])},[t._v(" "),e("template",{slot:"no-data"},[t.tableLoading?e("v-alert",{attrs:{value:!0,color:"info",icon:"info"}},[t._v("\n                Estamos cargando los registros. "),e("v-icon",[t._v("sentiment_satisfied_alt")])],1):e("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n                Lo sentimos, no tenemos registros para mostrar. "),e("v-icon",[t._v("sentiment_very_dissatisfied")])],1)],1),t._v(" "),e("template",{slot:"footer"},[e("td",{attrs:{colspan:"100%"}},[e("div",{staticClass:"text-xs-center"},[e("v-pagination",{attrs:{length:t.pagination.last_page},on:{input:t.reloadPage},model:{value:t.pagination.current_page,callback:function(a){t.$set(t.pagination,"current_page",a)},expression:"pagination.current_page"}})],1)])])],2)],1)],1)],1)],1)],1)},i=[],n={render:o,staticRenderFns:i};a.a=n},534:function(t,a,e){"use strict";function o(t){e(1716)}Object.defineProperty(a,"__esModule",{value:!0});var i=e(1039),n=e(1718),r=e(1),s=o,c=r(i.a,n.a,!1,s,"data-v-02f52d3a",null);a.default=c.exports}});
//# sourceMappingURL=212.1778c193828e34e3ffde.js.map