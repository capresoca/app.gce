webpackJsonp([270],{1250:function(t,o,e){"use strict";var a=e(13),r=e.n(a),i=e(14),d=e.n(i),n=e(40),s=e(248),c=e(12);o.a={name:"RegistroAuditores",props:["parametros"],data:function(){return{dialogSave:!1,dialogCodigo:!1,buscandoCodigo:!1,ordenEdit:!1,complementos:{tipoAuditor:[]},param:{},auditor:{}}},components:{Postulador:function(){return e.e(287).then(e.bind(null,747))}},watch:{"auditor.tecnico":function(t){1===t&&(this.auditor.auditor_concurrente=0)},"auditor.auditor_concurrente":function(t){1===t&&(this.auditor.tecnico=0)}},methods:{validador:function(t){return this.$validator.validateAll(t).then(function(t){return t})},auditorByCod:function(){var t=this;return d()(r.a.mark(function o(){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t.auditor.codigo&&(t.buscandoCodigo=!0,t.axios.get("ac_auditores/codigo/"+t.auditor.codigo).then(function(o){o.data.exists&&(t.auditor=o.data.auditor,t.dialogCodigo=!0),t.buscandoCodigo=!1}).catch(function(o){t.$store.commit(c.a,{expression:" Al intentar consultar codigo. ",error:o})}));case 1:case"end":return o.stop()}},o,t)}))()},submit:function(){var t=this;return d()(r.a.mark(function o(){var e;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.$refs.postuladorAuditor.validate();case 2:return e=o.sent,o.next=5,t.validador("formAuditor");case 5:if(o.t0=o.sent,!o.t0){o.next=8;break}o.t0=e;case 8:if(!o.t0){o.next=12;break}t.auditor.id?t.axios.put("ac_auditores/"+t.auditor.id,t.auditor).then(function(o){t.$store.commit(c.b,{msg:o.data.message,color:"success"}),t.$store.dispatch(n.c,{contexto:t,itemId:t.parametros.tabOrigin}),t.$store.commit(s.h,{item:o.data.data,estado:"editar",key:t.parametros.key})}).catch(function(o){t.$store.commit(c.a,{expression:" Hay un error al guardar  el registro. ",error:o})}):t.axios.post("ac_auditores",t.auditor).then(function(o){t.$store.commit(c.b,{msg:"El auditor se creo correctamente",color:"success"}),t.$store.dispatch(n.c,{contexto:t,itemId:t.parametros.tabOrigin}),t.$store.commit(s.h,{item:o.data.data,estado:"crear",key:t.parametros.key})}).catch(function(o){t.$store.commit(c.a,{expression:" Hay un error al guardar  el registro. ",error:o})}),o.next=13;break;case 12:t.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 13:case"end":return o.stop()}},o,t)}))()},getRegistro:function(t){var o=this;this.axios.get("ac_auditores/"+t).then(function(t){t.data.exists&&o.edit(t.data.data)}).catch(function(t){o.$store.commit(c.a,{expression:" al traer el auditor. ",error:t})})},returnDialogo:function(t){this.auditor.vendedor=t.data},edit:function(t){this.ordenEdit=!0,this.auditor=t},editarByCodigo:function(){this.dialogCodigo=!1,this.ordenEdit=!0},cerrarByCodigo:function(){this.formReset(),this.dialogCodigo=!1,this.ordenEdit=!1},formReset:function(){this.dialogCodigo=!1,this.ordenEdit=!1,this.auditor={id:null,estado:1,auditor_concurrente:0,tecnico:0,tipo:null}}},created:function(){this.formReset()},mounted:function(){var t=this;null!==this.parametros.entidad&&this.getRegistro(this.parametros.entidad.id),this.axios.get("ac_auditores/complementos").then(function(o){o.data.state&&(t.complementos=o.data.data)}).catch(function(o){t.$store.commit(c.a,{expression:" al traer el auditor. ",error:o})}),this.$validator.localize("es")}}},2309:function(t,o,e){"use strict";var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("v-card",[e("v-card-title",{staticClass:"grey lighten-3 elevation-0 headline"},[e("span",{staticClass:"title",domProps:{textContent:t._s((t.ordenEdit?"Editar":"Registrar")+" Auditor")}})]),t._v(" "),e("v-card-text",[e("v-form",{attrs:{"data-vv-scope":"formAuditor"}},[e("v-container",{attrs:{fluid:"","grid-list-xl":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[t.auditor.id?e("v-flex",{attrs:{xs12:"",sm12:"",md2:"",lg2:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:16",expression:"'required|max:16'"}],key:"codigo",attrs:{label:"Codigo del auditor",name:"codigo","error-messages":t.errors.collect("codigo"),disabled:t.ordenEdit,hint:t.buscandoCodigo?"Estamos buscando el codigo":"","persistent-hint":"",required:"",disabled:""},on:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.auditorByCod(o)},blur:t.auditorByCod},model:{value:t.auditor.codigo,callback:function(o){t.$set(t.auditor,"codigo",o)},expression:"auditor.codigo"}})],1):t._e(),t._v(" "),e("v-flex",{class:{"md10 lg10":t.auditor.id},attrs:{xs12:"",sm12:""}},[e("postulador",{ref:"postuladorAuditor",attrs:{nodata:"Busqueda por identificacion o nombre",required:"",hint:"email",itemtext:"name",datatitle:"email",datasubtitle:"name",filter:"name,identification,email",label:"Usuario",scope:"formAuditor",lite:"",entidad:"usuarios",preicon:"person",value:t.auditor.usuario,clearable:""},on:{change:function(o){return t.auditor.gs_usuario_id=o},objectReturn:function(o){return t.auditor.usuario=o}}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"tipo de auditor",attrs:{items:t.complementos.tipoAuditor,label:"Tipo de auditor",name:"tipo de auditor","error-messages":t.errors.collect("tipo de auditor")},model:{value:t.auditor.tipo,callback:function(o){t.$set(t.auditor,"tipo",o)},expression:"auditor.tipo"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm4:"",md2:"",lg2:""}},[e("v-switch",{attrs:{color:"accent",label:0===t.auditor.auditor_concurrente?"No concurrente":"Concurrente","true-value":1,"false-value":0},model:{value:t.auditor.auditor_concurrente,callback:function(o){t.$set(t.auditor,"auditor_concurrente",o)},expression:"auditor.auditor_concurrente"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm4:"",md2:"",lg2:""}},[e("v-switch",{attrs:{color:"accent",label:0===t.auditor.tecnico?"No técnico":"Técnico","true-value":1,"false-value":0},model:{value:t.auditor.tecnico,callback:function(o){t.$set(t.auditor,"tecnico",o)},expression:"auditor.tecnico"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:"",sm4:"",md2:"",lg2:""}},[e("v-switch",{attrs:{color:"accent",label:0===t.auditor.estado?"Inactivo":"Activo","true-value":1,"false-value":0},model:{value:t.auditor.estado,callback:function(o){t.$set(t.auditor,"estado",o)},expression:"auditor.estado"}})],1)],1)],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.submit}},[t._v("\n        Guardar\n      ")])],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogCodigo,callback:function(o){t.dialogCodigo=o},expression:"dialogCodigo"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("Codigo del auditor")]),t._v(" "),e("v-card-text",[t._v("El codigo del auditor ya esta siendo utilizado, desea cargar los datos para su actualizacion o utilizar otro codigo")]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.editarByCodigo}},[t._v("Cargar datos")]),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.cerrarByCodigo}},[t._v("Cerrar")])],1)],1)],1)],1)},r=[],i={render:a,staticRenderFns:r};o.a=i},685:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e(1250),r=e(2309),i=e(1),d=i(a.a,r.a,!1,null,null,null);o.default=d.exports}});
//# sourceMappingURL=270.5e036d85a6d1f3605c5e.js.map