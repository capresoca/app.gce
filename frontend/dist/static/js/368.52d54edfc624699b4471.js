webpackJsonp([368],{1009:function(t,e,i){"use strict";e.a={name:"RegistroConcepto",props:{comprobante:{type:Object,default:null}},components:{InputNumber:function(){return new Promise(function(t){t()}).then(i.bind(null,254))},CxpsList:function(){return i.e(366).then(i.bind(null,1620))},AnticiposDialog:function(){return i.e(367).then(i.bind(null,1624))}},data:function(){return{dialog:!1,loadingConceptos:!1,conceptos:[],item:{concepto:null,detalles:[],id:null,ts_compegreso_id:null,ts_concepto_egreso_id:null},filterConceptos:function(t,e){var i=function(t){return null!=t?t:""};return i(t.codigo+" "+t.nombre).toString().toLowerCase().indexOf(i(e).toString().toLowerCase())>-1}}},computed:{btncxps:function(){return this.item.concepto&&this.item.concepto.facturacion},btnAnticipos:function(){return this.item.concepto&&this.item.concepto.anticipos}},watch:{dialog:function(t){t&&this.formReset()},"item.concepto":function(t,e){void 0!==e&&(void 0===t||null===t?(this.item.concepto=null,this.item.ts_concepto_egreso_id=null):this.item.ts_concepto_egreso_id=t.id)}},created:function(){this.getConceptos()},methods:{formReset:function(){this.item={concepto:null,detalles:[],id:null,ts_compegreso_id:null,ts_concepto_egreso_id:null},this.$validator.reset()},registrarConcepto:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.item.ts_compegreso_id=t.comprobante.id,t.item.ts_concepto_egreso_id=t.item.concepto.id,t.$emit("returnConcepto",t.item),t.dialog=!1)})},asignarDetallesCxPs:function(t){var e=this;t.forEach(function(t){e.item.detalles.push({cxp:t,valor:t.valor,pg_cxp_id:t.id,rs_planescobertura_id:null,id:null})})},asignarDetallesAnticipos:function(t){var e=this;t.forEach(function(t){e.item.detalles.push({contrato:t.contrato,plan_cobertura:t.plan_cobertura,pg_cxp_id:null,rs_planescobertura_id:t.plan_cobertura?t.plan_cobertura.id:null,valor:t.valor,id:null})})},getConceptos:function(){var t=this;this.loadingConceptos=!0,this.axios.get("ts_concepto_egresos").then(function(e){e.data.data&&(t.conceptos=e.data.data),t.loadingConceptos=!1}).catch(function(e){t.loadingConceptos=!1,t.$store.commit("SNACK_ERROR_LIST",{expression:" al traer los conceptos de egreso. ",error:e})})}}}},1617:function(t,e,i){"use strict";function o(t){i(1618)}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1009),n=i(1628),a=i(1),c=o,r=a(s.a,n.a,!1,c,"data-v-a789cf14",null);e.default=r.exports},1618:function(t,e,i){var o=i(1619);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(456)("42d6d69a",o,!0,{})},1619:function(t,e,i){e=t.exports=i(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroConcepto.vue",sourceRoot:""}])},1628:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"",width:"1100"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[i("v-btn",t._g({attrs:{flat:"",color:"primary"}},o),[i("v-icon",{staticClass:"mr-1"},[t._v("add")]),t._v("\n      Agregar concepto\n    ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),i("v-card",[i("v-toolbar",{attrs:{dense:""}},[i("v-toolbar-title",[t._v("Concepto de comprobante de egreso")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-tooltip",{attrs:{left:""}},[i("v-btn",{attrs:{slot:"activator",flat:"",icon:""},on:{click:function(e){t.dialog=!1}},slot:"activator"},[i("v-icon",[t._v("close")])],1),t._v(" "),i("span",[t._v("Cerrar")])],1)],1),t._v(" "),i("v-container",{attrs:{fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Concepto",items:t.conceptos,"item-value":"id","item-text":"id",filter:t.filterConceptos,placehoder:"Busqueda por código o nombre.","no-data-text":"No hay resultados para mostrar",name:"concepto","error-messages":t.errors.collect("concepto"),"persistent-hint":"",loading:t.loadingConceptos,"return-object":"",hint:t.item.concepto?"Naturaleza: "+t.item.concepto.naturaleza:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("div",{staticStyle:{width:"100% !important"}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.item.codigo)+" - "+t._s(e.item.nombre))]),t._v(" "),i("v-list-tile-sub-title",{staticClass:"caption"},[t._v("Cuenta: "+t._s(e.item.cuenta_banco?e.item.cuenta_banco.numero_cuenta+" "+e.item.cuenta_banco.banco.nombre:e.item.niif?e.item.niif.codigo+" "+e.item.niif.nombre:""))])],1)],1)],1)]}},{key:"item",fn:function(e){return[i("div",{staticStyle:{width:"100% !important"}},[i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.item.codigo)+" - "+t._s(e.item.nombre))]),t._v(" "),i("v-list-tile-sub-title",{staticClass:"caption"},[t._v("Cuenta: "+t._s(e.item.cuenta_banco?e.item.cuenta_banco.numero_cuenta+" "+e.item.cuenta_banco.banco.nombre:e.item.niif?e.item.niif.codigo+" "+e.item.niif.nombre:""))])],1)],1)],1)]}}]),model:{value:t.item.concepto,callback:function(e){t.$set(t.item,"concepto",e)},expression:"item.concepto"}})],1),t._v(" "),t.item.concepto?i("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[i("v-card",[i("v-toolbar",{attrs:{dense:""}},[i("v-toolbar-title",[t._v("Detalles del concepto")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t.btncxps?i("cxps-list",{attrs:{comprobante:t.comprobante},on:{returnItems:function(e){return t.asignarDetallesCxPs(e)}}}):t._e(),t._v(" "),t.btnAnticipos?i("anticipos-dialog",{attrs:{concepto:t.item.concepto,comprobante:t.comprobante},on:{returnItems:function(e){return t.asignarDetallesAnticipos(e)}}}):t._e()],1)],1),t._v(" "),t.item.detalles.length?[t.item.detalles.filter(function(t){return t.cxp}).length?[i("v-system-bar",{attrs:{status:"",color:"primary",dark:""}},[i("v-spacer"),t._v(" "),i("span",[t._v("Registros de cuentas por pagar")])],1),t._v(" "),i("v-data-table",{attrs:{items:t.item.detalles.filter(function(t){return t.cxp}),"hide-actions":"","no-data-text":"No hay detalles registrados."},scopedSlots:t._u([{key:"headers",fn:function(e){return[i("tr",{staticStyle:{height:"10px !important"}},[i("th",{staticClass:"text-xs-center"},[t._v("CxP")]),t._v(" "),i("th",{staticClass:"text-xs-left"},[t._v("Causación")]),t._v(" "),i("th",{staticClass:"text-xs-left"},[t._v("Cuenta")]),t._v(" "),i("th",{staticClass:"text-xs-center"},[t._v("Módulo")]),t._v(" "),i("th",{staticClass:"text-xs-center"},[t._v("Factura")]),t._v(" "),i("th",{staticClass:"text-xs-right"},[t._v("Valor")]),t._v(" "),i("th",{staticClass:"text-xs-right"},[t._v("Saldo")]),t._v(" "),i("th",{staticClass:"text-xs-right"},[t._v("Valor a pagar")]),t._v(" "),i("th",{staticClass:"text-xs-center"})])]}},{key:"items",fn:function(e){return[i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.cxp.consecutivo))]),t._v(" "),i("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.cxp.fecha_causacion))]),t._v(" "),i("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.cxp.niif.codigo)+" - "+t._s(e.item.cxp.niif.nombre))]),t._v(" "),i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.cxp.modulo))]),t._v(" "),i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.cxp.no_factura))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(t.currency(e.item.cxp.valor_sin_formato)))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(t.currency(e.item.cxp.saldo)))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(t.currency(e.item.cxp.valor)))]),t._v(" "),i("td",{staticClass:"text-xs-center"},[i("v-tooltip",{attrs:{right:""}},[i("v-btn",{staticClass:"darken-3",attrs:{slot:"activator",flat:"",icon:"",color:"red"},on:{click:function(i){i.stopPropagation(),t.item.detalles.filter(function(t){return t.cxp}).splice(e.index,1)}},slot:"activator"},[i("v-icon",[t._v("delete")])],1),t._v(" "),i("span",[t._v("Borrar")])],1)],1)]}}],null,!1,89291705)})]:t._e(),t._v(" "),t.item.detalles.filter(function(t){return!t.cxp}).length?[i("v-system-bar",{attrs:{status:"",color:"primary",dark:""}},[i("v-spacer"),t._v(" "),i("span",[t._v("Registros de anticipos")])],1),t._v(" "),i("v-data-table",{attrs:{items:t.item.detalles.filter(function(t){return!t.cxp}),"hide-actions":"","no-data-text":"No hay detalles registrados."},scopedSlots:t._u([{key:"headers",fn:function(e){return[i("tr",{staticStyle:{height:"10px !important"}},[i("th",{staticClass:"text-xs-left"},[t._v("Contrato")]),t._v(" "),i("th",{staticClass:"text-xs-left"},[t._v("Plan cobertura")]),t._v(" "),i("th",{staticClass:"text-xs-right"},[t._v("Valor")]),t._v(" "),i("th",{staticClass:"text-xs-center"})])]}},{key:"items",fn:function(e){return[i("td",{staticClass:"text-xs-left"},[e.item.contrato?i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("No. "+t._s(e.item.contrato.numero_contrato))]),t._v(" "),i("v-list-tile-sub-title",[t._v(t._s(e.item.contrato.entidad.nombre))])],1)],1):i("span",[t._v("No aplica")])],1),t._v(" "),i("td",{staticClass:"text-xs-left"},[e.item.plan_cobertura?i("v-list-tile",{staticClass:"content-v-list-tile-p0"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.item.plan_cobertura.nombre))]),t._v(" "),i("v-list-tile-sub-title",[t._v("Estado: "+t._s(e.item.plan_cobertura.estado))])],1)],1):i("span",[t._v("No aplica")])],1),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(t.currency(e.item.valor)))]),t._v(" "),i("td",{staticClass:"text-xs-center"},[i("v-tooltip",{attrs:{right:""}},[i("v-btn",{staticClass:"darken-3",attrs:{slot:"activator",flat:"",icon:"",color:"red"},on:{click:function(i){i.stopPropagation(),t.item.detalles.filter(function(t){return!t.cxp}).splice(e.index,1)}},slot:"activator"},[i("v-icon",[t._v("delete")])],1),t._v(" "),i("span",[t._v("Borrar")])],1)],1)]}}],null,!1,3206678337)})]:t._e()]:i("div",{staticClass:"title grey--text text-xs-center font-weight-light pa-4"},[t._v("\n              Seleccione una opción de detalle\n            ")])],2)],1):t._e()],1)],1),t._v(" "),i("v-divider"),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        Cancelar\n      ")]),t._v(" "),i("v-spacer"),t._v(" "),t.item.detalles.length?i("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.registrarConcepto}},[t._v("\n        Registrar\n      ")]):t._e()],1)],1)],1)},s=[],n={render:o,staticRenderFns:s};e.a=n}});
//# sourceMappingURL=368.52d54edfc624699b4471.js.map