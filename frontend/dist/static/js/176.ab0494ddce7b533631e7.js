webpackJsonp([176],{1547:function(e,o,r){var t=r(1548);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r(456)("236a6a4a",t,!0,{})},1548:function(e,o,r){o=e.exports=r(455)(!0),o.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Proveedores.vue",sourceRoot:""}])},1553:function(e,o,r){"use strict";var t=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",[r("v-dialog",{attrs:{width:"550px",persistent:""},model:{value:e.dialog,callback:function(o){e.dialog=o},expression:"dialog"}},[r("v-form",{attrs:{"data-vv-scope":"formProveedor"}},[r("v-card",[r("v-card-title",{staticClass:"grey lighten-3 elevation-0"},[r("span",{staticClass:"title"},[e._v(e._s(e.modalTitulo))])]),e._v(" "),r("v-container",{attrs:{fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[r("postulador",{ref:"postulaTercero",attrs:{nodata:"Busqueda por nombre o número de documento.",required:"",hint:"identificacion_completa",itemtext:"nombre_completo",datatitle:"identificacion",datasubtitle:"nombre_completo",filter:"identificacion_completa,nombre_completo",label:null!=e.proveedor.gn_tercero_id?"Tercero ":"tercero ",scope:"formProveedor",entidad:"terceros",preicon:"person",value:e.proveedor.tercero,clearable:""},on:{change:function(o){return e.proveedor.gn_tercero_id=o},objectReturn:function(o){return e.terceroSeleccionado(o)}}}),e._v(" "),e.proveedor.tercero?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"pb-1",attrs:{xs12:""}},[r("v-slide-y-transition",[r("tarjeta-detalle",{attrs:{telefono:e.proveedor.tercero.telefono_fijo,celular:e.proveedor.tercero.celular,nombre:null===e.proveedor.tercero.razon_social||""===e.proveedor.tercero.razon_social?e.proveedor.tercero.nombre_completo:e.proveedor.tercero.razon_social,identificacion:e.proveedor.tercero.identificacion_completa}})],1)],1)],1):e._e()],1),e._v(" "),r("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[r("postulador",{ref:"buscarCuenta",attrs:{nodata:"Busqueda por código o nombre.",required:"",hint:"codigo",itemtext:"nombre",datatitle:"codigo",datasubtitle:"nombre",filter:"codigo,nombre",label:null!=e.proveedor.nf_niif_id?"Cuenta":"cuenta ",lite:"",scope:"formProveedor",entidad:"niifs",routeparams:"nivel:auxiliar=1",preicon:"fas fa-wallet",value:e.proveedor.niif,clearable:""},on:{change:function(o){return e.proveedor.nf_niif_id=o},objectReturn:function(o){return e.proveedor.niif=o}}})],1),e._v(" "),r("v-flex",{staticClass:"pb-1",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],key:"tipo proveedor",attrs:{items:e.complementos.tiposProveedor,label:"Tipo Proveedor",name:"tipo proveedor",required:"",multiple:"","error-messages":e.errors.collect("tipo proveedor")},model:{value:e.proveedor.tipo_proveedor,callback:function(o){e.$set(e.proveedor,"tipo_proveedor",o)},expression:"proveedor.tipo_proveedor"}})],1),e._v(" "),r("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm12:"",md12:"",xl12:""}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:11",expression:"'required|max:11'"}],key:"plazo",attrs:{type:"number",label:"Plazo",name:"plazo",suffix:e.proveedor.plazo?1!==e.proveedor.plazo?"días":"día":null,required:"","error-messages":e.errors.collect("plazo")},model:{value:e.proveedor.plazo,callback:function(o){e.$set(e.proveedor,"plazo",e._n(o))},expression:"proveedor.plazo"}})],1)],1)],1),e._v(" "),r("v-card-actions",{staticClass:"grey lighten-4"},[r("v-spacer"),e._v(" "),r("v-btn",{on:{click:function(o){e.close(e.parametros&&null!==e.parametros.key?0:null)}}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1),e._v(" "),r("v-card",[r("toolbar-list",{attrs:{info:e.infoComponent,btnplustruncate:"",btnplus:"",btnplustitle:"Crear Proveedor",title:"Proveedores",subtitle:"Registro"},nativeOn:{click:function(o){e.dialog=!0}}}),e._v(" "),r("data-table",{on:{resetOption:function(o){return e.resetOptions(o)},editar:function(o){return e.edit(o)}},model:{value:e.dataTableProveedor,callback:function(o){e.dataTableProveedor=o},expression:"dataTableProveedor"}})],1)],1)},a=[],n={render:t,staticRenderFns:a};o.a=n},499:function(e,o,r){"use strict";function t(e){r(1547)}Object.defineProperty(o,"__esModule",{value:!0});var a=r(982),n=r(1553),i=r(1),s=t,l=i(a.a,n.a,!1,s,"data-v-77764885",null);o.default=l.exports},982:function(e,o,r){"use strict";var t=r(13),a=r.n(t),n=r(14),i=r.n(n),s=r(7),l=r.n(s),c=r(12),d=r(59),p=r(40),u=r(248);o.a={name:"Proveedores",props:["parametros"],components:{ToolbarList:function(){return new Promise(function(e){e()}).then(r.bind(null,247))},DataTable:function(){return new Promise(function(e){e()}).then(r.bind(null,60))},TarjetaDetalle:function(){return r.e(361).then(r.bind(null,1549))},Postulador:function(){return r.e(287).then(r.bind(null,747))}},data:function(){return{dataTableProveedor:{nameItemState:"itemPgProveedor",route:"pg_proveedores",optionsPerPage:[{text:15,value:15},{text:50,value:50},{text:100,value:100}],makeHeaders:[{text:"Proveedor",align:"left",sortable:!1,value:"tercero.nombre_completo",component:{component:{template:'\n                  <div>\n                    <span><v-icon color="#375d7b" size="18" class="pr-1" v-text="value.tercero ? \'fas fa-id-card-alt\': \'\'"></v-icon>{{ value.tercero ? (value.tercero.razon_social ? value.tercero.razon_social : value.tercero.nombre_completo) :  \'\' }}</span>\n                  </div>\n                ',props:["value"]}}},{text:"Cuenta",align:"left",sortable:!1,value:"niif.nombre",component:{component:{template:"\n                  <div>\n                    <span v-text=\"value.niif ? value.niif.nombre : ''\"></span>\n                  </div>\n                ",props:["value"]}}},{text:"Tipo",align:"left",sortable:!1,value:"tipo_proveedor",component:{component:{template:"\n                  <div>\n                     <span v-for=\"(item, index) in value.tipo_proveedor\" v-text=\"item + ((value.tipo_proveedor[index + 1]) ? ', ' : ' ')\"></span>\n                  </div>\n                ",props:["value"]}}},{text:"Plazo",align:"left",sortable:!1,value:"plazo",component:{component:{template:"\n                  <div>\n                    <span v-text=\"value.plazo ? (value.plazo !== 1 ? value.plazo + ' días' : value.plazo + ' día') : ''\"></span>\n                  </div>\n                ",props:["value"]}},width:"100px"},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"text-xs-center",singlesActions:!0}]},proveedores:[],proveedor:{},search:"",dialog:!1,tableLoading:!1}},mounted:function(){(this.parametros?null!==this.parametros.key:"")&&(this.dialog=!0)},beforeMount:function(){this.formReset()},watch:{"proveedor.tercero":function(e){if(null===e)return null!=e?this.proveedor.tercero:null},"$store.state.nav.currentItem":function(e){e&&(this.dialog=!1)}},computed:{infoComponent:function(){return this.$store.getters.getInfoComponent("pg_proveedores")},modalTitulo:function(){return this.proveedor.id?"Edición del Proveedor: "+(this.proveedor.tercero?this.proveedor.tercero.nombre1?this.proveedor.tercero.nombre1:this.proveedor.tercero.razon_social:"Pro..."):"Nuevo Proveedor"},complementos:function(){return JSON.parse(l()(d.b.getters.complementosFormProveedor))}},methods:{resetOptions:function(e){return e.options=[],this.infoComponent&&this.infoComponent.permisos.agregar&&e.options.push({event:"editar",icon:"edit",tooltip:"Editar"}),e},formReset:function(){this.proveedor={id:"",gn_tercero_id:null,nf_niif_id:null,tipo_proveedor:null,plazo:null,tercero:null,niif:null}},terceroSeleccionado:function(e){this.proveedor.tercero=e,null!==e&&!1===this.dialog&&(this.dialog=!0)},edit:function(e){this.dialog=!0,this.proveedor=JSON.parse(l()(e))},close:function(e){this.dialog=!1,this.formReset(),this.$validator.reset(),this.$refs.buscarCuenta.reset(),this.$refs.postulaTercero.reset(),(this.parametros?null!==this.parametros.key:"")&&0===e&&this.optionsParametros()},validador:function(e){return this.$validator.validateAll(e).then(function(e){return e})},save:function(){var e=this;return i()(a.a.mark(function o(){var r,t,n,i;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$refs.buscarCuenta.validate();case 2:return r=o.sent,o.next=5,e.$refs.postulaTercero.validate();case 5:return t=o.sent,o.next=8,e.validador("formProveedor");case 8:if(o.t1=o.sent,!o.t1){o.next=11;break}o.t1=r;case 11:if(o.t0=o.t1,!o.t0){o.next=14;break}o.t0=t;case 14:if(!o.t0){o.next=20;break}n=e.proveedor.id?"editar":"crear",i=e.proveedor.id?e.axios.put("pg_proveedores/"+e.proveedor.id,e.proveedor):e.axios.post("pg_proveedores",e.proveedor),i.then(function(o){e.$store.commit(c.b,{msg:"El proveedor se "+(e.proveedor.id?"actualizó":"creó")+" correctamente.",color:"success"}),e.$store.commit(u._3,{item:o.data.data,estado:n,key:null}),(e.parametros?null!==e.parametros.key:"")&&e.optionsParametros(o),e.close(1)}).catch(function(o){e.$store.commit(c.b,{msg:"Hay un error al guardar el registro."+o.response,color:"danger"})}),o.next=21;break;case 20:e.$store.commit(c.b,{msg:"Los campos no pueden estar vacios.",color:"danger"});case 21:case"end":return o.stop()}},o,e)}))()},optionsParametros:function(e){this.$store.commit(u._3,{item:e?e.data.data:null,estado:"reload",key:null!==this.parametros.key?this.parametros.key:null}),this.$store.dispatch(p.c,{contexto:this,itemId:this.parametros.tabOrigin})}}}}});
//# sourceMappingURL=176.ab0494ddce7b533631e7.js.map