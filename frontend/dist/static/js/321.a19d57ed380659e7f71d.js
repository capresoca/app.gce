webpackJsonp([321],{1233:function(t,e,a){"use strict";var i=a(13),o=a.n(i),n=a(14),r=a.n(n),s=a(7),c=a.n(s),l=a(58),d=a(12);e.a={name:"RegistroMedicamentos",props:["value"],components:{PostuladorV2:function(){return new Promise(function(t){t()}).then(a.bind(null,61))},Loading:l.default,dataTable:function(){return new Promise(function(t){t()}).then(a.bind(null,60))}},data:function(){return{showFormRegistro:!1,loading:!1,medicamento:null,makeMedicamento:{cum:null,id:null,rs_cum_id:null,rs_contratos_id:null,tarifa:null,tarifa_entidad:null},dataTable:{nameItemState:null,route:null,makeHeaders:[{text:"C贸digo",align:"left",sortable:!0,value:"cum.codigo"},{text:"Producto",align:"left",sortable:!0,value:"cum.producto"},{text:"Laboratorio",align:"left",sortable:!0,value:"cum.titular"},{text:"Descripci贸n",align:"left",sortable:!1,value:"cum.descripcion_comercial"},{text:"Tarifa ofertada",align:"right",sortable:!1,value:"tarifa_entidad",classData:"text-xs-right",component:{component:{template:"<span className=\"white--text caption\">{{'$'}}{{value.tarifa_entidad | numberFormat(2)}}</span>",props:["value"]}}},{text:"Tarifa contratada",align:"right",sortable:!1,value:"tarifa",classData:"text-xs-right",component:{component:{template:"<span className=\"white--text caption\">{{'$'}}{{value.tarifa | numberFormat(2)}}</span>",props:["value"]}}},{text:"Opciones",align:"center",sortable:!1,actions:!0,classData:"text-xs-center"}]}}},watch:{"medicamento.cum.id":function(t){t&&(this.medicamento.rs_cum_id=this.medicamento.cum.cum.id,this.medicamento.tarifa_entidad=this.medicamento.cum.tarifa,this.medicamento.tarifa=JSON.parse(c()(this.medicamento.cum.tarifa)))},showFormRegistro:function(t){!t&&this.refreshMedicamento()}},created:function(){this.refreshMedicamento()},mounted:function(){this.dataTable.route="contratos/"+this.value.id+"/cums"},methods:{medicamentoEditar:function(t){var e=this;return r()(o.a.mark(function a(){var i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.refreshMedicamento();case 2:if(!a.sent){a.next=8;break}i=JSON.parse(c()(t)),e.medicamento={cum:{cum:i.cum,tarifa:i.tarifa_entidad},id:i.id,rs_contratos_id:i.rs_contratos_id,rs_cum_id:i.rs_cum_id,tarifa:i.tarifa,tarifa_entidad:i.tarifa_entidad},e.$vuetify.goTo("#flag-top",{selector:"#flag-top",duration:300,offset:-120,easing:"easeInOutQuad"}),e.showFormRegistro=!0,setTimeout(function(){e.$refs.postuladorMedicamento.assign(e.medicamento.cum),e.$refs.postuladorMedicamento.focus()},300);case 8:case"end":return a.stop()}},a,e)}))()},medicamentoBorrar:function(t){var e=this;this.loading=!0,this.showFormRegistro=!1,this.axios.post("contratos/remove-cum/"+t.id).then(function(t){e.$refs.tablaMedicamentos.reloadPage(),e.loading=!1}).catch(function(t){e.loading=!1,e.$store.commit(d.a,{expression:" al borrar el medicamento. ",error:t})})},resetOptions:function(t){return t.options=[],this.value.actaInicio||t.options.push({event:"editar",icon:"edit",tooltip:"Editar"}),this.value.actaInicio||t.options.push({event:"borrar",icon:"delete",tooltip:"Borrar"}),t},submitMedicamento:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.loading=!0,t.medicamento.rs_contratos_id=t.value.id,t.axios.post("contratos/"+t.value.id+"/add-cum",t.medicamento).then(function(e){t.$refs.tablaMedicamentos.reloadPage(),t.refreshMedicamento(),t.$refs.postuladorMedicamento.focus(),t.loading=!1}).catch(function(e){t.loading=!1,t.$store.commit(d.a,{expression:" al registrar el medicamento. ",error:e})}))})},refreshMedicamento:function(){return this.medicamento=JSON.parse(c()(this.makeMedicamento)),this.$validator.reset(),!0}}}},2250:function(t,e,a){"use strict";function i(t){a(2251)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(1233),n=a(2253),r=a(1),s=i,c=r(o.a,n.a,!1,s,"data-v-c4bdc870",null);e.default=c.exports},2251:function(t,e,a){var i=a(2252);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(456)("66aaf354",i,!0,{})},2252:function(t,e,a){e=t.exports=a(455)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RegistroMedicamentos.vue",sourceRoot:""}])},2253:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:"",id:"flag-top"}},[a("loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:""}},[a("v-toolbar-title",{domProps:{innerHTML:t._s("Registro de medicamentos")}}),t._v(" "),a("small",{staticClass:"mt-2 ml-1"},[t._v(" Vinculaci贸n al contrato")]),t._v(" "),a("v-spacer"),t._v(" "),t.showFormRegistro||t.value.actaInicio?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",right:"",small:"",color:"accent"},on:{click:function(e){t.showFormRegistro=!0}},slot:"activator"},[a("v-icon",[t._v("add")])],1),t._v(" "),a("span",[t._v("Agregar medicamento")])],1)],1),t._v(" "),a("v-scroll-y-transition",[t.showFormRegistro?a("div",[a("v-card-text",[a("v-form",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md10:"",sm8:"",xs12:""}},[a("postulador-v2",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"postuladorMedicamento",attrs:{"no-data":"Busqueda por c贸digo, nombre o registro sanitario.","item-text":"cum.producto","data-title":"cum.producto","data-subtitle":"cum.expediente",filter:"cum.expediente,cum.producto,cum.registro_sanitario",label:"Medicamento",entidad:"entidades/"+t.value.contrato.entidad.id+"/cums","no-btn-create":"","no-btn-edit":"",name:"Medicamento",rules:"required","error-messages":t.errors.collect("Medicamento"),"min-characters-search":4,"slot-data":{template:'\n                    <v-list-tile>\n                      <v-list-tile-action>\n                        <v-chip\n                        color="indigo lighten-2"\n                        label\n                        small\n                        >\n                        {{ value.cum.estado_cum }}\n                        </v-chip>\n                      </v-list-tile-action>\n                      <v-list-tile-content>\n                        <v-list-tile-title>{{value.cum.expediente}} - {{ value.cum.producto }} - {{value.cum.titular}}</v-list-tile-title>\n                        <v-list-tile-sub-title class=caption>{{ value.cum.descripcion_comercial }}</v-list-tile-sub-title>\n                      </v-list-tile-content>\n                    </v-list-tile>\n                    ',props:["value"]}},model:{value:t.medicamento.cum,callback:function(e){t.$set(t.medicamento,"cum",e)},expression:"medicamento.cum"}})],1),t._v(" "),a("v-flex",{attrs:{md2:"",sm4:"",xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],attrs:{label:"Tarifa",name:"Tarifa",min:"0",type:"number","error-messages":t.errors.collect("Tarifa")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitMedicamento(e)}},model:{value:t.medicamento.tarifa,callback:function(e){t.$set(t.medicamento,"tarifa",t._n(e))},expression:"medicamento.tarifa"}})],1)],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(e){e.stopPropagation(),t.showFormRegistro=!1}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitMedicamento(e)}}},[t._v("Registrar")])],1)],1):t._e()])],1)],1),t._v(" "),a("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[t.dataTable.route?a("data-table",{ref:"tablaMedicamentos",on:{resetOption:function(e){return t.resetOptions(e)},editar:function(e){return t.medicamentoEditar(e)},borrar:function(e){return t.medicamentoBorrar(e)}},model:{value:t.dataTable,callback:function(e){t.dataTable=e},expression:"dataTable"}}):t._e()],1)],1)},o=[],n={render:i,staticRenderFns:o};e.a=n}});
//# sourceMappingURL=321.a19d57ed380659e7f71d.js.map